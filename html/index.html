<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><title>Working with Linux: Quick Hacks for the Command Line</title></head><body><div class="calibre" id="calibre_link-0"><p id="calibre_link-56" class="calibre_"><span class="calibre1"><span class="bold">Table of Contents</span></span></p><p class="calibre_1">
<a href="#calibre_link-1">Working with Linux &ndash; Quick Hacks for the Command Line</a>
</p><p class="calibre_">
<a href="#calibre_link-2">Credits</a>
</p><p class="calibre_">
<a href="#calibre_link-3">About the Authors</a>
</p><p class="calibre_">
<a href="#calibre_link-4">www.PacktPub.com</a>
</p><blockquote class="calibre_2">
<a href="#calibre_link-5">eBooks, discount offers, and more</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-6">Why subscribe?</a>
</blockquote><p class="calibre_">
<a href="#calibre_link-7">Customer Feedback</a>
</p><p class="calibre_">
<a href="#calibre_link-8">Preface</a>
</p><blockquote class="calibre_2">
<a href="#calibre_link-9">What this book covers</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-10">What you need for this book</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-11">Who this book is for</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-12">Conventions</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-13">Reader feedback</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-14">Customer support</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-15">Errata</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-16">Piracy</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-17">Questions</a>
</blockquote><p class="calibre_">
<a href="#calibre_link-18">1. Introduction</a>
</p><blockquote class="calibre_2">
<a href="#calibre_link-19">Are you ready?</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-20">Terminator &ndash; the ultimate terminal</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-21">Preferences menu</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-22">Features</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-23">Guake &ndash; not Quake!</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-24">ClipIt &ndash; copy-paste at its finest</a>
</blockquote><p class="calibre_">
<a href="#calibre_link-25">2. Productive Shells &ndash; Reinvent the way you work</a>
</p><blockquote class="calibre_2">
<a href="#calibre_link-26">Oh-my-zsh &ndash; your terminal never felt this good before!</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-27">Basic regular expressions</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-28">Pipes and subshells &ndash; your shell's salt and pepper</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-29">Shell scripting for fun and profit</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-30">Shell scripting libraries</a>
</blockquote><p class="calibre_">
<a href="#calibre_link-31">3. Vim kung fu</a>
</p><blockquote class="calibre_2">
<a href="#calibre_link-32">Supercharging Vim</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-33">Color scheme desert</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-34">Keyboard kung fu</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-35">Plugin steroids for Vim</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-36">Vim password manager</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-37">Instant configuration restoring</a>
</blockquote><p class="calibre_">
<a href="#calibre_link-38">4. CLI &ndash; The Hidden Recipe</a>
</p><blockquote class="calibre_2">
<a href="#calibre_link-39">Sed &ndash; one-liner productivity treasure</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-40">You can run, but you can't hide… from find</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-41">tmux &ndash; virtual consoles, background jobs and the like</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-42">Network &ndash; Who's listening?</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-43">Autoenv &ndash; Set a lasting, project-based habitat</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-44">Don't rm the trash</a>
</blockquote><p class="calibre_">
<a href="#calibre_link-45">5. Developers' Treasure</a>
</p><blockquote class="calibre_2">
<a href="#calibre_link-46">The spot webserver</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-47">Shrinking spells and other ImageMagick</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-48">Go with the Git flow</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-49">Merging Git conflicts with ease</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-50">From localhost to instant DNS</a>
</blockquote><blockquote class="calibre_2">
<a href="#calibre_link-51">JSON jamming in the new age</a>
</blockquote><blockquote class="calibre_3">
<a href="#calibre_link-52">No more mister nice guy</a>
</blockquote><p class="calibre_">
<a href="#calibre_link-53">6. Terminal Art</a>
</p><p class="calibre_">
<a href="#calibre_link-54">Index</a>
</p><div class="mbp_pagebreak"></div><p id="calibre_link-55" class="calibre_"><span class="calibre1"><span class="bold"> Working with Linux &ndash; Quick Hacks for the Command Line </span></span></p><hr class="calibre2" /><div class="mbp_pagebreak"></div><p id="calibre_link-1" class="calibre_"><span class="calibre1"><span class="bold">Working with Linux &ndash; Quick Hacks for the Command Line</span></span></p><p class="calibre_4">Copyright © 2017 Packt Publishing</p><p class="calibre_4">All rights reserved. No part of this book may be reproduced, stored in a retrieval system, or transmitted in any form or by any means, without the prior written permission of the publisher, except in the case of brief quotations embedded in critical articles or reviews.</p><p class="calibre_4">Every effort has been made in the preparation of this book to ensure the accuracy of the information presented. However, the information contained in this book is sold without warranty, either express or implied. Neither the authors, nor Packt Publishing, and its dealers and distributors will be held liable for any damages caused or alleged to be caused directly or indirectly by this book.</p><p class="calibre_4">Packt Publishing has endeavored to provide trademark information about all of the companies and products mentioned in this book by the appropriate use of capitals. However, Packt Publishing cannot guarantee the accuracy of this information.</p><p class="calibre_4">First published: May 2017</p><p class="calibre_4">Production reference: 1260517</p><p class="calibre_4">Published by Packt Publishing Ltd.</p><p class="calibre_4">Livery Place</p><p class="calibre_4">35 Livery Street</p><p class="calibre_4">Birmingham B3 2PB, UK.</p><p class="calibre_4">ISBN 978-1-78712-918-4</p><p class="calibre_4">
<a href="http://www.packtpub.com">www.packtpub.com</a>
</p><div class="mbp_pagebreak"></div><p id="calibre_link-2" class="calibre_"><span class="calibre1"><span class="bold">Credits</span></span></p><p class="calibre_4">
<span class="bold">Author</span>
</p><p class="calibre_4">Petru Ișfan</p><p class="calibre_4">Bogdan Vaida</p><p class="calibre_4">
<span class="bold">Commissioning Editor</span>
</p><p class="calibre_4">Kartikey Pandey</p><p class="calibre_4">
<span class="bold">Acquisition Editor</span>
</p><p class="calibre_4">Prachi Bisht</p><p class="calibre_4">
<span class="bold">Content Development Editor</span>
</p><p class="calibre_4">Prachi Bisht</p><p class="calibre_4">Trusha Shriyan</p><p class="calibre_4">
<span class="bold">Technical Editor</span>
</p><p class="calibre_4">Naveenkumar Jain</p><p class="calibre_4">
<span class="bold">Copy Editors</span>
</p><p class="calibre_4">Safis Editing</p><p class="calibre_4">
<span class="bold">Project Coordinator</span>
</p><p class="calibre_4">Kinjal Bari</p><p class="calibre_4">
<span class="bold">Proofreader</span>
</p><p class="calibre_4">Safis Editing</p><p class="calibre_4">
<span class="bold">Indexer</span>
</p><p class="calibre_4">Aishwarya Gangawane</p><p class="calibre_4">
<span class="bold">Graphics</span>
</p><p class="calibre_4">Kirk D'Penha</p><p class="calibre_4">
<span class="bold">Production Coordinator</span>
</p><p class="calibre_4">Melwyn Dsa</p><p class="calibre_4">
<span class="bold">Cover Work</span>
</p><p class="calibre_4">Melwyn Dsa</p><div class="mbp_pagebreak"></div><p id="calibre_link-3" class="calibre_"><span class="calibre1"><span class="bold">About the Authors</span></span></p><p class="calibre_4">
<span class="bold">Petru Ișfan </span>is a full-stack developer, Linux evangelist, open source lover, and cloud pioneer. Petru has worked all his engineering life in Linux, and has tried all the major distributions out there. He specializes not only in software development, but in the whole software engineering stack, focusing on tools and workflows that enhance developer productivity and enjoyment.</p><p class="calibre_4">An early adopter of technology, he uses passion and best practices to deliver software products, mainly for the Web and the mobile world, working with clients big and small. He is really enthusiastic about finding the most efficient and elegant solutions for all problems.</p><p class="calibre_4">
<span class="bold">Bogdan Vaida</span> burst onto the training scene in 2009 using extremely old Powerpoint presentations. Luckily, two years later, he switched to experiential training and learning by using methodologies that he practiced devotedly in all of his training. Known for his no-nonsense approach to getting results, Bogdan has been told that he helps participants get their own "insanely practical insights."</p><p class="calibre_4">What does he do? He travels around the world doing experiential training in fields ranging from video editing to personality typologies and trainer training. While doing this, he also manages his online courses, which have over 10,000 students from all over the world.</p><p class="calibre_4">In 2015, he beat the record for total time spent in airports.</p><div class="mbp_pagebreak"></div><p id="calibre_link-4" class="calibre_"><span class="calibre1"><span class="bold">www.PacktPub.com</span></span></p><p id="calibre_link-5" class="calibre_4"><span class="calibre1"><span class="bold"><span class="calibre_5">eBooks, discount offers, and more</span></span></span></p><p class="calibre_4">Did you know that Packt offers eBook versions of every book published, with PDF and ePub files available? You can upgrade to the eBook version at <a href="http://www.PacktPub.com">www.PacktPub.com</a> and as a print book customer, you are entitled to a discount on the eBook copy. Get in touch with us at <tt class="calibre3">&lt;</tt><a href="mailto:customercare@packtpub.com"><tt class="calibre3">customercare@packtpub.com</tt></a><tt class="calibre3">&gt;</tt> for more details.</p><p class="calibre_4">At <a href="http://www.PacktPub.com">www.PacktPub.com</a>, you can also read a collection of free technical articles, sign up for a range of free newsletters and receive exclusive discounts and offers on Packt books and eBooks.</p><p class="calibre_6"><img src="images/000041.jpg" class="calibre_7" /></p><p class="calibre_4">
<a href="https://www.packtpub.com/mapt">https://www.packtpub.com/mapt</a>
</p><p class="calibre_4">Get the most in-demand software skills with Mapt. Mapt gives you full access to all Packt books and video courses, as well as industry-leading tools to help you plan your personal development and advance your career.</p><p id="calibre_link-6" class="calibre_8"><span class="calibre4"><span class="bold"><span class="calibre_9">Why subscribe?</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Fully searchable across every book published by Packt</li><li value="2" class="calibre_12">Copy and paste, print, and bookmark content</li><li value="3" class="calibre_12">On demand and accessible via a web browser</li></ul><div class="mbp_pagebreak"></div><p id="calibre_link-7" class="calibre_"><span class="calibre1"><span class="bold">Customer Feedback</span></span></p><p class="calibre_4">Thanks for purchasing this Packt book. At Packt, quality is at the heart of our editorial process. To help us improve, please leave us an honest review on this book's Amazon page at <a href="https://www.amazon.com/dp/1787129187">https://www.amazon.com/dp/1787129187</a>.</p><p class="calibre_4">If you'd like to join our team of regular reviewers, you can e-mail us at <tt class="calibre3"><span class="calibre_13">customerreviews@packtpub.com</span></tt>. We award our regular reviewers with free eBooks and videos in exchange for their valuable feedback. Help us be relentless in improving our products!</p><div class="mbp_pagebreak"></div><p id="calibre_link-8" class="calibre_"><span class="calibre1"><span class="bold">Preface</span></span></p><p class="calibre_4">Our mission is to save Linux users from their unproductive habits.</p><p class="calibre_4">In this book, you will learn:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">What's one of the best terminals to use (just a hint: you need that split screen functionality).</li><li value="2" class="calibre_12">How clipboard managers memorize the things you copy, so you don't have to.</li><li value="3" class="calibre_12">How to use the greatest/biggest/most intelligent :)) console editor since humankind appeared. Yes, it's Vim. And we'll dive deep into its usefulness.</li><li value="4" class="calibre_12">Zsh and its awesome <tt class="calibre3"><span class="calibre_13">oh-my-zsh</span></tt> framework featuring over 200 plugins for developers and productivity seekers.</li><li value="5" class="calibre_12">Extensive lessons on terminal commands: how to find and replace text, parts of text, tiny bits of text or even non-text.</li><li value="6" class="calibre_12">How to use pipes and subshells to create customized commands that automate day-to-day tasks.</li><li value="7" class="calibre_12">And much more. This book is for all the programmers that are new to the Linux environment.</li></ul><p class="calibre_4">But who are we?</p><p class="calibre_4">
<span class="bold">Petru</span>: the infamous coder with many years of Linux experience. He types like crazy, loves doughnuts and has Linux wired in his brain! After discovering Linux and switching through a different distribution every week, annoying his girlfriend with tons of geeky stuff, now he annoys everybody with geek talks and the latest news in the tech world.</p><p class="calibre_4">He spends his time coding frontends, backends, databases, Linux servers, and clouds.</p><p class="calibre_4">
<span class="bold">Bogdan</span>: the deserter! He went through more than 20 Linux and Unix distributions including Plan 9, HP-UX and all of the BSDs. But after his girlfriend left him because he spent way too much time in front of the computer he… switched to Mac.</p><p class="calibre_4">Now he spends his time teaching over ten thousand students in his 8 online courses.</p><p class="calibre_4">And we are here to help you double your terminal productivity!</p><p class="calibre_4">If you don't know how to use <tt class="calibre3"><span class="calibre_13">sed</span></tt>, if you're not that used to <tt class="calibre3"><span class="calibre_13">pipeing</span></tt> commands, if you use the default terminal and if you are still using BASH then this book is for you.</p><p class="calibre_4">Read it now and double your terminal productivity!</p><div class="mbp_pagebreak"></div><p id="calibre_link-9" class="calibre_4"><span class="calibre1"><span class="bold"><span class="calibre_5">What this book covers</span></span></span></p><p class="calibre_4">
<a href="#calibre_link-18">Chapter 1</a>, <span class="italic">Introduction</span>, introduces the most basic tools needed to transform your user experience.</p><p class="calibre_4">
<a href="#calibre_link-25">Chapter 2</a>, <span class="italic">Productive Shells &ndash; Reinvent the Way You Work</span>, reinvents the way you work. Colors, editors, and custom configurations all tailored to your custom needs.</p><p class="calibre_4">
<a href="#calibre_link-31">Chapter 3</a>, <span class="italic">Vim kung fu</span>, explains the way of the terminal warrior. This includes configuration and advanced usage to cover the majority of needs.</p><p class="calibre_4">
<a href="#calibre_link-38">Chapter 4</a>, <span class="italic">CLI &ndash; The Hidden Recipe</span>, shows different ways of going from good to great and boosting the command-line capabilities to new frontiers.</p><p class="calibre_4">
<a href="#calibre_link-45">Chapter 5</a>, <span class="italic">Developers' Treasure</span>, explains how to maximize productivity with these simple hacks. It's the small things that produce the big difference.</p><p class="calibre_4">
<a href="#calibre_link-53">Chapter 6</a>, <span class="italic">Terminal Art</span>, prepares you to become amazed at what creativity can do with limited resources. This is where the fun begins.</p><div class="mbp_pagebreak"></div><p id="calibre_link-10" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">What you need for this book</span></span></span></p><p class="calibre_4">Ideally, you can equip yourself with a fresh Ubuntu operating system and go through the samples while reading. Remember there is a git repository available at <a href="https://github.com/petruisfan/linux-for-developers">https://github.com/petruisfan/linux-for-developers</a>.</p><p class="calibre_4">Go ahead and clone this locally so that you can use the project's sample files.</p><div class="mbp_pagebreak"></div><p id="calibre_link-11" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Who this book is for</span></span></span></p><p class="calibre_4">This book is for Linux users who already have some form of basic knowledge and are looking to improve their skills and become more productive in the command-line environment. It is for users who want to learn tips and tricks that master's use, without going through all the trials and errors in the vast open source ocean of tools and technologies. It's for the users who want to feel at home at the terminal prompt and are eager to do the vast majority of tasks from there.</p><div class="mbp_pagebreak"></div><p id="calibre_link-12" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Conventions</span></span></span></p><p class="calibre_4">In this book, you will find a number of text styles that distinguish between different kinds of information. Here are some examples of these styles and an explanation of their meaning.</p><p class="calibre_4">Code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "Open the terminator and type <tt class="calibre3"><span class="calibre_13">sudo apt install zsh</span></tt> to install <tt class="calibre3"><span class="calibre_13">zsh</span></tt>, as shown in."</p><p class="calibre_4">A block of code is set as follows:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">case ${CMD} in<br class="calibre6" />&nbsp;&nbsp;&nbsp; publicip)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print_public_ip<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br class="calibre6" />&nbsp;&nbsp;&nbsp; ip)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IFACE=$(getarg iface $@)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print_ip $IFACE<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br class="calibre6" />&nbsp;&nbsp;&nbsp; *)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "invalid command"<br class="calibre6" />esac</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Any command-line input or output is written as follows:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">
<span class="bold">New terms</span> and <span class="bold">important words</span> are shown in bold. Words that you see on the screen, for example, in menus or dialog boxes, appear in the text like this: "Go to shell and enable <span class="bold">Open new tab in current directory</span>."</p><blockquote class="calibre_16"><span class="calibre7"><span class="bold"><span class="calibre_17">Note</span></span></span></blockquote><blockquote class="calibre_16">Warnings or important notes appear in a box like this.</blockquote><blockquote class="calibre_16"><span class="calibre7"><span class="bold"><span class="calibre_17">Tip</span></span></span></blockquote><blockquote class="calibre_16">Tips and tricks appear like this.</blockquote><div class="mbp_pagebreak"></div><p id="calibre_link-13" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Reader feedback</span></span></span></p><p class="calibre_4">Feedback from our readers is always welcome. Let us know what you think about this book&mdash;what you liked or disliked. Reader feedback is important for us as it helps us develop titles that you will really get the most out of.</p><p class="calibre_4">To send us general feedback, simply e-mail <tt class="calibre3">&lt;</tt><a href="mailto:feedback@packtpub.com"><tt class="calibre3">feedback@packtpub.com</tt></a><tt class="calibre3">&gt;</tt>, and mention the book's title in the subject of your message.</p><p class="calibre_4">If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, see our author guide at <a href="http://www.packtpub.com/authors">www.packtpub.com/authors</a>.</p><div class="mbp_pagebreak"></div><p id="calibre_link-14" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Customer support</span></span></span></p><p class="calibre_4">Now that you are the proud owner of a Packt book, we have a number of things to help you to get the most from your purchase.</p><p id="calibre_link-15" class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_9">Errata</span></span></span></p><p class="calibre_4">Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you find a mistake in one of our books&mdash;maybe a mistake in the text or the code&mdash;we would be grateful if you could report this to us. By doing so, you can save other readers from frustration and help us improve subsequent versions of this book. If you find any errata, please report them by visiting <a href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the <span class="bold">Errata Submission Form</span> link, and entering the details of your errata. Once your errata are verified, your submission will be accepted and the errata will be uploaded to our website or added to any list of existing errata under the Errata section of that title.</p><p class="calibre_4">To view the previously submitted errata, go to <a href="https://www.packtpub.com/books/content/support">https://www.packtpub.com/books/content/support</a> and enter the name of the book in the search field. The required information will appear under the <span class="bold">Errata</span> section.</p><p id="calibre_link-16" class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_9">Piracy</span></span></span></p><p class="calibre_4">Piracy of copyrighted material on the Internet is an ongoing problem across all media. At Packt, we take the protection of our copyright and licenses very seriously. If you come across any illegal copies of our works in any form on the Internet, please provide us with the location address or website name immediately so that we can pursue a remedy.</p><p class="calibre_4">Please contact us at <tt class="calibre3">&lt;</tt><a href="mailto:copyright@packtpub.com"><tt class="calibre3">copyright@packtpub.com</tt></a><tt class="calibre3">&gt;</tt> with a link to the suspected pirated material.</p><p class="calibre_4">We appreciate your help in protecting our authors and our ability to bring you valuable content.</p><p id="calibre_link-17" class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_9">Questions</span></span></span></p><p class="calibre_4">If you have a problem with any aspect of this book, you can contact us at <tt class="calibre3">&lt;</tt><a href="mailto:questions@packtpub.com"><tt class="calibre3">questions@packtpub.com</tt></a><tt class="calibre3">&gt;</tt>, and we will do our best to address the problem.</p><div class="mbp_pagebreak"></div><p id="calibre_link-18" class="calibre_"><span class="calibre1"><span class="bold">Chapter&nbsp;1.&nbsp;Introduction</span></span></p><p class="calibre_4">This book is split into multiple parts. In part 1, we'll explore a new terminal and show you how to install and configure it. In part 2, we will concentrate on configuring your shell, adding plugins, understanding regular expressions, and working with pipes and subshells. Everything will then be coagulated into a shell scripting lesson. In part 3, we'll work with Vim, our recommended editor. We will cover everything from configuring it, to learning keyboard shortcuts, installing plugins, and even using it as a password manager. So let's get started.</p><p class="calibre_4">In the following chapter, we will learn the following topics:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Understanding the working of Terminator</li><li value="2" class="calibre_12">Using Guake for your quick commands or long running tasks</li><li value="3" class="calibre_12">Using ClipIt to copy-paste text</li></ul><p class="calibre_4">So, we will start with a terminal after which everything will be wild! When it comes to working long hours in a terminal, our choice is to use Terminator for its fast and easy split screen functionality. Then, we will focus on Guake, a terminal that opens really fast and wherever you are. Towards the end, you will understand the working of Clipit and use its copy and paste feature effectively.</p><p id="calibre_link-19" class="calibre_4"><span class="calibre1"><span class="bold"><span class="calibre_5">Are you ready?</span></span></span></p><p class="calibre_4">We will dive deep into the Linux environment, giving you tips and tricks to increase your productivity, make you more comfortable with the command line, and automate your tasks.</p><p class="calibre_4">The book is based on Ubuntu Linux version 16.04, which is the latest long-term support version. We chose Ubuntu because it's the most common Linux distribution out there, it's really simple to use, has a lot of graphical tools, and you can find a huge online community ready to answer all your questions. Ubuntu is also the most supported Linux distribution. This means that companies that create software, especially graphics software, and offer them for Linux, usually start with Ubuntu. </p><p class="calibre_4">This makes it easier for us to use tools such as Skype, Slack, or Visual Studio Code. Although the book is based on Ubuntu, most of the commands are not related to Ubuntu, so you can easily use another distribution and apply the same lessons. A large part of the book can even be applied applicable to Mac, as we can have the same tools installed on Mac &mdash; bash, zsh, vim all work the same way across Linux and Mac--and with the release of Windows 10, bash support is built in, so tools such as zsh and vim can easily be installed and used. Before Windows 10, there were tools such as cygwin that let you use the Linux command line in a Windows environment.</p><p class="calibre_4">We recommend you to read and practice in an open terminal so that you can execute the commands and<a></a> check their results. Before we start, you want to download all the source files from our GitHub repository (located here: <a href="https://github.com/petruisfan/linux-for-developers">https://github.com/petruisfan/linux-for-developers</a>).</p><p class="calibre_6"><img src="images/000078.jpg" class="calibre_18" /></p><div class="mbp_pagebreak"></div><p id="calibre_link-20" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Terminator &ndash; the ultimate terminal</span></span></span></p><p class="calibre_4">The first thing you need to do in order to become productive is to have a good terminal. Throughout the book, we will be working mostly with the command line, which means that the primary<a></a> piece of software we will be using is our terminal. A great terminal that we recommend is <span class="bold">Terminator</span>, which can be installed from the software center.</p><p class="calibre_4">Let's go to our launcher and click on the software center icon. After it opens, click on the search input and write <tt class="calibre3"><span class="calibre_13">terminator,</span></tt> as shown in the following screenshot. It will probably be first in the list of results. Click on <span class="bold">Install</span>.</p><p class="calibre_6"><img src="images/000019.jpg" class="calibre_19" /></p><p class="calibre_4">After installing Terminator, it's a good idea to drag its icon to the Launcher. For this, you just open the dash by<a></a> hitting the Windows key, write <tt class="calibre3"><span class="calibre_13">terminator</span></tt> and drag and drop its icon into the Launcher:</p><p class="calibre_6"><img src="images/000210.jpg" class="calibre_19" /></p><p class="calibre_4">Alright, now let's click on the icon to get started. You can maximize the window to have more space<a></a> to play around.</p><p id="calibre_link-21" class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_9">Preferences menu</span></span></span></p><p class="calibre_4">It's an customizing terminal, where good surprises can be found in form of fonts styles and other tools. What you see right now are the default settings. Let's go into the preferences menu and see what we<a></a> can update. First of all, let's hide the title bar because it doesn't give us that much information and it's always a good idea to have as much free screen space as possible (and as few distractions as possible).</p><p class="calibre_4">Now let's look at some other preferences:</p><div class="calibre_10">&nbsp;</div><ol class="calibre_20"><li value="1" class="calibre_12">Let's change the font. We will make it a bit larger than usual so that it is easy to read. Let's go with Monospace 16, as shown in the following screenshot:<p class="calibre_6"><img src="images/000076.jpg" class="calibre_19" /></p></li><li value="2" class="calibre_21">We also want to have good contrast so that it's easy to distinguish the letters. And for this, we will choose a black on white color theme.<p class="calibre_6"><img src="images/000169.jpg" class="calibre_19" /></p></li><li value="3" class="calibre_21">It's also a good idea to enable infinite scroll, because you don't want your terminal output to be trimmed after <tt class="calibre3"><span class="calibre_13">500</span></tt> lines. A lot of the time, you just want to scroll and see the previous output. Also, while scrolling, if there is a lot of text, you probably don't want to be brought back to the bottom of the page, so uncheck the <span class="bold">Scroll on output</span> option.<p class="calibre_6"><img src="images/000172.jpg" class="calibre_19" /></p></li></ol><p class="calibre_4">And voila! This is<a></a> our newly configured terminal. And now it's time to check what we can do with this <span class="bold">new</span> terminal. Here comes the <span class="italic">Features</span> section!</p><p id="calibre_link-22" class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_9">Features</span></span></span></p><p class="calibre_4">Now it's time to look at some of Terminator's useful features and their keyboard shortcuts. This is<a></a> what the normal Terminator interface looks like:</p><p class="calibre_6"><img src="images/000057.jpg" class="calibre_19" /></p><p class="calibre_4">Let's play<a></a> around with it now:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Split screen: <span class="italic">Ctrl</span> + <span class="italic">Shift</span> + <span class="italic">O</span> for a horizontal split:<p class="calibre_6"><img src="images/000000.jpg" class="calibre_19" /></p></li><li value="2" class="calibre_21"><span class="italic">Ctrl</span> + <span class="italic">Shift</span> + <span class="italic">E</span> for a vertical split:<p class="calibre_6"><img src="images/000181.jpg" class="calibre_19" /></p></li></ul><p class="calibre_4">This is probably the coolest feature of Terminator and the one we will be using the most as it is really helpful<a></a> to see multiple panes and easily switch between them. You can split the screen any number of times, in any combination you want.</p><p class="calibre_4">Resize screen: <span class="italic">Ctrl</span> + <span class="italic">Shift</span> + <span class="italic">Arrow</span> or just drag and drop:</p><p class="calibre_6"><img src="images/000049.jpg" class="calibre_22" /></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Easily move between Windows with <span class="italic">Ctrl</span> + <span class="italic">Shift</span> + <span class="italic">Arrow</span>.</li><li value="2" class="calibre_12">Close screen using <span class="italic">Ctrl</span> + <span class="italic">Shift</span> + <span class="italic">W</span> or <span class="italic">Ctrl</span> + <span class="italic">D</span>.</li><li value="3" class="calibre_12">Create tabs with <span class="italic">Ctrl</span> + <span class="italic">Shift </span>+ <span class="italic">T</span>. This is for when you don't have any more space to split the screen:<p class="calibre_6"><img src="images/000005.jpg" class="calibre_23" /></p></li><li value="4" class="calibre_21">Text zoom: <span class="italic">Ctrl</span>
<span class="italic">+</span>
<span class="italic">+</span> and <span class="italic">Ctrl</span>
<span class="italic">+</span>
<span class="italic">-</span> &mdash; useful for when you need to present or when you have a person with a bad eyesight:<p class="calibre_6"><img src="images/000007.jpg" class="calibre_24" /></p></li></ul><p class="calibre_4">Being able to divide the screen in order to arrange the terminal in a grid, and being able to split, switch, and resize panes with keyboard shortcuts are the biggest advantages of Terminator. One big productivity killer that a lot of people don't realize is switching between using the<a></a> mouse and using the keyboard. And although most people prefer using the mouse, we suggest using the keyboard as much as possible and learning the keyboard shortcuts of your most commonly used computer programs.</p><p class="calibre_4">Being productive ultimately means having more time to focus on the things that are really important, instead of wasting time struggling to use the computer.</p><p class="calibre_4">Hasta la vista terminal! Welcome Terminator!</p><div class="mbp_pagebreak"></div><p id="calibre_link-23" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Guake &ndash; not Quake!</span></span></span></p><p class="calibre_4">Terminator works well for all sorts of tasks, especially when working long sessions on multiple items. However, sometimes there are scenarios where you need to quickly access a terminal<a></a> in order to run a command, check a status, or run a task in the foreground for a long time--all of these without opening too many tabs. Guake is excellent in such situations. It is a handy, easy-to-use terminal that you can open on any workspace on top of your existing windows, by pressing <span class="italic">F12</span>.</p><p class="calibre_4">We will install it right now by using a simple command line. As shown below, open your terminal and type <tt class="calibre3"><span class="calibre_13">sudo apt install guake</span></tt>:</p><p class="calibre_6"><img src="images/000165.jpg" class="calibre_25" /></p><blockquote class="calibre_16"><span class="calibre7"><span class="bold"><span class="calibre_17">Note</span></span></span></blockquote><blockquote class="calibre_16">
<tt class="calibre3"><span class="calibre_13">apt</span></tt> is the new package manager that Ubuntu launched in version 16.04 and is meant to be an easier-to-use version of the <tt class="calibre3"><span class="calibre_13">apt-get</span></tt> command, with some added eye candy.</blockquote><p class="calibre_4">Now that Guake is installed, we will go to dash and open it. To do this, we just press <span class="italic">F12</span>. Once it is running,<a></a> you can see the notification on the top-right side of the screen. This is what it should look like:</p><p class="calibre_6"><img src="images/000088.jpg" class="calibre_26" /></p><p class="calibre_4">Just like with Terminator, we will check its preferences. First of all, go to shell and enable <span class="bold">Open new tab in current directory</span>:</p><p class="calibre_6"><img src="images/000124.jpg" class="calibre_27" /></p><p class="calibre_4">I believe you can<a></a> guess what this does. Then, go scrolling and insert a really big number, like 99,999. Also, make sure <span class="bold">Scroll</span> | <span class="bold">On output</span> is unchecked:</p><p class="calibre_6"><img src="images/000044.jpg" class="calibre_28" /></p><p class="calibre_4">Again, we will change the default font to <tt class="calibre3"><span class="calibre_13">Monospace 16</span></tt>, set the <span class="bold">Cursor blink mode</span> to off, and hit <span class="bold">Close</span>:</p><p class="calibre_6"><img src="images/000055.jpg" class="calibre_29" /></p><p class="calibre_4">We can use Guake in full screen by hitting <span class="italic">F11</span> and we can also resize it by dragging the margin. If you want<a></a>, you can play around with the default settings to see what suits you best.</p><p class="calibre_4">Guake does not start automatically when Ubuntu reboots, so we will have to add it to our startup application for that. To do this, open dash again, type startup applications and click add. Just type Guake in all three fields, add, and close.</p><p class="calibre_4">What makes it so handy is the fact that you can open it on top of your current windows at any time, quickly type a command, and reopen it again later to check the status of the command.</p><blockquote class="calibre_16"><span class="calibre7"><span class="bold"><span class="calibre_17">Tip</span></span></span></blockquote><blockquote class="calibre_16">What we actually do is to also make it a little bit transparent so that when it opens on top of a web page where we have some commands written, we can still read the content on the page and type the commands as we read, without switching windows. Another awesome productivity tip!</blockquote><div class="mbp_pagebreak"></div><p id="calibre_link-24" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">ClipIt &ndash; copy-paste at its finest</span></span></span></p><p class="calibre_4">We believe that one of the greatest inventions of mankind is copy-paste. The ability to take a piece of text from<a></a> some random place and insert it to another not-so-random place is a huge time saver! Mankind would still be ages behind if computers didn't have this feature! Just imagine having to type every little command, every URL, every block of code you read! It would be a huge waste of time! And so, being such an important feature, copy-paste deserves a tool of its own for managing all the important text you copied. These types of tools are called clipboard managers. There are a lot of options for every operating system, and one good free one for Ubuntu is called <tt class="calibre3"><span class="calibre_13">clipIt</span></tt>. Open the terminal and type <tt class="calibre3"><span class="calibre_13">sudo apt install clipit</span></tt> to install it.</p><p class="calibre_6"><img src="images/000087.jpg" class="calibre_30" /></p><p class="calibre_4">A good scenario for using Guake is to run <tt class="calibre3"><span class="calibre_13">ClipIt</span></tt> in it. By default, <tt class="calibre3"><span class="calibre_13">ClipIt</span></tt> occupies a terminal window but, with the help of Guake, we just hide it away!</p><p class="calibre_6"><img src="images/000137.jpg" class="calibre_31" /></p><p class="calibre_4">The tool is automatically<a></a> added to the startup applications, so it will start the next time you reboot.</p><p class="calibre_4">In order to invoke <tt class="calibre3"><span class="calibre_13">ClipIt</span></tt>, hit <span class="italic">Ctrl</span> + <span class="italic">Alt</span> + <span class="italic">H</span> or click the clipboard image in the menu bar.</p><p class="calibre_6"><img src="images/000045.jpg" class="calibre_32" /></p><p class="calibre_4">The first times it starts, it warns you that it stores data in plain text, so it might not be safe to use if other users<a></a> use your account. Currently, it contains only the latest clipboard element.</p><p class="calibre_4">Let's do a quick example of its usage.</p><p class="calibre_4">We <tt class="calibre3"><span class="calibre_13">cat</span></tt> the content of the .<tt class="calibre3"><span class="calibre_13">profile</span></tt> file. And let's say we want to copy some lines of text and run them in another terminal, which looks like this:</p><p class="calibre_6"><img src="images/000083.jpg" class="calibre_33" /></p><p class="calibre_4">For example, we might<a></a> want to update the PATH variable, then source the <tt class="calibre3"><span class="calibre_13">.bashrc</span></tt> file and update the PATH variable again. Instead of copying the content again from our file, we just hit <span class="italic">Ctrl</span> + <span class="italic">Alt</span> + <span class="italic">H</span> and choose what we want to paste from our clipboard history:</p><p class="calibre_6"><img src="images/000209.jpg" class="calibre_34" /></p><p class="calibre_4">This is a very basic example. <tt class="calibre3"><span class="calibre_13">ClipIt</span></tt> mostly comes in handy when you work long hours on your computer and need to paste something that you copied from a website hours earlier. It comes with<a></a> a default history size of 50 items and it will show you the last 10 items in your floating window. You can increase these limits in the settings:</p><p class="calibre_6"><img src="images/000134.jpg" class="calibre_31" /></p><p class="calibre_4">With <tt class="calibre3"><span class="calibre_13">ClipIt</span></tt>, you can<a></a> copy and paste as many times as you want without losing any data. It's like a time machine for your clipboard!</p><div class="mbp_pagebreak"></div><p id="calibre_link-25" class="calibre_"><span class="calibre1"><span class="bold">Chapter&nbsp;2.&nbsp;Productive Shells &ndash; Reinvent the way you work</span></span></p><p class="calibre_4">In this chapter, we will start off with a short introduction to Vim and look at the most basic commands to help you get started with basic CRUD (create, read, update, delete) operations. We will then upgrade the shell interpreter to zsh and also give it superpowers with the awesome <tt class="calibre3"><span class="calibre_13">oh-my-zsh</span></tt> framework. We will look at some basic regular expressions such as searching some text using grep. Then, we will unleash the power of Unix pipes and run embedded commands using subshells. The later part of the chapter will help us understand how we can boost productivity and automate a lot of our day-to-day work by showing some of the more advanced shell scripting techniques. </p><p class="calibre_4">In this chapter, we will cover the following:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Working with Vim</li><li value="2" class="calibre_12">Managing zsh using the <tt class="calibre3"><span class="calibre_13">oh-my-zsh</span></tt> framework</li><li value="3" class="calibre_12">Writing and running super powerful one line commands using pipes and subshells</li><li value="4" class="calibre_12">Exploring the shell scripting libraries</li></ul><p class="calibre_4">We will focus on editing files. For that we need to choose a file editor. There are a bunch of options but considering that the fastest way to edit files is, of course, without leaving the terminal. We recommend Vim. Vim is an awesome editor! It has a lot of configuration options with a huge community that has produced lots of plugins and beautiful themes. It also features advanced text editing, which makes it ultra-configurable and super-fast.</p><p class="calibre_4">So, let's proceed. Open the terminator and type <tt class="calibre3"><span class="calibre_13">sudo apt install vim</span></tt> to install Vim:</p><p class="calibre_6"><img src="images/000081.jpg" class="calibre_35" /></p><p class="calibre_4">Vim is renowned for<a></a> its exotic keyboard controls and a lot of people avoid using Vim because of it. But once you get the basics, it's super easy to use.</p><p class="calibre_4">Let's start <tt class="calibre3"><span class="calibre_13">vim</span></tt> with no arguments:</p><p class="calibre_6"><img src="images/000095.jpg" class="calibre_36" /></p><p class="calibre_4">This is the default screen; you can see the version on the second line.</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">To start editing text, press the <span class="italic">Insert</span> key; this will take us to the insert mode, where we can start typing. We can see we are in the insert mode at the bottom of the screen:<p class="calibre_6"><img src="images/000026.jpg" class="calibre_37" /></p></li><li value="2" class="calibre_21">Press the <span class="italic">Insert</span> key again to go to replace the mode and override text.</li><li value="3" class="calibre_12">Press the <span class="italic">Esc</span> key to exit insert or replace.</li><li value="4" class="calibre_12">Type <span class="italic">yy</span> to copy a line.</li><li value="5" class="calibre_12">Type <span class="italic">p</span> to paste the line.</li><li value="6" class="calibre_12">Type <span class="italic">dd</span> to cut the line.</li><li value="7" class="calibre_12">Type <span class="italic">:w</span> to save any changes. Optionally, specify a filename:<p class="calibre_6"><img src="images/000040.jpg" class="calibre_38" /></p></li><li value="8" class="calibre_21">To save the file in editing text, type <tt class="calibre3"><span class="calibre_13">vim.txt</span></tt></li><li value="9" class="calibre_12">Type <tt class="calibre3"><span class="calibre_13">:q</span></tt> to exit Vim</li></ul><p class="calibre_4">Let's open the file again and do a small change:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">:wq</span></tt>: Write and exit at the same time</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">:q!</span></tt>: Exit without saving</li></ul><p class="calibre_4">Now you are familiar with these commands, we can do basic file editing directly from the command line. This is the bare minimum that anybody needs to know when working with Vim, and we will<a></a> use this knowledge in the chapters to come.</p><p class="calibre_4">We will also have an entire section about Vim, where we will go into more detail about being productive in the coolest terminal editor today!</p><p id="calibre_link-26" class="calibre_4"><span class="calibre1"><span class="bold"><span class="calibre_5">Oh-my-zsh &ndash; your terminal never felt this good before!</span></span></span></p><p class="calibre_4">Bash is probably the most commonly used shell. It has lots of features and powerful scripting capabilities, but when it comes to user interaction, <tt class="calibre3"><span class="calibre_13">zsh</span></tt> is better. Most of its power comes<a></a> from the awesome framework <tt class="calibre3"><span class="calibre_13">oh-my-zsh</span></tt>. In this section, we will be installing <tt class="calibre3"><span class="calibre_13">zsh</span></tt>.</p><p class="calibre_4">Let's get started with the <tt class="calibre3"><span class="calibre_13">oh-my-zsh</span></tt> framework and we will be looking at some<a></a> basic configuration options:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Open the terminator and type <tt class="calibre3"><span class="calibre_13">sudo apt install zsh</span></tt> to install <tt class="calibre3"><span class="calibre_13">zsh</span></tt>, as shown in the following image:<p class="calibre_6"><img src="images/000212.jpg" class="calibre_39" /></p></li></ul><p class="calibre_4">After installing it, go to this link, <a href="https://github.com/robbyrussell/oh-my-zsh,">https://github.com/robbyrussell/oh-my-zsh</a>, and follow the<a></a> instructions for installing the <tt class="calibre3"><span class="calibre_13">oh-my-zsh</span></tt> framework. The installation process is a one-line command with <tt class="calibre3"><span class="calibre_13">curl</span></tt> or <tt class="calibre3"><span class="calibre_13">wget</span></tt>. Let's install it using both the command one by one:</p><p class="calibre_4">
<span class="bold">Via curl:</span>
</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">
<span class="bold">Via wget:</span>
</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sh -c "$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)"</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">You will see that the command is giving an error saying that <tt class="calibre3"><span class="calibre_13">git</span></tt> is not installed, so we need to install that too. The following command-line is used to install git:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install git</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000215.jpg" class="calibre_40" /></p><p class="calibre_4">Notice how easy it is to install software in Ubuntu. This is also a big productivity booster; every common software package we might need is already prepackaged in the remote software repository<a></a> and it takes us just one command to add new software to our computer.</p><p class="calibre_4">Now that we have <tt class="calibre3"><span class="calibre_13">git</span></tt> installed, let's run the command again. We can see that this time it's working successfully and it's bringing us to our new shell. <tt class="calibre3"><span class="calibre_13">Oh-my-zsh</span></tt> also changes the default shell to <tt class="calibre3"><span class="calibre_13">zsh</span></tt>.</p><p class="calibre_4">After installation, the first thing to do is go pick a theme. To see all available themes, run this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ls ~/.oh-my-zsh/themes</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000099.jpg" class="calibre_41" /></p><blockquote class="calibre_16"><span class="calibre7"><span class="bold"><span class="calibre_17">Note</span></span></span></blockquote><blockquote class="calibre_16">You can also go to the <tt class="calibre3"><span class="calibre_13">git</span></tt> repo and check out the themes, together with their screenshots. We will be using the <span class="italic">candy</span> theme, because it has a lot of useful information in the prompt: <span class="italic">username</span>, <span class="italic">hostname</span>, <span class="italic">time</span>, <span class="italic">folder</span> and <span class="italic">git</span> branch/<span class="italic">git</span> status.</blockquote><p class="calibre_4">Time can be very useful, for example if you want to know how long a command took to execute and you didn't use the <span class="italic">time</span> utility to measure your command's total runtime. Then, you can<a></a> check out the prompt and see the time when the command started and the prompt to know when it was finished, and thus you can calculate the total time.</p><p class="calibre_4">To change the theme, <tt class="calibre3"><span class="calibre_13">open ~/.zshrc</span></tt> and modify the <tt class="calibre3"><span class="calibre_13">ZSH_THEME</span></tt> variable. Save the file and open a new terminal window. Let's initialize an empty <tt class="calibre3"><span class="calibre_13">git</span></tt> directory so we can see how the prompt looks. You can see we are on the master branch:</p><p class="calibre_6"><img src="images/000132.jpg" class="calibre_42" /></p><p class="calibre_4">Let's create a file, say <tt class="calibre3"><span class="calibre_13">readme.md</span></tt>. The <tt class="calibre3"><span class="calibre_13">*</span></tt> in the prompt shows that the directory is not clean. We can verify this with the <tt class="calibre3"><span class="calibre_13">git status</span></tt> command:</p><p class="calibre_6"><img src="images/000003.jpg" class="calibre_43" /></p><p class="calibre_4">You can see how it gets verified. After we've cleaned up the directory, the <tt class="calibre3"><span class="calibre_13">*</span></tt> is gone. If we change branch, the prompt shows that we are on the new branch.</p><p class="calibre_4">Let's quickly create a demo. Run the<a></a> following commands on your terminal:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">git branch test<br class="calibre6" />git checkout test</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000182.jpg" class="calibre_44" /></p><p class="calibre_4">You can now see the branch name in the prompt, and there are some other cool features that you might like to explore:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><span class="bold">Command completion</span>: Start typing, for example, ip, and press <span class="italic">Tab</span>. We can see all the commands that start with IP and we can hit <span class="italic">Tab</span> again to start navigating through the different options. You can use the arrow keys to navigate and hit <span class="italic">Enter</span> for the desired command:<p class="calibre_6"><img src="images/000042.jpg" class="calibre_45" /></p></li><li value="2" class="calibre_21"><span class="bold">Params completion</span>: For example type <tt class="calibre3"><span class="calibre_13">ls -</span></tt> and press <span class="italic">Tab</span>, and we can see here all the options and a short description for each. Press <span class="italic">Tab</span> again to start navigating through them and <span class="italic">Enter</span> to select.<p class="calibre_6"><img src="images/000186.jpg" class="calibre_46" /></p></li><li value="3" class="calibre_21"><span class="bold">History navigation</span>: Click on arrow up key to search in history, filtering by the string that is written before the cursor. For example, if I type <tt class="calibre3"><span class="calibre_13">vim</span></tt> and press the arrow up key, I can see all the files opened with Vim in my history.</li><li value="4" class="calibre_12"><span class="bold">History search</span>: Press <span class="italic">Ctrl</span> + <span class="italic">R</span> and start typing, and press <span class="italic">Ctrl</span> + <span class="italic">R</span> again to search the same occurrence in history. For example <span class="italic">~</span>, and <span class="italic">Ctrl</span> + <span class="italic">R</span> to see all commands that have <span class="italic">~</span> in the string.</li><li value="5" class="calibre_12"><span class="bold">Navigating</span>: Here press <span class="italic">Ctrl</span> + arrow left/right to jump one word, <span class="italic">Ctrl</span> + <span class="italic">W</span> to delete one word, or <span class="italic">Ctrl</span> + <span class="italic">U</span> to delete the whole line.</li><li value="6" class="calibre_12"><span class="bold">cd completion case insensitive</span>: For example, <tt class="calibre3"><span class="calibre_13">cd doc</span></tt> will expand into <tt class="calibre3"><span class="calibre_13">cd Documents</span></tt>.</li><li value="7" class="calibre_12"><span class="bold">cd directory completion</span>: If you are lazy and want to specify only a few key letters in a path, we can do that too. For example, <tt class="calibre3"><span class="calibre_13">cd /us/sh/zs</span></tt> + <span class="italic">Tab</span> will expand into <tt class="calibre3"><span class="calibre_13">cd /usr/share/zsh</span></tt>.</li><a></a><li value="8" class="calibre_12"><span class="bold">Kill completion:</span> Just type <tt class="calibre3"><span class="calibre_13">kill</span></tt> and <span class="italic">Tab</span> and you will see a list of <tt class="calibre3"><span class="calibre_13">pids</span></tt> to kill. From there you can choose which process to kill.</li><li value="9" class="calibre_12"><span class="bold">chown completion</span>: Type <tt class="calibre3"><span class="calibre_13">chown</span></tt> and tab to see a list of users to change owner to. The same applies to groups.</li><li value="10" class="calibre_12"><span class="bold">Argument expansion</span>: Type <tt class="calibre3"><span class="calibre_13">ls *</span></tt> and hit <span class="italic">Tab</span>. You see <tt class="calibre3"><span class="calibre_13">*</span></tt> expanded to all files and folders in the current directory. For a subset, type <tt class="calibre3"><span class="calibre_13">ls Do*</span></tt> and press <span class="italic">Tab</span>. It will only expand to documents and downloads.</li><a></a><li value="11" class="calibre_12"><span class="bold">Adds lots of aliases:</span> Just type alias to see a full list. Some very useful ones are:<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">.. - go up one folder<br class="calibre6" />… - go up two folders<br class="calibre6" />- - cd o the last directory<br class="calibre6" />ll - ls with -lh</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_48"><img src="images/000020.jpg" class="calibre_49" /></p></li></ul><p class="calibre_4">To see a list of shortcuts, run the <tt class="calibre3"><span class="calibre_13">bindkey</span></tt> command. The terminal is one of the places where you will spend a lot time, so it's really important to master our shell and use it as efficiently as possible. Knowing good shortcuts and viewing relevant and condensed information, such as our prompt, can make our job much easier.</p><div class="mbp_pagebreak"></div><p id="calibre_link-27" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Basic regular expressions</span></span></span></p><p class="calibre_4">
<span class="italic">You have a problem and you want to solve it with regular expressions? Now you have two problems!</span> This is just<a></a> one of the many regular expression jokes on the Internet.</p><p class="calibre_4">In this section, you will learn how regular expressions work, as we will be using them in the upcoming chapters. We have prepared a file for our playground and if you want to try the grep commands on your own, you can take it from the GitHub repository.</p><p class="calibre_4">Let's start by opening our text file so we can see its contents, and then splitting the screen so we can see both the file and the command side by side.</p><p class="calibre_4">First of all, the simplest and probably the most common regular expression is to find a single word.</p><p class="calibre_4">For this we will use the <tt class="calibre3"><span class="calibre_13">grep "joe" file.txt</span></tt> command:</p><p class="calibre_6"><img src="images/000179.jpg" class="calibre_50" /></p><p class="calibre_4">
<tt class="calibre3"><span class="calibre_13">joe</span></tt> is the string we are searching for and <tt class="calibre3"><span class="calibre_13">file.txt</span></tt> is the file where we perform the search. You can see that grep printed the line that contained our string and the word is highlighted with another color. This will only match the exact case of the word (so, if we use lowercase <tt class="calibre3"><span class="calibre_13">j</span></tt>, this regex will not work anymore). To do a case insensitive search, <tt class="calibre3"><span class="calibre_13">grep</span></tt> has an <tt class="calibre3"><span class="calibre_13">-i</span></tt> option. What this means is that grep will print the line that contains our word even if the word<a></a> is in a different case, like JoE, JOE, joE, and so on:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">grep -i "joe" file.txt</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000183.jpg" class="calibre_51" /></p><p class="calibre_4">If we don't know exactly what characters are there in our string, we can use <tt class="calibre3"><span class="calibre_13">.*</span></tt> to match any number of characters. For example, to find a sentence beginning with "word" and ending with "day", we'd use the <tt class="calibre3"><span class="calibre_13">grep "word.*day" file.txt</span></tt> command:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">.</span></tt> - matches any character</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">*</span></tt> - matches previous character multiple times</li></ul><p class="calibre_4">Here you can see that it matched the first line in the file.</p><p class="calibre_4">A very common scenario is to find empty lines in a file. For this we use the <tt class="calibre3"><span class="calibre_13">grep "^\s$" file.txt</span></tt> command:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Where <tt class="calibre3"><span class="calibre_13">\s</span></tt> : This stands for space, </li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">^</span></tt> : It's for the beginning of the line.</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$</span></tt> : It's for its ending.</li></ul><p class="calibre_4">We have two empty lines with no space. If we add a space between the lines, it will match the lines containing one space. These are called <span class="bold">anchors</span>.</p><p class="calibre_4">
<tt class="calibre3"><span class="calibre_13">grep</span></tt> can do a neat<a></a> little trick to count the number of matches. For this, we use the <tt class="calibre3"><span class="calibre_13">-c</span></tt> parameter:</p><p class="calibre_6"><img src="images/000006.jpg" class="calibre_52" /></p><p class="calibre_4">To find all the lines that have only letters and space, use:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">grep</span></tt></li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">""</span></tt>: Open quotes</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">^$</span></tt>: From the beginning of the line to the end</li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">[]*</span></tt>: Match these characters any number of times</li><li value="5" class="calibre_12"><tt class="calibre3"><span class="calibre_13">A-Za-z</span></tt>: Any upper and lower case letter</li></ul><p class="calibre_4">If we run the command up to here, we get only the first line. If we add:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"> - 0-9 any number we match another two lines,</li><li value="2" class="calibre_12">And if we add: - \s any space, we also match the empty lines and the all caps line</li><li value="3" class="calibre_12">If we run the command until here, we get only the first line from the output, the rest is not displayed</li><li value="4" class="calibre_12">Then, if we add 0-9 we match any number (so the first two lines get matched)</li><li value="5" class="calibre_12">And if we add \s we match any type of space (so the empty lines are matched as well)<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">grep "^[A-Za-z0-9\s]*$" file.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_48"><img src="images/000143.jpg" class="calibre_53" /></p></li></ul><p class="calibre_4">Sometimes we need to search for something that's not in the string:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">grep "^[^0-9]*$" file.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">This command will find all the lines that do not have only numeric characters. <tt class="calibre3"><span class="calibre_13">[^]</span></tt> means match all characters<a></a> that are not inside, in our case, any non-number.</p><p class="calibre_4">The square brackets are markers in our regular expression. If we want to use them in our search string, we have to escape them. So, in order to find lines that have content between square brackets, do this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">grep "\[.*\]" file.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">This is for any line that has characters in square brackets. To find all lines that have these character <tt class="calibre3"><span class="calibre_13">!</span></tt>, type this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">grep "\!" file.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Now let's have a look at a basic <tt class="calibre3"><span class="calibre_13">sed,</span></tt> lets find <tt class="calibre3"><span class="calibre_13">Joe</span></tt> word and replace with <tt class="calibre3"><span class="calibre_13">All</span></tt> word:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed "s/Joe/All/g" file.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000061.jpg" class="calibre_54" /></p><p class="calibre_4">This will replace every occurrence of the string <tt class="calibre3"><span class="calibre_13">Joe</span></tt> with the string <tt class="calibre3"><span class="calibre_13">All</span></tt>. We will deep dive into this in the upcoming chapters.</p><p class="calibre_4">Regular expressions, such as Vim, are one of the things many people are afraid of because they seem<a></a> complicated to learn in the beginning. Although they might seem cryptic, regular expressions are handy companions once mastered: they are not limited to our shell because the syntax is very similar in most programming languages, databases, editors, and any other place that includes searching for strings. We will go into more detail about regular expressions in the upcoming chapters.</p><div class="mbp_pagebreak"></div><p id="calibre_link-28" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Pipes and subshells &ndash; your shell's salt and pepper</span></span></span></p><p class="calibre_4">In this section, we will be looking at ways to improve your productivity using your shell. The Linux command line is great because it has a variety of tools we can use. What makes it even<a></a> greater is the fact that we can chain these tools together to form greater, more powerful tools that will make us even more productive. We will not<a></a> go into basic shell commands; instead we will be looking at some cool pipe and subshell combinations that can make our lives easier.</p><p class="calibre_4">Let's start<a></a> with a basic pipe; in this example, we are counting the length of the current path using the following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">pwd | wc -c</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000123.jpg" class="calibre_55" /></p><p class="calibre_4">
<tt class="calibre3"><span class="calibre_13">pwd,</span></tt> as you probably know, stands for <tt class="calibre3"><span class="calibre_13">print working directory</span></tt>. The <tt class="calibre3"><span class="calibre_13">|</span></tt> is the pipe symbol, and what it does is send the output of the command on the left to the command on the right. In our case, <tt class="calibre3"><span class="calibre_13">pwd</span></tt> is sending its output to <tt class="calibre3"><span class="calibre_13">wc -c</span></tt>, which counts the number of characters. The coolest thing about pipes is that you can create a chain of any number of pipes.</p><p class="calibre_4">Let's see another example where we will see how to find used space on the drive:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">df -h | grep /home | tr -s " " | cut -f 2 -d " "</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000033.jpg" class="calibre_56" /></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">"df -h"</span></tt>: This shows the disk usage in a human-readable format</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">"| grep /home"</span></tt>: This shows only the home directory</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">'| tr -s " "'</span></tt>: This substitutes multiple spaces for just one space</li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">'| cut -f 2 -d " "'</span></tt>: This selects the second column using a space as the delimiter</li></ul><p class="calibre_4">As you can see, the command printed out <tt class="calibre3"><span class="calibre_13">173G</span></tt>, the size of the <tt class="calibre3"><span class="calibre_13">/home</span></tt> partition. This is a common use case<a></a> when chaining multiple commands, each command reducing the output until we get the desired information and nothing else. In our case, this is the used disk space.</p><p class="calibre_4">To count all the directories in a folder, use the following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ls -p | grep / | wc -l</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000146.jpg" class="calibre_57" /></p><p class="calibre_4">The basic idea is to count all the lines that end with <tt class="calibre3"><span class="calibre_13">/</span></tt>. Here we can see we have only one directory.</p><p class="calibre_4">Pipes are a<a></a> great option to find and kill processes. Say we want to find the process ID of <tt class="calibre3"><span class="calibre_13">nautilus</span></tt>, and <tt class="calibre3"><span class="calibre_13">kill all</span></tt> running instances. For this we use:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ps aux | grep nautilus | grep -v grep | awk '{print $2}' | xargs kill</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000176.jpg" class="calibre_19" /></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">ps aux</span></tt>: This prints all processes with PID</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| grep nautilus</span></tt>: Find the ones matching nautilus</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| grep -v grep</span></tt>: Inverts <tt class="calibre3"><span class="calibre_13">grep</span></tt> to exclude the <tt class="calibre3"><span class="calibre_13">grep</span></tt> process</li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| awk '{print $2}'</span></tt>: Selects the second word in the line, which is the PID</li><li value="5" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| xargs kill</span></tt>: Here <tt class="calibre3"><span class="calibre_13">xargs</span></tt> is used to distribute each PID to a kill command. It is especially used for commands that do not read arguments from standard input.</li></ul><p class="calibre_4">Now we've killed <tt class="calibre3"><span class="calibre_13">nautilus</span></tt>. This was purely a demonstrative example. There are other ways of doing this.</p><p class="calibre_4">Let's open <tt class="calibre3"><span class="calibre_13">nautilus</span></tt> again and send it to the background by hitting <span class="italic">Ctrl</span> + <span class="italic">Z</span> followed by the <tt class="calibre3"><span class="calibre_13">bg</span></tt> command.</p><p class="calibre_4">Now let's run the following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">pgrep nautilus</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">To see all the <tt class="calibre3"><span class="calibre_13">pids</span></tt> of <tt class="calibre3"><span class="calibre_13">nautilus</span></tt> and to send the kill signal to all those processes, use the following command line:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">pkill nautilus</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Now it's time for some networking! You probably know the <tt class="calibre3"><span class="calibre_13">ifconfig</span></tt> command, which is used to print<a></a> information about the network interfaces. To get the IP address of a specific interface (in our case the wireless interface <tt class="calibre3"><span class="calibre_13">wlp3s0</span></tt>), run this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ifconfig wlp3s0 | grep "inet addr:" | awk '{print $2}' | cut -f 2 -d ":"</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000136.jpg" class="calibre_19" /></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">ifconfig wlp3s0</span></tt>: Prints networking information for the <tt class="calibre3"><span class="calibre_13">wlp3s0</span></tt> interface</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| grep "inet addr:"</span></tt>: Gets the line with the IP address</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| awk '{print $2}'</span></tt>: Selects the second word in the line (we could have used cut as well)</li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| cut -f 2 -d ":"</span></tt>: This is split by <tt class="calibre3"><span class="calibre_13">":"</span></tt>, and only prints the second word</li></ul><p class="calibre_4">And now, we see your <tt class="calibre3"><span class="calibre_13">private ip</span></tt> address on the screen.</p><p class="calibre_4">A common use case that might also arise is counting the word frequency in a file.</p><p class="calibre_4">Here we have a standard lorem ipsum text contained in <tt class="calibre3"><span class="calibre_13">lorem.txt</span></tt>. In order to get the word frequency, use this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">cat lorem.txt | tr " " "\n" | grep -v "^\s*$" | sed "s/[,.]//g" | sort | uniq -c | sort -n</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000014.jpg" class="calibre_58" /></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">cat lorem.txt</span></tt></li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| tr " " "\n"</span></tt>: Transforms each space into a new line character</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| grep -v "^\s*$"</span></tt>: Eliminates empty lines</li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| sed "s/[,.]//g"</span></tt>: Eliminates commas (,) and periods (.) to select only the words</li><li value="5" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| sort</span></tt>: Sort the results alphabetically</li><li value="6" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| uniq -c</span></tt>: Show only unique lines</li><li value="7" class="calibre_12"><tt class="calibre3"><span class="calibre_13">| sort -n</span></tt>: Sorts by numerical value</li></ul><p class="calibre_4">Append <tt class="calibre3"><span class="calibre_13">grep -w id</span></tt> to find the frequency of the word ID, or <tt class="calibre3"><span class="calibre_13">grep -w 4</span></tt> to see all words that appear four times.</p><p class="calibre_4">Now let's move on to our first subshell example. Subshells can be written by either enclosing them in <tt class="calibre3"><span class="calibre_13">$()</span></tt>, or using backticks (<span class="italic">`</span>). Backticks are usually found under the <span class="italic">Esc</span> key on<a></a> your keyboard. In all our examples, we will be using the first form because it's easier to read.</p><p class="calibre_4">Our first example is to list all the folders in our current folder:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ls $(ls)</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">The <tt class="calibre3"><span class="calibre_13">ls</span></tt> subshell returns the files and folders in the current directory and the <tt class="calibre3"><span class="calibre_13">ls</span></tt> from outside the subshell will list those individually, showing additional details:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Counting all files and directories in the current directory</li><li value="2" class="calibre_12">Given the fact that commas (,) and periods (.) are hard links that mark the current and parent directory, we need to count all entries minus these two</li><a></a><li value="3" class="calibre_12">This can be done using the <tt class="calibre3"><span class="calibre_13">expr $(ls -a | wc -l ) - 2</span></tt> command:<p class="calibre_6"><img src="images/000079.jpg" class="calibre_59" /></p></li></ul><p class="calibre_4">Here, the subshell will return the number of entries (five, in this case). The number we are looking for is the number of entries minus the special folders ("<tt class="calibre3"><span class="calibre_13">.</span></tt>" and "<tt class="calibre3"><span class="calibre_13">..</span></tt>"). In order to do arithmetic operations, we use the <tt class="calibre3"><span class="calibre_13">expr</span></tt> command, as in our example.</p><p class="calibre_4">Notice that the subshell contains a pipe. The good thing is that we can combine pipes and subshells in any way in order to obtain the desired result.</p><p class="calibre_4">Imagine pipes and subshells as Lego pieces for your shell. They expand way beyond its capabilities and give you access to new possibilities with infinite combinations. In the end, it all depends on your imagination and how well you learn to use them.</p><div class="mbp_pagebreak"></div><p id="calibre_link-29" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Shell scripting for fun and profit</span></span></span></p><p class="calibre_4">Pipes and subshells are one way of expanding the capabilities of our shell. The ultimate way is by writing shell scripts. These scenarios must be taken into consideration when dealing with complex tasks that can't be automated with a one-line command.</p><p class="calibre_4">The good news is that almost all the tasks can be automated with the use of shell scripts. We won't go over an<a></a> introduction to shell scripts. Instead, we will be looking at some more advanced use cases for writing them.</p><p class="calibre_4">Let's start our journey into shell scripting! First thing, let's open a file called <tt class="calibre3"><span class="calibre_13">script.sh</span></tt> and split the screen so that we can test while writing. Every shell should start with <tt class="calibre3"><span class="calibre_13">#!</span></tt>, followed by the interpreter it uses. This line is called a <span class="bold">shebang</span>. We will be using bash as our default interpreter.</p><p class="calibre_4">It's a good idea to use bash, because it's a common interpreter that comes with most Linux distributions and also OS X:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">#!/bin/bash</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Let's start with a simple use case: reading the arguments passed into the command line. We will assign the value of the first command line argument, <tt class="calibre3"><span class="calibre_13">$1</span></tt>, to a variable called ARG, and then print it back to the screen:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">ARG=${1}<br class="calibre6" />echo ${ARG}</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Let's save our script, assign it execution permissions, and then run it with one argument:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">./script.sh test</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000098.jpg" class="calibre_60" /></p><p class="calibre_4">As you can see, the value test is printed back to the screen. In some cases, we want to assign default<a></a> values to variables. In order to do this, add ":-" to the variable assignment, followed by the default value:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ARG=${1:-"default value"}</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Now if we re-run the script, we can see that passing no arguments will <tt class="calibre3"><span class="calibre_13">echo default value</span></tt>. And just like pipes, we can chain multiple default value assignments together. We can define another variable <tt class="calibre3"><span class="calibre_13">AUX</span></tt>, assign it the value <tt class="calibre3"><span class="calibre_13">123</span></tt>, and use the same syntax to assign its value to the ARG variable, before using the <tt class="calibre3"><span class="calibre_13">"default value"</span></tt> script like so:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">AUX="123"</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ARG=${1:-${AUX:-"default value"}}</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000120.jpg" class="calibre_61" /></p><p class="calibre_4">In this case, ARG will always receive 123 as its default value.</p><p class="calibre_4">Now let's look at string selectors. To select a substring, use ":", plus the starting position plus ":", plus the<a></a> number of characters:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">LINE="some long line of text"echo "${LINE:5:4}"&nbsp; </span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000001.jpg" class="calibre_62" /></p><p class="calibre_4">In our case, we will be selecting four characters, starting from the fifth character. After running the script, we can see the value <tt class="calibre3"><span class="calibre_13">long</span></tt> printed on the screen.</p><p class="calibre_4">Most shell scripts are designed to run from the command line and receive a variable number of arguments. In order to read command line arguments without knowing the total number<a></a> of arguments, we'll use a <tt class="calibre3"><span class="calibre_13">while</span></tt> statement that checks whether the first argument is not null using the -z (or not equal to 0) conditional expression. In the while loop, let's echo the variable's value and run shift, which shifts command line arguments one position to the left:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">while [[ ! -z ${1} ]]; do</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">echo ${1}</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">shift&nbsp; # shift cli arguments</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">done</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000170.jpg" class="calibre_52" /></p><p class="calibre_4">If we run our script with the arguments <span class="italic">a</span>
<span class="italic">b</span>
<span class="italic">c</span>, we can see that our while looped through the parameters<a></a> and printed each one on a separate line. Now let's extend our CLI arguments parser and add a <span class="italic">case</span> statement for interpreting the arguments.</p><p class="calibre_4">Let's assume that our script will have a help option. The Posix standard recommends doing a long argument version with <tt class="calibre3"><span class="calibre_13">--</span></tt>, and a short version with only one <tt class="calibre3"><span class="calibre_13">-</span></tt>. So both <tt class="calibre3"><span class="calibre_13">-h</span></tt> and <tt class="calibre3"><span class="calibre_13">--help</span></tt> will print the help message. Also, it is recommended to always have a default case and print a message when the user sends invalid options and then exits with a non-zero exit value:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">while [[ ! -z ${1} ]]; do<br class="calibre6" />&nbsp;&nbsp;&nbsp; case "$1" in<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --help|-h)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "This is a help message"<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shift<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "invalid option"<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 1<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br class="calibre6" />&nbsp;&nbsp;&nbsp; esac<br class="calibre6" />done</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000127.jpg" class="calibre_52" /></p><p class="calibre_4">If we run our script with -h, we can see the help message printed, the same as if we had used <tt class="calibre3"><span class="calibre_13">--help</span></tt>. If we run the script with any other option, the invalid option text is printed and the script exits with the exit code 1. To get the exit code of the last command, use <tt class="calibre3"><span class="calibre_13">"$?"</span></tt>.</p><p class="calibre_4">Now let's look at basic functions in shell. The syntax is pretty similar to other programming languages. Let's write a function called <tt class="calibre3"><span class="calibre_13">print_ip</span></tt> that will print the IP of the interface specified<a></a> as the first argument. We will use a subshell and assign the value to a variable called IP. We already have the full command inside our clipboard; it's the same one we saw in the lesson about pipes:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">function print_ip() {<br class="calibre6" />&nbsp;&nbsp;&nbsp; IP=$(<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ifconfig ${1} | \<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; grep "inet addr:" | \<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; awk '{print $2}' | \<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cut -f 2 -d ":"<br class="calibre6" />&nbsp;&nbsp;&nbsp; )&nbsp;&nbsp; <br class="calibre6" />&nbsp;&nbsp;&nbsp; echo ${IP}<br class="calibre6" />}</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000009.jpg" class="calibre_63" /></p><p class="calibre_4">Now let's add another case to our switch statement, for the <tt class="calibre3"><span class="calibre_13">-i</span></tt> or <tt class="calibre3"><span class="calibre_13">--ip</span></tt> option. The option will be followed by the name of the interface, which we will then pass to the <tt class="calibre3"><span class="calibre_13">print_ip</span></tt> function. Having two arguments for one option means we need to call the shift command twice:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">--ip|-i)<br class="calibre6" />&nbsp;&nbsp;&nbsp; print_ip ${2}<br class="calibre6" />&nbsp;&nbsp;&nbsp; shift<br class="calibre6" />&nbsp;&nbsp;&nbsp; shift<br class="calibre6" />&nbsp;&nbsp;&nbsp; ;;</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Let's do an <tt class="calibre3"><span class="calibre_13">ifconfig</span></tt> to get the name of our wireless interface. We can see it's <tt class="calibre3"><span class="calibre_13">wlp3s0</span></tt>.</p><p class="calibre_4">Now let's run:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">./script.sh --ip wlp3s0</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">We can see the IP address. This is a very basic use case, where we can see how command line arguments can be passed. We can add unlimited options to our case statement, define functions for handling<a></a> the arguments, and even chain multiple options together to form complex scripts that receive well-structured information as command line arguments.</p><p class="calibre_4">Being effective means running tasks faster-- really fast! And when it comes to speed, bash is not the first choice<a></a> in terms of script interpreters. Luckily, we still have some tricks up our sleeves! If a shell script needs to run multiple independent tasks, we can use the <span class="italic">&amp;</span> symbol to send the process to the background and move forward to the next command.</p><p class="calibre_4">Let's create two functions, <tt class="calibre3"><span class="calibre_13">long_running_task 1</span></tt> and <tt class="calibre3"><span class="calibre_13">2</span></tt>, and add a <tt class="calibre3"><span class="calibre_13">sleep</span></tt> command inside, to simulate a <tt class="calibre3"><span class="calibre_13">long_running</span></tt> task:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">function long_running_task_1() {<br class="calibre6" />&nbsp;&nbsp;&nbsp; sleep 1<br class="calibre6" />}<br class="calibre6" /><br class="calibre6" />function long_running_task_2() {<br class="calibre6" />&nbsp;&nbsp;&nbsp; sleep 2<br class="calibre6" />}</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">The first long running task function will sleep for one second, and the next will sleep for two seconds.</p><p class="calibre_4">Then, for testing purposes, let's add another case to our switch statement, called <tt class="calibre3"><span class="calibre_13">-p / --</span></tt>parallel, and run the two long running tasks:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">--parallel|-p)<br class="calibre6" />&nbsp;&nbsp;&nbsp; long_running_task_1 <br class="calibre6" />&nbsp;&nbsp;&nbsp; long_running_task_2</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Now, if we run this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">./script.sh -p</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">It will take a total of three seconds for the script to finish. We can measure this with the <span class="italic">time</span> utility:</p><p class="calibre_6"><img src="images/000004.jpg" class="calibre_19" /></p><p class="calibre_4">If we run both functions in the background, we can reduce the running time to the longest running time of both functions (because of the wait). When running long running tasks, we probably want the<a></a> script to wait for the longest-running task to finish, in our case task 2. We can achieve this by grabbing the <tt class="calibre3"><span class="calibre_13">pid</span></tt> of the second task. Here <tt class="calibre3"><span class="calibre_13">$!</span></tt> is used to grab the <tt class="calibre3"><span class="calibre_13">pid</span></tt> of the last run command. Then we use the wait shell built in to wait for the execution to finish:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">--parallel|-p)<br class="calibre6" />&nbsp;&nbsp;&nbsp; long_running_task_1 &amp;<br class="calibre6" />&nbsp;&nbsp;&nbsp; long_running_task_2 &amp;<br class="calibre6" />&nbsp;&nbsp;&nbsp; PID=$!<br class="calibre6" />&nbsp;&nbsp;&nbsp; wait ${PID}</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">After running the script again with the time utility, we can see it takes us a total of two seconds to complete the task.</p><p class="calibre_4">Who would've thought we can do parallel processing in a shell?</p><p class="calibre_4">If the executions take a longer time, we can add a notification when the script finishes:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">notify-send script.sh "execution finished"</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000125.jpg" class="calibre_19" /></p><p class="calibre_4">This way we can start the script, work on some other tasks, and receive a notification when the script finishes. You can let your imagination go wild on the things you can achieve with parallel<a></a> processing and notifications.</p><p class="calibre_4">In this chapter, we have seen some common predefined shell variables. They were:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$1</span></tt>: First argument</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$?</span></tt>: Return code of the last command</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$!</span></tt>: The <tt class="calibre3"><span class="calibre_13">pid</span></tt> of the last command run</li></ul><p class="calibre_4">Other commonly used predefined shell variables include:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$#</span></tt>: Number of parameters</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$*</span></tt>: List of parameters</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$@</span></tt>: All the parameters</li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$0</span></tt>: Name of the shell/script</li><li value="5" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$$</span></tt>: PID of current running shell</li></ul><p class="calibre_4">Bash has a lot of features and we recommend going through its man page to get more information about them.</p><p class="calibre_4">Shell scripts are amazing when used the right way. They can fine-tune system commands, as we saw in our<a></a> example when we got only the IP address, without the whole <tt class="calibre3"><span class="calibre_13">ifconfig</span></tt> output and much more. You, as a pragmatic terminal user, should identify what tasks you most commonly do in the command line and what can be automated using shell scripts. You should create your own collection of shell scripts and add them your path, so that they are easily accessible from any directory.</p><div class="mbp_pagebreak"></div><p id="calibre_link-30" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Shell scripting libraries</span></span></span></p><p class="calibre_4">To really take advantage of automating tasks using shell scripts, it's important to organize all common tasks into<a></a> reusable commands and have them available in the path. To do this, it's a good idea to create a <tt class="calibre3"><span class="calibre_13">bin</span></tt> folder inside the home directory for the scripts, and a <tt class="calibre3"><span class="calibre_13">bin/lib</span></tt> directory for storing common pieces of code. When working with lots of shell scripts, it's important to reuse large pieces of functionality. This can be achieved by writing library functions for your shell scripts, functions that you can call from multiple places.</p><p class="calibre_4">Here we will create a library script called <tt class="calibre3"><span class="calibre_13">util.sh</span></tt>, which will be sourced in other scripts. By sourcing the script, we get access to functions and variables from inside the library script.</p><p class="calibre_4">We will start by adding the <tt class="calibre3"><span class="calibre_13">print_ip</span></tt> function from a previous script.</p><p class="calibre_4">Now we will add another function called <tt class="calibre3"><span class="calibre_13">getarg</span></tt>, which will be used by other scripts for reading command line arguments and values. We will simply paste it from our clipboard history, using ClipIt to select it.</p><p class="calibre_4">You can learn more about ClipIt by checking out our ClipIt section!</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">Function to read cli argument:<br class="calibre6" />function getarg() {<br class="calibre6" />&nbsp;&nbsp;&nbsp; NAME=${1}<br class="calibre6" />&nbsp;&nbsp;&nbsp; while [[ ! -z ${2} ]]; do<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if [[ "--${NAME}" == "${2}" ]]; then<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "${3}"<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shift<br class="calibre6" />&nbsp;&nbsp;&nbsp; done<br class="calibre6" />}&nbsp;&nbsp; </span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000034.jpg" class="calibre_18" /></p><p class="calibre_4">This is just a simple function that will receive a parameter name as the first argument, the list of CLI arguments as<a></a> the second parameter, and it will search inside the list of CLI arguments to find the parameter name. We will see it in action later on.</p><p class="calibre_4">The last function we're going to create is called <tt class="calibre3"><span class="calibre_13">get_public_ip</span></tt>. It is similar in terms of functionality to the <tt class="calibre3"><span class="calibre_13">print_ip</span></tt> function, except that it will be used to print the computer's public IP. That means that, if you are connected to a wireless router and you access the Internet, you will get the IP of the router, which is the IP that other sites see. The <tt class="calibre3"><span class="calibre_13">print_ip</span></tt> function just<a></a> shows the IP address from the private subnet.</p><p class="calibre_4">The command is already copied in the clipboard. It's called <span class="bold">dig</span> and we're using it to access <a href="https://www.opendns.com/">https://www.opendns.com/</a> in order to read the public <tt class="calibre3"><span class="calibre_13">ip</span></tt>. You can find more information about<a></a> it in its man page or by Googling it:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">function get_public_ip() {<br class="calibre6" />&nbsp;&nbsp;&nbsp; dig +short myip.opendns.com @resolver1.opendns.com<br class="calibre6" />}</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Now that we have our library functions in place, let's go and create our productivity booster scripts. Let's create<a></a> a script called <span class="bold">iputils</span> where we will add some common tasks for reading IP addresses.</p><p class="calibre_4">We'll start by adding the shebang, followed by a neat little trick for making sure we are always in the same<a></a> folder as the executed script. We will be using the <tt class="calibre3"><span class="calibre_13">BASH_SOURCE</span></tt> variable to determine the value of the <span class="bold">current working directory</span> (or <span class="bold">CWD</span>) variable. You see here that we are using nested subshells in order to achieve this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">CWD=$( cd "$(dirname "${BASH_SOURCE[0]}" )/" &amp;&amp; pwd )</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">cd ${CWD}</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Next, we will<a></a> source the <tt class="calibre3"><span class="calibre_13">util</span></tt> script, so that the library functions are exported into memory. Then, we can access them from the current script:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">source ${CWD}/lib/util.sh</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Let's add a simple call to our <tt class="calibre3"><span class="calibre_13">getarg</span></tt> function using a subshell, and search for the <tt class="calibre3"><span class="calibre_13">cmd</span></tt> argument. Also, let's echo what we've found, so that we can test our script:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">CMD=$(getarg cmd $@)</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">echo ${CMD}</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">The next thing we need to do is to give the script execution rights using the <tt class="calibre3"><span class="calibre_13">chmod</span></tt> command. Also, in order to run the script from anywhere, the <tt class="calibre3"><span class="calibre_13">bin</span></tt> folder must be in the PATH variable. Echo the variable and check that the bin folder is there and, if not, update the variable in <tt class="calibre3"><span class="calibre_13">~/.zshrc</span></tt>.</p><p class="calibre_4">Let's test the script by reading a command line parameter with the <tt class="calibre3"><span class="calibre_13">getarg</span></tt> function and echoing it.</p><p class="calibre_4">If you are searching for the <tt class="calibre3"><span class="calibre_13">iputils</span></tt> command in the terminal using tab for autocomplete and the command doesn't seem to exist, that is probably because you need to tell <tt class="calibre3"><span class="calibre_13">zsh</span></tt> to reload its path commands. To do this, issue the "rehash" command.</p><p class="calibre_4">Now run:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">iputil --cmd ip</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">This should work from within any folder, and it should print <tt class="calibre3"><span class="calibre_13">ip</span></tt> on the screen.</p><p class="calibre_4">Now that we've verified everything is alright, let's write some code for our command line arguments. If we run the script with the <tt class="calibre3"><span class="calibre_13">--cmd ip</span></tt> flags, the script should print that on the screen. This can be done with the already-familiar <tt class="calibre3"><span class="calibre_13">case</span></tt> statement. Here we also want to pass in another argument, <tt class="calibre3"><span class="calibre_13">--iface,</span></tt> to get the interface that's needed for printing the IP. It's also a good practice to add a default case and echo a message saying <tt class="calibre3"><span class="calibre_13">invalid</span></tt> argument:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">case ${CMD} in<br class="calibre6" />&nbsp;&nbsp;&nbsp; ip)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IFACE=$(getarg iface $@)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print_ip ${IFACE}<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br class="calibre6" />&nbsp;&nbsp;&nbsp; publicip)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get_public_ip<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br class="calibre6" />&nbsp;&nbsp;&nbsp; *)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Invalid argument"<br class="calibre6" />esac</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Save the script, and let's test it.</p><p class="calibre_4">First, let's get the interface name from the <tt class="calibre3"><span class="calibre_13">ifconfig</span></tt> command, and then let's go and test the script by running<a></a> this command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">iputil --cmd ip --iface wlp3s0</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000056.jpg" class="calibre_19" /></p><p class="calibre_4">We can see it's printing our private <tt class="calibre3"><span class="calibre_13">ip</span></tt> on the screen.</p><p class="calibre_4">Now let's add our last <tt class="calibre3"><span class="calibre_13">cmd</span></tt> to the script: <tt class="calibre3"><span class="calibre_13">publicip</span></tt>.</p><p class="calibre_4">For this we just call the <tt class="calibre3"><span class="calibre_13">get_public_ip</span></tt> function from our <tt class="calibre3"><span class="calibre_13">lib</span></tt> utility. Save it and run this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">iputil --cmd publicip</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">We see that the command worked; our public <tt class="calibre3"><span class="calibre_13">ip</span></tt> is printed on the screen. Here is the complete script:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">#!/bin/bash <br class="calibre6" /><br class="calibre6" />CWD=$( cd "$( dirname "${BASH_SOURCE[0]}" )/" &amp;&amp; pwd )<br class="calibre6" />cd ${CWD}<br class="calibre6" /><br class="calibre6" />source ${CWD}/lib.sh<br class="calibre6" /><br class="calibre6" />CMD=$(getarg cmd $@)<br class="calibre6" /><br class="calibre6" />case ${CMD} in<br class="calibre6" />&nbsp;&nbsp;&nbsp; publicip)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print_public_ip<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br class="calibre6" />&nbsp;&nbsp;&nbsp; ip)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IFACE=$(getarg iface $@)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print_ip $IFACE<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br class="calibre6" />&nbsp;&nbsp;&nbsp; *)<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "invalid command"<br class="calibre6" />esac</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">To give you an example, a while ago there were a bunch of articles on the Internet about a man who used to automate everything that took him more than 90 seconds to do. The scripts he wrote included<a></a> instructing the coffee machine to start making a latte, so that by the time he got to the machine, the latte was finished and he didn't need to wait. He also wrote a script that sent a text message "late at work" to his wife and automatically picked a reason from a preset list whenever there was activity with his login on the company's servers after 9 p.m.</p><p class="calibre_4">Of course, this example is a little bit complex, but in the end it's all about your imagination. Well-written automation scripts can take care of your routine work and leave you to explore your creative potential. </p><div class="mbp_pagebreak"></div><p id="calibre_link-31" class="calibre_"><span class="calibre1"><span class="bold">Chapter&nbsp;3.&nbsp;Vim kung fu</span></span></p><p class="calibre_4">Vim's default configuration is usually pretty average. In order to better use Vim's powers, we will unleash its full potential through the help of its config files. Then, we will learn to explore some keyboard shortcuts that will help us speed up our workflow. We will also look at some commonly used plugins that make Vim even better. We will see how Vim can come in handy with its option of encrypting files for storing your passwords. The chapters will end by showing how we can automate Vim and configure a work environment easily. </p><p class="calibre_4">In this chapter, we will be covering the following:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Working with Vim</li><li value="2" class="calibre_12">Exploring Plugin steroids for Vim</li><li value="3" class="calibre_12">Using the Vim password manager to store passwords</li><li value="4" class="calibre_12">Automating Vim configuration</li></ul><p class="calibre_4">When it comes to being productive in the terminal, one important aspect is to never leave the terminal! And when getting stuff done, a lot of the time we find ourselves having to edit files and opening an external (GUI) editor.</p><p class="calibre_4">Bad move!</p><p class="calibre_4">To double our productivity, we need to leave those days behind and get the job done right there, in the terminal, without opening full-fledged IDEs just to edit one simple line of text. Now, there is a lot<a></a> of debate going on about which is the best text editor for your terminal, and each one has its pros and cons. We recommend Vim, an editor which is ultra-configurable and, once mastered, can even outmatch an IDE.</p><p class="calibre_4">The first thing we need to do in order to kickstart our Vim productivity is to have a well configured <tt class="calibre3"><span class="calibre_13">vimrc</span></tt> file.</p><p id="calibre_link-32" class="calibre_4"><span class="calibre1"><span class="bold"><span class="calibre_5">Supercharging Vim</span></span></span></p><p class="calibre_4">Let's start by opening a new hidden file called <tt class="calibre3"><span class="calibre_13">.vimrc</span></tt> in our <tt class="calibre3"><span class="calibre_13">home</span></tt> folder and pasting a few lines:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">set nocompatible<br class="calibre6" />filetype off<br class="calibre6" /><br class="calibre6" />" Settings to replace tab. Use :retab for replacing tab in existing files.<br class="calibre6" />set tabstop=4<br class="calibre6" />set shiftwidth=4<br class="calibre6" />set expandtab<br class="calibre6" /><br class="calibre6" />" Have Vim jump to the last position when reopening a file<br class="calibre6" />if has("autocmd")<br class="calibre6" />&nbsp;&nbsp; au BufReadPost * if line("'\"") &gt; 1 &amp;&amp; line("'\"") &lt;= line("$") | exe "normal! g'\"" | endif<br class="calibre6" /><br class="calibre6" />" Other general vim options:<br class="calibre6" />syntax on<br class="calibre6" />set showmatch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; " Show matching brackets.<br class="calibre6" />set ignorecase&nbsp;&nbsp;&nbsp;&nbsp; " Do case insensitive matching<br class="calibre6" />set incsearch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; " show partial matches for a search phrase<br class="calibre6" />set nopaste<br class="calibre6" />set number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br class="calibre6" />set undolevels=1000</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000038.jpg" class="calibre_64" /></p><p class="calibre_4">Now let's close and reopen the file, so that we can see the configuration take effect. Let's go into a little more detail regarding some of the options.</p><p class="calibre_4">First of all, as you've probably guessed, the lines starting with <tt class="calibre3"><span class="calibre_13">"</span></tt> are comments, so they can be ignored. Lines 5, 6, and 7 tell <tt class="calibre3"><span class="calibre_13">vim</span></tt> to always use spaces instead of tabs and to set the tab size to 4 spaces. Lines 10 to 12 tell <tt class="calibre3"><span class="calibre_13">vim</span></tt> to always open a file and set the cursor in the same position as the<a></a> last time the file was open:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">syntax on</span></tt>: This enables syntax highlighting, so it is easier to read code</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">set nopaste</span></tt>: This sets <tt class="calibre3"><span class="calibre_13">nopaste</span></tt> mode, which means you can paste code without having Vim try to guess how to format it</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">set number</span></tt>: This tells Vim to always show the line numbers</li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">set undolevels=1000</span></tt>: This tells Vim to remember the last 1000 changes we made to the file, so that we can easily undo and redo</li></ul><p class="calibre_4">Now, most of these features can be easily turned on or off. Say, for example, we want to copy, paste some lines<a></a> from a file opened in Vim to another file. With this configuration, we are also going to paste the line number. What can be done is to quickly switch off the line number by typing <tt class="calibre3"><span class="calibre_13">:set nonumber</span></tt>, or, if the syntax is annoying, we can easily switch it off by running <tt class="calibre3"><span class="calibre_13">syntax off</span></tt>.</p><p class="calibre_4">Another common feature is the status line, which can be configured by pasting these options:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">" Always show the status line<br class="calibre6" />set laststatus=2<br class="calibre6" /><br class="calibre6" />" Format the status line<br class="calibre6" />set statusline=\ %{HasPaste()}%F%m%r%h\ %w\ \ CWD:\ %r%{getcwd()}%h\ \ \ Line:\ %l\ \ Column:\ %c<br class="calibre6" /><br class="calibre6" />" Returns true if paste mode is enabled<br class="calibre6" />function! Has Paste()<br class="calibre6" />&nbsp;&nbsp;&nbsp; if &amp;paste<br class="calibre6" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 'PASTE MODE&nbsp; '<br class="calibre6" />&nbsp;&nbsp;&nbsp; en&nbsp; <br class="calibre6" />&nbsp;&nbsp;&nbsp; return ''<br class="calibre6" />end function</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Close the file and open it again. Now we can see at the bottom of the page a status bar with extra information. This is also ultra-configurable, so we can put a lot of different stuff inside. This particular status bar contains the name of the file, the current directory, the line and column numbers and also the paste mode (on or off). To set it to on, we use <tt class="calibre3"><span class="calibre_13">:set paste</span></tt> and the changes will be showed in the status bar.</p><p class="calibre_4">Vim also has the option of changing the color scheme. To do this, go to /<tt class="calibre3"><span class="calibre_13">usr/share/vim/vim74/colors</span></tt> and choose a color scheme from there:</p><p class="calibre_6"><img src="images/000213.jpg" class="calibre_65" /></p><p class="calibre_4">Let's choose desert!</p><p id="calibre_link-33" class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_9">Color scheme desert</span></span></span></p><p class="calibre_4">Close and reopen the file; you will see it's not that different from the previous color theme. If we want a<a></a> more radical one, we can set the color scheme to blue, which will drastically change the way Vim looks. But during the rest of this course,<a></a> we will stick to <span class="bold">desert</span>.</p><p class="calibre_4">Vim can also be supercharged with the help of external tools. In the world of programming, we often find ourselves editing JSON files and that can be a very difficult task if the JSON is not indented. There is a Python module that we can use to automatically indent JSON files and Vim can be configured to use it internally. All we need to do is to open the configuration file and paste the following line:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">map j !python -m json.tool&lt;CR&gt;</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Essentially this is telling Vim that, when in visual mode, if we press <span class="italic">J</span>, it should call Python with the selected text. Let's manually write a <tt class="calibre3"><span class="calibre_13">json</span></tt> string, go to visual mode by pressing <span class="italic">V</span>, select the text using our arrows, and hit <span class="italic">J</span>.</p><p class="calibre_4">And, with no extra packages, we added a JSON formatting shortcut:</p><p class="calibre_6"><img src="images/000162.jpg" class="calibre_66" /></p><p class="calibre_4">We can do the<a></a> same thing for <tt class="calibre3"><span class="calibre_13">xml</span></tt> files, but first we need to install a tool for working with them:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install libxml2-utils</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000008.jpg" class="calibre_67" /></p><p class="calibre_4">To install the XML utility package, we must add the following line to our configuration file:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">map l !xmllint --format --recover -&lt;CR&gt;</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">This maps the <span class="italic">L</span> key when in visual mode to <tt class="calibre3"><span class="calibre_13">xmllint</span></tt>. Let's write a HTML snippet, which is actually a valid <tt class="calibre3"><span class="calibre_13">xml</span></tt> file, hit <tt class="calibre3"><span class="calibre_13">V</span></tt> for visual mode, select the text, and press <span class="italic">L</span>.</p><p class="calibre_4">This type of extension (and also spell checkers, linters, dictionaries, and much more) can be brought to Vim and be instantly available to use.</p><p class="calibre_4">A well configured <tt class="calibre3"><span class="calibre_13">vim</span></tt> file can spare you a lot of time in the command line. Although it might take some time<a></a> in the beginning to get things set up and to find the configuration that is right for you, this investment can pay off bigtime in the future, as time passes and we spend more and more time in Vim. A lot of times we don't even have the luxury of opening a GUI editor, like when working remotely through an <tt class="calibre3"><span class="calibre_13">ssh</span></tt> session. Believe it or not, command line editors are life savers and productivity is hard to achieve without them.</p><div class="mbp_pagebreak"></div><p id="calibre_link-34" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Keyboard kung fu</span></span></span></p><p class="calibre_4">Now that we have Vim all set up, it's time to learn some more command line shortcuts. The first thing we will<a></a> be looking at is indentation.</p><p class="calibre_4">Indentation can be done in Vim by going into visual mode and typing <span class="italic">V</span> for selecting portions of text or <span class="italic">V</span> for selecting full lines, followed by <span class="italic">&gt;</span> or <span class="italic">&lt;</span> to indent right or left. Afterwards press <tt class="calibre3"><span class="calibre_13">.</span></tt> to repeat<a></a> the last operation:</p><p class="calibre_6"><img src="images/000072.jpg" class="calibre_68" /></p><p class="calibre_4">Any operation can be undone by hitting <tt class="calibre3"><span class="calibre_13">u</span></tt> and can then be redone by hitting <span class="italic">Ctrl</span> + <span class="italic">R</span> (as in undo and redo). This is the equivalent of <span class="italic">Ctrl</span> + <span class="italic">Z</span> and <span class="italic">Ctrl</span> + <span class="italic">Shift</span> + <span class="italic">Z</span> in most popular editors.</p><p class="calibre_4">When in visual mode, we have the option of changing the case of letters by hitting <span class="italic">U</span> to make all text upper case, <span class="italic">u</span> for lower case and <span class="italic">~</span> to reverse current case:</p><p class="calibre_6"><img src="images/000030.jpg" class="calibre_69" /></p><p class="calibre_4">Other handy shortcuts are:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">G</span></tt>: Go to end of file</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">gg</span></tt>: Go to start of file</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">Select all</span></tt>: This is not really a shortcut, but a combination of commands: <tt class="calibre3"><span class="calibre_13">gg V G</span></tt>, as in go to start of file, select full line, and move to the end.</li><a></a></ul><p class="calibre_4">Vim also has a handy shortcut for opening man pages for the word under the cursor. Just hit K and a man page will show up for that specific word (if there is one, that is):</p><p class="calibre_6"><img src="images/000069.jpg" class="calibre_70" /></p><p class="calibre_4">Finding text in Vim is as easy as hitting <span class="italic">/</span>. Just type <span class="italic">/</span>
<span class="italic">+</span> the text to find, and hit <span class="italic">Enter</span> to start searching. Vim will go to the first occurrence of that text. Hit <tt class="calibre3"><span class="calibre_13">n</span></tt> for next occurrence, <span class="italic">N</span> for previous occurrence.</p><p class="calibre_4">Our favorite editor<a></a> has a powerful find and replace feature, similar to the <tt class="calibre3"><span class="calibre_13">sed</span></tt> command. Let's say we want to replace all occurrences of the string <tt class="calibre3"><span class="calibre_13">CWD</span></tt> with the string <tt class="calibre3"><span class="calibre_13">DIR</span></tt>. For this, just type:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">:1,$s/CWD/DIR/g</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">:1,$ - start from line one, till the end of the file</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">s - substitute </span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">/CWD/DIR/ - replace CWD with DIR</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">g - global, replace all occurrences.</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000190.jpg" class="calibre_35" /></p><p class="calibre_4">Let's do another<a></a> common example that often comes up in programming: commenting lines of code. Let's say that we want to comment out lines 10 to 20 in a shell script. To do this, type:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">:10,20s/^/#\ /g</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000035.jpg" class="calibre_71" /></p><p class="calibre_6"><img src="images/000039.jpg" class="calibre_72" /></p><p class="calibre_4">This means substitute the beginning of the line with # and space. For deleting lines of text, type:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">:30,$d</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">This will delete<a></a> everything from line 30 till the end.</p><p class="calibre_4">More information about regular expressions can be found in the chapters. Also check out the parts on <tt class="calibre3"><span class="calibre_13">sed</span></tt> for more text manipulation examples. These commands are some of the longest in Vim and often we get them wrong. To edit the command we just wrote and run it again, we can open the command history by hitting <span class="italic">q:</span>, navigate to the line containing the command to edit, press Insert, update the line, and press <span class="italic">Esc</span> and <span class="italic">Enter</span> to run the command. It's as simple as that!</p><p class="calibre_6"><img src="images/000037.jpg" class="calibre_73" /></p><p class="calibre_4">Another operation that is often useful is sorting. Let's create a file with unsorted lines of text from the classic lorem ipsum text:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">cat lorem.txt | tr " " "\n" | grep -v "^\s*$" | sed "s/[,.]//g" &gt; sort.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000171.jpg" class="calibre_74" /></p><p class="calibre_4">Open <tt class="calibre3"><span class="calibre_13">sort.txt</span></tt> and <tt class="calibre3"><span class="calibre_13">run :sort</span></tt>. We see that the lines are all sorted alphabetically.</p><p class="calibre_6"><img src="images/000202.jpg" class="calibre_75" /></p><p class="calibre_4">Now let's move forward<a></a> to window management. Vim has the option to split the screen for editing files in parallel. Just write <tt class="calibre3"><span class="calibre_13">:split</span></tt> for horizontal split, and <tt class="calibre3"><span class="calibre_13">:vsplit</span></tt> for vertical split:</p><p class="calibre_6"><img src="images/000096.jpg" class="calibre_76" /></p><p class="calibre_6"><img src="images/000027.jpg" class="calibre_19" /></p><p class="calibre_4">When Vim splits the screen, it opens the same file in the other pane; to open another file just hit <tt class="calibre3"><span class="calibre_13">:e</span></tt>. The good<a></a> thing here is that we have autocomplete, so we can just hit <span class="italic">Tab</span> and Vim will start writing filenames for us. If we don't know what files we want to choose, we can just run any arbitrary shell command directly from Vim and come back once we've finished. For example, when we type <tt class="calibre3"><span class="calibre_13">:!ls,</span></tt> the shell opens, shows us the output of the command, and waits until we hit <span class="italic">Enter</span> to come back to the file.</p><p class="calibre_4">When in split mode, press <span class="italic">Ctrl</span> + <span class="italic">W</span> to switch between windows. To close a window, press <tt class="calibre3"><span class="calibre_13">:q</span></tt>. If you want to save a file under a different name (think of the <tt class="calibre3"><span class="calibre_13">save as</span></tt> command from other editors), just hit <tt class="calibre3"><span class="calibre_13">:w</span></tt> followed by the new file name, say <tt class="calibre3"><span class="calibre_13">mycopy.txt</span></tt>.</p><p class="calibre_4">Vim also has the option of opening multiple files at once; just specify a list of files after the <tt class="calibre3"><span class="calibre_13">vim</span></tt> command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">vim file1 file2 file3</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">After the files are open, use <tt class="calibre3"><span class="calibre_13">:bn</span></tt> to move to the next file. To close all the files, hit <tt class="calibre3"><span class="calibre_13">:qa</span></tt>.</p><p class="calibre_4">Vim also has an built in explorer. Just open Vim and hit <tt class="calibre3"><span class="calibre_13">:Explore</span></tt>. After this, we can navigate through the directory layout and we can open new files:</p><p class="calibre_6"><img src="images/000074.jpg" class="calibre_77" /></p><p class="calibre_4">It also has a different option. Let's open a file, delete one of the lines, and save it under a new name. Exit and open the two files with <tt class="calibre3"><span class="calibre_13">vimdiff</span></tt>. Now we can see the differences between them visually. This applies to all sorts of changes and is way better than the plain old diff command output.</p><p class="calibre_4">Keyboard shortcuts really make a difference and open a whole new world of possibilities when using Vim. It's kind<a></a> of hard to remember in the beginning, but once you start using them, it will be as simple as clicking a button.</p><div class="mbp_pagebreak"></div><p id="calibre_link-35" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Plugin steroids for Vim</span></span></span></p><p class="calibre_4">In this section, we will be looking at how we can add external plugins to Vim. Vim has its own programming<a></a> language for writing plugins, which we saw a glimpse of when writing the <tt class="calibre3"><span class="calibre_13">vimrc</span></tt> file. Luckily, we won't have to learn all of that because most of<a></a> the stuff we can think of already has a plugin out there. To manage plugins, let's install the<a></a> plugin manager pathogen. Open: <a href="https://github.com/tpope/vim-pathogen">https://github.com/tpope/vim-pathogen</a>.</p><p class="calibre_4">Follow the installation instructions. As you can see, it's a one-line command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">mkdir -p ~/.vim/autoload ~/.vim/bundle &amp;&amp; \curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">And after it finishes, add pathogen to your <tt class="calibre3"><span class="calibre_13">.vimrc</span></tt>:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">execute pathogen#infect()</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Most IDEs show<a></a> a tree layout of the folder structure, in parallel with the<a></a> open files. Vim can do this also, and the simplest way to achieve this<a></a> is by installing the plugin called <span class="bold">NERDtree</span>.</p><p class="calibre_4">Open: <a href="https://github.com/scrooloose/nerdtree">https://github.com/scrooloose/nerdtree</a>, and follow the instructions for installing it:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">cd ~/.vim/bundle git clone https://github.com/scrooloose/nerdtree.git</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Now we should be all set. Let's open a file and type <tt class="calibre3"><span class="calibre_13">:NERDtree</span></tt>. We see the tree-like structure of our<a></a> current folder here, where we can browse and open new files. If we want Vim to replace our IDE, this is certainly a mandatory plugin!</p><p class="calibre_6"><img src="images/000178.jpg" class="calibre_78" /></p><p class="calibre_4">Another awesome plugin<a></a> that comes in really handy is called <span class="bold">Snipmate</span> and is used for<a></a> writing code snippets. To install it, go to this link and follow the instructions: <a href="https://github.com/garbas/vim-snipmate">https://github.com/garbas/vim-snipmate</a>.</p><p class="calibre_6"><img src="images/000205.jpg" class="calibre_79" /></p><p class="calibre_4">As we can see, before installing <tt class="calibre3"><span class="calibre_13">snipmate</span></tt>, there is another set of plugins that needs to be installed:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">git clone https://github.com/tomtom/tlib_vim.git</span></tt></li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">git clone https://github.com/MarcWeber/vim-addon-mw-utils.git</span></tt></li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">git clone https://github.com/garbas/vim-snipmate.git</span></tt></li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">git clone https://github.com/honza/vim-snippets.git</span></tt></li></ul><p class="calibre_4">If we take a look at the readme, we can see an example for C files, which has auto completion for the <tt class="calibre3"><span class="calibre_13">for</span></tt> keyword. Let's open a file with a <tt class="calibre3"><span class="calibre_13">.c</span></tt> extension, type <tt class="calibre3"><span class="calibre_13">for</span></tt> and hit <span class="italic">Tab</span>. We can see<a></a> the autocomplete working.</p><p class="calibre_4">We have also<a></a> installed the <tt class="calibre3"><span class="calibre_13">vim-snipmate</span></tt> package, which comes with lots of snippets for different languages. If we take a look at <tt class="calibre3"><span class="calibre_13">~/.vim/bundle/vim-snippets/snippets/</span></tt>, we can see lots of snippet files:</p><p class="calibre_6"><img src="images/000103.jpg" class="calibre_80" /></p><p class="calibre_4">Let's check<a></a> the <tt class="calibre3"><span class="calibre_13">javascript</span></tt> one:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">vim ~/.vim/bundle/vim-snippets/snippets/javascript/javascript.snippets</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000168.jpg" class="calibre_19" /></p><p class="calibre_4">Here we can see all the snippets available. Type <tt class="calibre3"><span class="calibre_13">fun</span></tt> and hit <span class="italic">Tab</span> for the function autocomplete. The snippets are preconfigured with variables so that you can write a function name and<a></a> hit <span class="italic">Tab</span> to go to the next variable to complete. There is a snippet<a></a> for writing if-else blocks, one for writing <tt class="calibre3"><span class="calibre_13">console.log,</span></tt> and lots of others for common code blocks. The best way to learn them is to go through the file and start using the snippets.</p><p class="calibre_4">There are lots of plugins out there. People have made all<a></a> sorts of plugin packs that are guaranteed to put your Vim on steroids. One cool project is <a href="http://vim.spf13.com/">http://vim.spf13.com/</a>
</p><p class="calibre_4">It's nicknamed the ultimate Vim plugin pack and it basically has plugins and keyboard shortcuts for everything. This is for more advanced users, so be sure to understand the basic concepts before jumping to plugin packs. Remember, the best way to learn is to install plugins manually and play with them one by one.</p><div class="mbp_pagebreak"></div><p id="calibre_link-36" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Vim password manager</span></span></span></p><p class="calibre_4">Vim can also be<a></a> used to safely store information, by encrypting text files with different <tt class="calibre3"><span class="calibre_13">cryp</span></tt> methods. To see the <tt class="calibre3"><span class="calibre_13">cryp</span></tt> method that Vim is currently using, type:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">:set cryptmethod?</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">We can see in our case it is <tt class="calibre3"><span class="calibre_13">zip</span></tt>, which is not actually a <tt class="calibre3"><span class="calibre_13">crypto</span></tt> method and does not offer much in terms<a></a> of security. To see what different alternatives we have, we can type:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">:h 'cryptmethod'</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000112.jpg" class="calibre_81" /></p><p class="calibre_4">A page describing the different encryption methods comes up. We can choose from <tt class="calibre3"><span class="calibre_13">zip</span></tt>, <tt class="calibre3"><span class="calibre_13">blowfish,</span></tt> and <tt class="calibre3"><span class="calibre_13">blowfish2</span></tt>.The most secure and recommended one is, of course, <tt class="calibre3"><span class="calibre_13">blowfish2</span></tt>. To change the encryption method, type:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">:set cryptmethod=blowfish2</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">This can be also added to <tt class="calibre3"><span class="calibre_13">vimrc</span></tt> so that it becomes the default encryption. Now we can safely encrypt files using Vim.</p><p class="calibre_4">A common scenario would be storing a passwords file.</p><p class="calibre_4">Let's open up a new<a></a> file named <tt class="calibre3"><span class="calibre_13">passwords.txt</span></tt>, add some dummy passwords inside, and save it. The next step is to encrypt the file with a password, and for this we type <tt class="calibre3"><span class="calibre_13">:X</span></tt>.</p><p class="calibre_4">Vim will prompt you for a password twice. If you exit without saving the file, the encryption will not be applied. Now, encrypt it again, save, and exit the file.</p><p class="calibre_4">When we reopen it, Vim will ask for the same password. If we get this wrong, Vim will show some random characters that come from the failed decryption. Only if we type the correct password<a></a> will we get the actual file content:</p><p class="calibre_6"><img src="images/000188.jpg" class="calibre_82" /></p><p class="calibre_4">Saving encrypted files with Vim, combined with backing up the file in places like a private <tt class="calibre3"><span class="calibre_13">git</span></tt> repository or a private Dropbox folder, can be an effective way of storing your passwords:</p><p class="calibre_6"><img src="images/000070.jpg" class="calibre_83" /></p><p class="calibre_4">It also has the benefit that it's sort of a unique method of storing passwords, compared to using online services that are pretty standard and might get compromised. This can also be referred to as <span class="italic">security throug</span>
<span class="italic">h obscurity</span>.</p><div class="mbp_pagebreak"></div><p id="calibre_link-37" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Instant configuration restoring</span></span></span></p><p class="calibre_4">The configuration we have seen in this chapter might take some time to set up manually, but, once everything<a></a> is configured, we can create a script that will restore the Vim configuration instantly.</p><p class="calibre_4">For this, we paste all the commands issued up to now into a bash script that can be run to bring Vim to the exact same configuration. All that is missing from this script is the <tt class="calibre3"><span class="calibre_13">vimrc</span></tt> file from the <tt class="calibre3"><span class="calibre_13">home</span></tt> folder, which we can also restore through a technique called heredocs. Just type cat, redirect the output<a></a> to <tt class="calibre3"><span class="calibre_13">vimrc</span></tt>, and use heredoc as input, delimited by <tt class="calibre3"><span class="calibre_13">eof</span></tt>:</p><p class="calibre_6"><img src="images/000073.jpg" class="calibre_84" /></p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">cat &gt; ~/.vimrc &lt;&lt; EOF</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">...</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">&lt;vimrc content&gt;</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">...</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">EOF</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Using heredocs is a common technique for manipulating large chunks of text inside bash scripts. Basically it treats a section of code like a separate file (in our case everything after the cat and until the EOF). With this script, we can restore all the Vim configurations we have done and we can also run it on any computer we work on, so that we get our Vim set up in no time!</p><p class="calibre_4">We hope you have<a></a> enjoyed this material and see you in the chapter!</p><div class="mbp_pagebreak"></div><p id="calibre_link-38" class="calibre_"><span class="calibre1"><span class="bold">Chapter&nbsp;4.&nbsp;CLI &ndash; The Hidden Recipe</span></span></p><p class="calibre_4">This chapter will start by focusing on sed, one of the tools that can scare a lot of Linux users. We will look at some basic <tt class="calibre3"><span class="calibre_13">sed</span></tt> commands that could make hours of refractor turn into a few minutes. We will see how you can locate any file by using Linux puter. Furthermore, we will see just how remote work will get a whole lot better when Tmux enters our skill set. You can run long lasting commands, split screens, and never lose your work with the help of the best terminal multiplexor. Then, you will learn how to discover and interact with your network with the help of commands like netstat and nmap. Lastly, we will see how Autoenv helps switch environments automatically and how to use rm command to interact with trash from command line using the trash utility.</p><p class="calibre_4">In this chapter, we will cover the following:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Understanding the working of sed</li><li value="2" class="calibre_12">Working with tmux, a terminal multiplexer</li><li value="3" class="calibre_12">Automatically switching environments using Autoenv </li><li value="4" class="calibre_12">Using rm command line to remove (delete) files or directories</li></ul><p id="calibre_link-39" class="calibre_4"><span class="calibre1"><span class="bold"><span class="calibre_5">Sed &ndash; one-liner productivity treasure</span></span></span></p><p class="calibre_4">If a picture is worth 1000 words, then sed one liners are definitely worth a thousand lines of code! One of the<a></a> most feared commands in the Linux CLI is, you guessed it, sed! It's been feared by programmers and sysadmins everywhere, because of it's cryptic usage, but it can serve as a very powerful tool for quickly editing large amounts of data.</p><p class="calibre_4">We have created five files to help demonstrate the power of this awesome tool. The first one is a simple file containing the humble line of text: <span class="italic">Orange is the new black</span>. Let's start by creating a simple <tt class="calibre3"><span class="calibre_13">sed</span></tt> command to replace the word <span class="italic">black</span> with <span class="italic">white</span>.</p><p class="calibre_4">The first argument of sed is the replace command. It's divided into 3 parts by 3 <tt class="calibre3"><span class="calibre_13">/</span></tt>. The first part is <tt class="calibre3"><span class="calibre_13">s</span></tt> for substitute, the second part is the word to be replaced, <tt class="calibre3"><span class="calibre_13">black</span></tt>, in our case, and the third part is the replacement word, <tt class="calibre3"><span class="calibre_13">white</span></tt>.</p><p class="calibre_4">The second argument is the input, in our case, a file:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed "s/black/white/" 1.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000189.jpg" class="calibre_85" /></p><p class="calibre_4">Now, the result will be printed on the screen, and you can see the word black has been replaced by white.</p><p class="calibre_4">Our second example contains yet another line of text, this time with the word black in both upper and<a></a> lower case. If we run the same command using this new file, we will see that it replaces only the word that matches the case. If we want to do a case insensitive replace, we will add two more characters to the end of our <tt class="calibre3"><span class="calibre_13">sed</span></tt> command; <tt class="calibre3"><span class="calibre_13">g</span></tt> and <tt class="calibre3"><span class="calibre_13">l</span></tt>.</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">g</span></tt>: It means global replace, used for replacing all the occurrences in the file. Without this, it will only replace the first argument.</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">l</span></tt>: means case insensitive search.<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed "s/black/white/gI" 2.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_48"><img src="images/000036.jpg" class="calibre_86" /></p></li></ul><p class="calibre_4">And as you can see, both words have been replaced. If we want to save the results in our file instead of printing to the screen, we use the <tt class="calibre3"><span class="calibre_13">-i</span></tt> argument, which stands for inline replace.</p><p class="calibre_4">In some scenarios, we might<a></a> also want to save our initial files, just in case we have an error in the <tt class="calibre3"><span class="calibre_13">sed</span></tt> command. To do this, we specify a suffix after <tt class="calibre3"><span class="calibre_13">-i</span></tt> which will create a backup file. In our case, we use the <tt class="calibre3"><span class="calibre_13">.bak</span></tt> suffix:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed -i.bak "s/black/white/g" 2.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000062.jpg" class="calibre_87" /></p><p class="calibre_4">If we check the content of the files, we can see that the initial file contains the updated text, and the backup<a></a> file contains the original text.</p><p class="calibre_4">Now, let's look at a more practical example. Let's say we have a shell script that contains multiple variables and we want to surround our variables with curly brackets:</p><p class="calibre_6"><img src="images/000119.jpg" class="calibre_88" /></p><p class="calibre_4">In order to do this we will write:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">s</span></tt>: It's for substitute.</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">g</span></tt>: It's for global; meaning replace all occurrences found.</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">\$</span></tt>: This matches all strings starting with the dollar sign. Here dollar needs to be escaped, so that it's not confused with the <span class="italic">start of the row</span> anchor.</li><li value="4" class="calibre_12">We will enclose the string following <tt class="calibre3"><span class="calibre_13">$</span></tt> in (<tt class="calibre3"><span class="calibre_13">
</span></tt>), so that we can reference it in the replace part of our command.</li><li value="5" class="calibre_12"><tt class="calibre3"><span class="calibre_13">[ ]</span></tt>: This is for specifying a range of characters</li><li value="6" class="calibre_12"><tt class="calibre3"><span class="calibre_13">A-Z</span></tt>: It matches all uppercase characters</li><li value="7" class="calibre_12"><tt class="calibre3"><span class="calibre_13">0-9</span></tt>: It matches all numbers</li><li value="8" class="calibre_12"><tt class="calibre3"><span class="calibre_13">_</span></tt>: It matches <tt class="calibre3"><span class="calibre_13">_</span></tt></li><li value="9" class="calibre_12"><tt class="calibre3"><span class="calibre_13">\+</span></tt>: Any character in the <tt class="calibre3"><span class="calibre_13">[ ]</span></tt> must appear one or multiple times</li></ul><p class="calibre_4">In the<a></a> replace part, we will use:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">\$</span></tt>: The dollar sign</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">{ }</span></tt>: The curly brackets we want to add.</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">\1</span></tt>: The string that was previously matched in the ( )<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed 's/\$\([A-Z0-9_]\+\)/\${\1}/g' 3.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_48"><img src="images/000031.jpg" class="calibre_89" /></p></li></ul><p class="calibre_4">Other common scenarios are replacing content in <tt class="calibre3"><span class="calibre_13">xml</span></tt> or <tt class="calibre3"><span class="calibre_13">html</span></tt> files.</p><p class="calibre_4">Here we have a basic html file with a <tt class="calibre3"><span class="calibre_13">&lt;strong&gt;</span></tt> text inside. Now, we know that the <tt class="calibre3"><span class="calibre_13">&lt;strong&gt;</span></tt> text has more semantic value for search engine optimizations, so maybe we want to make our strong<a></a> tags be a simple <tt class="calibre3"><span class="calibre_13">&lt;b&gt;</span></tt> (bold), and manually decide the <tt class="calibre3"><span class="calibre_13">&lt;strong&gt;</span></tt> words in the page. For this we say:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">s</span></tt>: This is for substitute.</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">&lt;strong</span></tt>: The actual text we are searching for.</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">\( \)</span></tt>: This will be used again for selecting a piece of text, that will be added back.</li><li value="4" class="calibre_12"><tt class="calibre3"><span class="calibre_13">.*</span></tt>: This means any character, found any number of times. We want to select everything between "<tt class="calibre3"><span class="calibre_13">&lt;strong</span></tt>" and "<tt class="calibre3"><span class="calibre_13">strong&gt;</span></tt>".</li><li value="5" class="calibre_12"><tt class="calibre3"><span class="calibre_13">&lt;/</span></tt>: This is the closing of the tag. This, we want to keep intact.</li><li value="6" class="calibre_12"><tt class="calibre3"><span class="calibre_13">&lt;b\1b&gt;</span></tt>: Just add <tt class="calibre3"><span class="calibre_13">&lt;b b&gt;</span></tt>, and the text that you previously found in the <tt class="calibre3"><span class="calibre_13">( )</span></tt>.<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed "s/&lt;strong\(.*&lt;/\)strong&gt;/&lt;b\1b&gt;/g" 4.xml</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_48"><img src="images/000141.jpg" class="calibre_90" /></p></li></ul><p class="calibre_4">As you can see, the text was updated correctly, the <tt class="calibre3"><span class="calibre_13">red</span></tt> class still applies to the new tag, and the old text is still contained between our tags, which is exactly what we wanted:</p><p class="calibre_6"><img src="images/000191.jpg" class="calibre_91" /></p><p class="calibre_4">Besides replacing, sed can also<a></a> be used for deleting lines of text. Our <tt class="calibre3"><span class="calibre_13">5.txt</span></tt> file contains all the words from the <tt class="calibre3"><span class="calibre_13">lorem ipsum</span></tt> text. If we wanted to delete the third line of text, we would issue the command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed -i 3d 5.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Hit <span class="italic">:e, </span>to reload the file in vim, and we see the word <tt class="calibre3"><span class="calibre_13">dolor</span></tt> is no longer there. If, for example, we wanted to delete the first 10 lines of the file, we'd simply run:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed -i 1,10d 5.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Hit <span class="italic">:e</span>, and you see the<a></a> lines are no longer there. For our last example, if we scroll down, we can see multiple empty lines of text. These can be deleted with:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sed -i "/^$/d" 5.txt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000122.jpg" class="calibre_92" /></p><p class="calibre_4">Which stands for:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">^</span></tt>: Beginning of line anchor</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">$</span></tt>: End of line anchor</li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">d</span></tt>: Delete</li></ul><p class="calibre_4">Reload the file, and you see that the lines are no longer there.</p><p class="calibre_4">Now, as you can imagine, these have only been some basic examples. The power of sed is much greater than this, and there are many more possibilities of using it than what we have seen today. We recommend that you gain a good understanding of the features presented here today, as these are the features you will probably use the most. It's not as complicated as it might seem at first, and it really comes in handy in lots of scenarios.</p><div class="mbp_pagebreak"></div><p id="calibre_link-40" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">You can run, but you can't hide… from find</span></span></span></p><p class="calibre_4">Tens of projects, hundreds of folders and thousands of file; does this scenario sound familiar? If the answer is <span class="italic">yes</span>, then you probably found yourself more than once in a situation where<a></a> you couldn't find a specific file. The <tt class="calibre3"><span class="calibre_13">find</span></tt> command will<a></a> help us locate any file in our project and much more. But first, for creating a quick playground, let's download the electron open source project from GitHub:</p><p class="calibre_4">Git clone <a href="https://github.com/electron/electron">https://github.com/electron/electron</a>
</p><p class="calibre_4">And <tt class="calibre3"><span class="calibre_13">cd</span></tt> into it:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">cd electron</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">We see here lots of different files and folders, just like in any normal sized software project. In order to find a particular file, let's say <tt class="calibre3"><span class="calibre_13">package.json</span></tt>, we will use:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -name package.json</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000075.jpg" class="calibre_93" /></p><p class="calibre_4">
<tt class="calibre3"><span class="calibre_13">.</span></tt>: This starts the search in the current folder</p><p class="calibre_4">
<tt class="calibre3"><span class="calibre_13">-name</span></tt>: This helps to search the file name</p><p class="calibre_4">If we were to look<a></a> for all readme files in the project, the previous command format is not helpful. We need to issue a case insensitive find. For demonstration purposes, we will also create a <tt class="calibre3"><span class="calibre_13">readme.md</span></tt> file:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">touch lib/readme.md</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">We will also use the <tt class="calibre3"><span class="calibre_13">-iname</span></tt> argument for case insensitive search:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -iname readme.md</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000175.jpg" class="calibre_94" /></p><p class="calibre_4">You see here that both <tt class="calibre3"><span class="calibre_13">readme.md</span></tt> and <tt class="calibre3"><span class="calibre_13">README.md</span></tt> have been found. Now, if we were to search for all JavaScript files we would use:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -name "*.js"</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000023.jpg" class="calibre_95" /></p><p class="calibre_4">And as you can see, there are<a></a> quite a few results. For narrowing down our results, let's limit the find to the <tt class="calibre3"><span class="calibre_13">default_app</span></tt> folder:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find default_app -name "*.js"</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000104.jpg" class="calibre_96" /></p><p class="calibre_4">As you can see, there are only two <tt class="calibre3"><span class="calibre_13">js</span></tt> files in this folder. And if we were to find all files that are<a></a> not JavaScript, just add a <tt class="calibre3"><span class="calibre_13">!</span></tt> mark before the name argument:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find default_app ! -name "*.js"</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000164.jpg" class="calibre_97" /></p><p class="calibre_4">You can see here all<a></a> files that don't end their name with <tt class="calibre3"><span class="calibre_13">js</span></tt>. If we were to look for all inodes in the directory, which are of type file, we would use the <tt class="calibre3"><span class="calibre_13">-type f</span></tt> argument:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find lib -type f</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000067.jpg" class="calibre_98" /></p><p class="calibre_4">In the<a></a> same way, we'd use <tt class="calibre3"><span class="calibre_13">-type d</span></tt> to find all directories in a specific location:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find lib -type d</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000128.jpg" class="calibre_99" /></p><p class="calibre_4">Find can also locate files<a></a> based on time identifiers. For example, in order to find all files in the <tt class="calibre3"><span class="calibre_13">/usr/share</span></tt> directory that were modified in the last 24 hours, issue the following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find /usr/share -mtime -1</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000177.jpg" class="calibre_100" /></p><p class="calibre_4">I have quite a big list. You can see the <tt class="calibre3"><span class="calibre_13">-mtime -3</span></tt> broadens the list<a></a> even more.</p><p class="calibre_4">If we were to find, for example, all the files modified in the last hour, we can use <tt class="calibre3"><span class="calibre_13">-mmin -60</span></tt>:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find ~/.local/share -mmin -60</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000149.jpg" class="calibre_101" /></p><p class="calibre_4">A good folder to search is <tt class="calibre3"><span class="calibre_13">~/.local/share</span></tt>, If we use <tt class="calibre3"><span class="calibre_13">-mmin -90</span></tt>, the list broadens again.</p><p class="calibre_4">Find can also show us<a></a> the list of files accessed in the last 24 hours by using the <tt class="calibre3"><span class="calibre_13">-atime -1</span></tt> argument like so:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find ~/.local/share -atime -1</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000208.jpg" class="calibre_92" /></p><p class="calibre_4">While working with lots of project files, if sometimes the case in some projects remain empty, and we forget<a></a> to delete them. In order to locate all empty files just do a:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -empty</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000066.jpg" class="calibre_92" /></p><p class="calibre_4">As we can see, electron has a few empty files. Find will also show us empty directories, or links.</p><p class="calibre_4">Removing empty files will keep our project clean, but when it comes to reducing size, we sometimes want to<a></a> know which files are taking up most of the space. Find can also do searches based on file size. For example, let's find all the files larger than <tt class="calibre3"><span class="calibre_13">1</span></tt> mega:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -size +1M</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">use -1M for smaller.</p><p class="calibre_4">As we said in the beginning, find can do much more than locating files in your project. Using the <tt class="calibre3"><span class="calibre_13">-exec</span></tt> argument, it can be combined with almost any other command, which gives it almost infinite capabilities. For example, if we want to find all <tt class="calibre3"><span class="calibre_13">javascript</span></tt> files that contain the text <tt class="calibre3"><span class="calibre_13">manager</span></tt>, we can combine find with <tt class="calibre3"><span class="calibre_13">grep</span></tt>, command as follows:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -name "*.js" -exec grep -li 'manager' {} \;</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000157.jpg" class="calibre_102" /></p><p class="calibre_4">This will execute the grep command on all the files returned by find. Let's also search inside the file using vim, so that we verify the result is correct. As you can see, the text "manager" appears in<a></a> this file. You don't have to worry about <tt class="calibre3"><span class="calibre_13">{} \;</span></tt>, it's just standard -exec syntax.</p><p class="calibre_4">Moving on with the practical examples, let's say you have a folder where you want to remove all the files modified in the last 100 days. We can see our <tt class="calibre3"><span class="calibre_13">default_app</span></tt> folder contains such files. If we combine find with <tt class="calibre3"><span class="calibre_13">rm</span></tt> like so:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find default_app -mtime -100 -exec rm -rf {} \;</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">We can do a quick cleanup. Find can be used for smart backups. For example, if we were to backup all <tt class="calibre3"><span class="calibre_13">json</span></tt> files in the project we would combine find with the <tt class="calibre3"><span class="calibre_13">cpio</span></tt> backup utility using a pipe and a standard output redirection:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -name "*.json" | cpio -o &gt; backup.cpio</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000174.jpg" class="calibre_103" /></p><p class="calibre_4">We can see that this command has created a <tt class="calibre3"><span class="calibre_13">backup.cpio</span></tt> file, of type <tt class="calibre3"><span class="calibre_13">cpio</span></tt> archive.</p><p class="calibre_4">Now this could probably have been written with <tt class="calibre3"><span class="calibre_13">-exec</span></tt> also, but it's critical you understand that pipes can also be used in this type of scenario, together with redirects.</p><p class="calibre_4">When doing reports, you may have to count the number of lines written:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">In order to do this, we combine find with <tt class="calibre3"><span class="calibre_13">wc -l</span></tt>:<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -iname "*.js" -exec wc -l {} \; </span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote></li><li value="2" class="calibre_21">This will give us all <tt class="calibre3"><span class="calibre_13">js</span></tt> files and the number of lines. We can pipe this to cut:<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -iname "*.js" -exec wc -l {} \; | cut -f 1 -d ' ' </span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote></li><li value="3" class="calibre_21">To only output the number of lines, and then pipe to the paste command, we do this:<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -iname "*.js" -exec wc -l {} \; | cut -f 1 -d ' ' | paste -sd+ </span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote></li><li value="4" class="calibre_21">The above will merge all our lines with the <tt class="calibre3"><span class="calibre_13">+</span></tt> sign as a delimiter. This, of course, can translate to an arithmetic operation, which we can calculate using the binary calculator (<tt class="calibre3"><span class="calibre_13">bc</span></tt>):<blockquote class="calibre_47"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -iname "*.js" -exec wc -l {} \; | cut -f 1 -d ' ' | paste -sd+ | bc</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_48"><img src="images/000116.jpg" class="calibre_104" /></p></li></ul><p class="calibre_4">This last command will tell us how many lines our <tt class="calibre3"><span class="calibre_13">javascript</span></tt> files contain. Of course, these are not<a></a> actual lines of code, as they can be empty lines or comments. For a precise calculation of lines of code, you can use the <tt class="calibre3"><span class="calibre_13">sloc</span></tt> utility.</p><p class="calibre_4">In order to mass rename files, like changing the file extension name to <tt class="calibre3"><span class="calibre_13">node</span></tt> for all <tt class="calibre3"><span class="calibre_13">js</span></tt> files we can use this command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -type f -iname "*.js" -exec rename "s/js$/node/g" {} \;</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">You can see the rename syntax is quite similar to sed. In addition, there are no more <tt class="calibre3"><span class="calibre_13">.js</span></tt> files left, as all have been renamed to <tt class="calibre3"><span class="calibre_13">.node</span></tt>:</p><p class="calibre_6"><img src="images/000121.jpg" class="calibre_105" /></p><p class="calibre_4">Some software projects require all source code files to have a copyright header. As this is not required in the beginning, often times we can find ourselves in the situation that we have to add copyright<a></a> information at the beginning of all our files.</p><p class="calibre_4">In order to do this, we can combine find with sed like this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -name "*.node" -exec sed -i "1s/^/\/** Copyright 2016 all rights reserved *\/\n/" {} \;</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">What this is basically doing is telling the computer to find all <tt class="calibre3"><span class="calibre_13">.node</span></tt> files, and add the copyright notice in the beginning of each file, followed by a new line.</p><p class="calibre_4">We can check one random file and, yes, the copyright notice is there:</p><p class="calibre_6"><img src="images/000167.jpg" class="calibre_106" /></p><p class="calibre_4">Update version numbers in all files:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">find . -name pom.xml -exec sed -i "s/&lt;version&gt;4.02/&lt;version&gt;4.03/g" {} \;</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">As you can imagine, find has lots of use cases. The examples I've shown you are only the first piece of the pie. Learning find, along with <tt class="calibre3"><span class="calibre_13">sed</span></tt> and the <tt class="calibre3"><span class="calibre_13">git cli</span></tt> can set you free from your IDE when it comes to finding, refactoring or working with <tt class="calibre3"><span class="calibre_13">git</span></tt>, which means you can more easily switch from one IDE to the other, because you don't have to learn all the features. You just use your friendly CLI tools.</p><div class="mbp_pagebreak"></div><p id="calibre_link-41" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">tmux &ndash; virtual consoles, background jobs and the like</span></span></span></p><p class="calibre_4">In this section, we will be looking at another great tool called tmux. Tmux comes in particularly handy when<a></a> working in remote <tt class="calibre3"><span class="calibre_13">ssh</span></tt> sessions, because it gives you the ability to<a></a> continue your work from where you left off. It can also replace some of the features in terminator, if you are working, for example, on Mac, and you can't install terminator.</p><p class="calibre_4">To get started with <tt class="calibre3"><span class="calibre_13">tmux</span></tt> on Ubuntu, we first need to install it:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install tmux</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000059.jpg" class="calibre_92" /></p><p class="calibre_4">Then just<a></a> run the command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">tmux</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000187.jpg" class="calibre_92" /></p><p class="calibre_4">And you will<a></a> find yourself inside a brand new virtual console:</p><p class="calibre_6"><img src="images/000161.jpg" class="calibre_92" /></p><p class="calibre_4">For demonstration purposes, we will open<a></a> up a new tab that you can see the list of open sessions with <tt class="calibre3"><span class="calibre_13">tmux ls</span></tt>:</p><p class="calibre_6"><img src="images/000113.jpg" class="calibre_92" /></p><p class="calibre_4">Let's start a new <tt class="calibre3"><span class="calibre_13">tmux</span></tt> named session:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">tmux new -s mysession</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000017.jpg" class="calibre_107" /></p><p class="calibre_4">Here we can see that opening a <tt class="calibre3"><span class="calibre_13">tmux</span></tt> session maintains the current directory. To list and switch <tt class="calibre3"><span class="calibre_13">tmux</span></tt> sessions inside <tt class="calibre3"><span class="calibre_13">tmux</span></tt>, hit <span class="italic">Ctrl</span> + <span class="italic">B</span>
<span class="italic">S</span>.</p><p class="calibre_4">We can see that<a></a> we can switch to another tmux session, execute commands inside, and switch back to our initial session if we want to. To detach (leave a session running and go back to the normal terminal) hit <span class="italic">Ctrl</span> + <span class="italic">b d</span>;</p><p class="calibre_4">Now we can see we have two opened sessions.</p><p class="calibre_4">To attach to a session:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">tmux a -t mysession</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000032.jpg" class="calibre_92" /></p><p class="calibre_4">This scenario comes in handy when you login to a remote server and want to execute a long running task, then leave and come back when it ends. We will replicate this scenario with a quick script called<a></a> infinity.sh. We will execute it. It's writing to the standard output. Now let's detach from tmux.</p><p class="calibre_4">If we look at the script, it's just a simple while loop that goes on forever, printing text each second. </p><p class="calibre_4">Now when we come back to our session, we can see the script was running while we were detached from the session and it's still outputting data to the console. I will manually stop it by hitting <span class="italic">Ctrl</span> + <span class="italic">c</span>.</p><p class="calibre_4">Alright, let's go to our first tmux session and close it. In order to manually kill a running tmux session, use:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">tmux kill-session -t mysession</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000052.jpg" class="calibre_92" /></p><p class="calibre_4">This will kill the running session. If we switch over to our second tab, we can see that we have been logged off tmux. Let's also close this terminator tab, and open a brand new tmux session:</p><p class="calibre_6"><img src="images/000193.jpg" class="calibre_92" /></p><p class="calibre_4">Tmux gives you<a></a> the possibility to split the screen, just like terminator, horizontally with <span class="italic">Ctrl</span> + <span class="italic">b</span> + ", and vertically with <span class="italic">Ctrl</span> + <span class="italic">b</span> + <span class="italic">%</span>. After that, use <span class="italic">Ctrl</span> + <span class="italic">b</span> + arrows to navigate between the panes:</p><p class="calibre_6"><img src="images/000025.jpg" class="calibre_92" /></p><p class="calibre_4">You also have<a></a> the possibility to create windows (tabs):</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><span class="italic">Ctrl</span> + <span class="italic">b c</span>: create:<p class="calibre_6"><img src="images/000109.jpg" class="calibre_108" /></p></li><li value="2" class="calibre_21"><span class="italic">Ctrl</span> + <span class="italic">b w</span>: list:<p class="calibre_6"><img src="images/000201.jpg" class="calibre_92" /></p></li><li value="3" class="calibre_21"><span class="italic">Ctrl</span> + <span class="italic">b &amp;</span>: delete<p class="calibre_6"><img src="images/000159.jpg" class="calibre_109" /></p></li></ul><p class="calibre_4">These last functionalities are very similar to what terminator offers.</p><p class="calibre_4">You can use tmux in situations where you want to have two or more panes or even tabs in your remote <tt class="calibre3"><span class="calibre_13">ssh</span></tt> connection, but you don't want to open multiple <tt class="calibre3"><span class="calibre_13">ssh</span></tt> sessions. You could also use it locally, as a terminator<a></a> replacement, but the keyboard shortcuts are much harder to use. Although they can be changed, you will lose the option to use tmux remotely, because opening a tmux session in another tmux session is discouraged. In addition, configuring new tmux keyboard shortcuts might make tmux a burden when working on lots of servers due to the shortcut differences.</p><div class="mbp_pagebreak"></div><p id="calibre_link-42" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Network &ndash; Who's listening?</span></span></span></p><p class="calibre_4">When working with network applications, it comes in handy to be able to see open ports and connections and to be able to interact with ports on different hosts for testing purposes. In this section, we will be looking at some basic commands for networking and in what situations<a></a> they might come in handy.</p><p class="calibre_4">The first command is <tt class="calibre3"><span class="calibre_13">netstat</span></tt>:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">netstat -plnt</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000166.jpg" class="calibre_110" /></p><p class="calibre_4">This will show all open<a></a> ports on our host. You can see here that we only have one open port on a default Ubuntu desktop installation, which is port<tt class="calibre3"><span class="calibre_13"> 53</span></tt>. We can look this up in the special file <tt class="calibre3"><span class="calibre_13">/etc/services</span></tt>. This file contains all basic port numbers for programs and protocols. We see here port <tt class="calibre3"><span class="calibre_13">53</span></tt> is the DNS server:</p><p class="calibre_6"><img src="images/000012.jpg" class="calibre_111" /></p><p class="calibre_4">Just by analyzing the output, we cannot determine which program is listening on this port, because this process<a></a> is not owned by our current user. That's why the <span class="italic">PID/Program Name</span> column is empty. If we run the same command again with <tt class="calibre3"><span class="calibre_13">sudo</span></tt>, we see that this process is named <tt class="calibre3"><span class="calibre_13">dnsmasq</span></tt> and, if we want more information, we can look it up in the man page. It's a lightweight DHCP and caching DNS server:</p><p class="calibre_6"><img src="images/000204.jpg" class="calibre_112" /></p><p class="calibre_4">Other useful<a></a> information we get from this command:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">The program protocol, in this case dhcp.</li><li value="2" class="calibre_12">Total bytes not copied.</li><li value="3" class="calibre_12">Total bytes not acknowledged.</li><li value="4" class="calibre_12">Local and foreign address and port. Getting the port is the main reason we are using this command. This is also important for determining if the port is open just on localhost or if it's listening for incoming connections on the network.</li><li value="5" class="calibre_12">The state of the port. Usually this is <span class="bold">LISTEN</span>.</li><a></a><li value="6" class="calibre_12">The PID and program name, which helps us identify which program is listening on what port.</li></ul><p class="calibre_4">Now, if we run a program that is supposed to be listening on a certain port and we don't know if it's working, we can find out with <tt class="calibre3"><span class="calibre_13">netstat</span></tt>. Let's open the most basic HTTP server by running the command: </p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">python -m SimpleHTTPServer</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000131.jpg" class="calibre_113" /></p><p class="calibre_4">As you can see from the output, it's listening on port <tt class="calibre3"><span class="calibre_13">8000</span></tt> on interface <tt class="calibre3"><span class="calibre_13">0.0.0.0</span></tt>. If we open a new pane and run the <tt class="calibre3"><span class="calibre_13">netstat</span></tt> command, we will see the open the port, and the PID / name.</p><p class="calibre_4">You probably already<a></a> know this but, just to be on the safe side, we will look at adding different hostnames as static <tt class="calibre3"><span class="calibre_13">dns</span></tt> entries on our machine. This is helpful when developing applications that need to connect to servers and the servers change their IP address, or when you want to emulate a remote server on a local machine. For this we type:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo vim /etc/hosts</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000129.jpg" class="calibre_114" /></p><p class="calibre_4">You can quickly understand the format of the file from the existing content. Let's add an alias for our localhost, so that we can access it under a different name. Add the following line:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp; myhostname.local</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">We recommend using non existing top level domain names for localhost, such as .local or .dev. This is to avoid<a></a> overriding any existing address, because <tt class="calibre3"><span class="calibre_13">/etc/hosts</span></tt> takes precedence in <tt class="calibre3"><span class="calibre_13">dns</span></tt> resolution. Now, if we open the address in the browser on port <tt class="calibre3"><span class="calibre_13">8000</span></tt>, we will see our local Python server running and serving content.</p><p class="calibre_4">The next command is <tt class="calibre3"><span class="calibre_13">nmap</span></tt>. As you can see, it is not installed by default on Ubuntu, so let's go ahead and install it by typing:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install nmap </span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000071.jpg" class="calibre_115" /></p><p class="calibre_4">Nmap is a command used for checking all open ports on a remote host, also known as a port scanner. If we run <tt class="calibre3"><span class="calibre_13">nmap</span></tt> on our network gateway, which, in our case, is <tt class="calibre3"><span class="calibre_13">192.68.0.1</span></tt>, we'll get all of the open<a></a> ports on the gateway:</p><p class="calibre_4">Type: <span class="bold">nmap 192.168.0.1</span>
</p><p class="calibre_6"><img src="images/000173.jpg" class="calibre_116" /></p><p class="calibre_4">As you can see, there is again the <tt class="calibre3"><span class="calibre_13">dns</span></tt> port open, the http and https servers, which are used as a web page for configuring the router, and port <tt class="calibre3"><span class="calibre_13">49152</span></tt>, which, at this time, is not specific to any common protocol-and that's why it is marked as unknown. Nmap does not know for sure that those<a></a> specific programs are actually running on the host; all it does is verify what ports are open and write the default application that usually runs on that port.</p><p class="calibre_4">If we are not sure what server we need to, connect to or if we want to know how many servers are in our current network, we can run <tt class="calibre3"><span class="calibre_13">nmap</span></tt> on the local network address, specifying the network mask as the destination network. We get this information from <tt class="calibre3"><span class="calibre_13">ifconfig</span></tt>; if our IP address is <tt class="calibre3"><span class="calibre_13">192.168.0.159</span></tt>, and our network mask is <tt class="calibre3"><span class="calibre_13">255.255.255.0</span></tt>, that means the command will look like this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">nmap -sP 192.168.0.0/24</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000142.jpg" class="calibre_117" /></p><p class="calibre_4">In <tt class="calibre3"><span class="calibre_13">/24 = 255.255.255.0</span></tt>, basically the network will have <tt class="calibre3"><span class="calibre_13">ips</span></tt> ranging from <tt class="calibre3"><span class="calibre_13">192.168.0.0</span></tt> to <tt class="calibre3"><span class="calibre_13">192.168.0.255</span></tt>. We see here that we have three active hosts, and it even gives us the latency, so we can determine which host is closer.</p><p class="calibre_4">Nmap is helpful when developing client-server applications, for example, when you want to see what ports are<a></a> accessible on the server. However, <tt class="calibre3"><span class="calibre_13">nmap</span></tt> might miss application-specific ports, which are non-standard. To actually connect to a given port, we will be using telnet, which comes preinstalled on Ubuntu desktop. To see if a particular port accepts connections, just type the hostname, followed by the port:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">telnet 192.168.0.1 80</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000185.jpg" class="calibre_118" /></p><p class="calibre_4">If the port is listening and accepts connections, telnet will output a message like this:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Trying <tt class="calibre3"><span class="calibre_13">192.168.0.1</span></tt>...</li><li value="2" class="calibre_12">Connected to <tt class="calibre3"><span class="calibre_13">192.168.0.1</span></tt></li><li value="3" class="calibre_12">Escape character is <tt class="calibre3"><span class="calibre_13">^]</span></tt></li></ul><p class="calibre_4">This means<a></a> that you can also connect from your application. So if you are having difficulties connecting, it's usually a client problem; the server is working fine.</p><p class="calibre_4">To get out of telnet, hit: <span class="italic">Ctrl</span> +<span class="italic">]</span>, followed by <span class="italic">Ctrl</span> + <span class="italic">d</span>.</p><p class="calibre_4">Also, in some cases we need to get the ip address of a particular hostname. The simplest way to do this is to use the host command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">host ubuntu.com</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000043.jpg" class="calibre_119" /></p><p class="calibre_4">We've learned<a></a> only the basics, the minimum elements you need, in order to start working with hostnames and ports. For a deeper understanding of networks and package traffic, we recommend checking out courses on penetration testing or network traffic analyzing tools such as Wireshark. Here's one such course: <a href="https://www.packtpub.com/networking-and-servers/mastering-wireshark">https://www.packtpub.com/networking-and-servers/mastering-wireshark" </a>.</p><div class="mbp_pagebreak"></div><p id="calibre_link-43" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Autoenv &ndash; Set a lasting, project-based habitat</span></span></span></p><p class="calibre_4">Projects are different from one another and so are environments. We might be developing an application on our local<a></a> machine with certain environment variables like debug level, API keys, or memory size. Then we want to deploy the application to a staging<a></a> or production server, which has other values for the same environment variables. A tool that comes in handy for loading environments on the fly is <tt class="calibre3"><span class="calibre_13">autoenv</span></tt>.</p><p class="calibre_4">To install it we go to the official GitHub page and follow the instructions:</p><p class="calibre_4">
<a href="https://github.com/kennethreitz/autoenv">https://github.com/kennethreitz/autoenv</a>
</p><p class="calibre_4">First we will clone the project in our home directory, and then we add the following line to our .zshrc config file, so that every time zsh starts, autoenv is loaded by default:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">source ~/.autoenv/activate.sh</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Now let's create an example workplace with two imaginary projects, project 1 and project 2.</p><p class="calibre_4">We open<a></a> an environment file for project 1:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">vim project1/.env</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Let's now imagine that project 1 uses an environment variable called <tt class="calibre3"><span class="calibre_13">ENV</span></tt>, which we will set to <tt class="calibre3"><span class="calibre_13">dev</span></tt>:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">export ENV=dev</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000130.jpg" class="calibre_120" /></p><p class="calibre_4">Now let's do the same thing for project 2, but with a different value for <tt class="calibre3"><span class="calibre_13">ENV</span></tt>; <tt class="calibre3"><span class="calibre_13">qa</span></tt>:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">export ENV=qa</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000203.jpg" class="calibre_121" /></p><p class="calibre_4">Save and close both files. Now when<a></a> we cd in the project 1 folder, we see the following message:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">autoenv:<br class="calibre6" />autoenv: WARNING:<br class="calibre6" />autoenv: This is the first time you are about to source /home/hacker/course/work/project1/.env:<br class="calibre6" />autoenv:<br class="calibre6" />autoenv:&nbsp;&nbsp;&nbsp;&nbsp; --- (begin contents) ---------------------------------------<br class="calibre6" />autoenv:&nbsp;&nbsp;&nbsp;&nbsp; export ENV=dev$<br class="calibre6" />autoenv:<br class="calibre6" />autoenv:&nbsp;&nbsp;&nbsp;&nbsp; --- (end contents) -----------------------------------------<br class="calibre6" />autoenv:<br class="calibre6" />autoenv: Are you sure you want to allow this? (y/N)</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Hit <span class="italic">y</span> to load the file. This happens every time a new environment file is sourced. Now if we grep the environment for the ENV variable, we can see it present and with a value of <tt class="calibre3"><span class="calibre_13">dev</span></tt>:</p><p class="calibre_6"><img src="images/000199.jpg" class="calibre_122" /></p><p class="calibre_4">Now let's change the<a></a> directory to <tt class="calibre3"><span class="calibre_13">project 2</span></tt>:</p><p class="calibre_6"><img src="images/000015.jpg" class="calibre_123" /></p><p class="calibre_4">We can see that the same warning message is issued. And when we grep for the ENV variable, we now see that its value is <tt class="calibre3"><span class="calibre_13">qa</span></tt>. If we leave this folder, the environment variable is still defined, and will be<a></a> defined until some other script overrides it or when the current session is closed. The <tt class="calibre3"><span class="calibre_13">.env</span></tt> file is sourced, even if we cd to a directory deeper inside project1.</p><p class="calibre_4">Now let's look at a more complex example for project1.</p><p class="calibre_4">Let's say we want to get the version from <tt class="calibre3"><span class="calibre_13">package.json</span></tt>, and we also want to use a variable called COMPOSE_FILE that will specify a different file for docker compose. Docker users know what it's all about, but if you don't.. Google time!</p><p class="calibre_4">Here is an example:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13">export environment=dev<br class="calibre6" />export version=`cat package.json | grep version | cut -f 4 -d "\""`<br class="calibre6" />export COMPOSE_FILE=docker-compose.yml</span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">For this to take effect, we need to first copy a <tt class="calibre3"><span class="calibre_13">package.json</span></tt> file, and test that the <tt class="calibre3"><span class="calibre_13">cat</span></tt> command works:</p><p class="calibre_6"><img src="images/000108.jpg" class="calibre_116" /></p><p class="calibre_4">Everything seems fine, so let's <tt class="calibre3"><span class="calibre_13">cd</span></tt> into our folder:</p><p class="calibre_6"><img src="images/000106.jpg" class="calibre_124" /></p><p class="calibre_4">And as you can see, the environment variables have<a></a> been set:</p><p class="calibre_6"><img src="images/000011.jpg" class="calibre_125" /></p><p class="calibre_4">
<tt class="calibre3"><span class="calibre_13">Autoenv</span></tt> can really come in handy, and is not limited to just exporting environment variables. You can do stuff like<a></a> issuing a reminder when entering a certain project or running a <tt class="calibre3"><span class="calibre_13">git pull</span></tt> or updating the look and feel of the terminal so that a distinct feel is given for each project.</p><p id="calibre_link-44" class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_9">Don't rm the trash</span></span></span></p><p class="calibre_4">Commands can be categorized as harmless or harmful. Most commands fall within the first category, but there is one that is very common and that has been known to produce a lot of damage in the<a></a> world of computers. The dreaded command is <tt class="calibre3"><span class="calibre_13">rm</span></tt>, which has wiped out numerous hard drives, making precious volumes of data inaccessible. The Linux desktop has borrowed the concept of trash from other desktops and the default<a></a> action when deleting a file is sending it to the <tt class="calibre3"><span class="calibre_13">Trash</span></tt>. Sending files there is a good practice, so that no unintentional removing is done. But this trash is no magic location; it's just a hidden folder, usually located in <tt class="calibre3"><span class="calibre_13">~/.local</span></tt>.</p><p class="calibre_4">In this part, we will be looking at a utility tool designed to work with trash. We will install it with:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install trash-cli</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000151.jpg" class="calibre_126" /></p><p class="calibre_4">This will install multiple commands. Let's look at our current directory that contains quite a few files. Let's assume<a></a> we don't need the files starting with file.<tt class="calibre3"><span class="calibre_13">*</span></tt>
</p><p class="calibre_4">In order to remove files we will use:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">trash filename</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000048.jpg" class="calibre_92" /></p><p class="calibre_4">(There is a separate command for working with the trash. We will rehash to reload our path.) We list all the<a></a> trash commands. The command for listing the trash content is:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">trash-list</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000047.jpg" class="calibre_127" /></p><p class="calibre_4">Here we see the files that are in our trash. It is only showing the files that were put there with the trash command. We can see the date when they were deleted, the hour, and the exact location. If we'd have had<a></a> multiple files with the same name and path, they would have been listed here, and we could have identified them by the deletion date.</p><p class="calibre_4">In order to restore a file from trash we will use the command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">restore-trash</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000060.jpg" class="calibre_128" /></p><p class="calibre_4">It will show us a list of options and ask for a number corresponding to the file we want restored. In this case<a></a> we will select 1, meaning we want to restore the <tt class="calibre3"><span class="calibre_13">json</span></tt> file.</p><p class="calibre_4">We open the file and we can see that the content was not altered in the process.</p><p class="calibre_4">In order to remove all the files in the trash, we use:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">trash-empty</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000154.jpg" class="calibre_129" /></p><p class="calibre_4">This is the equivalent of doing <tt class="calibre3"><span class="calibre_13">rm</span></tt> in the first place. Now if we list the trash again, we see it doesn't have any content.</p><p class="calibre_4">Although the internet is full of <tt class="calibre3"><span class="calibre_13">rm -rf /</span></tt> jokes, this is actually a serious issue that can cause headaches and wasted time trying to restore the damage caused. If you've been using <tt class="calibre3"><span class="calibre_13">rm</span></tt> for a long<a></a> time and can't get into the habit of using trash, we suggest adding an alias for <tt class="calibre3"><span class="calibre_13">rm</span></tt> to actually run the trash command instead. In this case, it's a good idea to pile up stacks of files in trash than to risk removing a file that might be needed, before committing, or even removing the whole root partition!</p><div class="mbp_pagebreak"></div><p id="calibre_link-45" class="calibre_"><span class="calibre1"><span class="bold">Chapter&nbsp;5.&nbsp;Developers' Treasure</span></span></p><p class="calibre_4">In this very chapter, we will kick start by building a web server using Python. We will then see how to process all our images automatically using ImageMagick. Then, we will look at the git flow branching model and how it will help you. Furthermore, we will see how meld command line can help merge our git conflicts. We will then focus on the working of ngrok tool and see how it saves the day by proxying requests coming from the internet to our laptop. We will also explore the versatile query capabilities of jq, the Swiss army knife of JSON! Towards the end, we will explore ways in which one can manage and kill Linux processes.</p><p class="calibre_4">In this chapter, we will cover the following:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Shrinking spells and other ImageMagick</li><li value="2" class="calibre_12">Understanding the work of git flow branching models </li><li value="3" class="calibre_12">Using ngrok to secure tunnels to localhost</li><li value="4" class="calibre_12">Getting yourself acquainted with jq</li></ul><p id="calibre_link-46" class="calibre_4"><span class="calibre1"><span class="bold"><span class="calibre_5">The spot webserver</span></span></span></p><p class="calibre_4">We have prepared a basic demo <tt class="calibre3"><span class="calibre_13">html</span></tt> file that contains a button, a <tt class="calibre3"><span class="calibre_13">div</span></tt>, a <tt class="calibre3"><span class="calibre_13">jquery</span></tt> function (for helping us do some <tt class="calibre3"><span class="calibre_13">ajax</span></tt> calls), and a script that will try to load static content from our server and put the content inside the <tt class="calibre3"><span class="calibre_13">div</span></tt> tag. The script is trying to load a simple text file on the disk, <tt class="calibre3"><span class="calibre_13">/file</span></tt>:</p><p class="calibre_6"><img src="images/000145.jpg" class="calibre_130" /></p><p class="calibre_4">If we open this file inside our browser, we can see the page content:</p><p class="calibre_6"><img src="images/000160.jpg" class="calibre_130" /></p><p class="calibre_4">Clicking on the button generates a <tt class="calibre3"><span class="calibre_13">javascript</span></tt> error. It is telling us that we want to do a cross-origin request, which is not allowed by default by the browser. This is to prevent cross-site scripting attacks. What we need to do in order to test our <tt class="calibre3"><span class="calibre_13">javascript</span></tt> code is to serve this file in an HTTP server.</p><p class="calibre_4">In order to start an HTTP server in the same folder as the file, we type the following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">python -m SimpleHTTPServer</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000102.jpg" class="calibre_130" /></p><p class="calibre_4">This is a basic Python module that opens port <tt class="calibre3"><span class="calibre_13">8000</span></tt> on localhost, serving only static content (so, no, you can't use it for <tt class="calibre3"><span class="calibre_13">php</span></tt>). Let's open the address in the browser:</p><p class="calibre_4">Click on the <span class="bold">Click me!</span> button. We see that our file content was loaded in the <tt class="calibre3"><span class="calibre_13">div</span></tt> beneath the button, which means the browser is no longer blocking us, because we are issuing requests to the same host using the same protocol. Looking at the output from our Python server, we can see all the requests that the browser has made to the server. We can see it's requesting by default a <tt class="calibre3"><span class="calibre_13">favicon.ico</span></tt> file that doesn't exist and it's giving back a <tt class="calibre3"><span class="calibre_13">404</span></tt> status code:</p><p class="calibre_6"><img src="images/000054.jpg" class="calibre_130" /></p><p class="calibre_4">You can find the files used in this project on the GitHub project page.</p><p class="calibre_4">Also, if we stop the server and go one level up and fire it up again, we can use it as a <tt class="calibre3"><span class="calibre_13">webdav</span></tt> server, with the possibility of navigating through the files in the current directory. We could, for example, give access to a folder on our local machine to a remote user and allow them to access it through a page in the browser, eliminating the need to install a file server.</p><div class="mbp_pagebreak"></div><p id="calibre_link-47" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Shrinking spells and other ImageMagick</span></span></span></p><p class="calibre_4">In this chapter, we will learn how to process images from the command line. We will start with the most<a></a> complex and widely used image command line interface processing toolkit called <span class="bold">ImageMagick</span>. To install it, run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install imagemagick</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000184.jpg" class="calibre_130" /></p><p class="calibre_4">As you can see, we have already installed it.</p><p class="calibre_4">Now, let's find some images to process. Let's use the default Ubuntu backgrounds that can be found in <tt class="calibre3"><span class="calibre_13">/usr/share/backgrounds</span></tt>. Let's copy the backgrounds to another location so that we don't alter our default ones.</p><p class="calibre_4">We'll take a look at the first image in our list: we can see from <tt class="calibre3"><span class="calibre_13">ls</span></tt> that it is a JPEG image of 1.6 MB. To open it and see<a></a> how it looks, let's use the <span class="bold">eog</span> (<span class="bold">eye of gnome</span>) image viewer:</p><p class="calibre_6"><img src="images/000110.jpg" class="calibre_19" /></p><p class="calibre_4">The first and most<a></a> important part of knowing how to process an image is knowing what that image actually is. To find this out, ImageMagick comes with a tool called <span class="bold">identify</span>. In its simplest form, you have<a></a> to feed it an image name and it will output information like the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">identify image_name</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">160218-deux-two_by_Pierre_Cante.jpg JPEG 3840x2400 3840x2400+0+0 8-bit sRGB 1.596MB 0.240u 0:00.230</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">We can see that the file is a JPEG image of 1.6 MB and most importantly, its size is 3,840x2,400 pixels.</p><p class="calibre_4">If we look at the <tt class="calibre3"><span class="calibre_13">warty-final-ubuntu.png</span></tt> we see that the output format is similar: the size and resolution are higher and the image format is PNG. Let's see what it looks like:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">eog warty-final-ubuntu.png</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000198.jpg" class="calibre_130" /></p><p class="calibre_4">PNG images usually<a></a> take more space than JPEG images. If you don't have transparency, it is recommended to use <tt class="calibre3"><span class="calibre_13">.jpg</span></tt>. In order to convert from one type to the other, we use the <tt class="calibre3"><span class="calibre_13">imagemagick</span></tt>
<tt class="calibre3"><span class="calibre_13">convert</span></tt> command with two parameters: input filename and output filename:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">convert file.png file.jpg</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000207.jpg" class="calibre_130" /></p><p class="calibre_4">The format of the output image will be deduced by <tt class="calibre3"><span class="calibre_13">convert</span></tt> from the filename extension. As you can see, the output is a JPEG image with the same resolution, but with a much smaller size than<a></a> the PNG version: 180 KB compared to 2.6 MB. If we open the image, we can't see any noticeable differences. This is a big thing when it comes to web development, because if we were to use this picture on a web page, it would load as much as 15 times faster than the PNG version.</p><p class="calibre_4">If we want to crop a region of the image, we can do that with <tt class="calibre3"><span class="calibre_13">convert</span></tt>. For example, if we want to cut a 500x500 piece of the image, starting at coordinates 100,100, we would use the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">convert -crop "500x500+100+100" warty-final-ubuntu.png warty.jpg</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000206.jpg" class="calibre_130" /></p><p class="calibre_4">As we can see, the output image is at the resolution we requested, but it has a much lower size of only 2.5 KB. Visually analyzing the two images we can see that the cropped one is a section of the big picture. Normally you wouldn't want to guess pixels in the command line, but would<a></a> use an image processing software, such as GIMP, to do the work for you, so that you can visually select and crop portions of the images. However, when developing software applications, it is often the case that you have to programmatically crop images, in which case this comes in handy.</p><p class="calibre_4">The <tt class="calibre3"><span class="calibre_13">convert</span></tt> command is also good at creating images. If we want to create an image from a text string, we could use the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">convert -size x80 label:123 nr.jpg</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000148.jpg" class="calibre_130" /></p><p class="calibre_4">This will create a JPEG image with a height of 80 pixels, containing the text specified, in this case<a></a> the string <tt class="calibre3"><span class="calibre_13">123</span></tt>. We can see the output, it is a 3.4 KB image and, if we look at it visually, we see the text <tt class="calibre3"><span class="calibre_13">123</span></tt>:</p><p class="calibre_6"><img src="images/000028.jpg" class="calibre_130" /></p><p class="calibre_4">This can also come in handy in different scenarios where you need to programmatically generate readable images, such as using CAPTCHA software or generating default profile images with the user's initials.</p><p class="calibre_4">Now let's look at<a></a> some image shrinking tools outside of <tt class="calibre3"><span class="calibre_13">imagemagick</span></tt>. The first one is a <tt class="calibre3"><span class="calibre_13">png</span></tt> shrinking tool called <tt class="calibre3"><span class="calibre_13">pngquant</span></tt>. We will install it by typing the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install pngquant</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000107.jpg" class="calibre_130" /></p><p class="calibre_4">Let's try to shrink the large PNG image that we were looking at earlier. If the image contains transparency<a></a> and it is necessary to keep it in the PNG format, we would just call <tt class="calibre3"><span class="calibre_13">pngquant</span></tt> with the following image name:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">pngquant warty-final-ubuntu.png</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000180.jpg" class="calibre_130" /></p><p class="calibre_4">By default, it outputs a file with the same name and an added <tt class="calibre3"><span class="calibre_13">fs8</span></tt> extension. We can see that the difference in size<a></a> is also noticeable (it's smaller by 1 MB, which is almost half the original size). If we visually compare the images, we won't be able to spot any differences:</p><p class="calibre_6"><img src="images/000100.jpg" class="calibre_130" /></p><p class="calibre_6"><img src="images/000046.jpg" class="calibre_130" /></p><p class="calibre_4">Alright, now let's try and do the same thing for JPEG images.</p><p class="calibre_4">For this, we'll install<a></a> the equivalent of <tt class="calibre3"><span class="calibre_13">pngquant,</span></tt> which is <tt class="calibre3"><span class="calibre_13">jpegoptim</span></tt>:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install jpegoptim</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000135.jpg" class="calibre_130" /></p><p class="calibre_4">We will call it the same way and we're just going to give it a command-line argument, which is the file to shrink. Let's pick some random images to try and see if we can reduce their size:</p><p class="calibre_6"><img src="images/000163.jpg" class="calibre_130" /></p><p class="calibre_4">As you can see from the output, it is saying <span class="bold">Skipped</span>. That means the image had already been shrunk (the guys at Ubuntu probably used the same tool before submitting the image). If we try it again on the JPEG produced by <tt class="calibre3"><span class="calibre_13">imagemagick</span></tt>, you can see that it is also skipped: <tt class="calibre3"><span class="calibre_13">imagemagick</span></tt> already uses the minimum necessary format.</p><p class="calibre_4">The image processing tools come in especially handy when it comes to web development, where lots of images<a></a> need to be used and their size needs to be as small as possible. Command-line tools are really useful because they can be used to automate tasks. Image shrinking is usually added to build tasks, where production versions of websites are prepared. The <tt class="calibre3"><span class="calibre_13">imagemagick</span></tt> toolkit comes with a lot more tools than the ones we have seen today, so feel free to explore other handy commands from the toolkit. Also, when it comes to graphically processing the images, there are some great open source tools like GIMP and Inkscape that can really help you get your job done, and also save you a lot of money.</p><div class="mbp_pagebreak"></div><p id="calibre_link-48" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Go with the Git flow</span></span></span></p><p class="calibre_4">
<span class="bold">Git</span> is by far the most<a></a> popular version control system out there. In this chapter, we will be looking at a plugin for Git, called <span class="bold">GitFlow</span>, which proposes a branching model<a></a> for software projects. This branching model doesn't offer much help when it comes to small projects, but it's a great<a></a> benefit to medium sized and large projects. We will be looking at a variation of the <tt class="calibre3"><span class="calibre_13">git-flow </span></tt>plugin, called <tt class="calibre3"><span class="calibre_13">gitflow-avh</span></tt>, which adds extra functionality, such as <span class="bold">Git hooks</span>, <a href="https://github.com/petervanderdoes/gitflow-avh">https://github.com/petervanderdoes/gitflow-avh</a>.</p><p class="calibre_4">To install it, we'll follow<a></a> the instructions on the GitHub page. We are on Ubuntu, so we will follow the<a></a> installation instructions for Linux.</p><p class="calibre_4">We can see that it can be directly installed with the <tt class="calibre3"><span class="calibre_13">apt</span></tt> command, but apt doesn't usually contain the latest version of the software, so today we will do a manual installation. We want to pick the stable version, and use the one line command.</p><p class="calibre_4">Once this is done, let's create a dummy project. We'll create an empty directory and initialize it as a Git repository:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git init</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000147.jpg" class="calibre_130" /></p><p class="calibre_4">Basic Git usage is not part of this course, and we are assuming that you understand the basics.</p><p class="calibre_4">All right. A good way to get started with <tt class="calibre3"><span class="calibre_13">git-flow</span></tt> is to read the excellent cheatsheet created by Daniel Kummer:</p><p class="calibre_4">
<a href="http://danielkummer.github.io/git-flow-cheatsheet/">http://danielkummer.github.io/git-flow-cheatsheet/</a>
</p><p class="calibre_4">This provides<a></a> the basic tips and tricks to get you started quickly with <tt class="calibre3"><span class="calibre_13">git-flow</span></tt>. So the first thing the cheatsheet suggests is to run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git flow init</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000082.jpg" class="calibre_130" /></p><p class="calibre_4">To configure it, we need to answer a bunch of questions about what names the branches should have in<a></a> each flow and what the version tag prefix and hooks directory are. Let's just leave the defaults. Now, let's run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git branch</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000053.jpg" class="calibre_130" /></p><p class="calibre_4">We can see that we are now on the <tt class="calibre3"><span class="calibre_13">develop</span></tt> branch, so no more developing on the <tt class="calibre3"><span class="calibre_13">master</span></tt> branch. This helps us have a stable master, while not so stable features are kept on the <tt class="calibre3"><span class="calibre_13">develop</span></tt> branch.</p><p class="calibre_4">If we go back to the cheatsheet, we can look at the first item, which is a feature branch. Feature branches<a></a> are useful when developing a specific part of functionality or doing refactoring, but you don't want to break the existing functionality on the develop branch. To create a feature branch, just run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git flow feature start feature1</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000156.jpg" class="calibre_130" /></p><p class="calibre_4">This is not the most intuitive description of the feature, but it's good for demonstration purposes. <tt class="calibre3"><span class="calibre_13">GitFlow</span></tt> will also show us a summary of actions once the feature branch has finished. This has<a></a> created a new branch called <tt class="calibre3"><span class="calibre_13">feature/feature1</span></tt>, based on the develop branch and has switched us to that branch. We can also see this from our handy <tt class="calibre3"><span class="calibre_13">zsh</span></tt> prompt. </p><p class="calibre_4">Let's open up a file, edit, and save it:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git status</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000092.jpg" class="calibre_130" /></p><p class="calibre_4">This command will<a></a> tell us that we have an uncommitted file. Let's go ahead and commit it.</p><p class="calibre_4">Now <tt class="calibre3"><span class="calibre_13">git commit</span></tt> is using the <tt class="calibre3"><span class="calibre_13">nano</span></tt> editor for editing the commit message. Since we prefer <tt class="calibre3"><span class="calibre_13">vim</span></tt>, let's go ahead and change the default editor to <tt class="calibre3"><span class="calibre_13">vim</span></tt>. All we need to do is add this line in our <tt class="calibre3"><span class="calibre_13">zshrc</span></tt> and reload it:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">export EDITOR=vim</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Now when we do a <tt class="calibre3"><span class="calibre_13">git commit</span></tt> Vim opens up, shows us a summary of the commit, and closes.</p><p class="calibre_4">Now let's assume that we've finished adding a new feature. It's time to merge the feature branch back to develop with the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git flow feature finish feature1</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000091.jpg" class="calibre_130" /></p><p class="calibre_4">Again, to get a summary of actions:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">The feature branch was merged back to develop</li><li value="2" class="calibre_12">The feature branch has been deleted</li><li value="3" class="calibre_12">The current branch was switched back to develop</li></ul><p class="calibre_4">If we do an <tt class="calibre3"><span class="calibre_13">ls</span></tt>, we see the file from our branch present on the develop branch. Looking at the cheatsheet we see a graphical representation of this process.</p><p class="calibre_4">Next up is starting a release. Release branches are good for stopping the incoming features and bug<a></a> fixes from the develop branch, testing the current version, submitting bug fixes on it, and releasing it to the general public. </p><p class="calibre_4">As we can see, the syntax is similar, the process is similar, the develop is branched to a release branch, but when it comes to finishing the branch, the features are also merged to the master branch, and a tag is cut from this branch. Time to see it in action:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git flow release start 1.0.0</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000197.jpg" class="calibre_130" /></p><p class="calibre_4">This switches us over to our <tt class="calibre3"><span class="calibre_13">release/1.0.0</span></tt> branch. Let's add a <tt class="calibre3"><span class="calibre_13">releasenotes.txt</span></tt> file to show what has changed in this release. Added more bugs…Hopefully not!</p><p class="calibre_4">Let's commit the file.</p><p class="calibre_4">This is usually the case when you start to run your integration and stress testing, to see if all is well and to<a></a> check that there are no bugs.</p><p class="calibre_4">After the testing is finished, we go ahead and finish our release branch:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git flow release finish 1.0.0</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000152.jpg" class="calibre_130" /></p><p class="calibre_4">It will prompt<a></a> us for a series of release messages: we will leave all the defaults.</p><p class="calibre_4">Checking out the summary, we can see that:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">The release branch was merged into master</li><li value="2" class="calibre_12">A tag was cut from master with the release version</li><li value="3" class="calibre_12">The tag has also been merged into develop</li><li value="4" class="calibre_12">The release branch has been deleted</li><li value="5" class="calibre_12">And we are back on the develop branch</li></ul><p class="calibre_4">Now, we run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git branch</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000097.jpg" class="calibre_130" /></p><p class="calibre_4">We see that the<a></a> only two available branches are master and develop:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git tag</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000080.jpg" class="calibre_130" /></p><p class="calibre_4">This tells us that there is a 1.0.0 tag cut. We can see that the branch now contains two files from the<a></a> merge of the feature and release branch; and if we also switch to the master branch, we can see that, at this point, master is an exact replica of develop:</p><p class="calibre_6"><img src="images/000214.jpg" class="calibre_130" /></p><p class="calibre_4">GitFlow also comes with an enhanced hooks functionality. If we read the documentation, we can see all the possible hooks in the <tt class="calibre3"><span class="calibre_13">hooks</span></tt> folder. Let's add a <tt class="calibre3"><span class="calibre_13">git</span></tt> hook that will be executed before every hotfix branch. For this we just open the template, copy the content, and paste it to a file with the name <tt class="calibre3"><span class="calibre_13">pre-flow-hotfix-start</span></tt> in our <tt class="calibre3"><span class="calibre_13">.git/hooks</span></tt> directory.</p><p class="calibre_4">GitFlow has more workflows than the ones presented. We won't go through all of them, but you can find<a></a> additional information by visiting the cheatsheet page or by reading the instructions on the GitHub page.</p><p class="calibre_4">Let's just simply <tt class="calibre3"><span class="calibre_13">echo</span></tt> a message with the version and origin.</p><p class="calibre_4">If we look at the <tt class="calibre3"><span class="calibre_13">hotfix</span></tt> flow, we can see that they are created from the master branch and merged back to master and develop, with a tag on master.</p><p class="calibre_4">Let's see if it works:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git flow hotfix start 1.0.1</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000016.jpg" class="calibre_130" /></p><p class="calibre_4">Apparently not. Something went wrong, our script was not executed and we need to delete our branch:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git flow hotfix delete 1.0.1</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000051.jpg" class="calibre_130" /></p><p class="calibre_4">Analyzing the <tt class="calibre3"><span class="calibre_13">git hooks</span></tt> directory, we see that our hook does not have execution permissions. After adding<a></a> execution permissions, and running the <tt class="calibre3"><span class="calibre_13">git hook</span></tt> command again, we can see our message on the top of the hotfix output. Let's finish<a></a> this hotfix with the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git flow hotfix finish 1.0.1</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000153.jpg" class="calibre_130" /></p><p class="calibre_4">As you can see, the commands are quite straightforward. There is also an <tt class="calibre3"><span class="calibre_13">oh-my-zsh</span></tt> plugin that you can activate to have command line completion.</p><p class="calibre_4">As we said earlier, this is a plugin suitable for teams of developers working on multiple features, fixing bugs, and releasing hotfixes all at the same time. GitFlow is simple to learn, and helps teams have<a></a> a correct workflow where they can easily prepare patches for production code, without worrying about the extra functionalities developed on the master branch.</p><p class="calibre_4">You can tweak the <tt class="calibre3"><span class="calibre_13">config</span></tt> as you like: some people prefer to place the <tt class="calibre3"><span class="calibre_13">hooks</span></tt> folder in a different place so that it is committed on the <tt class="calibre3"><span class="calibre_13">git repo</span></tt> and they don't have to worry about copying the files over; others continue to develop on the master branch and use a separate branch such as customer for the production code.</p><div class="mbp_pagebreak"></div><p id="calibre_link-49" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">Merging Git conflicts with ease</span></span></span></p><p class="calibre_4">Now let's look at another improvement that we can bring to <tt class="calibre3"><span class="calibre_13">git</span></tt>. Most tasks are easy to execute from the<a></a> command line, but some tasks, such as merging, require a specialist's eye for understanding the different format.</p><p class="calibre_4">Let's open the <tt class="calibre3"><span class="calibre_13">feature</span></tt> file from our previous chapter, edit it, add a new line, and save it:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git diff</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000050.jpg" class="calibre_130" /></p><p class="calibre_4">The <tt class="calibre3"><span class="calibre_13">git diff</span></tt> command will show us colored text explaining the differences between the <tt class="calibre3"><span class="calibre_13">git</span></tt> file and the<a></a> modified file, but some people find this format hard to understand:</p><p class="calibre_6"><img src="images/000195.jpg" class="calibre_130" /></p><p class="calibre_4">Luckily, we can<a></a> tell <tt class="calibre3"><span class="calibre_13">git</span></tt> to use external tools when it comes to merge<a></a> and one external tool that we can use is called <span class="bold">Meld</span>. Let's install it using the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install meld</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000090.jpg" class="calibre_130" /></p><p class="calibre_4">After this, we can<a></a> run the following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git difftool</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000150.jpg" class="calibre_130" /></p><p class="calibre_4">It will ask us if we want to launch Meld as an external program for viewing the file. It's also giving us a list<a></a> of tools that it can use for displaying the difference. Hit <tt class="calibre3"><span class="calibre_13">y</span></tt> to open Meld:</p><p class="calibre_6"><img src="images/000089.jpg" class="calibre_130" /></p><p class="calibre_4">Now we can easily see the two files side by side and the differences between them. We can see that <tt class="calibre3"><span class="calibre_13">1</span></tt> has been changed to <tt class="calibre3"><span class="calibre_13">2</span></tt> and a new line has been added. Based on this output we can easily decide<a></a> if we want to add it or not. Let's commit the file as it is.</p><p class="calibre_4">Next, we will look at merge conflicts. Let's manually create a branch called <span class="bold">test</span> and <span class="bold">edit</span> the same file, commit it, and then switch back to the develop branch. Let's update the same file, commit it, and then try to merge the <tt class="calibre3"><span class="calibre_13">test</span></tt> branch: and, of course, there is a merge conflict.</p><p class="calibre_4">For resolving the conflict, we will be using the following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git mergetool</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000022.jpg" class="calibre_130" /></p><p class="calibre_6"><img src="images/000021.jpg" class="calibre_130" /></p><p class="calibre_4">Again, it offers to<a></a> open Meld. In Meld we can see the three files:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">On the left is the file from our current branch</li><li value="2" class="calibre_12">On the right is the file from the remote branch</li><li value="3" class="calibre_12">In the middle is the resulting file that will be created</li></ul><p class="calibre_4">Let's say that we decide the correct version for the feature is <tt class="calibre3"><span class="calibre_13">4</span></tt> and that we also want to add <tt class="calibre3"><span class="calibre_13">of text</span></tt>:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">git commit -a</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000144.jpg" class="calibre_130" /></p><p class="calibre_4">You can see the predefined commit message. Don't forget to remove the temporary file that was created at the merge:</p><p class="calibre_6"><img src="images/000101.jpg" class="calibre_130" /></p><p class="calibre_4">In general, most modern IDEs offer plugins for working with <tt class="calibre3"><span class="calibre_13">git</span></tt>, including merging and <tt class="calibre3"><span class="calibre_13">diffs</span></tt>. We recommend that you get more acquainted with the command-line tools, because then you don't need<a></a> to learn a new <tt class="calibre3"><span class="calibre_13">git</span></tt> plugin when switching from one IDE to another.</p><p class="calibre_4">The <tt class="calibre3"><span class="calibre_13">git</span></tt> command works the same way across Linux, Mac, and Windows. It is a tool that developers use a lot and being fluent in it will boost your productivity.</p><div class="mbp_pagebreak"></div><p id="calibre_link-50" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">From localhost to instant DNS</span></span></span></p><p class="calibre_4">Often, especially when working with other people or when developing integrations with online services, we have<a></a> to make our computer accessible from the Internet. This information could be obtained from our trusty router, but wouldn't it be easier if we just had a tool that makes our computer port publicly accessible?</p><p class="calibre_4">Luckily for us there is such a tool!</p><p class="calibre_4">Meet <tt class="calibre3"><span class="calibre_13">ngrok</span></tt>, the versatile one line command that makes you forget about router configuration and continuous redeploys. <tt class="calibre3"><span class="calibre_13">Ngrok</span></tt> is a simple tool that exposes a port from our computer to a unique domain name publicly available on the Internet.</p><p class="calibre_4">How does it do it?</p><p class="calibre_4">Well, let's see it in action!</p><p class="calibre_4">Go to the website, click on the <span class="bold">Download</span> button, and choose your destiny. In our case, our destiny is<a></a> the Linux package in 64-bit. Next, go to the terminal, unzip the file, and copy its contents to the <tt class="calibre3"><span class="calibre_13">bin</span></tt> folder:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12"><tt class="calibre3"><span class="calibre_13">cd</span></tt> downloads</li><li value="2" class="calibre_12"><tt class="calibre3"><span class="calibre_13">unzip ngrok.zip</span></tt></li><li value="3" class="calibre_12"><tt class="calibre3"><span class="calibre_13">mv ngrok ~/bin</span></tt><p class="calibre_6"><img src="images/000094.jpg" class="calibre_130" /></p></li></ul><p class="calibre_4">Now do<a></a> a rehash and type the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ngrok http 80</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000140.jpg" class="calibre_130" /></p><p class="calibre_4">We can see that port forwarding for ports 80 and 443 is running on our local 80 port, at a custom <tt class="calibre3"><span class="calibre_13">ngrok</span></tt> subdomain name. We can also see the region of the server, which by default is located<a></a> in the US. If we are in a different region we can set this with the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ngrok http 80 --region eu</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">The <tt class="calibre3"><span class="calibre_13">ngrok</span></tt> server is located in Europe. In order to test our <tt class="calibre3"><span class="calibre_13">ngrok</span></tt> server, let's use our trusty Python server to show a simple HTML page:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">python -m SimpleHTTPServer</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000126.jpg" class="calibre_130" /></p><p class="calibre_4">Then restart <tt class="calibre3"><span class="calibre_13">ngrok</span></tt> with the<a></a> HTTP traffic forwarded from port <tt class="calibre3"><span class="calibre_13">8000</span></tt>, the default Python web server port:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">ngrok http 8000 --region eu</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000064.jpg" class="calibre_130" /></p><p class="calibre_4">Click on the link provided by <tt class="calibre3"><span class="calibre_13">ngrok</span></tt>, and we will see our web page accessible to the Internet.</p><p class="calibre_4">That's it. No configuration, no account, no headaches. Just a simple one line command that we can run<a></a> from anywhere. The subdomain provided by <tt class="calibre3"><span class="calibre_13">ngrok</span></tt> is a generated one and will change every time we restart <tt class="calibre3"><span class="calibre_13">ngrok</span></tt>. We have the option of using our custom domain name like Linux <a href="https://ngrok.com/">https://ngrok.com/</a>, but only after acquiring a paid account.</p><p class="calibre_4">The <tt class="calibre3"><span class="calibre_13">ngrok</span></tt> also has a web interface at <tt class="calibre3"><span class="calibre_13">http://127.0.0.1:4040</span></tt> where we can see statistics and logs.</p><p class="calibre_4">Power comes from ease of use and <tt class="calibre3"><span class="calibre_13">ngrok</span></tt> provides us with that power:</p><p class="calibre_6"><img src="images/000155.jpg" class="calibre_131" /></p><p class="calibre_4">Here are some<a></a> specific scenarios for using this powerful tool:</p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">When testing integrations with online services that require a callback <tt class="calibre3"><span class="calibre_13">url</span></tt>, such as oAuth login and online payments</li><li value="2" class="calibre_12">When developing mobile applications that connect to a local service</li><li value="3" class="calibre_12">When we want to expose an <tt class="calibre3"><span class="calibre_13">ssh</span></tt> port</li><li value="4" class="calibre_12">When we want to give our clients access to a webpage on our laptop, to show them some code, maybe</li></ul><div class="mbp_pagebreak"></div><p id="calibre_link-51" class="calibre_"><span class="calibre1"><span class="bold"><span class="calibre_5">JSON jamming in the new age</span></span></span></p><p class="calibre_4">Nowadays, JSON is everywhere, in web <tt class="calibre3"><span class="calibre_13">apis</span></tt>, in configuration files, even in logs. JSON is the default format used to structure data. Because it is used so much, there will be times when we will need to<a></a> process JSON from the command line. Could you imagine doing this with <tt class="calibre3"><span class="calibre_13">grep</span></tt>, <tt class="calibre3"><span class="calibre_13">sed,</span></tt> or other conventional tools? That would be quite a challenge.</p><p class="calibre_4">Luckily for us, there is a simple Command-line tool called <tt class="calibre3"><span class="calibre_13">jq</span></tt> that we can use to query JSON files. It comes with its own language syntax, as we will see in just a few minutes. </p><p class="calibre_4">First let's install <tt class="calibre3"><span class="calibre_13">jq</span></tt> with the<a></a> following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install jq</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000024.jpg" class="calibre_130" /></p><p class="calibre_4">Now let's use an example file, a dummy access log in JSON format: <tt class="calibre3"><span class="calibre_13">access.log</span></tt>, which we can also find in the course GitHub repository.</p><p class="calibre_4">Let's start with some simple queries:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq . access.log</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000029.jpg" class="calibre_130" /></p><p class="calibre_4">We will print the JSON objects<a></a> back to the screen, in a pretty format:</p><p class="calibre_6"><img src="images/000192.jpg" class="calibre_130" /></p><p class="calibre_4">If we want to grab<a></a> the <tt class="calibre3"><span class="calibre_13">request</span></tt> method from each request, run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq '.requestMethod' access.log</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000063.jpg" class="calibre_130" /></p><p class="calibre_4">This will print<a></a> the request method from each <tt class="calibre3"><span class="calibre_13">json</span></tt> object. Notice the double quotes around each method:</p><p class="calibre_6"><img src="images/000013.jpg" class="calibre_130" /></p><p class="calibre_4">If we want to use<a></a> the output as input to other scripts we probably don't want the double quotes and that is where the <tt class="calibre3"><span class="calibre_13">-r</span></tt> (raw output) comes in handy:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq '.requestMethod' -r access.log</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000002.jpg" class="calibre_130" /></p><p class="calibre_4">The <tt class="calibre3"><span class="calibre_13">jq</span></tt> is often used<a></a> for big data queries at a much smaller scale:</p><p class="calibre_6"><img src="images/000158.jpg" class="calibre_130" /></p><p class="calibre_4">Say, for example, if we want to<a></a> calculate a statistic of request methods on the log file, we could run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq '.requestMethod' -r access.log | sort | uniq -c</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000084.jpg" class="calibre_130" /></p><p class="calibre_4">Now we can see a<a></a> count of <tt class="calibre3"><span class="calibre_13">get</span></tt>, <tt class="calibre3"><span class="calibre_13">put</span></tt>, <tt class="calibre3"><span class="calibre_13">post,</span></tt> and <tt class="calibre3"><span class="calibre_13">delete</span></tt> requests. If we want the same type of calculation for another field, say <tt class="calibre3"><span class="calibre_13">apikey</span></tt>, we can run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq '.requestHeaders.apikey' -r access.log | sort | uniq -c</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000105.jpg" class="calibre_130" /></p><p class="calibre_4">Since that the syntax for accessing nested fields is to just use the dot as a delimiter between them. Also notice that<a></a> we are using single quotes instead of double quotes to mark our query as a string. As you probably know, the difference between single and double quotes in shell scripting is that double-quoted strings will try to expand variables, while single quoted strings will be treated as a fixed string.</p><p class="calibre_4">To query<a></a> for the request bodies, we will be using the following command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq '.requestBody' access.log</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000086.jpg" class="calibre_130" /></p><p class="calibre_4">As we<a></a> can see from the output, even empty request bodies are logged and will be printed by <tt class="calibre3"><span class="calibre_13">jq</span></tt>:</p><p class="calibre_6"><img src="images/000117.jpg" class="calibre_130" /></p><p class="calibre_4">To skip printing<a></a> empty bodies, we can use jq's query language to select all documents without an empty body:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq 'select(.requestBody != {}) | .requestBody' access.log</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000133.jpg" class="calibre_130" /></p><p class="calibre_4">If we want to refine our search<a></a> even more and only print the first element in the <tt class="calibre3"><span class="calibre_13">dataIds</span></tt> object of the request body, use the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq 'select(.requestBody.dataIds[0] != null) | .requestBody.dataIds[0]' access.log</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000018.jpg" class="calibre_130" /></p><p class="calibre_4">We can even<a></a> perform arithmetic operations with the returned value, such as incrementing it:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">jq 'select(.requestBody.dataIds[0] != null) | .requestBody.dataIds[0] + 1' access.log</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000093.jpg" class="calibre_130" /></p><p class="calibre_4">There are many<a></a> more examples and use cases for <tt class="calibre3"><span class="calibre_13">jq</span></tt>: just go<a></a> to the official <tt class="calibre3"><span class="calibre_13">jq</span></tt> page and visit the tutorial there:</p><p class="calibre_4">
<a href="https://stedolan.github.io/jq/tutorial/">https://stedolan.github.io/jq/tutorial/</a>
</p><p class="calibre_6"><img src="images/000200.jpg" class="calibre_131" /></p><p class="calibre_4">There we can see an<a></a> example of consuming a rest API that returns <tt class="calibre3"><span class="calibre_13">json</span></tt> and pipes it to <tt class="calibre3"><span class="calibre_13">jq</span></tt>. To print a <tt class="calibre3"><span class="calibre_13">json</span></tt> with the commit messages from a <tt class="calibre3"><span class="calibre_13">github</span></tt> repository, run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">curl 'https://api.github.com/repos/stedolan/jq/commits?per_page=5' | jq -r '[.[] | {message: .commit.message}]'</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">As we said, there are many more examples in the documentation, and many more use cases. <tt class="calibre3"><span class="calibre_13">jq</span></tt> is a pretty powerful tool, and a must when interacting with <tt class="calibre3"><span class="calibre_13">json</span></tt> from the command line. </p><p id="calibre_link-52" class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_9">No more mister nice guy</span></span></span></p><p class="calibre_4">The kernel and command line in Linux are stable and powerful. Their reliability has been proven throughout the years, with modern legends about Linux servers running for multiple years in<a></a> a row without restarting. However, graphical interfaces<a></a> are not the same, and they sometimes fail or become unresponsive. This can become annoying and it's always good to have a quick way of killing unresponsive windows. Prepare to meet <tt class="calibre3"><span class="calibre_13">xkill</span></tt>.</p><p class="calibre_4">First, let's replicate an unresponsive window. Go to the terminal and start <tt class="calibre3"><span class="calibre_13">gedit</span></tt>: and then hit <span class="italic">Ctrl </span>+ <span class="italic">z</span>. This will send <tt class="calibre3"><span class="calibre_13">gedit</span></tt> to the background, while the window is still visible. Trying to click inside the window a couple of times will tell Ubuntu that there is no process handling this<a></a> window anymore and Ubuntu will make<a></a> it gray:</p><p class="calibre_6"><img src="images/000139.jpg" class="calibre_19" /></p><p class="calibre_4">Hit <span class="italic">Ctrl </span>+ <span class="italic">z</span>:</p><p class="calibre_6"><img src="images/000138.jpg" class="calibre_132" /></p><p class="calibre_4">This will send <tt class="calibre3"><span class="calibre_13">gedit</span></tt> to the background, while the window is still visible. Trying to click inside the window a<a></a> couple of times will tell Ubuntu that there is no<a></a> process handling this window anymore and Ubuntu will make it grey:</p><p class="calibre_6"><img src="images/000077.jpg" class="calibre_92" /></p><p class="calibre_4">To avoid the process<a></a> of grepping for the <tt class="calibre3"><span class="calibre_13">pid</span></tt> of the window and then killing<a></a> that process we use a little trick. Go to the terminal and run the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">xkill</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000196.jpg" class="calibre_92" /></p><p class="calibre_4">Now we see that the mouse pointer has changed to an <tt class="calibre3"><span class="calibre_13">x</span></tt>.</p><p class="calibre_4">Be careful not to click on anything. Hit <span class="italic">Alt</span> + <span class="italic">Tab</span> to bring back the <tt class="calibre3"><span class="calibre_13">gedit</span></tt> window, and then click it. The <tt class="calibre3"><span class="calibre_13">xkill</span></tt> command will find and kill the process of the window we just clicked on.</p><p class="calibre_4">This trick can be used on any type of window; it's like shooting your windows!</p><p class="calibre_4">OK, but what happens if the whole system becomes unresponsive and you can't type anything in the command line? That might happen, especially on older systems. You can hit the <span class="bold">on/off</span> button<a></a> on your laptop or server, but in some circumstances, this is not possible.</p><p class="calibre_4">What we are going to<a></a> show you now is an old trick kept secret by Linux gurus for a very long time; nobody really talks about it because it's so powerful that it can do damage in the hands of the wrong people. Please make sure you save all your work and close all programs before trying the fatal keyboard shortcut that will force a restart of your Linux system. Hold down <span class="italic">Alt</span> + <span class="italic">PrtScrn</span> and at the same time type the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">reisub</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">If you've tried it, it means that your computer restarted and you had to come back to this course and continue where you left off.</p><p class="calibre_4">Practice this command with great caution and please don't use it to restart your computer on a regular basis. Use it only when the <span class="bold">graphical user interface</span> (<span class="bold">GUI</span>) is not responding.</p><p class="calibre_4">Another trick: if the<a></a> GUI is not responding and you have unsaved work, you can recover some of it from the command line, by accessing one of Linux's virtual terminals. Ubuntu starts, by default, seven virtual terminals and the graphical user<a></a> interface starts on terminal 7. To access any of the seven<a></a> terminals use <span class="italic">Ctrl</span> + <span class="italic">Alt</span> + <span class="italic">F1</span> to <span class="italic">F7</span>. A prompt will appear asking you to log in and, after logging in, you can run some commands to close processes and save work before exiting. To get back to the user interface, hit <span class="italic">Ctrl</span> + <span class="italic">Alt</span> + <span class="italic">F1</span>.</p><div class="mbp_pagebreak"></div><p id="calibre_link-53" class="calibre_"><span class="calibre1"><span class="bold">Chapter&nbsp;6.&nbsp;Terminal Art</span></span></p><p class="calibre_4">All work and no play makes Jack a dull boy. Even though the command line seems boring to a lot of people, it can become great fun. It all comes down to your imagination. Terminals can be stylish and can give a good impression, especially the ones we see in the movies. Colors, ASCII art, and animations can make our terminal come alive. So, here comes some terminal art!</p><p class="calibre_4">In this chapter, we will cover the following: </p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Working with some Linux commands to have fun with</li></ul><p class="calibre_4">Ever heard of fortune cookies? Do you want to have them without getting fat? Just run the following <tt class="calibre3"><span class="calibre_13">apt</span></tt> command to install the utilities that we will be using in this chapter:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">sudo apt install fortune cowsay cmatrix</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000068.jpg" class="calibre_130" /></p><p class="calibre_4">Then run this command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">fortune</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000114.jpg" class="calibre_130" /></p><p class="calibre_4">When running this command, you get fortunes, quotes, and jokes, in a random order. If we combine the command with <tt class="calibre3"><span class="calibre_13">cowsay</span></tt>, we will get the same fortunes, delivered with an image of a cow:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">fortune | cowsay</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000085.jpg" class="calibre_130" /></p><p class="calibre_4">To make this recurrent, we can include it as the last line in our <tt class="calibre3"><span class="calibre_13">zshrc</span></tt> file. Then, every time we open a new terminal window, a cow will deliver a fortune to us.</p><p class="calibre_4">Now this may not be useful (even though it's kinda fun) so, let's do some productive wizardry.</p><p class="calibre_4">Let's predict the weather!</p><p class="calibre_4">All you need is a <tt class="calibre3"><span class="calibre_13">curl</span></tt> command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">curl -4 http://wttr.in/London</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000058.jpg" class="calibre_130" /></p><p class="calibre_4">This will show, in a nice format, a three-day weather forecast for the specified city, in this case, London:</p><p class="calibre_6"><img src="images/000211.jpg" class="calibre_130" /></p><p class="calibre_4">Now, with our newly learned skills, let's put together a shell script that gives us the weather forecast:</p><p class="calibre_4">Open <tt class="calibre3"><span class="calibre_13">~/bin/wttr</span></tt> and type the following:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">#!/bin/bash</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">CITY=${1:-London}</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">curl -4 http://wttr.in/${CITY}</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_1">Give it execution rights and assign a default city, let's say London. Now, run this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">wttr</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000065.jpg" class="calibre_130" /></p><p class="calibre_6"><img src="images/000111.jpg" class="calibre_130" /></p><p class="calibre_4">We get the weather forecast for London. Now, run this:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">wttr paris</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000118.jpg" class="calibre_130" /></p><p class="calibre_4">We get the weather forecast for Paris. Working in the command line for the first time may seem like entering the Matrix and, if that's the case, why not create that environment?</p><p class="calibre_4">Run this command:</p><blockquote class="calibre_14"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt><tt class="calibre3"><span class="bold"><span class="calibre_13">cmatrix</span></span></tt><tt class="calibre3"><span class="calibre_13"><br class="calibre6" /></span></tt></blockquote></blockquote></blockquote></blockquote><p class="calibre_6"><img src="images/000010.jpg" class="calibre_130" /></p><p class="calibre_4">Let your friends be amazed by the complicated stuff you are doing in that cryptic terminal. Terminals are not boring!</p><p class="calibre_6"><img src="images/000194.jpg" class="calibre_133" /></p><p class="calibre_4">They have beautiful colors, easy-to-read output, and they display compact information that puts users in control of their own system.</p><p class="calibre_4">Terminals can be customized and interacted with and they increase your productivity while leaving your mouse to sleep the endless sleep of inefficiency.</p><p class="calibre_4">Of course, all these skills don't come to you overnight, and they require careful tweaking from each user in order to be tailored to their own taste and way of thinking and working. However, after that, they'll fit like a tailored suit, and become an extension of your way of work and sometimes even your job.</p><p class="calibre_4">We hope you've enjoyed all the tips and tricks we've provided, and had fun learning them. Remember that education is a continuous process, so don't stop here! Stay hungry and surf the Internet to keep track of the latest tools and techniques that will transform you into a productivity beast!</p><div class="mbp_pagebreak"></div><p id="calibre_link-54" class="calibre_"><span class="calibre1"><span class="bold">Index</span></span></p><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">A</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">autoenv<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-43">Autoenv &ndash; Set a lasting, project-based habitat</a></li><li value="2" class="calibre_12">URL / <a href="#calibre_link-43">Autoenv &ndash; Set a lasting, project-based habitat</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">C</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">ClipIt<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-24">ClipIt &ndash; copy-paste at its finest</a></li></ul></li><li value="2" class="calibre_21">current working directory (or CWD)<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-30">Shell scripting libraries</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">D</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">desert / <a href="#calibre_link-31">Color scheme desert</a></li><li value="2" class="calibre_12">dig<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-30">Shell scripting libraries</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">E</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">electron open source project<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">URL / <a href="#calibre_link-40">You can run, but you can't hide… from find</a></li></ul></li><li value="2" class="calibre_21">eye of gnome (eog) / <a href="#calibre_link-47">Shrinking spells and other ImageMagick</a></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">F</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">find command<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">using / <a href="#calibre_link-40">You can run, but you can't hide… from find</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">G</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">git<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">conflicts, merging / <a href="#calibre_link-49">Merging Git conflicts with ease</a></li></ul></li><li value="2" class="calibre_21">GitFlow<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-48">Go with the Git flow</a></li><li value="2" class="calibre_12">branching model, for software projects / <a href="#calibre_link-48">Go with the Git flow</a></li><li value="3" class="calibre_12">reference link / <a href="#calibre_link-48">Go with the Git flow</a></li></ul></li><li value="3" class="calibre_21">gitflow-avh<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">URL / <a href="#calibre_link-48">Go with the Git flow</a></li></ul></li><li value="4" class="calibre_21">git hooks<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">analyzing / <a href="#calibre_link-48">Go with the Git flow</a></li></ul></li><li value="5" class="calibre_21">Git hooks / <a href="#calibre_link-48">Go with the Git flow</a></li><li value="6" class="calibre_12">graphical user interface (GUI) / <a href="#calibre_link-51">No more mister nice guy</a></li><li value="7" class="calibre_12">Guake<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-23">Guake &ndash; not Quake!</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">I</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">identify / <a href="#calibre_link-47">Shrinking spells and other ImageMagick</a></li><li value="2" class="calibre_12">imagemagick<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">images, processing from command line / <a href="#calibre_link-47">Shrinking spells and other ImageMagick</a></li></ul></li><li value="3" class="calibre_21">image shrinking tools<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">exploring / <a href="#calibre_link-47">Shrinking spells and other ImageMagick</a></li></ul></li><li value="4" class="calibre_21">indentation / <a href="#calibre_link-34">Keyboard kung fu</a></li><li value="5" class="calibre_12">iputils<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-30">Shell scripting libraries</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">J</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">jq page<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">URL / <a href="#calibre_link-51">JSON jamming in the new age</a></li></ul></li><li value="2" class="calibre_21">JSON<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">processing, from command line / <a href="#calibre_link-51">JSON jamming in the new age</a></li><li value="2" class="calibre_12">xkill command, using / <a href="#calibre_link-51">No more mister nice guy</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">L</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">linux<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">URL, for developers / <a href="#calibre_link-18">Are you ready?</a></li></ul></li><li value="2" class="calibre_21">LISTEN / <a href="#calibre_link-42">Network &ndash; Who's listening?</a></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">M</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Meld / <a href="#calibre_link-49">Merging Git conflicts with ease</a></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">N</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">NERDtree<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-35">Plugin steroids for Vim</a></li><li value="2" class="calibre_12">URL / <a href="#calibre_link-35">Plugin steroids for Vim</a></li></ul></li><li value="2" class="calibre_21">networking commands<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">working with / <a href="#calibre_link-42">Network &ndash; Who's listening?</a></li></ul></li><li value="3" class="calibre_21">ngrok<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-50">From localhost to instant DNS</a></li><li value="2" class="calibre_12">working with / <a href="#calibre_link-50">From localhost to instant DNS</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">O</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Oh-my-zsh framework<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-25">Oh-my-zsh &ndash; your terminal never felt this good before!</a></li><li value="2" class="calibre_12">URL / <a href="#calibre_link-25">Oh-my-zsh &ndash; your terminal never felt this good before!</a></li></ul></li><li value="2" class="calibre_21">OpenDNS<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">URL / <a href="#calibre_link-30">Shell scripting libraries</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">P</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">pathogen<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">URL / <a href="#calibre_link-35">Plugin steroids for Vim</a></li></ul></li><li value="2" class="calibre_21">pipes<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-28">Pipes and subshells &ndash; your shell's salt and pepper</a></li></ul></li><li value="3" class="calibre_21">plugins<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-35">Plugin steroids for Vim</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">R</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">regular expressions<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-27">Basic regular expressions</a></li></ul></li><li value="2" class="calibre_21">rehash / <a href="#calibre_link-50">From localhost to instant DNS</a></li><li value="3" class="calibre_12">request bodies<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">querying / <a href="#calibre_link-51">JSON jamming in the new age</a></li></ul></li><li value="4" class="calibre_21">rm command<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">avoiding / <a href="#calibre_link-43">Don't rm the trash</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">S</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">sed<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">one-liner productivity / <a href="#calibre_link-38">Sed &ndash; one-liner productivity treasure</a></li></ul></li><li value="2" class="calibre_21">shell scripting<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-29">Shell scripting for fun and profit</a></li><li value="2" class="calibre_12">libraries / <a href="#calibre_link-30">Shell scripting libraries</a></li></ul></li><li value="3" class="calibre_21">Snipmate<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">URL / <a href="#calibre_link-35">Plugin steroids for Vim</a></li><li value="2" class="calibre_12">about / <a href="#calibre_link-35">Plugin steroids for Vim</a></li></ul></li><li value="4" class="calibre_21">subshells<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-28">Pipes and subshells &ndash; your shell's salt and pepper</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">T</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Terminator<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-20">Terminator &ndash; the ultimate terminal</a></li><li value="2" class="calibre_12">preferences menu / <a href="#calibre_link-20">Preferences menu</a></li><li value="3" class="calibre_12">features / <a href="#calibre_link-20">Features</a></li></ul></li><li value="2" class="calibre_21">tmux<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">about / <a href="#calibre_link-41">tmux &ndash; virtual consoles, background jobs and the like</a></li><li value="2" class="calibre_12">installing / <a href="#calibre_link-41">tmux &ndash; virtual consoles, background jobs and the like</a></li></ul></li><li value="3" class="calibre_21">trash<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">working with / <a href="#calibre_link-43">Don't rm the trash</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">V</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">Vim<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">supercharging / <a href="#calibre_link-31">Supercharging Vim</a></li><li value="2" class="calibre_12">color scheme desert / <a href="#calibre_link-31">Color scheme desert</a></li><li value="3" class="calibre_12">plugin steroids / <a href="#calibre_link-35">Plugin steroids for Vim</a></li><li value="4" class="calibre_12">reference / <a href="#calibre_link-35">Plugin steroids for Vim</a></li><li value="5" class="calibre_12">password manager / <a href="#calibre_link-36">Vim password manager</a></li><li value="6" class="calibre_12">configuration, restoring / <a href="#calibre_link-37">Instant configuration restoring</a></li></ul></li></ul><p class="calibre_4"><span class="calibre4"><span class="bold"><span class="calibre_5">X</span></span></span></p><div class="calibre_10">&nbsp;</div><ul class="calibre_11"><li value="1" class="calibre_12">xkill command<div class="calibre_10">&nbsp;</div><ul class="calibre_134"><li value="1" class="calibre_12">using / <a href="#calibre_link-51">No more mister nice guy</a></li></ul></li></ul><div class="mbp_pagebreak"></div><p id="calibre_link-57" class="calibre_6"><span class="calibre7"><span class="bold">Table of Contents</span></span></p><p class="calibre_135"><a href="#calibre_link-55">Working with Linux &ndash; Quick Hacks for the Command Line</a></p><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-56">Table of Contents</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-1">Working with Linux &ndash; Quick Hacks for the Command Line</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-2">Credits</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-3">About the Authors</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-4">www.PacktPub.com</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-5">eBooks, discount offers, and more</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-6">Why subscribe?</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-7">Customer Feedback</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-8">Preface</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-9">What this book covers</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-10">What you need for this book</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-11">Who this book is for</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-12">Conventions</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-13">Reader feedback</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-14">Customer support</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-15">Errata</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-16">Piracy</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-17">Questions</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-18">1. Introduction</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-19">Are you ready?</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-20">Terminator &ndash; the ultimate terminal</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-21">Preferences menu</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-22">Features</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-23">Guake &ndash; not Quake!</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-24">ClipIt &ndash; copy-paste at its finest</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-25">2. Productive Shells &ndash; Reinvent the way you work</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-26">Oh-my-zsh &ndash; your terminal never felt this good before!</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-27">Basic regular expressions</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-28">Pipes and subshells &ndash; your shell's salt and pepper</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-29">Shell scripting for fun and profit</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-30">Shell scripting libraries</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-31">3. Vim kung fu</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-32">Supercharging Vim</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-33">Color scheme desert</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-34">Keyboard kung fu</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-35">Plugin steroids for Vim</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-36">Vim password manager</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-37">Instant configuration restoring</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-38">4. CLI &ndash; The Hidden Recipe</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-39">Sed &ndash; one-liner productivity treasure</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-40">You can run, but you can't hide… from find</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-41">tmux &ndash; virtual consoles, background jobs and the like</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-42">Network &ndash; Who's listening?</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-43">Autoenv &ndash; Set a lasting, project-based habitat</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-44">Don't rm the trash</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-45">5. Developers' Treasure</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-46">The spot webserver</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-47">Shrinking spells and other ImageMagick</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-48">Go with the Git flow</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-49">Merging Git conflicts with ease</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-50">From localhost to instant DNS</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-51">JSON jamming in the new age</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-52">No more mister nice guy</a></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-53">6. Terminal Art</a></blockquote></blockquote><blockquote class="calibre5"><blockquote class="calibre_15"><a href="#calibre_link-54">Index</a></blockquote></blockquote><div class="mbp_pagebreak"></div><a></a>
<a></a>
<a></a></div>

</body></html>