<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><title>linuxpocketguide 3rdedition</title></head><body><div class="calibre" id="calibre_link-0">
<p class="calibre1"><b class="calibre3">3rd Edi</b></p>
<p class="calibre1">Linux <b class="calibre3">tion</b></p>
<p class="calibre1">Pocket Guide</p>
<p class="calibre1">ESSENTIAL                                  COMMANDS</p>
<p class="calibre1">Daniel J. Barrett</p>
<p class="calibre1"><a id="calibre_link-231"></a><img src="images/000007.jpg" alt="Image 3" class="calibre2" /></p>
<p class="calibre1"><a id="calibre_link-232"></a><img src="images/000006.jpg" alt="Image 4" class="calibre2" /></p>
<p class="calibre1"><b class="calibre3">3RD EDITION</b></p>
<p class="calibre1"><b class="calibre3">Linux Pocket Guide</b></p>
<p class="calibre1"> <i class="calibre4"><b class="calibre3">Daniel J. Barrett</b></i></p>
<p class="calibre1"><a id="calibre_link-226"></a><b class="calibre3">Linux Pocket Guide</b></p>
<p class="calibre1">by Daniel J. Barrett</p>
<p class="calibre1">Copyright © 2016 Daniel Barrett. All rights reserved. </p>
<p class="calibre1">Printed in the United States of America. </p>
<p class="calibre1">Published by O’Reilly Media, Inc., 1005 Gravenstein Highway North, Sebasto-pol, CA 95472. </p>
<p class="calibre1">O’Reilly books may be purchased for educational, business, or sales promo-tional use. Online editions are also available for most titles (<a href="http://safaribooksonline.com"> <i class="calibre4">http://safaribook‐</i></a></p>
<p class="calibre1"><a href="http://safaribooksonline.com"> <i class="calibre4">sonline.com</i>). F</a>or more information, contact our corporate/institutional sales department: 800-998-9938 or  <i class="calibre4">corporate@oreil y.com</i>. </p>
<p class="calibre1"><b class="calibre3">Editor:</b> Nan Barber</p>
<p class="calibre1"><b class="calibre3">Production Editor:</b> Nicholas Adams</p>
<p class="calibre1"><b class="calibre3">Copyeditor:</b> Jasmine Kwityn</p>
<p class="calibre1"><b class="calibre3">Proofreader:</b> Susan Moritz</p>
<p class="calibre1"><b class="calibre3">Indexer:</b> Daniel Barrett</p>
<p class="calibre1"><b class="calibre3">Interior Designer:</b> David Futato</p>
<p class="calibre1"><b class="calibre3">Cover Designer:</b> Karen Montgomery</p>
<p class="calibre1"><b class="calibre3">Illustrator:</b> Rebecca Demarest</p>
<p class="calibre1">June 2016:</p>
<p class="calibre1">Third Edition</p>
<p class="calibre1"><b class="calibre3">Revision History for the Third Edition</b></p>
<p class="calibre1">2016-05-27:  First Release</p>
<p class="calibre1">2016-07-22:  Second Release</p>
<p class="calibre1"><a href="http://oreilly.com/catalog/errata.csp?isbn=9781491927571">See  <i class="calibre4">http://oreil y.com/catalog/errata.csp?isbn=9781491927571</i></a> for release details. </p>
<p class="calibre1">The O’Reilly logo is a registered trademark of O’Reilly Media, Inc.  <i class="calibre4">Linux</i> <i class="calibre4">Pocket Guide</i>, the cover image, and related trade dress are trademarks of O’Reilly Media, Inc. </p>
<p class="calibre1">While the publisher and the author have used good faith efforts to ensure that the information and instructions contained in this work are accurate, the publisher and the author disclaim all responsibility for errors or omissions, including without limitation responsibility for damages resulting from the use of or reliance on this work. Use of the information and instructions contained in this work is at your own risk. If any code samples or other technology this work contains or describes is subject to open source licenses or the intellec-tual property rights of others, it is your responsibility to ensure that your use thereof complies with such licenses and/or rights. </p>
<p class="calibre1">978-1-491-92757-1</p>
<p class="calibre1">[M]</p>
<p class="calibre1"><a id="calibre_link-227"></a><b class="calibre3">Table of Contents</b></p>
<p class="calibre1"><a href="#calibre_link-1"><b class="calibre3">Linux Pocket Guide                                                                                            1</b></a></p>
<p class="calibre1"><a href="#calibre_link-1">What’s in This Book? </a>1</p>
<p class="calibre1"><a href="#calibre_link-2">Practicing with This Book                                                                         </a>10</p>
<p class="calibre1"><a href="#calibre_link-3">Getting Help                                                                                                 </a>11</p>
<p class="calibre1"><a href="#calibre_link-4">Linux: A First View                                                                                      </a>13</p>
<p class="calibre1"><a href="#calibre_link-5">The Filesystem                                                                                             </a>17</p>
<p class="calibre1"><a href="#calibre_link-6">Shell Features                                                                                               </a>26</p>
<p class="calibre1"><a href="#calibre_link-7">Basic File Operations                                                                                  </a>47</p>
<p class="calibre1"><a href="#calibre_link-8">Directory Operations                                                                                  </a>52</p>
<p class="calibre1"><a href="#calibre_link-9">File Viewing                                                                                                  </a>55</p>
<p class="calibre1"><a href="#calibre_link-10">File Creation and Editing                                                                          </a>63</p>
<p class="calibre1"><a href="#calibre_link-11">File Properties                                                                                              </a>69</p>
<p class="calibre1"><a href="#calibre_link-12">File Location                                                                                                 </a>81</p>
<p class="calibre1"><a href="#calibre_link-13">File Text Manipulation                                                                              </a>92</p>
<p class="calibre1"><a href="#calibre_link-14">File Compression and Packaging                                                         </a>108</p>
<p class="calibre1"><a href="#calibre_link-15">File Comparison                                                                                        </a>114</p>
<p class="calibre1"><a href="#calibre_link-16">PDF and PostScript File Handling                                                        </a>120</p>
<p class="calibre1"><a href="#calibre_link-17">Printing                                                                                                        </a>124</p>
<p class="calibre1"><a href="#calibre_link-18">Spellchecking                                                                                             </a>126</p>
<p class="calibre1"><b class="calibre3">iii</b></p>
<p class="calibre1"><a id="calibre_link-233"></a><a href="#calibre_link-19">Disks and Filesystems                                                                              </a>128</p>
<p class="calibre1"><a href="#calibre_link-20">Backups and Remote Storage                                                               </a>134</p>
<p class="calibre1"><a href="#calibre_link-21">Viewing Processes                                                                                    </a>138</p>
<p class="calibre1"><a href="#calibre_link-22">Controlling Processes                                                                              </a>143</p>
<p class="calibre1"><a href="#calibre_link-23">Scheduling Jobs                                                                                        </a>148</p>
<p class="calibre1"><a href="#calibre_link-24">Logins, Logouts, and Shutdowns                                                        </a>154</p>
<p class="calibre1"><a href="#calibre_link-25">Users and Their Environment                                                               </a>156</p>
<p class="calibre1"><a href="#calibre_link-26">User Account Management                                                                   </a>161</p>
<p class="calibre1"><a href="#calibre_link-27">Becoming the Superuser                                                                        </a>166</p>
<p class="calibre1"><a href="#calibre_link-28">Group Management                                                                                </a>167</p>
<p class="calibre1"><a href="#calibre_link-29">Host Information                                                                                      </a>170</p>
<p class="calibre1"><a href="#calibre_link-30">Host Location                                                                                             </a>174</p>
<p class="calibre1"><a href="#calibre_link-31">Network Connections                                                                              </a>179</p>
<p class="calibre1"><a href="#calibre_link-32">Email                                                                                                             </a>184</p>
<p class="calibre1"><a href="#calibre_link-33">Web Browsing                                                                                           </a>188</p>
<p class="calibre1"><a href="#calibre_link-34">Instant Messaging                                                                                    </a>193</p>
<p class="calibre1"><a href="#calibre_link-35">Screen Output                                                                                            </a>198</p>
<p class="calibre1"><a href="#calibre_link-36">Copy and Paste                                                                                          </a>204</p>
<p class="calibre1"><a href="#calibre_link-37">Math and Calculations                                                                            </a>206</p>
<p class="calibre1"><a href="#calibre_link-38">Dates and Times                                                                                        </a>211</p>
<p class="calibre1"><a href="#calibre_link-39">Graphics                                                                                                       </a>215</p>
<p class="calibre1"><a href="#calibre_link-40">Audio and Video                                                                                        </a>218</p>
<p class="calibre1"><a href="#calibre_link-41">Installing Software                                                                                   </a>223</p>
<p class="calibre1"><a href="#calibre_link-42">Programming with Shell Scripts                                                          </a>232</p>
<p class="calibre1"><a href="#calibre_link-43">Final Words                                                                                                </a>248</p>
<p class="calibre1"><a href="#calibre_link-44"><b class="calibre3">Index                                                                                                                 251</b></a></p>
<p class="calibre1"><b class="calibre3">iv  |  Table of Contents</b></p>
<p class="calibre1"><a id="calibre_link-1"></a><b class="calibre3">Linux Pocket Guide</b></p>
<p class="calibre1">Welcome to Linux! If you’re a new user, this book can serve as a quick introduction, as well as a guide to common and practical commands. If you have Linux experience, feel free to skip the introductory material. </p>
<p class="calibre1"><b class="calibre3">What’s in This Book? </b></p>
<p class="calibre1">This book is a short guide,  <i class="calibre4">not a comprehensive reference</i>. We cover important, useful aspects of Linux so you can work productively. We do not, however, present every single command</p>
<p class="calibre1">and every last option (our apologies if your favorite was omitted), nor delve into detail about operating system internals. </p>
<p class="calibre1">Short, sweet, and essential&mdash;that’s our motto. </p>
<p class="calibre1">We focus on  <i class="calibre4">commands</i>, those pesky little words you type on a command line to tell a Linux system what to do. Here’s an</p>
<p class="calibre1">example command that counts lines of text in a file,  <i class="calibre4">myfile</i>: wc -l myfile</p>
<p class="calibre1">We’ll cover the most important Linux commands for the aver‐</p>
<p class="calibre1">age user, such as ls (list files), grep (search for text), mplayer (play audio and video files), and df (measure free disk space). </p>
<p class="calibre1">We touch only briefly on graphical windowing environments</p>
<p class="calibre1">like GNOME and KDE, each of which could fill a  <i class="calibre4">Pocket Guide</i> by itself. </p>
<p class="calibre1"><b class="calibre3">1</b></p>
<p class="calibre1"><a id="calibre_link-120"></a>We’ve organized the material by function to provide a concise learning path. For example, to help you view the contents of a file, we introduce many file-viewing commands together: cat</p>
<p class="calibre1">for short text files, less for longer ones, od for binary files, and so on. Then we explain each command in turn, briefly presenting its common uses and options. </p>
<p class="calibre1">We assume you have access to a Linux system and know how to</p>
<p class="calibre1">log in with your username and password. If not, get your hands on a Linux “live” DVD, such as <a href="http://ubuntu.com/download">Ubuntu</a><a href="https://getfedora.org/">, Fedora, or </a><a href="http://www.knopper.net/knoppix/index-en.html">Knoppix, </a></p>
<p class="calibre1">which you can boot on most computers to play around with</p>
<p class="calibre1">Linux. </p>
<p class="calibre1"><b class="calibre3">What’s New in the Third Edition? </b></p>
<p class="calibre1"> <i class="calibre4">New commands</i></p>
<p class="calibre1">Technology changes quickly, and some commands that</p>
<p class="calibre1">made sense to cover in the first two editions are barely</p>
<p class="calibre1">used today. We’ve replaced these commands with new</p>
<p class="calibre1">ones that you’ll find immediately practical on a modern</p>
<p class="calibre1">Linux system. </p>
<p class="calibre1"> <i class="calibre4">Runnable examples</i></p>
<p class="calibre1">Y<a href="http://linuxpocketguide.com/">ou can now download a set of files from the book’s web‐</a></p>
<p class="calibre1"><a href="http://linuxpocketguide.com/">site and run the book</a>’s example commands as you read them. </p>
<p class="calibre1"> <i class="calibre4">Goodbye, GUI applications</i></p>
<p class="calibre1">We no longer cover applications that have graphical user</p>
<p class="calibre1">interfaces, such as photo editors and web browsers, in</p>
<p class="calibre1">order to focus purely on commands. You can find these</p>
<p class="calibre1">applications yourself pretty easily these days just by</p>
<p class="calibre1">searching the Web. </p>
<p class="calibre1"><b class="calibre3">What’s Linux? </b></p>
<p class="calibre1">Linux is a popular, open source operating system that competes with Microsoft Windows and Mac OS X. Like these other operating systems, Linux has a graphical user interface with windows, icons, and mouse control. However, the real power of</p>
<p class="calibre1"><b class="calibre3">2  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-102"></a>Linux comes from its command-line interface, called the  <i class="calibre4">shel </i>, for typing and running commands like the preceding wc. </p>
<p class="calibre1">Windows and Mac OS X computers can be operated by com‐</p>
<p class="calibre1">mand line as well (Windows with its cmd and PowerShell com‐</p>
<p class="calibre1">mand tools, and OS X with its Terminal application), but most of their users can get along fine without typing commands. On Linux, the shell is critical. If you use Linux without the shell, you are missing out. </p>
<p class="calibre1"><b class="calibre3">What’s a Distro? </b></p>
<p class="calibre1">Linux is extremely configurable and includes thousands of programs. As a result, different varieties of Linux have arisen to serve different needs and tastes. They all share certain core components but may look different and include different programs and files. Each variety is called a  <i class="calibre4">distro</i> (short for “distribution”). Popular distros include Ubuntu Linux, Red Hat</p>
<p class="calibre1">Enterprise Linux, Slackware, and Mint among others. This</p>
<p class="calibre1">book covers core material that should apply to every distro. </p>
<p class="calibre1"><b class="calibre3">What’s a Command? </b></p>
<p class="calibre1">A Linux command typically consists of a  <i class="calibre4">program name</i> followed by  <i class="calibre4">options</i> and  <i class="calibre4">arguments</i>, typed within a shell, like this: wc -l myfile</p>
<p class="calibre1">The program name (wc, short for “word count”) refers to a program somewhere on disk that the shell will locate and run. </p>
<p class="calibre1">Options, which usually begin with a dash, affect the behavior of the program. In the preceding command, the -l option tells wc to count lines and not words. The argument myfile specifies</p>
<p class="calibre1">the file that wc should read and process. </p>
<p class="calibre1">Commands can have multiple options and arguments. Options</p>
<p class="calibre1">may be given individually:</p>
<p class="calibre1">wc -l -w myfile            <i class="calibre4">Two individual options</i></p>
<p class="calibre1">or combined after a single dash:</p>
<p class="calibre1"><b class="calibre3">What’s in This Book?  |  3</b></p>
<p class="calibre1"><a id="calibre_link-234"></a>wc -lw myfile              <i class="calibre4">Same as -l -w</i></p>
<p class="calibre1">though some programs are quirky and do not recognize com‐</p>
<p class="calibre1">bined options. Multiple arguments are also OK:</p>
<p class="calibre1">wc -l myfile myfile2       <i class="calibre4">Count lines in two files</i></p>
<p class="calibre1">Options are not standardized. They may be a single dash and</p>
<p class="calibre1">one character (say, -l), two dashes and a word (--lines), or several other formats. The same option may have different</p>
<p class="calibre1">meanings to different programs: in the command wc -l, the</p>
<p class="calibre1">option -l means “lines of text,” but in ls -l it means “longer output.” Two programs also might use different options to</p>
<p class="calibre1">mean the same thing, such as -q for “run quietly” versus -s for</p>
<p class="calibre1">“run silently.” Some options are followed by a value, such as</p>
<p class="calibre1">-s 10, and space between them might not be required (-s10). </p>
<p class="calibre1">Likewise, arguments are not standardized. They usually represent filenames for input or output, but they can be other things too, like directory names or regular expressions. </p>
<p class="calibre1">Commands can be more interesting than just a single program</p>
<p class="calibre1">with options:</p>
<p class="calibre1">• Commands can run several programs at a time, either in</p>
<p class="calibre1">sequence (one program after another) or in a “pipeline” </p>
<p class="calibre1">with the output of one command becoming the input of</p>
<p class="calibre1">the next. Linux experts use pipelines all the time. </p>
<p class="calibre1">• The Linux command-line user interface&mdash;the  <i class="calibre4">shel </i>&mdash;has a programming language built in. So instead of a command saying “run this program,” it might say, “run this</p>
<p class="calibre1">program, write its output to a file of my choosing, and if</p>
<p class="calibre1">any errors occur, send me an email with the results.” </p>
<p class="calibre1"><b class="calibre3">Shell prompts</b></p>
<p class="calibre1">Before you can type a command, you must wait for the shell to display a special symbol, called a  <i class="calibre4">prompt</i>. A prompt means, “I am waiting for your next command.” Prompts come in all</p>
<p class="calibre1"><b class="calibre3">4  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-94"></a>shapes and sizes, depending on how your shell is configured. </p>
<p class="calibre1">Your prompt might be a dollar sign:</p>
<p class="calibre1">$</p>
<p class="calibre1">or a complex string of text containing your computer name, </p>
<p class="calibre1">username, and possibly other information and symbols:</p>
<p class="calibre1">myhost:~smith$</p>
<p class="calibre1">or various other styles. All these prompts mean the same thing: the shell is ready for your commands. </p>
<p class="calibre1">In this book, we’ll use the unique symbol → to indicate a shell prompt, so you won’t mistakenly type it as part of a command. </p>
<p class="calibre1">Here is a prompt followed by a command:</p>
<p class="calibre1">→ <b class="calibre3">wc -l myfile</b></p>
<p class="calibre1">Some commands will print text on the screen as they run. To</p>
<p class="calibre1">distinguish your command (which you type) from its printed</p>
<p class="calibre1">output (which you don’t), we’ll display the command in bold</p>
<p class="calibre1">like this:</p>
<p class="calibre1">→ <b class="calibre3">wc -l myfile</b>       <i class="calibre4">The command you type</i></p>
<p class="calibre1">18 myfile            <i class="calibre4">The output it produces</i></p>
<p class="calibre1">Some commands in this book can be run successfully only by</p>
<p class="calibre1">an  <i class="calibre4">administrator</i>, a special user with permission to do anything on the system. (Such a user is also called a  <i class="calibre4">superuser</i> or  <i class="calibre4">root</i>.) In this case, we precede the command with sudo:</p>
<p class="calibre1">→ <b class="calibre3">sudo</b>  <i class="calibre4">superuser command goes here</i></p>
<p class="calibre1">We’ll discuss sudo fully in <a href="#calibre_link-27">“Becoming the Superuser” on page</a></p>
<p class="calibre1"><a href="#calibre_link-27">166, but for now</a>, all you need to know is that sudo gives you superpowers and sometimes will prompt for your password. </p>
<p class="calibre1">For example, to count lines in a protected file called  <i class="calibre4">/etc/</i></p>
<p class="calibre1"> <i class="calibre4">shadow</i>, with and without sudo, you could run this command:</p>
<p class="calibre1">→ <b class="calibre3">wc -l /etc/shadow</b>                  <i class="calibre4">This will fail</i> wc: /etc/shadow: Permission denied</p>
<p class="calibre1">→ <b class="calibre3">sudo wc -l /etc/shadow</b>             <i class="calibre4">Now with sudo</i> <b class="calibre3">What’s in This Book?  |  5</b></p>
<p class="calibre1"><a id="calibre_link-146"></a>Password: <b class="calibre3">*******</b></p>
<p class="calibre1">51 /etc/shadow                       <i class="calibre4">It worked! </i></p>
<p class="calibre1"><b class="calibre3">Command-line warm-up</b></p>
<p class="calibre1">To give you a feel for Linux, here are 10 simple commands you can try right now. You must type them  <i class="calibre4">exactly</i>, including capital and small letters, spaces, and all symbols after the prompt. </p>
<p class="calibre1">Display a calendar for April 2017:</p>
<p class="calibre1">→ <b class="calibre3">cal apr 2017</b></p>
<p class="calibre1">April 2017       </p>
<p class="calibre1">Su Mo Tu We Th Fr Sa  </p>
<p class="calibre1">1  </p>
<p class="calibre1">2  3  4  5  6  7  8  </p>
<p class="calibre1">9 10 11 12 13 14 15  </p>
<p class="calibre1">16 17 18 19 20 21 22  </p>
<p class="calibre1">23 24 25 26 27 28 29  </p>
<p class="calibre1">30</p>
<p class="calibre1">List the contents of the  <i class="calibre4">/bin</i> directory, which contains many commands:</p>
<p class="calibre1">→ <b class="calibre3">ls /bin</b></p>
<p class="calibre1">bash      less        rm</p>
<p class="calibre1">bunzip2   lessecho    rmdir</p>
<p class="calibre1">busybox   lessfile    rnano</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">Count the number of visible items in your home directory</p>
<p class="calibre1">(represented here by a special variable HOME that we’ll discuss later):</p>
<p class="calibre1">→ <b class="calibre3">ls $HOME | wc -l</b></p>
<p class="calibre1">8</p>
<p class="calibre1">See how much space is used on a partition of your hard disk:</p>
<p class="calibre1">→ <b class="calibre3">df -h /</b></p>
<p class="calibre1">Filesystem  Size  Used Avail Use% Mounted on</p>
<p class="calibre1">/dev/sdb1    78G   30G   48G  61% /</p>
<p class="calibre1"><b class="calibre3">6  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-228"></a>Watch the processes running on your computer (type “q” to quit):</p>
<p class="calibre1">→ <b class="calibre3">top -d1</b></p>
<p class="calibre1">Print the file  <i class="calibre4">/etc/hosts</i>, which contains names and addresses of computers, on your default printer if you have one set up:</p>
<p class="calibre1">→ <b class="calibre3">lpr /etc/hosts</b></p>
<p class="calibre1">See how long you’ve been logged in:</p>
<p class="calibre1">→ <b class="calibre3">last -1 $USER</b></p>
<p class="calibre1">smith  pts/7 :0  Tue Nov 10 20:12  still logged in</p>
<p class="calibre1">Download a file  <i class="calibre4">sample.pdf</i> from this book’s website to your current directory, without needing a web browser:</p>
<p class="calibre1">→ <b class="calibre3">wget http://linuxpocketguide.com/sample.pdf</b></p>
<p class="calibre1">Display information about your computer’s IP address:</p>
<p class="calibre1">→ <b class="calibre3">ip addr show eth0</b></p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">inet 192.168.1.47</p>
<p class="calibre1">See who owns the domain name  <i class="calibre4">oreil y.com</i> (press the space bar to move forward page by page, and type “q” to quit):</p>
<p class="calibre1">→ <b class="calibre3">whois oreilly.com | less</b></p>
<p class="calibre1">Domain Name: OREILLY.COM</p>
<p class="calibre1">Registrar: GODADDY.COM, LLC</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">Finally, clear the window:</p>
<p class="calibre1">→ <b class="calibre3">clear</b></p>
<p class="calibre1">OK, that was more than 10 commands…but congratulations:</p>
<p class="calibre1">you are now a Linux shell user! </p>
<p class="calibre1"><b class="calibre3">Reading This Book</b></p>
<p class="calibre1">We’ll describe many Linux commands in this book. Each</p>
<p class="calibre1">description begins with a standard heading about the com‐</p>
<p class="calibre1"><b class="calibre3">What’s in This Book?  |  7</b></p>
<p class="calibre1"><a id="calibre_link-45"></a><img src="images/000005.png" alt="Image 5" class="calibre2" /></p>
<p class="calibre1"><a href="#calibre_link-45">mand; Figure 1</a> shows one for the ls (list files) command. This heading demonstrates the general usage in a simple format:</p>
<p class="calibre1">ls [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">which means you’d type “ls” followed, if you choose, by options and then filenames. You wouldn’t type the square brackets “[” </p>
<p class="calibre1">and “]”: they just indicate their contents are optional; and words in italics mean you have to fill in your own specific values, like names of actual files. If you see a vertical bar between options or arguments, perhaps grouped by parentheses:</p>
<p class="calibre1">( <i class="calibre4">file</i> |  <i class="calibre4">directory</i>)</p>
<p class="calibre1">this indicates choice: you may supply either a filename or</p>
<p class="calibre1">directory name as an argument. </p>
<p class="calibre1"> <i class="calibre4">Figure 1. Standard command heading</i></p>
<p class="calibre1">The special heading in <a href="#calibre_link-45">Figure 1 also includes six properties of</a></p>
<p class="calibre1">the command printed in black (supported) or gray (unsuppor‐</p>
<p class="calibre1">ted):</p>
<p class="calibre1"> <i class="calibre4">stdin</i> The command reads from standard input (i.e., your keyboard), by default. See <a href="#calibre_link-46">“Input and Output” on page 15. </a></p>
<p class="calibre1"> <i class="calibre4">stdout</i> The command writes to standard output (i.e., your screen), by default. See <a href="#calibre_link-46">“Input and Output” on page 15. </a></p>
<p class="calibre1"> <i class="calibre4">- file </i> When given a dash (-) argument in place of an input filename, the command reads from standard input; and like‐</p>
<p class="calibre1">wise, if the dash is supplied as an output filename, the</p>
<p class="calibre1">command writes to standard output. For example, the fol‐</p>
<p class="calibre1"><b class="calibre3">8  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-89"></a>lowing wc command line reads the files  <i class="calibre4">myfile</i> and  <i class="calibre4">myfile2</i>, then standard input, then  <i class="calibre4">myfile3</i>:</p>
<p class="calibre1">wc myfile myfile2 - myfile3</p>
<p class="calibre1"> <i class="calibre4">-- opt</i> If you supply the command-line option “--” it means “end of options”: anything appearing later on the command line</p>
<p class="calibre1">is not an option. This is sometimes necessary to work with</p>
<p class="calibre1">a file whose name begins with a dash, which otherwise</p>
<p class="calibre1">would be (mistakenly) treated as an option. For example, </p>
<p class="calibre1">if you have a file named  <i class="calibre4">-dashfile</i>, the command</p>
<p class="calibre1">wc -dashfile will fail because -dashfile will be treated as</p>
<p class="calibre1">an (invalid) option. wc -- -dashfile works. If a command</p>
<p class="calibre1">does not support “--”, you can prepend the current direc‐</p>
<p class="calibre1">tory path “./” to the filename so the dash is no longer the</p>
<p class="calibre1">first character:</p>
<p class="calibre1">wc ./-dashfile</p>
<p class="calibre1">--help</p>
<p class="calibre1">The option --help makes the command print a help mes‐</p>
<p class="calibre1">sage explaining proper usage, then exit. </p>
<p class="calibre1">--version</p>
<p class="calibre1">The option --version makes the command print its ver‐</p>
<p class="calibre1">sion information and exit. </p>
<p class="calibre1"><b class="calibre3">Keystrokes</b></p>
<p class="calibre1">Throughout the book, we use certain symbols to indicate key‐</p>
<p class="calibre1">strokes. Like many other Linux documents, we use the ^ sym‐</p>
<p class="calibre1">bol to mean “press and hold the Control (Ctrl) key,” so for</p>
<p class="calibre1">example, ^D (pronounced “control D”) means “press and hold</p>
<p class="calibre1">the Control key and type D.” We also write ESC to mean “press the Escape key.” Keys like Enter and the space bar should be self-explanatory. </p>
<p class="calibre1"><b class="calibre3">What’s in This Book?  |  9</b></p>
<p class="calibre1"><a id="calibre_link-2"></a><b class="calibre3">Your friend, the echo command</b></p>
<p class="calibre1">In many of our examples, we’ll print information to the screen with the echo command, which we’ll formally describe in</p>
<p class="calibre1"><a href="#calibre_link-35">“Screen Output” on page 198</a>. echo is one of the simplest commands&mdash;it merely prints its arguments on standard output, </p>
<p class="calibre1">once those arguments have been processed by the shell:</p>
<p class="calibre1">→ <b class="calibre3">echo My dog has fleas</b></p>
<p class="calibre1">My dog has fleas</p>
<p class="calibre1">→ <b class="calibre3">echo My name is $USER</b>      <i class="calibre4">Shell variable USER</i></p>
<p class="calibre1">My name is smith</p>
<p class="calibre1"><b class="calibre3">Long command lines</b></p>
<p class="calibre1">Sometimes, a command will be too lengthy to fit on one line in the book. In these cases, we’ll split the command onto multiple lines that end with a backward slash character:</p>
<p class="calibre1">→ <b class="calibre3">echo This is a long command that doesn't fit on \</b></p>
<p class="calibre1"><b class="calibre3">one line</b></p>
<p class="calibre1">This is a long command that doesn't fit on one line</p>
<p class="calibre1">This is not merely a helpful notation: the backslash character actually serves this purpose in the Linux shell, as a “line continuation” character. Of course, if your terminal is wider than this page, you can omit the backslash and just type the whole command on one line. </p>
<p class="calibre1"><b class="calibre3">Practicing with This Book</b></p>
<p class="calibre1">This book comes with a collection of files for practicing with Linux. If you download these files and install them on any</p>
<p class="calibre1">Linux machine, then you can run most of the example com‐</p>
<p class="calibre1"><b class="calibre3">10  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-3"></a>mands in this book verbatim. To download these files for the first time, run these commands:<a href="#calibre_link-3">1</a></p>
<p class="calibre1">→ <b class="calibre3">cd</b></p>
<p class="calibre1">→ <b class="calibre3">wget http://linuxpocketguide.com/LPG-stuff.tar.gz</b></p>
<p class="calibre1">→ <b class="calibre3">tar -xf LPG-stuff.tar.gz</b></p>
<p class="calibre1">These commands create a directory named  <i class="calibre4">linuxpocketguide</i> in your home directory. Any time you see an example command</p>
<p class="calibre1">in this book, simply visit this new directory:</p>
<p class="calibre1">→ <b class="calibre3">cd ~/linuxpocketguide</b></p>
<p class="calibre1">and run the example command. </p>
<p class="calibre1">As you practice, if you’d like to re-download and install the examples (say, if you’ve modified some example files and want a fresh start), simply run the reset-lpg script located in the <i class="calibre4">linuxpocketguide</i> directory:</p>
<p class="calibre1">→ <b class="calibre3">cd ~/linuxpocketguide</b></p>
<p class="calibre1">→ <b class="calibre3">bash reset-lpg</b></p>
<p class="calibre1">If you have placed the examples somewhere other than your</p>
<p class="calibre1">home directory (implying that you are already comfortable</p>
<p class="calibre1">with Linux directories), supply that directory name as an argument to the reset-lpg command:</p>
<p class="calibre1">→ <b class="calibre3">bash reset-lpg /tmp/examples</b></p>
<p class="calibre1">This command would create or refresh the examples in the</p>
<p class="calibre1">directory  <i class="calibre4">/tmp/examples/linuxpocketguide</i>. </p>
<p class="calibre1"><b class="calibre3">Getting Help</b></p>
<p class="calibre1">If you need more information than this book provides, there</p>
<p class="calibre1">are several things you can do. </p>
<p class="calibre1">1 Alternatively, you can download the exam<a href="https://github.com/oreillymedia/linux_pocket_guide">ple files from  <i class="calibre4">https://</i></a></p>
<p class="calibre1"><a href="https://github.com/oreillymedia/linux_pocket_guide"> <i class="calibre4">github.com/oreil ymedia/linux_pocket_guide</i>. </a></p>
<p class="calibre1"><b class="calibre3">Getting Help  |  11</b></p>
<p class="calibre1"><a id="calibre_link-90"></a> <i class="calibre4">Run the </i> man <i class="calibre4"> command</i></p>
<p class="calibre1">The man command displays an online manual page, or</p>
<p class="calibre1"> <i class="calibre4">manpage</i>, for a given program. For example, to learn about counting words in a file with wc, run:</p>
<p class="calibre1">→ <b class="calibre3">man wc</b></p>
<p class="calibre1">To search for manpages by keyword for a particular topic, </p>
<p class="calibre1">use the -k option followed by the keyword (shown here</p>
<p class="calibre1">piped into the command less to display the results one</p>
<p class="calibre1">screenful at a time; press the space bar to continue and q</p>
<p class="calibre1">to quit):</p>
<p class="calibre1">→ <b class="calibre3">man -k database | less</b></p>
<p class="calibre1"> <i class="calibre4">Run the </i> info <i class="calibre4"> command</i></p>
<p class="calibre1">The info command is an extended, hypertext help system</p>
<p class="calibre1">covering many Linux programs. </p>
<p class="calibre1">→ <b class="calibre3">info ls</b></p>
<p class="calibre1">While info is running, some useful keystrokes are:</p>
<p class="calibre1">• To get help, type h</p>
<p class="calibre1">• To quit, type q</p>
<p class="calibre1">• To page forward and backward, use the space bar</p>
<p class="calibre1">and Backspace key, respectively</p>
<p class="calibre1">• To jump between hyperlinks, press Tab</p>
<p class="calibre1">• To follow a hyperlink, press Enter</p>
<p class="calibre1">If info has no documentation on a given program, it dis‐</p>
<p class="calibre1">plays the program’s manpage. For a listing of available</p>
<p class="calibre1">documentation, type info by itself. To learn how to navi‐</p>
<p class="calibre1">gate the info system, type info info. </p>
<p class="calibre1"> <i class="calibre4">Use the </i>--help <i class="calibre4"> option (if any)</i></p>
<p class="calibre1">Many Linux commands respond to the option --help by</p>
<p class="calibre1">printing a short help message. Try:</p>
<p class="calibre1">→ <b class="calibre3">wc --help</b></p>
<p class="calibre1"><b class="calibre3">12  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-4"></a>If the output is longer than the screen, pipe it into the less program to display it in pages (press q to quit):</p>
<p class="calibre1">→ <b class="calibre3">wc --help | less</b></p>
<p class="calibre1"> <i class="calibre4">Examine the directory /usr/share/doc</i></p>
<p class="calibre1">This directory contains supporting documents for many</p>
<p class="calibre1">programs, usually organized by program name and ver‐</p>
<p class="calibre1">sion. For example, files for the text editor emacs, version</p>
<p class="calibre1">24, are likely found (depending on distro) in  <i class="calibre4">/usr/</i></p>
<p class="calibre1"> <i class="calibre4">share/doc/emacs24</i>. </p>
<p class="calibre1"> <i class="calibre4">Distro-specific websites</i></p>
<p class="calibre1">Most Linux distros have an official site that includes docu‐</p>
<p class="calibre1">mentation, discussion forums for questions and answers, </p>
<p class="calibre1">and other resources. Simply enter your distro name (e.g., </p>
<p class="calibre1">“Ubuntu”) into any popular search engine to find its web‐</p>
<p class="calibre1">site. </p>
<p class="calibre1"> <i class="calibre4">Linux help sites</i></p>
<p class="calibre1">There are many websites that answer Linux questions, </p>
<p class="calibre1"><a href="http://www.linuxquestions.org">including  <i class="calibre4">http://www.linuxquestions.org</i></a>, <a href="http://unix.stackexchange.com"> <i class="calibre4">http://unix.stack</i></a></p>
<p class="calibre1"><a href="http://unix.stackexchange.com"> <i class="calibre4">exchange.com</i>, </a><a href="http://www.linuxhelp.net"> <i class="calibre4">http://www.linuxhelp.net</i></a>, and <a href="http://www.linuxforums.org"> <i class="calibre4">http://</i></a></p>
<p class="calibre1"><a href="http://www.linuxforums.org"> <i class="calibre4">www.linuxforums.org</i></a>. </p>
<p class="calibre1"> <i class="calibre4">Web search</i></p>
<p class="calibre1">To decipher a specific Linux error message, copy and paste</p>
<p class="calibre1">the message into a web search engine, verbatim, and you</p>
<p class="calibre1">will likely find helpful results. </p>
<p class="calibre1"><b class="calibre3">Linux: A First View</b></p>
<p class="calibre1">Linux has four major parts:</p>
<p class="calibre1"> <i class="calibre4">The kernel </i></p>
<p class="calibre1">The low-level operating system, handling files, disks, net‐</p>
<p class="calibre1">working, and other necessities we take for granted. Most</p>
<p class="calibre1">users rarely notice the kernel. </p>
<p class="calibre1"><b class="calibre3">Linux: A First View  |  13</b></p>
<p class="calibre1"><a id="calibre_link-54"></a> <i class="calibre4">Supplied programs</i></p>
<p class="calibre1">Thousands of programs for file manipulation, text editing, </p>
<p class="calibre1">mathematics, web browsing, audio, video, computer pro‐</p>
<p class="calibre1">gramming, typesetting, encryption, DVD burning…you</p>
<p class="calibre1">name it. </p>
<p class="calibre1"> <i class="calibre4">The shel</i></p>
<p class="calibre1">A user interface for typing commands, executing them, </p>
<p class="calibre1">and displaying the results. Linux has various shells: the</p>
<p class="calibre1">Bourne shell, Korn shell, C shell, and others. This book</p>
<p class="calibre1">focuses on bash, the Bourne-Again Shell, which is often</p>
<p class="calibre1">the default for user accounts. However, all these shells</p>
<p class="calibre1">have similar basic functions. </p>
<p class="calibre1"> <i class="calibre4">X </i> A graphical system that provides windows, menus, icons, mouse support, and other familiar GUI elements. More</p>
<p class="calibre1">complex graphical environments are built on X; the most</p>
<p class="calibre1">popular are KDE and GNOME. We’ll discuss only a few</p>
<p class="calibre1">programs that open X windows to run. </p>
<p class="calibre1">This book focuses on the second and third parts: supplied programs and the shell. </p>
<p class="calibre1"><b class="calibre3">Running a Shell</b></p>
<p class="calibre1">If you connect to a Linux machine over a network, you will</p>
<p class="calibre1">immediately see a shell, waiting for you to type a command. If instead, you sit down in front of a Linux machine and log into it directly, you’re more likely to be greeted by a graphical desktop full of icons and menus, with no shell in sight. For many users, this is the primary way to work with Linux, and those icons and menus are fine for simple tasks such as reading email and browsing the Web. Nevertheless, for the true power of</p>
<p class="calibre1">Linux, you must dive beneath this graphical interface, into the shell. It might initially be more difficult than icons and menus, but once you’re accustomed to it, the shell becomes easy to use and is  <i class="calibre4">very</i> powerful. </p>
<p class="calibre1"><b class="calibre3">14  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-46"></a><img src="images/000004.png" alt="Image 6" class="calibre2" /></p>
<p class="calibre1">So, how do you run a shell within this graphical interface? The answer is “it depends.” Linux has several graphical interfaces, the most common being GNOME and KDE, and every Linux</p>
<p class="calibre1">system may configure them differently! It’s your job to locate an icon or menu item that lets you open a  <i class="calibre4">shell window</i>: a window with a shell running in it. Look in your system’s main menu or start menu for an application called Terminal, Konsole, xterm, gnome-terminal, uxterm, or something similar. Launch this</p>
<p class="calibre1">program to open a shell window. </p>
<p class="calibre1">The window program (Terminal, Konsole, etc.) is not the shell. </p>
<p class="calibre1">It’s just a graphical program&mdash;possibly with fancy features of its own&mdash;that runs a shell on your behalf. The shell is what</p>
<p class="calibre1">prom<a href="#calibre_link-46">pts you for commands and runs them. Figure 2</a> illustrates this difference. </p>
<p class="calibre1"> <i class="calibre4">Figure 2. The difference between a shell window and the shel</i> This was just a quick introduction. We’ll discuss additional details in <a href="#calibre_link-6">“Shell Features” on page 26</a>, and cover more powerful constructs in <a href="#calibre_link-42">“Programming with Shell Scripts” on page 232</a>. </p>
<p class="calibre1"><b class="calibre3">Input and Output</b></p>
<p class="calibre1">Most Linux commands accept input and produce output. For</p>
<p class="calibre1">example, the wc command accepts input from a file and pro‐</p>
<p class="calibre1"><b class="calibre3">Linux: A First View  |  15</b></p>
<p class="calibre1"><a id="calibre_link-47"></a>duces output (the number of lines, words, and characters) on the screen. </p>
<p class="calibre1">Linux commands are very flexible with input and output. Input can come from files or from  <i class="calibre4">standard input</i>, which is usually your keyboard. Likewise, output is written to files or to  <i class="calibre4">standard output</i>, which is usually your shell window or screen. </p>
<p class="calibre1">Error messages are treated specially and displayed on  <i class="calibre4">standard</i> <i class="calibre4">error</i>, which also is usually your screen but kept separate from standard output. <a href="#calibre_link-47">2</a> Later, we’ll see how to  <i class="calibre4">redirect</i> standard input, output, and error to and from files or pipes. But let’s get our vocabulary straight. When we say a command “reads,” we</p>
<p class="calibre1">mean from standard input unless we say otherwise. And when</p>
<p class="calibre1">a command “writes” or “prints,” we mean on standard output, </p>
<p class="calibre1">unless we’re talking about computer printers. </p>
<p class="calibre1"><b class="calibre3">Users and Superusers</b></p>
<p class="calibre1">Linux is a multiuser operating system: multiple people can use a single Linux computer at the same time. On a given computer, each user is identified by a  <i class="calibre4">username</i>, like “smith” or</p>
<p class="calibre1">“funkyguy,” and owns a (reasonably) private part of the system for doing work. </p>
<p class="calibre1">There is also a special user named  <i class="calibre4">root</i>&mdash;the  <i class="calibre4">superuser</i>&mdash;who has the privileges to do anything at all on the system. Ordinary users are restricted: though they can run most programs, in</p>
<p class="calibre1">general they can modify only the files they own. The superuser, on the other hand, can create, modify, or delete any file and run any program; we’<a href="#calibre_link-27">ll discuss this more in “Becoming the Super‐</a></p>
<p class="calibre1"><a href="#calibre_link-27">user” on page 166</a>. </p>
<p class="calibre1">2 For example, you can capture standard output in a file and still have standard error messages appear on screen. </p>
<p class="calibre1"><b class="calibre3">16  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-5"></a><img src="images/000003.png" alt="Image 7" class="calibre2" /></p>
<p class="calibre1"><b class="calibre3">The Filesystem</b></p>
<p class="calibre1">To make use of any Linux system, you need to be comfortable</p>
<p class="calibre1">with Linux files and  <i class="calibre4">directories</i> (a.k.a. folders). In a “windows and icons” system, the files and directories are obvious on</p>
<p class="calibre1">screen. With a command-line system like the Linux shell, the same files and directories are still present but are not constantly visible, so at times you must remember which directory you are</p>
<p class="calibre1">“in” and how it relates to other directories. You’ll use shell commands like cd and pwd to “move” between directories and keep track of where you are. </p>
<p class="calibre1">Let’s cover some terminology. As we’ve said, Linux files are collected into directories. The directories form a hierarchy, or  <i class="calibre4">tree</i>, as in <a href="#calibre_link-5">Figure 3</a>: one directory may contain other directories, called  <i class="calibre4">subdirectories</i>, which may themselves contain other files and subdirectories, and so on, into infinity. The topmost directory is called the  <i class="calibre4">root directory</i><a href="#calibre_link-5"> and is denoted by a slash (/).3</a></p>
<p class="calibre1"> <i class="calibre4">Figure 3. A Linux filesystem (partial). The root directory is at the top. </i></p>
<p class="calibre1"> <i class="calibre4">The absolute path to the “dan” directory is /home/dan. </i></p>
<p class="calibre1">3 In Linux,  <i class="calibre4">al </i> files and directories descend from the root. This is unlike Windows or DOS, in which different devices are accessed by drive letters. </p>
<p class="calibre1"><b class="calibre3">The Filesystem  |  17</b></p>
<p class="calibre1"><a id="calibre_link-92"></a>We refer to files and directories using a “names and slashes” </p>
<p class="calibre1">syntax called a  <i class="calibre4">path</i>. For instance, this path:</p>
<p class="calibre1"> <i class="calibre4">/one/two/three/four</i></p>
<p class="calibre1">refers to the root directory /, which contains a directory called <i class="calibre4">one</i>, which contains a directory  <i class="calibre4">two</i>, which contains a directory <i class="calibre4">three</i>, which contains a final file or directory,  <i class="calibre4">four</i>. Any such path that begins with a slash, which descends all the way from the root, is called an  <i class="calibre4">absolute</i> path. </p>
<p class="calibre1">Paths don’t have to be absolute: they can be relative to some director<a href="#calibre_link-5">y other than the root. In Figure 3</a>, there are two different directories named  <i class="calibre4">bin</i>, whose absolute paths are  <i class="calibre4">/bin</i> and  <i class="calibre4">/usr/bin</i>. If we simply refer to “the  <i class="calibre4">bin</i> directory,” it’s not clear which one we mean (and there could be many other  <i class="calibre4">bin</i> directories too). More context is needed. Any time you refer to a path that doesn’t begin with a slash, like  <i class="calibre4">bin</i>, it’s called a  <i class="calibre4">relative</i> path. </p>
<p class="calibre1">To make sense of a relative path, you need to know “where you are” in the Linux filesystem. This location is called your  <i class="calibre4">current</i> <i class="calibre4">working directory</i> (or just “current directory”). Every shell has a current working directory, and when you run commands in</p>
<p class="calibre1">that shell, they operate relative to that directory. For example, if your shell is “in” the directory  <i class="calibre4">/usr</i>, and you run a command that refers to a relative path  <i class="calibre4">bin</i>, you’re really referring to  <i class="calibre4">/usr/</i></p>
<p class="calibre1"> <i class="calibre4">bin</i>. In general, if your current directory is  <i class="calibre4">/one/two/three</i>, a relative path  <i class="calibre4">a/b/c</i> would imply the absolute path  <i class="calibre4">/one/two/</i></p>
<p class="calibre1"> <i class="calibre4">three/a/b/c</i>. </p>
<p class="calibre1">Two special relative paths are denoted . (a single period) and .. </p>
<p class="calibre1">(two periods in a row). The former means your current direc‐</p>
<p class="calibre1">tory, and the latter means your  <i class="calibre4">parent</i> directory, one level above. So if your current directory is  <i class="calibre4">/one/two/three</i>, then . </p>
<p class="calibre1">refers to this directory and .. refers to  <i class="calibre4">/one/two</i>. </p>
<p class="calibre1">You “move” your shell from one directory to another using the cd command:</p>
<p class="calibre1">→ <b class="calibre3">cd /usr/local/bin</b></p>
<p class="calibre1"><b class="calibre3">18  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-48"></a>More technically, this command changes your shell’s current working directory to be  <i class="calibre4">/usr/local/bin</i>. This is an absolute change (because the directory begins with “/”). Assuming you installed the book’s directory of examples in your home directory, you can jump into it at any time by running:</p>
<p class="calibre1">→ <b class="calibre3">cd ~/linuxpocketguide</b></p>
<p class="calibre1">(where the tilde is a shorthand we’ll cover in the next section). </p>
<p class="calibre1">You can make relative moves with cd as well:</p>
<p class="calibre1">→ <b class="calibre3">cd d</b>          <i class="calibre4">Enter subdirectory</i> d</p>
<p class="calibre1">→ <b class="calibre3">cd ../mydir</b>   <i class="calibre4">Go up to my parent, then into directory mydir</i> File and directory names may contain most characters you</p>
<p class="calibre1">expect: ca<a href="#calibre_link-48">pital and lowercase letters,4</a> numbers, periods, dashes, underscores, and most symbols (but not “/”, which is reserved for separating directories). For practical use, however, avoid spaces, asterisks, dollar signs, parentheses, and other characters that have special meaning to the shell. Otherwise, you’ll need to quote or esca<a href="#calibre_link-49">pe these characters all the time. (See “Quoting” on</a></p>
<p class="calibre1"><a href="#calibre_link-49">page 36.)</a></p>
<p class="calibre1"><b class="calibre3">Home Directories</b></p>
<p class="calibre1">Users’ personal files are often found in the directory  <i class="calibre4">/home</i> (for ordinary users) or  <i class="calibre4">/root</i> (for the superuser). Your home directory is typically  <i class="calibre4">/home/&lt;your-username&gt; </i> ( <i class="calibre4">/home/smith</i>,  <i class="calibre4">/home/</i></p>
<p class="calibre1"> <i class="calibre4">jones</i>, etc.). There are several ways to locate or refer to your home directory:</p>
<p class="calibre1">4 Linux filenames are case-sensitive, so capital and lowercase letters are not equivalent. </p>
<p class="calibre1"><b class="calibre3">The Filesystem  |  19</b></p>
<p class="calibre1"><a id="calibre_link-91"></a>cd</p>
<p class="calibre1">With no arguments, the cd command returns you (i.e., sets</p>
<p class="calibre1">the shell’s working directory) to your home directory. </p>
<p class="calibre1">HOME <i class="calibre4"> variable</i></p>
<p class="calibre1">The environment variable HOME<a href="#calibre_link-50"> (see “Shell variables” on</a></p>
<p class="calibre1"><a href="#calibre_link-50">page 30) con</a>tains the name of your home directory:</p>
<p class="calibre1">→ <b class="calibre3">echo $HOME</b>      <i class="calibre4">The echo command prints its arguments</i></p>
<p class="calibre1">/home/smith</p>
<p class="calibre1">~</p>
<p class="calibre1">When used in place of a directory, a lone tilde is expanded</p>
<p class="calibre1">by the shell to the name of your home directory. </p>
<p class="calibre1">→ <b class="calibre3">echo ~</b></p>
<p class="calibre1">/home/smith</p>
<p class="calibre1">When the tilde is followed by a slash, the path is relative to HOME:</p>
<p class="calibre1">→ <b class="calibre3">echo ~/linuxpocketguide</b></p>
<p class="calibre1">/home/smith/linuxpocketguide</p>
<p class="calibre1">When the tilde is followed by a username (as in  <i class="calibre4">~fred</i>), the shell expands this string to be the user’s home directory:</p>
<p class="calibre1">→ <b class="calibre3">cd ~fred</b>        <i class="calibre4">If there's a user “fred” on your system</i></p>
<p class="calibre1">→ <b class="calibre3">pwd</b>             <i class="calibre4">The “print working directory” command</i></p>
<p class="calibre1">/home/fred</p>
<p class="calibre1"><b class="calibre3">System Directories</b></p>
<p class="calibre1">A typical Linux system has tens of thousands of system directories. These directories contain operating system files, applications, documentation, and just about everything  <i class="calibre4">except</i> personal user files (which typically live in  <i class="calibre4">/home</i>). </p>
<p class="calibre1">Unless you’re a system administrator, you’ll rarely visit most system directories&mdash;but with a little knowledge you can understand or guess their purposes. Their names often contain three</p>
<p class="calibre1"><a href="#calibre_link-51">parts, as shown in Figure 4. </a></p>
<p class="calibre1"><b class="calibre3">20  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-51"></a><img src="images/000000.png" alt="Image 8" class="calibre2" /></p>
<p class="calibre1"> <i class="calibre4">Figure 4. Directory scope, category, and application</i></p>
<p class="calibre1"><b class="calibre3">Directory path part 1: category</b></p>
<p class="calibre1">A  <i class="calibre4">category</i> tells you the types of files found in a directory. For example, if the category is  <i class="calibre4">bin</i>, you can be reasonably assured that the directory contains programs. Some common categories are as follows:</p>
<p class="calibre1"><b class="calibre3">Categories for programs</b></p>
<p class="calibre1"> <i class="calibre4">bin</i> </p>
<p class="calibre1">Programs (usually binary files)</p>
<p class="calibre1"> <i class="calibre4">sbin</i> </p>
<p class="calibre1">Programs (usually binary files) intended to be run by the superuser <i class="calibre4">lib</i> </p>
<p class="calibre1">Libraries of code used by programs</p>
<p class="calibre1"><b class="calibre3">Categories for documentation</b></p>
<p class="calibre1"> <i class="calibre4">doc</i> </p>
<p class="calibre1">Documentation</p>
<p class="calibre1"> <i class="calibre4">info</i></p>
<p class="calibre1">Documentation files for emacs’s built-in help system</p>
<p class="calibre1"> <i class="calibre4">man</i> </p>
<p class="calibre1">Documentation files (manual pages) displayed by the man</p>
<p class="calibre1">program; the files are often compressed and are sprinkled with typesetting commands for man to interpret</p>
<p class="calibre1"> <i class="calibre4">share</i> </p>
<p class="calibre1">Program-specific files, such as examples and installation</p>
<p class="calibre1">instructions</p>
<p class="calibre1"><b class="calibre3">Categories for configuration</b></p>
<p class="calibre1"> <i class="calibre4">etc</i> </p>
<p class="calibre1">Configuration files for the system (and other miscellaneous stuff) <i class="calibre4">init.d</i> </p>
<p class="calibre1">Configuration files for booting Linux</p>
<p class="calibre1"> <i class="calibre4">rc.d</i> </p>
<p class="calibre1">Configuration files for booting Linux; also  <i class="calibre4">rc1.d</i>,  <i class="calibre4">rc2.d</i>, ... </p>
<p class="calibre1"><b class="calibre3">Categories for programming</b></p>
<p class="calibre1"> <i class="calibre4">include</i> </p>
<p class="calibre1">Header files for programming</p>
<p class="calibre1"> <i class="calibre4">src</i> </p>
<p class="calibre1">Source code for programs</p>
<p class="calibre1"><b class="calibre3">The Filesystem  |  21</b></p>
<p class="calibre1"><a id="calibre_link-126"></a><b class="calibre3">Categories for web files</b></p>
<p class="calibre1"> <i class="calibre4">cgi-bin</i> </p>
<p class="calibre1">Scripts/programs that run on web pages</p>
<p class="calibre1"> <i class="calibre4">html</i> </p>
<p class="calibre1">Web pages</p>
<p class="calibre1"> <i class="calibre4">public_html</i>  Web pages, typically in users’ home directories <i class="calibre4">www</i> </p>
<p class="calibre1">Web pages</p>
<p class="calibre1"><b class="calibre3">Categories for display</b></p>
<p class="calibre1"> <i class="calibre4">fonts</i> </p>
<p class="calibre1">Fonts (surprise!)</p>
<p class="calibre1"> <i class="calibre4">X11</i> </p>
<p class="calibre1">X window system files</p>
<p class="calibre1"><b class="calibre3">Categories for hardware</b></p>
<p class="calibre1"> <i class="calibre4">dev</i> </p>
<p class="calibre1">Device files for interfacing with disks and other hardware</p>
<p class="calibre1"> <i class="calibre4">media</i> </p>
<p class="calibre1">Mount points: directories that provide access to disks</p>
<p class="calibre1"> <i class="calibre4">mnt</i> </p>
<p class="calibre1">Mount points: directories that provide access to disks</p>
<p class="calibre1"><b class="calibre3">Categories for runtime files</b></p>
<p class="calibre1"> <i class="calibre4">var</i> </p>
<p class="calibre1">Files specific to this computer, created and updated as the</p>
<p class="calibre1">computer runs</p>
<p class="calibre1"> <i class="calibre4">lock</i> </p>
<p class="calibre1">Lock files, created by programs to say, “I am running”; the</p>
<p class="calibre1">existence of a lock file may prevent another program, or another instance of the same program, from running or performing an</p>
<p class="calibre1">action</p>
<p class="calibre1"> <i class="calibre4">log</i> </p>
<p class="calibre1">Log files that track important system events, containing error, warning, and informational messages</p>
<p class="calibre1"> <i class="calibre4">mail</i> </p>
<p class="calibre1">Mailboxes for incoming mail</p>
<p class="calibre1"> <i class="calibre4">run</i> </p>
<p class="calibre1">PID files, which contain the IDs of running processes; these files are often consulted to track or kill particular processes</p>
<p class="calibre1"> <i class="calibre4">spool</i> </p>
<p class="calibre1">Files queued or in transit, such as outgoing email, print jobs, and scheduled jobs</p>
<p class="calibre1"> <i class="calibre4">tmp</i> </p>
<p class="calibre1">Temporary storage for programs and/or people to use</p>
<p class="calibre1"> <i class="calibre4">proc</i> </p>
<p class="calibre1"><a href="#calibre_link-52">Operating system state: see “Operating System Directories” on</a></p>
<p class="calibre1"><a href="#calibre_link-52">page 24</a></p>
<p class="calibre1"><b class="calibre3">22  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-53"></a><b class="calibre3">Directory path part 2: scope</b></p>
<p class="calibre1">The  <i class="calibre4">scope</i> of a directory path describes, at a high level, the purpose of an entire directory hierarchy. Some common ones are:</p>
<p class="calibre1"> <i class="calibre4">/</i></p>
<p class="calibre1">System files supplied with Linux (pronounced “root”)</p>
<p class="calibre1"> <i class="calibre4">/usr</i></p>
<p class="calibre1">More system files supplied with Linux (pronounced “user”)</p>
<p class="calibre1"> <i class="calibre4">/usr/local</i></p>
<p class="calibre1">System files developed “locally,” either for your organization or your individual computer</p>
<p class="calibre1"> <i class="calibre4">/usr/games </i> Games (surprise!)</p>
<p class="calibre1">So for a category like  <i class="calibre4">lib</i> (libraries), your Linux system might have directories  <i class="calibre4">/lib</i>,  <i class="calibre4">/usr/lib</i>,  <i class="calibre4">/usr/local/lib</i>, and  <i class="calibre4">/usr/games/lib</i>. </p>
<p class="calibre1">There isn’t a clear distinction between  <i class="calibre4">/</i> and  <i class="calibre4">/usr</i> in practice, but there is a sense that  <i class="calibre4">/</i> is “lower level” and closer to the operating system. So  <i class="calibre4">/bin</i> contains more fundamental programs</p>
<p class="calibre1">than  <i class="calibre4">/usr/bin</i> does, such as ls and cat, and  <i class="calibre4">/lib</i> contains more fundamental libraries than  <i class="calibre4">/usr/lib</i><a href="#calibre_link-53"> does, and so on.5</a>  <i class="calibre4">/usr/</i></p>
<p class="calibre1"> <i class="calibre4">local/bin</i> contains programs not included in your distro. These are not hard-and-fast rules but typical cases. </p>
<p class="calibre1"><b class="calibre3">Directory path part 3: application</b></p>
<p class="calibre1">The application part of a directory path, if present, is usually the name of a program. After the scope and category (say,  <i class="calibre4">/usr/</i></p>
<p class="calibre1"> <i class="calibre4">local/doc</i>), a program may have its own subdirectory (say,  <i class="calibre4">/usr/</i></p>
<p class="calibre1"> <i class="calibre4">local/doc/myprogram</i>) containing files it needs. </p>
<p class="calibre1">5 Some distros no longer make these distinctions. Fedora, for example, makes  <i class="calibre4">/bin</i> a symbolic link to  <i class="calibre4">/usr/bin</i>. </p>
<p class="calibre1"><b class="calibre3">The Filesystem  |  23</b></p>
<p class="calibre1"><a id="calibre_link-52"></a><b class="calibre3">Operating System Directories</b></p>
<p class="calibre1">Some directories support the Linux kernel, the lowest-level part of the Linux operating system:</p>
<p class="calibre1"> <i class="calibre4">/boot </i> Files for booting the system. This is where the kernel lives, typically named  <i class="calibre4">/boot/vmlinuz</i> or similar. </p>
<p class="calibre1"> <i class="calibre4">/lost+found </i></p>
<p class="calibre1">Damaged files that were rescued by a disk recovery tool. </p>
<p class="calibre1"> <i class="calibre4">/proc </i> Describes currently running processes; for advanced users. </p>
<p class="calibre1">The files in  <i class="calibre4">/proc</i> provide views into the running kernel and have special properties. They always appear to be zero sized, read-only, and dated now:</p>
<p class="calibre1">→ <b class="calibre3">ls -lG /proc/version</b></p>
<p class="calibre1">-r--r--r--  1 root  0 Oct  3 22:55 /proc/version</p>
<p class="calibre1">However, their contents magically contain information about</p>
<p class="calibre1">the Linux kernel:</p>
<p class="calibre1">→ <b class="calibre3">cat /proc/version</b></p>
<p class="calibre1">Linux version 2.6.32-71.el6.i686 ... </p>
<p class="calibre1">Files in  <i class="calibre4">/proc</i> are used mostly by programs, but feel free to explore them. Here are some examples:</p>
<p class="calibre1"> <i class="calibre4">/proc/</i></p>
<p class="calibre1">A list of your computer’s input/output hardware. </p>
<p class="calibre1"> <i class="calibre4">ioports</i></p>
<p class="calibre1"> <i class="calibre4">/proc/</i></p>
<p class="calibre1">Information about your computer’s processors. </p>
<p class="calibre1"> <i class="calibre4">cpuinfo</i></p>
<p class="calibre1"> <i class="calibre4">/proc/</i></p>
<p class="calibre1">The operating system version. The uname command prints the</p>
<p class="calibre1"> <i class="calibre4">version</i></p>
<p class="calibre1">same information. </p>
<p class="calibre1"> <i class="calibre4">/proc/</i></p>
<p class="calibre1">System uptime (i.e., seconds elapsed since the system was last <i class="calibre4">uptime</i></p>
<p class="calibre1">booted). Run the uptime command for a more human-readable</p>
<p class="calibre1">result. </p>
<p class="calibre1"><b class="calibre3">24  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-62"></a> <i class="calibre4">/proc/nnn</i></p>
<p class="calibre1">Information about the Linux process with ID  <i class="calibre4">nnn</i>, where  <i class="calibre4">nnn</i> is a positive integer. </p>
<p class="calibre1"> <i class="calibre4">/proc/self</i></p>
<p class="calibre1">Information about the current process you’re running; a symbolic link to a  <i class="calibre4">/proc/nnn</i> file, automatically updated. Try running:</p>
<p class="calibre1">→ <b class="calibre3">ls -l /proc/self</b></p>
<p class="calibre1">several times in a row: you’ll see  <i class="calibre4">/proc/self</i> changing where it points. </p>
<p class="calibre1"><b class="calibre3">File Protections</b></p>
<p class="calibre1">A Linux system may have many users with login accounts. To</p>
<p class="calibre1">maintain privacy and security, most users can access only  <i class="calibre4">some</i> files on the system, not all. This access control is embodied in two questions:</p>
<p class="calibre1"> <i class="calibre4">Who has permission? </i></p>
<p class="calibre1">Every file and directory has an  <i class="calibre4">owner</i> who has permission to do anything with it. Typically, the user who created a</p>
<p class="calibre1">file is its owner, but ownership can be changed by the</p>
<p class="calibre1">superuser. </p>
<p class="calibre1">Additionally, a predefined  <i class="calibre4">group</i> of users may have permission to access a file. Groups are defined by the system</p>
<p class="calibre1">administrator and are covered in <a href="#calibre_link-28">“Group Management” </a></p>
<p class="calibre1"><a href="#calibre_link-28">on page 167</a>. </p>
<p class="calibre1">Finally, a file or directory can be opened to  <i class="calibre4">all users</i> with login accounts on the system. You’ll also see this set of</p>
<p class="calibre1">users called  <i class="calibre4">the world</i> or simply  <i class="calibre4">other</i>. </p>
<p class="calibre1"> <i class="calibre4">What kind of permission is granted? </i></p>
<p class="calibre1">File owners, groups, and the world may each have permis‐</p>
<p class="calibre1">sion to  <i class="calibre4">read</i>,  <i class="calibre4">write</i> (modify), and  <i class="calibre4">execute</i> (run) particular files. Permissions also extend to directories, which users</p>
<p class="calibre1">may read (access files within the directory), write (create</p>
<p class="calibre1">and delete files within the directory), and execute (enter</p>
<p class="calibre1">the directory with cd). </p>
<p class="calibre1"><b class="calibre3">The Filesystem  |  25</b></p>
<p class="calibre1"><a id="calibre_link-6"></a>To see the ownership and permissions of a file named  <i class="calibre4">myfile</i>, run:</p>
<p class="calibre1">→ <b class="calibre3">ls -l myfile</b></p>
<p class="calibre1">-rw-r--r-- 1 smith smith  1168 Oct 28  2015 myfile</p>
<p class="calibre1">To see the ownership and permissions of a directory named</p>
<p class="calibre1"> <i class="calibre4">mydir</i>, add the -d option:</p>
<p class="calibre1">→ <b class="calibre3">ls -ld mydir</b></p>
<p class="calibre1">drwxr-x--- 3 smith smith  4096 Jan 08 15:02 mydir</p>
<p class="calibre1">In the output, the file permissions are the 10 leftmost characters, a string of r (read), w (write), x (execute), other letters, and dashes. For example:</p>
<p class="calibre1">-rwxr-x---</p>
<p class="calibre1">Here’s what these letters and symbols mean:</p>
<p class="calibre1">Position Meaning</p>
<p class="calibre1">1</p>
<p class="calibre1">File type: - = file, d = directory, l = symbolic link, p = named pipe, c = character device, b = block device</p>
<p class="calibre1">2&ndash;4</p>
<p class="calibre1">Read, write, and execute permissions for the file’s owner</p>
<p class="calibre1">5&ndash;7</p>
<p class="calibre1">Read, write, and execute permissions for the file’s group</p>
<p class="calibre1">8&ndash;10</p>
<p class="calibre1">Read, write, and execute permissions for all other users</p>
<p class="calibre1">So our example -rwxr-x--- means a file that can be read, written, and executed by the owner, read and executed by the</p>
<p class="calibre1">group, and not accessed at all by other users. We describe ls in more detail in <a href="#calibre_link-7">“Basic File Operations” on page 47. T</a>o change the owner, group ownership, or permissions of a file, use the chown, chgrp, and chmod commands, respectively, as described</p>
<p class="calibre1"><a href="#calibre_link-11">in “File Properties” on page 69</a>. </p>
<p class="calibre1"><b class="calibre3">Shell Features</b></p>
<p class="calibre1">In order to run commands on a Linux system, you’ll need</p>
<p class="calibre1">somewhere to type them. That “somewhere” is called the  <i class="calibre4">shel </i>, which is Linux’s command-line user interface: you type a com-26  |  Linux Pocket Guide</p>
<p class="calibre1"><a id="calibre_link-55"></a>mand and press Enter, and the shell runs whatever program (or programs) you’ve requested. (See <a href="#calibre_link-54">“Running a Shell” on page 14</a></p>
<p class="calibre1">to learn how to open a shell window.)</p>
<p class="calibre1">For example, to see who’s logged into the computer, you could execute this command in a shell:</p>
<p class="calibre1">→ <b class="calibre3">who</b></p>
<p class="calibre1">silver       :0    Sep 23 20:44</p>
<p class="calibre1">byrnes    pts/0    Sep 15 13:51</p>
<p class="calibre1">barrett   pts/1    Sep 22 21:15</p>
<p class="calibre1">silver    pts/2    Sep 22 21:18</p>
<p class="calibre1">(Recall that the → symbol represents the shell prompt for us, indicating that the shell is ready to run a command.) A single command can also invoke several programs at the same time, </p>
<p class="calibre1">and even connect programs together so they interact. Here’s a command that redirects the output of the who program to</p>
<p class="calibre1">become the input of the wc program, which counts lines of text in a file; the result is the number of lines in the output of who:</p>
<p class="calibre1">→ <b class="calibre3">who | wc -l</b></p>
<p class="calibre1">4</p>
<p class="calibre1">telling you how many users are logged in. <a href="#calibre_link-55">6 The vertical bar</a>, called a  <i class="calibre4">pipe</i>, makes the connection between who and wc. </p>
<p class="calibre1">A shell is actually a program itself, and Linux has several. We focus on bash (the Bourne-Again Shell), located in  <i class="calibre4">/bin/bash</i>, which is usually the default in Linux distros. To see if you’re running bash, type:</p>
<p class="calibre1">→ <b class="calibre3">echo $SHELL</b></p>
<p class="calibre1">/bin/bash</p>
<p class="calibre1">If you’re not running bash and wish to do so, you can run the command bash directly (type exit when done to return to your 6 Actually, how many interactive shells those users are running. If a user has two shells running, like the user “silver” in our example, he’ll have two lines of output from who. </p>
<p class="calibre1"><b class="calibre3">Shell Features  |  27</b></p>
<p class="calibre1"><a id="calibre_link-210"></a>regular shell). To make bash your default shell, see <a href="#calibre_link-56">chsh on</a></p>
<p class="calibre1"><a href="#calibre_link-56">page 165. </a></p>
<p class="calibre1"><b class="calibre3">The Shell Versus Programs</b></p>
<p class="calibre1">When you run a command, it might invoke a Linux program</p>
<p class="calibre1">(like who), or instead it might be a  <i class="calibre4">built-in command</i>, a feature of the shell itself. You can tell the difference with the type command:</p>
<p class="calibre1">→ <b class="calibre3">type who</b></p>
<p class="calibre1">who is /usr/bin/who</p>
<p class="calibre1">→ <b class="calibre3">type cd</b></p>
<p class="calibre1">cd is a shell builtin</p>
<p class="calibre1"><b class="calibre3">Selected Features of the bash Shell</b></p>
<p class="calibre1">A shell does much more than simply run commands. It also has powerful features to make this task easier: wildcards for matching filenames, a “command history” to recall previous com‐</p>
<p class="calibre1">mands quickly, pipes for making the output of one command</p>
<p class="calibre1">become the input of another, variables for storing values for use by the shell, and more. Take the time to learn these features, and you will become faster and more productive with Linux. </p>
<p class="calibre1">Let’s skim the surface and introduce you to these useful tools. </p>
<p class="calibre1">(For full documentation, run info bash.)</p>
<p class="calibre1"><b class="calibre3">Wildcards</b></p>
<p class="calibre1">Wildcards are a shorthand for sets of files with similar names. </p>
<p class="calibre1">For example, a* means all files whose names begin with lowercase “a”. Wildcards are “expanded” by the shell into the actual set of filenames they match. So if you type:</p>
<p class="calibre1">→ <b class="calibre3">ls a*</b></p>
<p class="calibre1">the shell first expands a* into the filenames that begin with “a” </p>
<p class="calibre1">in your current directory, as if you had typed:</p>
<p class="calibre1">→ <b class="calibre3">ls aardvark adamantium apple</b></p>
<p class="calibre1"><b class="calibre3">28  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-61"></a>ls never knows you used a wildcard: it sees only the final list of filenames after the shell expands the wildcard. This means</p>
<p class="calibre1"> <i class="calibre4">every</i> Linux command, regardless of its origin, works with wildcards and other shell features. This is a critically important point. A surprising number of Linux users mistakenly think</p>
<p class="calibre1">that programs expand their own wildcards. They don’t. Wild‐</p>
<p class="calibre1">cards are handled completely by the shell before the associated program even runs. </p>
<p class="calibre1"><b class="calibre3">Dot Files</b></p>
<p class="calibre1">Filenames with a leading period, called  <i class="calibre4">dot files</i>, are special in Linux. When you name a file beginning with a period, it will not be displayed by some programs:</p>
<p class="calibre1">• ls will omit the file from directory listings, unless you</p>
<p class="calibre1">provide the -a option. </p>
<p class="calibre1">• Shell wildcards do not match a leading period. </p>
<p class="calibre1">Effectively, dot files are hidden unless you explicitly ask to see them. As a result, sometimes they are called “hidden files.” </p>
<p class="calibre1">Wildcards never match two characters: a leading period, and</p>
<p class="calibre1">the directory slash (/). These must be given literally, as in .pro*</p>
<p class="calibre1">to match  <i class="calibre4">.profile</i>, or /etc/*conf to match all filenames ending in  <i class="calibre4">conf</i> in the  <i class="calibre4">/etc</i> directory. </p>
<p class="calibre1">Wildcard Meaning</p>
<p class="calibre1">*</p>
<p class="calibre1">Zero or more consecutive characters</p>
<p class="calibre1">? </p>
<p class="calibre1">Any single character</p>
<p class="calibre1">[ <i class="calibre4">set</i>]</p>
<p class="calibre1">Any single character in the given  <i class="calibre4">set</i>, most commonly a sequence of characters, like [aeiouAEIOU] for all vowels, or a range with a dash, like [A-Z] for all capital letters</p>
<p class="calibre1">[^ <i class="calibre4">set</i>] Any single character  <i class="calibre4">not</i> in the given  <i class="calibre4">set</i>, such as [^0-9] to mean any nondigit</p>
<p class="calibre1"><b class="calibre3">Shell Features  |  29</b></p>
<p class="calibre1"><a id="calibre_link-50"></a>Wildcard Meaning</p>
<p class="calibre1">[!  <i class="calibre4">set</i>] Same as [^ <i class="calibre4">set</i>]</p>
<p class="calibre1">When using character sets, if you want to include a literal dash in the set, put it first or last. To include a literal closing square bracket in the set, put it first. To include a ^ or ! symbol literally, don’t put it first. </p>
<p class="calibre1"><b class="calibre3">Brace expansion</b></p>
<p class="calibre1">Similar to wildcards, expressions with curly braces also expand to become multiple arguments to a command. The comma-separated expression:</p>
<p class="calibre1">{X,YY,ZZZ}</p>
<p class="calibre1">expands first to X, then YY, and finally ZZZ within a command line, like this:</p>
<p class="calibre1">→ <b class="calibre3">echo sand{X,YY,ZZZ}wich</b></p>
<p class="calibre1">sandXwich sandYYwich sandZZZwich</p>
<p class="calibre1">Braces work with any strings, unlike wildcards which expand</p>
<p class="calibre1">only if they match existing filenames. </p>
<p class="calibre1"><b class="calibre3">Shell variables</b></p>
<p class="calibre1">You can define variables and their values by assigning them:</p>
<p class="calibre1">→ <b class="calibre3">MYVAR=3</b></p>
<p class="calibre1">To refer to a value, simply place a dollar sign in front of the variable name:</p>
<p class="calibre1">→ <b class="calibre3">echo $MYVAR</b></p>
<p class="calibre1">3</p>
<p class="calibre1"><b class="calibre3">30  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-151"></a>Some variables are standard and commonly defined by your shell upon login:</p>
<p class="calibre1">Variable</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">DISPLAY  The name of your X window display</p>
<p class="calibre1">HOME </p>
<p class="calibre1">Your home directory, such as  <i class="calibre4">/home/smith</i></p>
<p class="calibre1">LOGNAME  Your login name, such as smith</p>
<p class="calibre1">MAIL </p>
<p class="calibre1">Your incoming mailbox, such as  <i class="calibre4">/var/spool/mail/smith</i></p>
<p class="calibre1">OLDPWD </p>
<p class="calibre1">Your shell’s previous directory, prior to the last cd command PATH </p>
<p class="calibre1">Your shell search path: directories separated by colons</p>
<p class="calibre1">PWD </p>
<p class="calibre1">Your shell’s current directory</p>
<p class="calibre1">SHELL </p>
<p class="calibre1">The path to your shell (e.g.,  <i class="calibre4">/bin/bash</i>)</p>
<p class="calibre1">TERM </p>
<p class="calibre1">The type of your terminal (e.g., xterm or vt100)</p>
<p class="calibre1">USER </p>
<p class="calibre1">Your login name</p>
<p class="calibre1">The scope of the variable (i.e., which programs know about it) is, by default, the shell in which it’s defined. To make a variable and its value available to other programs your shell invokes (i.e., subshells), use the export command:</p>
<p class="calibre1">→ <b class="calibre3">export MYVAR</b></p>
<p class="calibre1">or the shorthand:</p>
<p class="calibre1">→ <b class="calibre3">export MYVAR=3</b></p>
<p class="calibre1">Your variable is now called an  <i class="calibre4">environment variable</i>, because it’s available to other programs in your shell’s “environment.” So in the preceding example, the exported variable MYVAR is available to all programs run by that same shell (including shell scripts: see <a href="#calibre_link-57">“Variables” on page 234). </a></p>
<p class="calibre1">To list a shell’s environment variables, run:</p>
<p class="calibre1">→ <b class="calibre3">printenv</b></p>
<p class="calibre1"><b class="calibre3">Shell Features  |  31</b></p>
<p class="calibre1"><a id="calibre_link-199"></a>To provide the value of an environment variable to a specific program just once, prepend  <i class="calibre4">variable=value</i> to the command line:</p>
<p class="calibre1">→ <b class="calibre3">printenv HOME</b></p>
<p class="calibre1">/home/smith</p>
<p class="calibre1">→ <b class="calibre3">HOME=/home/sally printenv HOME</b></p>
<p class="calibre1">/home/sally</p>
<p class="calibre1">→ <b class="calibre3">printenv HOME</b></p>
<p class="calibre1">/home/smith             <i class="calibre4">The original value is unaffected</i></p>
<p class="calibre1"><b class="calibre3">Search path</b></p>
<p class="calibre1">Programs are scattered all over the Linux filesystem, in directories like  <i class="calibre4">/bin</i> and  <i class="calibre4">/usr/bin</i>. When you run a program via a shell command, how does the shell find it? The critical variable PATH</p>
<p class="calibre1">tells the shell where to look. When you type any command:</p>
<p class="calibre1">→ <b class="calibre3">who</b></p>
<p class="calibre1">the shell locates the who program by searching through Linux directories. The shell consults the value of PATH, which is a sequence of directories separated by colons:</p>
<p class="calibre1">→ <b class="calibre3">echo $PATH</b></p>
<p class="calibre1">/usr/local/bin:/bin:/usr/bin</p>
<p class="calibre1">and looks for the who command in each of these directories. If it finds who (say,  <i class="calibre4">/usr/bin/who</i>), it runs the command. Otherwise, it reports a failure such as:</p>
<p class="calibre1">bash: who: command not found</p>
<p class="calibre1">To add directories to your shell’s search path temporarily, modify its PATH variable. For example, to append  <i class="calibre4">/usr/sbin</i> to your shell’s search path:</p>
<p class="calibre1">→ <b class="calibre3">PATH=$PATH:/usr/sbin</b></p>
<p class="calibre1">→ <b class="calibre3">echo $PATH</b></p>
<p class="calibre1">/usr/local/bin:/bin:/usr/bin<b class="calibre3">:/usr/sbin</b></p>
<p class="calibre1">This change affects only the current shell. To make it permanent, modify the PATH variable in your startup file  <i class="calibre4">~/.bash_pro-32  |  Linux Pocket Guide</i></p><i class="calibre4">
<p class="calibre1"><a id="calibre_link-59"></a> <i class="calibre4">file</i>, as explained in <a href="#calibre_link-58">“Tailoring Shell Behavior” on page 46</a>. Then log out and log back in, or run your  <i class="calibre4">~/.bash_profile</i> startup file by hand in each of your open shell windows with:</p>
<p class="calibre1">→ <b class="calibre3">. $HOME/.bash_profile</b></p>
<p class="calibre1"><b class="calibre3">Aliases</b></p>
<p class="calibre1">The built-in command alias defines a convenient shorthand</p>
<p class="calibre1">for a longer command, to save typing. For example:</p>
<p class="calibre1">→ <b class="calibre3">alias ll='ls -lG' </b></p>
<p class="calibre1">defines a new command ll that runs ls -lG:</p>
<p class="calibre1">→ <b class="calibre3">ll</b></p>
<p class="calibre1">total 436</p>
<p class="calibre1">-rw-r--r--    1 smith     3584 Oct 11 14:59 file1</p>
<p class="calibre1">-rwxr-xr-x    1 smith       72 Aug  6 23:04 file2</p>
<p class="calibre1">... </p>
<p class="calibre1">Define aliases in your  <i class="calibre4">~/.bash_aliases</i><a href="#calibre_link-58"> file (see “Tailoring Shell</a></p>
<p class="calibre1"><a href="#calibre_link-58">Behavior” on page 46) to be a</a>vailable whenever you log in. <a href="#calibre_link-59">7</a> To list all your aliases, type alias. If aliases don’t seem powerful enough for you (because they have no parameters or branch‐</p>
<p class="calibre1"><a href="#calibre_link-42">ing), see “Programming with Shell Scripts” on page 232, run</a></p>
<p class="calibre1">info bash, and read up on “shell functions.” </p>
<p class="calibre1"><b class="calibre3">Input/output redirection</b></p>
<p class="calibre1">The shell can redirect standard input, standard output, and</p>
<p class="calibre1"><a href="#calibre_link-46">standard error (see “Input and Output” on page 15</a>) to and from files. In other words, any command that reads from standard input can have its input come from a file instead with the shell’s &lt; operator:</p>
<p class="calibre1">→  <i class="calibre4"><b class="calibre3">any command</b></i><b class="calibre3"> &lt; infile</b></p>
<p class="calibre1">7 Some setups use  <i class="calibre4">~/.bashrc</i> for this purpose. </p>
<p class="calibre1"><b class="calibre3">Shell Features  |  33</b></p>
<p class="calibre1"><a id="calibre_link-87"></a>Likewise, any command that writes to standard output can write to a file instead:</p>
<p class="calibre1">→  <i class="calibre4"><b class="calibre3">any command</b></i><b class="calibre3"> &gt; outfile</b>       <i class="calibre4">Create/overwrite outfile</i></p>
<p class="calibre1">→  <i class="calibre4"><b class="calibre3">any command</b></i><b class="calibre3"> &gt;&gt; outfile</b>      <i class="calibre4">Append to outfile</i> A command that writes to standard error can have its output</p>
<p class="calibre1">redirected to a file as well, while standard output still goes to the screen:</p>
<p class="calibre1">→  <i class="calibre4"><b class="calibre3">any command</b></i><b class="calibre3"> 2&gt; errorfile</b></p>
<p class="calibre1">To redirect both standard output and standard error to files:</p>
<p class="calibre1">→  <i class="calibre4"><b class="calibre3">any command</b></i><b class="calibre3"> &gt; outfile 2&gt; errorfile</b>    <i class="calibre4">Separate files</i></p>
<p class="calibre1">→  <i class="calibre4"><b class="calibre3">any command</b></i><b class="calibre3"> &gt;&amp; outfile</b>                <i class="calibre4">Single file</i></p>
<p class="calibre1">→  <i class="calibre4"><b class="calibre3">any command</b></i><b class="calibre3"> &amp;&gt; outfile</b>                <i class="calibre4">Single file</i> <b class="calibre3">Pipes</b></p>
<p class="calibre1">You can redirect the standard output of one command to be</p>
<p class="calibre1">the standard input of another, using the shell’s pipe (|) operator. </p>
<p class="calibre1">(On US keyboards, you can find this symbol just above the</p>
<p class="calibre1">Enter key.) For example:</p>
<p class="calibre1">→ <b class="calibre3">who | sort</b></p>
<p class="calibre1">sends the output of who into the sort program, printing an</p>
<p class="calibre1">alphabetically sorted list of logged-in users. Multiple pipes work too. Here we sort the output of who again, extract the first column of information (using awk), and display the results one page at a time (using less):</p>
<p class="calibre1">→ <b class="calibre3">who | sort | awk '{print $1}' | less</b></p>
<p class="calibre1"><b class="calibre3">Process substitution</b></p>
<p class="calibre1">Pipes let you send one program’s output to another program. A more advanced feature, process substitution, lets that output masquerade as a  <i class="calibre4">named</i> file. Consider a program that compares the contents of two files. With the process substitution operator, &lt;(), you can compare the outputs of two programs instead. </p>
<p class="calibre1"><b class="calibre3">34  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-88"></a>Suppose you have a directory full of JPEG and text files in pairs:</p>
<p class="calibre1">→ <b class="calibre3">ls jpegexample</b></p>
<p class="calibre1">file1.jpg  file1.txt  file2.jpg  file2.txt  <i class="calibre4">... </i></p>
<p class="calibre1">and you want to confirm that every JPEG file has a corresponding text file and vice versa. Ordinarily, you might create two temporary files, one containing the JPEG filenames and the</p>
<p class="calibre1">other containing the text filenames, remove the file extensions with cut, and compare the two temporary files with diff:</p>
<p class="calibre1">→ <b class="calibre3">cd jpegexample</b></p>
<p class="calibre1">→ <b class="calibre3">ls *.jpg | cut -d. -f1 &gt; /tmp/jpegs</b></p>
<p class="calibre1">→ <b class="calibre3">ls *.txt | cut -d. -f1 &gt; /tmp/texts</b></p>
<p class="calibre1">→ <b class="calibre3">diff /tmp/jpegs /tmp/texts</b></p>
<p class="calibre1">5a6</p>
<p class="calibre1">&gt; file6        <i class="calibre4">No file6.jpg was found</i></p>
<p class="calibre1">8d8</p>
<p class="calibre1">&lt; file9        <i class="calibre4">No file9.txt was found</i></p>
<p class="calibre1">With process substitution, you can perform the same task with a single command and no temporary files:</p>
<p class="calibre1">→ <b class="calibre3">diff &lt;(ls *.jpg|cut -d. -f1) &lt;(ls *.txt|cut -d. -f1)</b> Each &lt;() operator stands in for a filename on the command line, as if that “file” contained the output of ls and cut. </p>
<p class="calibre1"><b class="calibre3">Combining commands</b></p>
<p class="calibre1">To invoke several commands in sequence on a single command</p>
<p class="calibre1">line, separate them with semicolons:</p>
<p class="calibre1">→  <i class="calibre4">command1</i> ;  <i class="calibre4">command2</i> ;  <i class="calibre4">command3</i></p>
<p class="calibre1">To run a sequence of commands as before, but stop execution if any of them fails, separate them with &amp;&amp; (“and”) symbols:</p>
<p class="calibre1">→  <i class="calibre4">command1</i> &amp;&amp;  <i class="calibre4">command2</i> &amp;&amp;  <i class="calibre4">command3</i></p>
<p class="calibre1"><b class="calibre3">Shell Features  |  35</b></p>
<p class="calibre1"><a id="calibre_link-49"></a>To run a sequence of commands, stopping execution as soon as one succeeds, separate them with || (“or”) symbols:</p>
<p class="calibre1">→  <i class="calibre4">command1</i> ||  <i class="calibre4">command2</i> ||  <i class="calibre4">command3</i></p>
<p class="calibre1"><b class="calibre3">Quoting</b></p>
<p class="calibre1">Normally, the shell treats whitespace simply as separating the words on the command line. If you want a word to  <i class="calibre4">contain</i> whitespace (e.g., a filename with a space in it), surround it with single or double quotes to make the shell treat it as a unit. Single quotes treat their contents literally, while double quotes let shell constructs be evaluated, such as variables:</p>
<p class="calibre1">→ <b class="calibre3">echo 'The variable HOME has value $HOME' </b></p>
<p class="calibre1">The variable HOME has value $HOME</p>
<p class="calibre1">→ <b class="calibre3">echo "The variable HOME has value $HOME" </b></p>
<p class="calibre1">The variable HOME has value /home/smith</p>
<p class="calibre1">Backquotes (“backticks”) cause their contents to be evaluated as a shell command. The contents are then replaced by the standard output of the command:</p>
<p class="calibre1">→ <b class="calibre3">date +%Y</b>            <i class="calibre4">Print the current year</i></p>
<p class="calibre1">2016</p>
<p class="calibre1">→ <b class="calibre3">echo This year is `date +%Y`</b></p>
<p class="calibre1">This year is 2016</p>
<p class="calibre1">A dollar sign and parentheses are equivalent to backquotes:</p>
<p class="calibre1">→ <b class="calibre3">echo This year is $(date +%Y)</b></p>
<p class="calibre1">This year is 2016</p>
<p class="calibre1">but are superior because they can be nested:</p>
<p class="calibre1">→ <b class="calibre3">echo Next year is $(expr $(date +%Y) + 1)</b></p>
<p class="calibre1">Next year is 2017</p>
<p class="calibre1"><b class="calibre3">Escaping</b></p>
<p class="calibre1">If a character has special meaning to the shell but you want it used literally (e.g., * as a literal asterisk rather than a wildcard), <b class="calibre3">36  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-99"></a>precede the character with the backward slash “\” character. </p>
<p class="calibre1">This is called  <i class="calibre4">escaping</i> the special character:</p>
<p class="calibre1">→ <b class="calibre3">echo a*</b>         <i class="calibre4">As a wildcard, matching “a” filenames</i> aardvark  adamantium  apple</p>
<p class="calibre1">→ <b class="calibre3">echo a\*</b>                   <i class="calibre4">As a literal asterisk</i> a*</p>
<p class="calibre1">→ <b class="calibre3">echo "I live in $HOME" </b>     <i class="calibre4">Print a variable value</i> I live in /home/smith</p>
<p class="calibre1">→ <b class="calibre3">echo "I live in \$HOME" </b>    <i class="calibre4">A literal dol ar sign</i> I live in $HOME</p>
<p class="calibre1">You can also escape control characters (tabs, newlines, ^D, etc.) to have them used literally on the command line, if you precede them with ^V. This is particularly useful for tab characters, which the shell would otherwise use for filename completion</p>
<p class="calibre1">(see <a href="#calibre_link-60">“Filename completion” on page 39). </a></p>
<p class="calibre1">→ <b class="calibre3">echo "There is a tab between here^V    and here" </b></p>
<p class="calibre1">There is a tab between here      and here</p>
<p class="calibre1"><b class="calibre3">Command-line editing</b></p>
<p class="calibre1">Bash lets you edit the command line you’re working on, using</p>
<p class="calibre1"><a href="#calibre_link-10">keystrokes inspired by the text editors emacs and vi (see “File</a></p>
<p class="calibre1"><a href="#calibre_link-10">Creation and Editing” on page 63</a>). To enable command-line editing with emacs keys, run this command (and place it in</p>
<p class="calibre1">your  <i class="calibre4">~/.bash_profile</i> to make it permanent):</p>
<p class="calibre1">→ <b class="calibre3">set -o emacs</b></p>
<p class="calibre1">For vi (or vim) keys:</p>
<p class="calibre1">→ <b class="calibre3">set -o vi</b></p>
<p class="calibre1">emacs keystroke</p>
<p class="calibre1">vi keystroke (after ESC) Meaning</p>
<p class="calibre1">^P or up arrow</p>
<p class="calibre1">k</p>
<p class="calibre1">Go to previous command</p>
<p class="calibre1">^N or down arrow j</p>
<p class="calibre1">Go to next command</p>
<p class="calibre1"><b class="calibre3">Shell Features  |  37</b></p>
<p class="calibre1"><a id="calibre_link-84"></a>emacs keystroke</p>
<p class="calibre1">vi keystroke (after ESC) Meaning</p>
<p class="calibre1">^R</p>
<p class="calibre1">Search for a previous command</p>
<p class="calibre1">interactively</p>
<p class="calibre1">^F or right arrow</p>
<p class="calibre1">l</p>
<p class="calibre1">Go forward one character</p>
<p class="calibre1">^B or left arrow</p>
<p class="calibre1">h</p>
<p class="calibre1">Go backward one character</p>
<p class="calibre1">^A</p>
<p class="calibre1">0</p>
<p class="calibre1">Go to beginning of line</p>
<p class="calibre1">^E</p>
<p class="calibre1">$</p>
<p class="calibre1">Go to end of line</p>
<p class="calibre1">^D</p>
<p class="calibre1">x</p>
<p class="calibre1">Delete next character</p>
<p class="calibre1">^U</p>
<p class="calibre1">^U</p>
<p class="calibre1">Erase entire line</p>
<p class="calibre1"><b class="calibre3">Command history</b></p>
<p class="calibre1">You can recall previous commands you’ve run&mdash;that is, the</p>
<p class="calibre1">shell’s  <i class="calibre4">history</i>&mdash;and re-execute them. Some useful history-related commands are listed here:</p>
<p class="calibre1">Command</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">history</p>
<p class="calibre1">Print your history</p>
<p class="calibre1">history  <i class="calibre4">N</i></p>
<p class="calibre1">Print the most recent  <i class="calibre4">N</i> commands in your history</p>
<p class="calibre1">history -c Clear (delete) your history</p>
<p class="calibre1">!! </p>
<p class="calibre1">Re-run previous command</p>
<p class="calibre1">!  <i class="calibre4">N</i></p>
<p class="calibre1">Re-run command number  <i class="calibre4">N</i> in your history</p>
<p class="calibre1">!- <i class="calibre4">N</i></p>
<p class="calibre1">Re-run the command you typed  <i class="calibre4">N</i> commands ago</p>
<p class="calibre1">!$</p>
<p class="calibre1">Represents the last parameter from the previous command; </p>
<p class="calibre1">great for checking that files are present before running a</p>
<p class="calibre1">destructive operation, like removing them:</p>
<p class="calibre1">→ <b class="calibre3">ls z*</b></p>
<p class="calibre1">zebra.txt  zookeeper</p>
<p class="calibre1">→ <b class="calibre3">rm !$</b>   <i class="calibre4">Same as "rm z*" </i></p>
<p class="calibre1"><b class="calibre3">38  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-60"></a>Command</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">!*</p>
<p class="calibre1">Represents all parameters from the previous command:</p>
<p class="calibre1">→ <b class="calibre3">ls myfile emptyfile hugefile</b></p>
<p class="calibre1">emptyfile  hugefile  myfile</p>
<p class="calibre1">→ <b class="calibre3">wc !*</b></p>
<p class="calibre1">18      211     1168 myfile</p>
<p class="calibre1">0        0        0 emptyfile</p>
<p class="calibre1">333563  2737539 18577838 hugefile</p>
<p class="calibre1">333581  2737750 18579006 total</p>
<p class="calibre1"><b class="calibre3">Filename completion</b></p>
<p class="calibre1">Press the Tab key while you are in the middle of typing a filename, and the shell will automatically complete (finish typing) the filename for you. If several filenames match what you’ve typed so far, the shell will beep, indicating the match is ambigu-ous. Immediately press Tab again and the shell will present the alternatives. Try this:</p>
<p class="calibre1">→ <b class="calibre3">cd /usr/bin</b></p>
<p class="calibre1">→ <b class="calibre3">ls un&lt;Tab&gt;&lt;Tab&gt; </b></p>
<p class="calibre1">The shell will display all files in  <i class="calibre4">/usr/bin</i> that begin with  <i class="calibre4">un</i>, such as  <i class="calibre4">uniq</i> and  <i class="calibre4">unzip</i>. Type a few more characters to disam-biguate your choice and press Tab again. </p>
<p class="calibre1"><b class="calibre3">Shell Job Control</b></p>
<p class="calibre1">jobs</p>
<p class="calibre1">List your jobs. </p>
<p class="calibre1">&amp; </p>
<p class="calibre1">Run a job in the background. </p>
<p class="calibre1">^Z</p>
<p class="calibre1">Suspend the current (foreground) job. </p>
<p class="calibre1">suspend Suspend a shell. </p>
<p class="calibre1">fg</p>
<p class="calibre1">Unsuspend a job: bring it into the foreground. </p>
<p class="calibre1">bg</p>
<p class="calibre1">Make a suspended job run in the background. </p>
<p class="calibre1"><b class="calibre3">Shell Features  |  39</b></p>
<p class="calibre1"><a id="calibre_link-122"></a>All Linux shells have  <i class="calibre4">job control</i>: the ability to run commands in the background (multitasking behind the scenes) and foreground (running as the active process at your shell prompt). A <i class="calibre4">job</i> is simply the shell’s unit of work. When you run a command interactively, your current shell tracks it as a job. When the command completes, the associated job disappears. Jobs are at a higher level than Linux processes; the Linux operating system knows nothing about them. They are merely constructs of</p>
<p class="calibre1">the shell. Here is some important vocabulary about job control: <i class="calibre4">Foreground job</i></p>
<p class="calibre1">Running in a shell, occupying the shell prompt so you</p>
<p class="calibre1">cannot run another command</p>
<p class="calibre1"> <i class="calibre4">Background job</i></p>
<p class="calibre1">Running in a shell, but not occupying the shell prompt, so</p>
<p class="calibre1">you can run another command in the same shell</p>
<p class="calibre1"> <i class="calibre4">Suspend</i></p>
<p class="calibre1">To stop a foreground job temporarily</p>
<p class="calibre1"> <i class="calibre4">Resume</i></p>
<p class="calibre1">To cause a suspended job to start running in the fore‐</p>
<p class="calibre1">ground again</p>
<p class="calibre1"><b class="calibre3">jobs</b></p>
<p class="calibre1">The built-in command jobs lists the jobs running in your current shell:</p>
<p class="calibre1">→ <b class="calibre3">jobs</b></p>
<p class="calibre1">[1]-  Running         emacs myfile &amp; </p>
<p class="calibre1">[2]+  Stopped         ssh example.com</p>
<p class="calibre1">The integer on the left is the job number, and the plus sign identifies the default job affected by the fg (foreground) and bg (background) commands. </p>
<p class="calibre1"><b class="calibre3">40  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-86"></a><b class="calibre3">&amp; </b></p>
<p class="calibre1">Placed at the end of a command line, the ampersand causes the given command to run as a background job:</p>
<p class="calibre1">→ <b class="calibre3">emacs myfile &amp; </b></p>
<p class="calibre1">[2] 28090</p>
<p class="calibre1">The shell’s response includes the job number (2) and the process ID of the command (28090). </p>
<p class="calibre1"><b class="calibre3">^Z</b></p>
<p class="calibre1">Typing ^Z in a shell, while a job is running in the foreground, will suspend that job. It simply stops running, but its state is remembered:</p>
<p class="calibre1">→ <b class="calibre3">sleep 10</b>         <i class="calibre4">Waits for 10 seconds</i></p>
<p class="calibre1"><b class="calibre3">^Z</b></p>
<p class="calibre1">[1]+  Stopped           sleep 10</p>
<p class="calibre1">→</p>
<p class="calibre1">Now you’re ready to type bg to put the command into the background, or fg to resume it in the foreground. You could also leave it suspended and run other commands. </p>
<p class="calibre1"><b class="calibre3">suspend</b></p>
<p class="calibre1">The built-in command suspend will suspend the current shell if possible, as if you’d typed ^Z to the shell itself. For instance, if you’ve created a superuser shell with the sudo command and</p>
<p class="calibre1">want to return to your original shell:</p>
<p class="calibre1">→ <b class="calibre3">whoami</b></p>
<p class="calibre1">smith</p>
<p class="calibre1">→ <b class="calibre3">sudo bash</b></p>
<p class="calibre1"><b class="calibre3">Shell Features  |  41</b></p>
<p class="calibre1"><a id="calibre_link-133"></a>Password: <b class="calibre3">*******</b></p>
<p class="calibre1"># <b class="calibre3">whoami</b></p>
<p class="calibre1">root</p>
<p class="calibre1"># <b class="calibre3">suspend</b></p>
<p class="calibre1">[1]+  Stopped         sudo bash</p>
<p class="calibre1">→ <b class="calibre3">whoami</b></p>
<p class="calibre1">smith</p>
<p class="calibre1"><b class="calibre3">bg</b></p>
<p class="calibre1">bg [% <i class="calibre4">jobnumber</i>]</p>
<p class="calibre1">The built-in command bg sends a suspended job to run in the</p>
<p class="calibre1">background. With no arguments, bg operates on the most</p>
<p class="calibre1">recently suspended job. To specify a particular job (shown by the jobs command), supply the job number preceded by a percent sign:</p>
<p class="calibre1">→ <b class="calibre3">bg %2</b></p>
<p class="calibre1">Some types of interactive jobs cannot remain in the back‐</p>
<p class="calibre1">ground&mdash;for instance, if they are waiting for input. If you try, the shell will suspend the job and display:</p>
<p class="calibre1">[2]+  Stopped       <i class="calibre4">command line here</i></p>
<p class="calibre1">You can now resume the job (with fg) and continue. </p>
<p class="calibre1"><b class="calibre3">fg</b></p>
<p class="calibre1">fg [% <i class="calibre4">jobnumber</i>]</p>
<p class="calibre1">The built-in command fg brings a suspended or backgrounded</p>
<p class="calibre1">job into the foreground. With no arguments, it selects a job, usually the most recently suspended or backgrounded one. To</p>
<p class="calibre1">specify a particular job (as shown by the jobs command), supply the job number preceded by a percent sign:</p>
<p class="calibre1"><b class="calibre3">42  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-211"></a>→ <b class="calibre3">fg %2</b></p>
<p class="calibre1"><b class="calibre3">Running Multiple Shells at Once</b></p>
<p class="calibre1">Job control lets you manage several commands at once, but</p>
<p class="calibre1">only one can run in the foreground at a time. More powerfully, you can also run multiple shells at once, each with a foreground command and any number of background commands. </p>
<p class="calibre1">If your Linux computer runs a window system such as KDE or</p>
<p class="calibre1">Gnome, you can easily run many shells at the same time by</p>
<p class="calibre1">opening m<a href="#calibre_link-54">ultiple shell windows (see “Running a Shell” on page</a></p>
<p class="calibre1"><a href="#calibre_link-54">14</a>). In addition, certain shell window programs, such as KDE’s konsole, can open multiple tabs within a single window, each one running a shell. </p>
<p class="calibre1">Even without a window system&mdash;say, over an SSH network</p>
<p class="calibre1">connection&mdash;you can manage multiple shells at once. The pro‐</p>
<p class="calibre1">gram screen uses an ordinary ASCII terminal to simulate mul‐</p>
<p class="calibre1">tiple windows, each running a shell. Using special keystrokes, you can switch from one simulated window to another at will. </p>
<p class="calibre1">(Another such program is tmux.) To begin a session with</p>
<p class="calibre1">screen, simply run:</p>
<p class="calibre1">→ <b class="calibre3">screen</b></p>
<p class="calibre1">You may see some introductory messages, and then your ordi‐</p>
<p class="calibre1">nary shell prompt. It looks like nothing has happened, but</p>
<p class="calibre1">you’re now running a new shell inside a virtual “window.” The screen program provides 10 such windows, labeled from 0 to 9. </p>
<p class="calibre1">Type a simple command such as ls, then press ^A^C (control-A, control-C). The screen will clear and show you a fresh shell prompt. You are actually viewing a second, independent “window.” Run a different command (say, df), then press ^A^A and you’ll switch back to the first window, where your output from ls is now visible again. Press ^A^A a second time to toggle back to the second window. Some other common keystrokes for</p>
<p class="calibre1"><b class="calibre3">Shell Features  |  43</b></p>
<p class="calibre1"><a id="calibre_link-229"></a>screen are listed here (see the manpage or type ^A? for on-screen help):</p>
<p class="calibre1">^A? </p>
<p class="calibre1">Help: show all keystroke commands. </p>
<p class="calibre1">^A^C</p>
<p class="calibre1">Create a window. </p>
<p class="calibre1">^A0, ^A1 ... ^A9 Switch to window 0 through 9, respectively. </p>
<p class="calibre1">^A' </p>
<p class="calibre1">Prompt for a window number (0&ndash;9) and then switch to it. </p>
<p class="calibre1">^A^N</p>
<p class="calibre1">Switch to the next window, numerically. </p>
<p class="calibre1">^A^P</p>
<p class="calibre1">Switch to the previous window, numerically. </p>
<p class="calibre1">^A^A</p>
<p class="calibre1">Switch to the other window you’ve used most recently</p>
<p class="calibre1">(toggling between two windows). </p>
<p class="calibre1">^A^W</p>
<p class="calibre1">List all your windows. </p>
<p class="calibre1">^AN</p>
<p class="calibre1">Display the current window number. (Note that the N is</p>
<p class="calibre1">capitalized.)</p>
<p class="calibre1">^Aa</p>
<p class="calibre1">Send a true control-A to your shell, ignored by screen. In</p>
<p class="calibre1">bash, control-A normally moves the cursor to the beginning of the command line. (Note that the second a is lowercase.)</p>
<p class="calibre1">^D</p>
<p class="calibre1">Terminate the current shell. This is the ordinary “end of file” </p>
<p class="calibre1"><a href="#calibre_link-58">keystroke, explained in “Terminating a Shell” on page 46</a>, which closes any shell. </p>
<p class="calibre1">^A\</p>
<p class="calibre1">Kill all windows and terminate screen. </p>
<p class="calibre1">Beware when running a text editor in a screen window. screen will capture all your control-A keystrokes, even if they are intended as editing commands. Type ^Aa to send a true control-A to your application. </p>
<p class="calibre1"><b class="calibre3">Killing a Command in Progress</b></p>
<p class="calibre1">If you’ve launched a command from the shell running in the</p>
<p class="calibre1">foreground, and want to kill it immediately, type ^C. The shell recognizes ^C as meaning, “terminate the current foreground</p>
<p class="calibre1"><b class="calibre3">44  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-85"></a>command right now.” So if you are displaying a very long file (say, with the cat command) and want to stop, type ^C:</p>
<p class="calibre1">→ <b class="calibre3">cat hugefile</b></p>
<p class="calibre1">Lorem ipsum dolor sit amet, consectetur adipiscing</p>
<p class="calibre1">odio. Praesent libero. Sed cursus ante dapibus diam. </p>
<p class="calibre1">quis sem at nibh elementum blah blah blah <b class="calibre3">^C</b></p>
<p class="calibre1">→</p>
<p class="calibre1">To kill a program running in the background, you can bring it into the foreground with fg and then type ^C:</p>
<p class="calibre1">→ <b class="calibre3">sleep 50 &amp; </b></p>
<p class="calibre1">[1] 12752</p>
<p class="calibre1">→ <b class="calibre3">jobs</b></p>
<p class="calibre1">[1]-  Running       sleep 50 &amp; </p>
<p class="calibre1">→ <b class="calibre3">fg %1</b></p>
<p class="calibre1">sleep 50</p>
<p class="calibre1"><b class="calibre3">^C</b></p>
<p class="calibre1">→</p>
<p class="calibre1">or alternatively, use the kill<a href="#calibre_link-22"> command (see “Controlling Pro‐</a></p>
<p class="calibre1"><a href="#calibre_link-22">cesses” on page 143</a>). </p>
<p class="calibre1"><b class="calibre3">Surviving a Kill</b></p>
<p class="calibre1">Killing a foreground program with ^C may leave your shell in an odd or unresponsive state, perhaps not displaying the keystrokes you type. This happens because the killed program had no opportunity to clean up after itself. If this happens to you: 1. Press ^J to get a shell prompt. This keystroke produces the same character as the Enter key (a newline) but will work</p>
<p class="calibre1">even if Enter does not. </p>
<p class="calibre1">2. Type the shell command reset (even if the letters don’t</p>
<p class="calibre1">appear while you type) and press ^J again to run this com‐</p>
<p class="calibre1">mand. This should bring your shell back to normal. </p>
<p class="calibre1"><b class="calibre3">Shell Features  |  45</b></p>
<p class="calibre1"><a id="calibre_link-58"></a>Typing ^C is not a friendly way to end a program. If the program has its own way to exit, use that when possible (refer to the preceding sidebar for details). </p>
<p class="calibre1">^C works only within a shell. It will likely have no effect if typed in an application that is not a shell window. Additionally, some command-line programs are written to “catch” the ^C and</p>
<p class="calibre1">ignore it: an example is the text editor emacs. </p>
<p class="calibre1"><b class="calibre3">Terminating a Shell</b></p>
<p class="calibre1">To terminate a shell, either run the exit command or type ^D. <a href="#calibre_link-58">8</a></p>
<p class="calibre1">→ <b class="calibre3">exit</b></p>
<p class="calibre1"><b class="calibre3">Tailoring Shell Behavior</b></p>
<p class="calibre1">To configure all your shells to work in a particular way, edit the files  <i class="calibre4">.bash_profile</i> and  <i class="calibre4">.bashrc</i> in your home directory. These files execute each time you log in ( <i class="calibre4">~/.bash_profile</i>) or open a shell ( <i class="calibre4">~/.bashrc</i>). They can set variables and aliases, run programs, print your horoscope, or whatever you like. </p>
<p class="calibre1">These two files are examples of  <i class="calibre4">shell scripts</i>: executable files that contain shell commands. We’ll cover this feature in more detail</p>
<p class="calibre1"><a href="#calibre_link-42">in “Programming with Shell Scripts” on page 232. </a></p>
<p class="calibre1">This concludes our basic overview of Linux and the shell. Now we turn to Linux commands, listing and describing the most</p>
<p class="calibre1">useful commands for working with files, processes, users, networking, multimedia, and more. </p>
<p class="calibre1">8 Control-D sends an “end of file” signal to any program reading from standard input. In this case, the program is the shell itself, which terminates. </p>
<p class="calibre1"><b class="calibre3">46  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-7"></a><b class="calibre3">Basic File Operations</b></p>
<p class="calibre1">ls List files in a directory. </p>
<p class="calibre1">cp Copy a file. </p>
<p class="calibre1">mv Rename (“move”) a file. </p>
<p class="calibre1">rm Delete (“remove”) a file. </p>
<p class="calibre1">ln Create links (alternative names) to a file. </p>
<p class="calibre1">One of the first things you’ll need to do on a Linux system is manipulate files: copying, renaming, deleting, and so forth. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ls</b></p>
<p class="calibre1">ls [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The ls command (pronounced as it is spelled,  <i class="calibre4">ell ess</i>) lists attributes of files and directories. You can list files in the current directory:</p>
<p class="calibre1">→ <b class="calibre3">ls</b></p>
<p class="calibre1">in given directories:</p>
<p class="calibre1">→ <b class="calibre3">ls dir1 dir2 dir3</b></p>
<p class="calibre1">or individually:</p>
<p class="calibre1">→ <b class="calibre3">ls myfile myfile2 myfile3</b></p>
<p class="calibre1">The most important options are -a, -l, and -d. By default, ls hides files whose names begin with a dot, as explained in the</p>
<p class="calibre1"><a href="#calibre_link-61">sidebar “Dot Files” on page 29</a>. The -a option displays all files:</p>
<p class="calibre1">→ <b class="calibre3">ls</b></p>
<p class="calibre1">myfile   myfile2</p>
<p class="calibre1">→ <b class="calibre3">ls -a</b></p>
<p class="calibre1">.hidden_file   myfile   myfile2</p>
<p class="calibre1"><b class="calibre3">Basic File Operations  |  47</b></p>
<p class="calibre1"><a id="calibre_link-168"></a>The -l option produces a long listing:</p>
<p class="calibre1">→ <b class="calibre3">ls -l myfile</b></p>
<p class="calibre1">-rw-r--r--  1 smith users  1168 Oct 28 2015 myfile</p>
<p class="calibre1">that includes, from left to right: the file’s permissions (-rw-r--</p>
<p class="calibre1">r--), number of hard links (1), owner (smith), group (users), size (1168 bytes), last modification date (Oct 28 2015) and</p>
<p class="calibre1">name. See <a href="#calibre_link-62">“File Protections” on page 25 for more informa</a>tion on permissions. </p>
<p class="calibre1">The -d option lists information about a directory itself, rather than descending into the directory to list its files:</p>
<p class="calibre1">→ <b class="calibre3">ls -ld dir1</b></p>
<p class="calibre1">drwxr-xr-x  1 smith users  4096 Oct 29 2015 dir1</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-a List all files, including those whose names begin with a dot. </p>
<p class="calibre1">-l Long listing, including file attributes. Add the -h option (human-readable) to print file sizes in kilobytes, megabytes, and gigabytes, instead of bytes. </p>
<p class="calibre1">-G In a long listing, don’t print the group ownership of the file. </p>
<p class="calibre1">-F Decorate certain filenames with meaningful symbols, indicating their types. </p>
<p class="calibre1">Appends “/” to directories, “*” to executables, “@” to symbolic links, “|” to named pipes, and “=” to sockets. These are just visual indicators for you, not part of the filenames! </p>
<p class="calibre1">-S Sort files by their size. </p>
<p class="calibre1">-t Sort files by the time they were last modified. </p>
<p class="calibre1">-r Reverse the sorted order. </p>
<p class="calibre1">-R If listing a directory, list its contents recursively. </p>
<p class="calibre1">-d If listing a directory, do not list its contents, just the directory itself. </p>
<p class="calibre1"><b class="calibre3">48  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-153"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">cp</b></p>
<p class="calibre1">cp [ <i class="calibre4">options</i>]  <i class="calibre4">files</i> ( <i class="calibre4">file</i> |  <i class="calibre4">directory</i>) The cp command normally copies a file:</p>
<p class="calibre1">→ <b class="calibre3">cp myfile anotherfile</b></p>
<p class="calibre1">or copies multiple files into a directory (say)  <i class="calibre4">mydir</i>:</p>
<p class="calibre1">→ <b class="calibre3">cp myfile myfile2 myfile3 mydir</b></p>
<p class="calibre1">Using the -a or -r option, you can also recursively copy directories. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-p Copy not only the file contents, but also the file’s permissions, timestamps, and if you have sufficient permission to do so, its owner and group. </p>
<p class="calibre1">(Normally the copies will be owned by you, timestamped now, with permissions set by applying your umask to the original permissions.)</p>
<p class="calibre1">-a Copy a directory hierarchy recursively, preserving all file attributes and links. </p>
<p class="calibre1">-r Copy a directory hierarchy recursively. This option does not preserve the files’</p>
<p class="calibre1">attributes such as permissions and timestamps. It does preserve symbolic links. </p>
<p class="calibre1">-i Interactive mode. Ask before overwriting destination files. </p>
<p class="calibre1">-f Force the copy. If a destination file exists, overwrite it unconditionally. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">mv</b></p>
<p class="calibre1">mv [ <i class="calibre4">options</i>]  <i class="calibre4">source target</i></p>
<p class="calibre1">The mv (move) command can rename a file:</p>
<p class="calibre1">→ <b class="calibre3">mv somefile yetanotherfile</b></p>
<p class="calibre1">or move files and directories into a destination directory:</p>
<p class="calibre1">→ <b class="calibre3">mv myfile myfile2 dir1 dir2  <i class="calibre4">destination_directory</i></b></p>
<p class="calibre1"><b class="calibre3">Basic File Operations  |  49</b></p>
<p class="calibre1"><a id="calibre_link-167"></a><b class="calibre3">Useful options</b></p>
<p class="calibre1">-i Interactive mode. Ask before overwriting destination files. </p>
<p class="calibre1">-f Force the move. If a destination file exists, overwrite it unconditionally. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">rm</b></p>
<p class="calibre1">rm [ <i class="calibre4">options</i>]  <i class="calibre4">files</i> |  <i class="calibre4">directories</i></p>
<p class="calibre1">The rm (remove) command can delete files:</p>
<p class="calibre1">→ <b class="calibre3">rm deleteme deleteme2</b></p>
<p class="calibre1">or recursively delete directories:</p>
<p class="calibre1">→ <b class="calibre3">rm -r dir1 dir2</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-i Interactive mode. Ask before deleting each file. </p>
<p class="calibre1">-f Force the deletion, ignoring any errors or warnings. </p>
<p class="calibre1">-r Recursively remove a directory and its contents. Use with caution, especially if combined with the -f option, as it can wipe out all your files. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ln</b></p>
<p class="calibre1">ln [ <i class="calibre4">options</i>]  <i class="calibre4">source target</i></p>
<p class="calibre1">A  <i class="calibre4">link</i> is a reference to another file, created by the ln command. Intuitively, links give the same file multiple names, </p>
<p class="calibre1">allowing it to live in two (or more) locations at once. </p>
<p class="calibre1">There are two kinds of links. A  <i class="calibre4">symbolic link</i> (also called a  <i class="calibre4">sym-link</i> or  <i class="calibre4">soft link</i>) refers to another file by its path, much like a Windows “shortcut” or a Mac OS X “alias.” To create a symbolic link, use the -s option:</p>
<p class="calibre1"><b class="calibre3">50  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-63"></a><img src="images/000002.png" alt="Image 9" class="calibre2" /></p>
<p class="calibre1">→ <b class="calibre3">ln -s myfile mysoftlink</b></p>
<p class="calibre1">If you delete the original file, the now-dangling link will be invalid, pointing to a nonexistent file path. A  <i class="calibre4">hard link</i>, on the other hand, is simply a  <i class="calibre4">second name</i> for a physical file on disk (in tech talk, it points to the same  <i class="calibre4">inode</i>). If you delete the orig‐</p>
<p class="calibre1"><a href="#calibre_link-63">inal file, the link still works. Figure 5</a> illustrates the difference. </p>
<p class="calibre1">To create a hard link, type:</p>
<p class="calibre1">→ <b class="calibre3">ln myfile myhardlink</b></p>
<p class="calibre1"> <i class="calibre4">Figure 5. Hard link versus symbolic link</i></p>
<p class="calibre1">Symbolic links can point to files on other disk partitions, as they are just references to file paths; hard links cannot, because an inode on one disk has no meaning on another. Symbolic</p>
<p class="calibre1"><b class="calibre3">Basic File Operations  |  51</b></p>
<p class="calibre1"><a id="calibre_link-8"></a>links can also point to directories, whereas hard links cannot...unless you are the superuser and use the -d option. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-s Make a symbolic link instead of a hard link. </p>
<p class="calibre1">-i Interactive mode. Ask before overwriting destination files. </p>
<p class="calibre1">-f Force the link. If a destination file exists, overwrite it unconditionally. </p>
<p class="calibre1">-d Create a hard link to a directory (superusers only). </p>
<p class="calibre1">To find out where a symbolic link points, run either of the following commands, which show that the link  <i class="calibre4">examplelink</i> points to the file  <i class="calibre4">myfile</i>:</p>
<p class="calibre1">→ <b class="calibre3">readlink examplelink</b></p>
<p class="calibre1">myfile</p>
<p class="calibre1">→ <b class="calibre3">ls -l examplelink</b></p>
<p class="calibre1">lrwxrwxrwx 1 smith     <i class="calibre4">... </i>    examplelink -&gt; myfile Symbolic links can point to other symbolic links. To follow an entire chain of links to discover where they point in the end, use readlink -f. </p>
<p class="calibre1"><b class="calibre3">Directory Operations</b></p>
<p class="calibre1">cd</p>
<p class="calibre1">Change your current directory (i.e., “where you are now” in the filesystem). </p>
<p class="calibre1">pwd</p>
<p class="calibre1">Print the name of your current directory. </p>
<p class="calibre1">basename Print the final part of a file path. </p>
<p class="calibre1">dirname</p>
<p class="calibre1">Print a file path without its final part. </p>
<p class="calibre1">mkdir</p>
<p class="calibre1">Create (make) a directory. </p>
<p class="calibre1">rmdir</p>
<p class="calibre1">Delete (remove) an empty directory. </p>
<p class="calibre1">rm -r</p>
<p class="calibre1">Delete a nonempty directory and its contents. </p>
<p class="calibre1"><b class="calibre3">52  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-93"></a>We discussed the directory structure of Lin<a href="#calibre_link-5">ux in “The Filesys‐</a></p>
<p class="calibre1"><a href="#calibre_link-5">tem” on page 17. N</a>ow we’ll cover commands that create, modify, delete, and manipulate directories within that structure. </p>
<p class="calibre1"><b class="calibre3">stdin  stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">cd</b></p>
<p class="calibre1">cd [ <i class="calibre4">directory</i>]</p>
<p class="calibre1">The cd (change directory) command sets your current working</p>
<p class="calibre1">directory:</p>
<p class="calibre1">→ <b class="calibre3">cd /usr/games</b></p>
<p class="calibre1">With no directory supplied, cd defaults to your home directory:</p>
<p class="calibre1">→ <b class="calibre3">cd</b></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">pwd</b></p>
<p class="calibre1">pwd</p>
<p class="calibre1">The pwd command prints the absolute path of your current</p>
<p class="calibre1">working directory:</p>
<p class="calibre1">→ <b class="calibre3">pwd</b></p>
<p class="calibre1">/users/smith/linuxpocketguide</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">basename</b></p>
<p class="calibre1">basename  <i class="calibre4">path</i> [ <i class="calibre4">extension</i>]</p>
<p class="calibre1">The basename command prints the final component in a file</p>
<p class="calibre1">path:</p>
<p class="calibre1">→ <b class="calibre3">basename /users/smith/finances/money.txt</b></p>
<p class="calibre1">money.txt</p>
<p class="calibre1"><b class="calibre3">Directory Operations  |  53</b></p>
<p class="calibre1"><a id="calibre_link-147"></a>If you provide an optional extension, it gets stripped from the result:</p>
<p class="calibre1">→ <b class="calibre3">basename /users/smith/finances/money.txt .txt</b></p>
<p class="calibre1">money</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">dirname</b></p>
<p class="calibre1">dirname  <i class="calibre4">path</i></p>
<p class="calibre1">The dirname command prints a file path with its final compo‐</p>
<p class="calibre1">nent removed:</p>
<p class="calibre1">→ <b class="calibre3">dirname /users/smith/mydir</b></p>
<p class="calibre1">/users/smith</p>
<p class="calibre1">dirname does not change your current working directory. It</p>
<p class="calibre1">simply manipulates and prints a string, just like basename does. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">mkdir</b></p>
<p class="calibre1">mkdir [ <i class="calibre4">options</i>]  <i class="calibre4">directories</i></p>
<p class="calibre1">mkdir creates one or more directories:</p>
<p class="calibre1">→ <b class="calibre3">mkdir directory1 directory2 directory3</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-p</p>
<p class="calibre1">Given a directory path (not just a simple directory name), create any necessary parent directories automatically. The command:</p>
<p class="calibre1">→ <b class="calibre3">mkdir -p one/two/three</b></p>
<p class="calibre1">creates  <i class="calibre4">one</i> and  <i class="calibre4">one/two</i> and  <i class="calibre4">one/two/three</i> if they don’t already exist. </p>
<p class="calibre1">-m</p>
<p class="calibre1">Create the directory with the given permissions:</p>
<p class="calibre1"> <i class="calibre4">mode</i></p>
<p class="calibre1">→ <b class="calibre3">mkdir -m 0755 publicdir</b></p>
<p class="calibre1">By default, your shell’s umask controls the permissions. See the chmod</p>
<p class="calibre1"><a href="#calibre_link-11">command in “File Properties” on page 69, and </a><a href="#calibre_link-62">“File Protections” on</a></p>
<p class="calibre1"><a href="#calibre_link-62">page 25</a>. </p>
<p class="calibre1"><b class="calibre3">54  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-9"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">rmdir</b></p>
<p class="calibre1">rmdir [ <i class="calibre4">options</i>]  <i class="calibre4">directories</i></p>
<p class="calibre1">The rmdir (remove directory) command deletes one or more</p>
<p class="calibre1">empty directories you name:</p>
<p class="calibre1">→ <b class="calibre3">mkdir /tmp/junk</b>     <i class="calibre4">make a directory</i></p>
<p class="calibre1">→ <b class="calibre3">rmdir /tmp/junk</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-p If you supply a directory path (not just a simple directory name), delete not only the given directory, but the specified parent directories automatically, all of which must be empty. So rmdir -p one/two/three will delete not only  <i class="calibre4">one/two/three</i>, but also  <i class="calibre4">one/two</i> and  <i class="calibre4">one</i>. </p>
<p class="calibre1">To delete a nonempty directory and its contents, use (carefully) rm -r  <i class="calibre4">directory</i>. Use rm -ri to delete interactively, or rm -rf to annihilate without any error messages or confirmation. </p>
<p class="calibre1"><b class="calibre3">File Viewing</b></p>
<p class="calibre1">cat</p>
<p class="calibre1">View files in their entirety. </p>
<p class="calibre1">less</p>
<p class="calibre1">View text files one page at a time. </p>
<p class="calibre1">nl</p>
<p class="calibre1">View text files with their lines numbered. </p>
<p class="calibre1">head</p>
<p class="calibre1">View the first lines of a text file. </p>
<p class="calibre1">tail</p>
<p class="calibre1">View the last lines of a text file. </p>
<p class="calibre1">strings Display text that’s embedded in a binary file. </p>
<p class="calibre1">od</p>
<p class="calibre1">View data in octal (or other formats). </p>
<p class="calibre1">In Linux, you’ll encounter files that contain readable text, and others that contain binary data that you want to view in a readable manner. Here, we’ll demonstrate how to display their contents at the most basic level. </p>
<p class="calibre1"><b class="calibre3">File Viewing  |  55</b></p>
<p class="calibre1"><a id="calibre_link-121"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">cat</b></p>
<p class="calibre1">cat [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The simplest viewer is cat, which just prints its files to standard output, concatenating them (hence the name):</p>
<p class="calibre1">→ <b class="calibre3">cat myfile</b></p>
<p class="calibre1">Large files will likely scroll off screen, so consider using less if you plan to read the output. That being said, cat is particularly useful for sending a set of files into a shell pipeline:</p>
<p class="calibre1">→ <b class="calibre3">cat myfile* | wc</b></p>
<p class="calibre1">cat can also manipulate its output in small ways, optionally displaying nonprinting characters, prepending line numbers</p>
<p class="calibre1">(though the nl command is more powerful for this purpose), </p>
<p class="calibre1">and eliminating whitespace. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-T Print tabs as ^I. </p>
<p class="calibre1">-E Print newlines as $. </p>
<p class="calibre1">-v Print other nonprinting characters in a human-readable format. </p>
<p class="calibre1">-n Prepend line numbers to every line. </p>
<p class="calibre1">-b Prepend line numbers to nonblank lines. </p>
<p class="calibre1">-s Squeeze each sequence of blank lines into a single blank line. </p>
<p class="calibre1"><b class="calibre3">56  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-64"></a><b class="calibre3">stdin   st<a href="#calibre_link-64">dout9</a></b><b class="calibre3">   - file   -- opt   --help   --version</b> <b class="calibre3">less</b></p>
<p class="calibre1">less [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">Use less to view text one “page” at a time (i.e., one window or screenful at a time):</p>
<p class="calibre1">→ <b class="calibre3">less myfile</b></p>
<p class="calibre1">It’s great for text files, or as the final command in a shell pipeline with lengthy output:</p>
<p class="calibre1">→  <i class="calibre4"><b class="calibre3">command1</b></i><b class="calibre3"> |  <i class="calibre4">command2</i></b><b class="calibre3"> |  <i class="calibre4">command3</i></b><b class="calibre3"> |  <i class="calibre4">command4</i></b><b class="calibre3"> | less</b> While running less, type h for a help message describing all its features. Here are some useful keystrokes for paging through files:</p>
<p class="calibre1">Keystroke</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">h, H</p>
<p class="calibre1">View a help page. </p>
<p class="calibre1">Space bar, f, ^V, ^F Move forward one screenful. </p>
<p class="calibre1">Enter</p>
<p class="calibre1">Move forward one line. </p>
<p class="calibre1">b, ^B, ESC-v</p>
<p class="calibre1">Move backward one screenful. </p>
<p class="calibre1">/</p>
<p class="calibre1">Enter search mode. Follow it with a regular expression and</p>
<p class="calibre1">press Enter, and less will look for the first matching line. </p>
<p class="calibre1">? </p>
<p class="calibre1">Same as /, but it searches backward in the file. </p>
<p class="calibre1">n</p>
<p class="calibre1">Next match: Repeat your most recent search forward. </p>
<p class="calibre1">N</p>
<p class="calibre1">Repeat your most recent search backward. </p>
<p class="calibre1">v</p>
<p class="calibre1">Edit the current file with your default text editor (the value of environment variable VISUAL, or if not defined, </p>
<p class="calibre1">EDITOR, or if not defined, the program vi). </p>
<p class="calibre1">9 Although technically less can be plugged into the middle of a pipeline, or its output redirected to a file, there isn’t much point to doing this. </p>
<p class="calibre1"><b class="calibre3">File Viewing  |  57</b></p>
<p class="calibre1"><a id="calibre_link-190"></a>Keystroke</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">&lt;, g</p>
<p class="calibre1">Jump to beginning of file. </p>
<p class="calibre1">&gt;, G</p>
<p class="calibre1">Jump to end of file. </p>
<p class="calibre1">:n</p>
<p class="calibre1">Jump to next file. </p>
<p class="calibre1">:p</p>
<p class="calibre1">Jump to previous file. </p>
<p class="calibre1">less has a mind-boggling number of features; we’re presenting only the most common. (For instance, less will display the</p>
<p class="calibre1">contents of a compressed Zip file: try less myfile.zip.) The manpage is recommended reading. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-c Clear the screen before displaying the next page. This avoids scrolling and may be more comfortable on the eyes. </p>
<p class="calibre1">-m Print a more verbose prompt, displaying the percentage of the file displayed so far. </p>
<p class="calibre1">-N Display line numbers. </p>
<p class="calibre1">-r Display control characters literally; normally less converts them to a human-readable format. </p>
<p class="calibre1">-s Squeeze multiple, adjacent blank lines into a single blank line. </p>
<p class="calibre1">-S Truncate long lines to the width of the screen, instead of wrapping. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">nl</b></p>
<p class="calibre1">nl [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">nl copies its files to standard output, prepending line numbers:</p>
<p class="calibre1">→ <b class="calibre3">nl poem</b></p>
<p class="calibre1">1  Once upon a time, there was</p>
<p class="calibre1">2  a little operating system named</p>
<p class="calibre1">3  Linux, which everybody loved. </p>
<p class="calibre1"><b class="calibre3">58  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-174"></a>It’s more flexible than cat with its -n and -b options, providing greater control over the numbering. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-b [a|t|n|p  <i class="calibre4">R</i> ] Prepend numbers to all lines (a), nonblank lines (t), no lines (n), or only lines that contain regular expression  <i class="calibre4">R</i>. </p>
<p class="calibre1">(Default=a)</p>
<p class="calibre1">-v  <i class="calibre4">N</i></p>
<p class="calibre1">Begin numbering with integer  <i class="calibre4">N</i>. (Default=1)</p>
<p class="calibre1">-i  <i class="calibre4">N</i></p>
<p class="calibre1">Increment the number by  <i class="calibre4">N </i> for each line, so for example, you could use odd numbers only (-i2) or even numbers</p>
<p class="calibre1">only (-v2 -i2). (Default=1)</p>
<p class="calibre1">-n [ln|rn|rz]</p>
<p class="calibre1">Format numbers as left-justified (ln), right-justified (rn), or right-justified with leading zeros (rz). (Default=ln)</p>
<p class="calibre1">-w  <i class="calibre4">N</i></p>
<p class="calibre1">Force the width of the number to be  <i class="calibre4">N</i> columns. </p>
<p class="calibre1">(Default=6)</p>
<p class="calibre1">-s  <i class="calibre4">S</i></p>
<p class="calibre1">Insert string  <i class="calibre4">S</i> between the line number and the text. </p>
<p class="calibre1">(Default=Tab)</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">head</b></p>
<p class="calibre1">head [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The head command prints the first 10 lines of a file, which is great for previewing the contents:</p>
<p class="calibre1">→ <b class="calibre3">head myfile</b></p>
<p class="calibre1">→ <b class="calibre3">head myfile* | less</b>    <i class="calibre4">Previewing multiple files</i> It’s also good for previewing the first few lines of output from a pipeline&mdash;say, the most recently modified 10 files in the current directory:</p>
<p class="calibre1">→ <b class="calibre3">ls -lta | head</b></p>
<p class="calibre1"><b class="calibre3">File Viewing  |  59</b></p>
<p class="calibre1"><a id="calibre_link-214"></a><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n  <i class="calibre4">N </i> Print the first  <i class="calibre4">N </i> lines instead of 10. </p>
<p class="calibre1">- <i class="calibre4">N</i></p>
<p class="calibre1">Same as -n  <i class="calibre4">N</i>. </p>
<p class="calibre1">-c  <i class="calibre4">N </i> Print the first  <i class="calibre4">N </i> bytes of the file. </p>
<p class="calibre1">-q</p>
<p class="calibre1">Quiet mode: when processing more than one file, don’t print a banner above each file. Normally, head prints a banner containing the filename. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">tail</b></p>
<p class="calibre1">tail [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The tail command prints the last 10 lines of a file, and does other tricks as well:</p>
<p class="calibre1">→ <b class="calibre3">tail myfile</b></p>
<p class="calibre1">→ <b class="calibre3">nl myfile | tail</b>   <i class="calibre4">See line numbers too</i></p>
<p class="calibre1">The ultra-useful -f option causes tail to watch a file actively while another program is writing to it, displaying new lines as they are written. This is invaluable for watching a Linux log file in active use, as other programs write to it:</p>
<p class="calibre1">→ <b class="calibre3">tail -f /var/log/syslog</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n  <i class="calibre4">N</i></p>
<p class="calibre1">Print the last  <i class="calibre4">N</i> lines of the file instead of 10. </p>
<p class="calibre1">- <i class="calibre4">N</i></p>
<p class="calibre1">Same as -n  <i class="calibre4">N</i>. </p>
<p class="calibre1">-n + <i class="calibre4">N </i> Print all lines except the first  <i class="calibre4">N</i>. </p>
<p class="calibre1">-c  <i class="calibre4">N</i></p>
<p class="calibre1">Print the last  <i class="calibre4">N </i> bytes of the file. </p>
<p class="calibre1">-f</p>
<p class="calibre1">Keep the file open, and whenever lines are appended to the file, print them. This is extremely useful. Add the --retry option if the file doesn’t exist yet, but you want to wait for it to exist. </p>
<p class="calibre1"><b class="calibre3">60  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-235"></a>-q</p>
<p class="calibre1">Quiet mode: when processing more than one file, don’t print a banner above each file. Normally tail prints a banner containing the filename. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">strings</b></p>
<p class="calibre1">strings [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">Binary files, such as executable programs and object files, usually contain some readable text. The strings program extracts that text and displays it on standard output. You can discover version information, authors’ names, and other useful tidbits with strings:</p>
<p class="calibre1">→ <b class="calibre3">strings /usr/bin/who</b></p>
<p class="calibre1">David MacKenzie</p>
<p class="calibre1">Copyright %s %d Free Software Foundation, Inc. </p>
<p class="calibre1">Report %s bugs to %s</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">Combine strings and grep to make your exploring more effi‐</p>
<p class="calibre1">cient. Here we look for email addresses:</p>
<p class="calibre1">→ <b class="calibre3">strings -n 10 /usr/bin/who | grep '@' </b></p>
<p class="calibre1">bug-coreutils@gnu.org</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n  <i class="calibre4">length </i> Display only strings with length greater than  <i class="calibre4">length</i> (the default is 4). </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">od</b></p>
<p class="calibre1">od [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">When you want to view a binary file, consider od (octal dump) for the job. It copies one or more files to standard output, displaying their data in ASCII, octal, decimal, hexadecimal, or <b class="calibre3">File Viewing  |  61</b></p>
<p class="calibre1"><a id="calibre_link-194"></a>floating point, in various sizes (byte, short, long). For example, this command:</p>
<p class="calibre1">→ <b class="calibre3">od -w8 /usr/bin/who</b></p>
<p class="calibre1">0000000 042577 043114 000401 000001</p>
<p class="calibre1">0000010 000000 000000 000000 000000</p>
<p class="calibre1">0000020 000002 000003 000001 000000</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">displays the bytes in binary file  <i class="calibre4">/usr/bin/who</i> in octal, eight bytes per line. The column on the left contains the file offset of each row, again in octal. </p>
<p class="calibre1">If your binary file also contains text, consider the -tc option, which displays character data. For example, binary executables like who contain the string “ELF” at the beginning:</p>
<p class="calibre1">→ <b class="calibre3">od -tc -w8 /usr/bin/who | head -3</b></p>
<p class="calibre1">0000000 177   E   L   F 001 001 001  \0</p>
<p class="calibre1">0000010  \0  \0  \0  \0  \0  \0  \0  \0</p>
<p class="calibre1">0000020 002  \0 003  \0 001  \0  \0  \0</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-N  <i class="calibre4">B</i></p>
<p class="calibre1">Display only the first  <i class="calibre4">B</i> bytes of each file, specified in decimal, hexadecimal (by prepending 0x or 0X), 512-byte</p>
<p class="calibre1">blocks (by appending b), kilobytes (by appending k), or</p>
<p class="calibre1">megabytes (by appending m). (Default displays the entire</p>
<p class="calibre1">file.)</p>
<p class="calibre1">-j  <i class="calibre4">B</i></p>
<p class="calibre1">Begin the output at byte  <i class="calibre4">B</i> +1 of each file; acceptable formats are the same as for the -N option. (Default=0)</p>
<p class="calibre1">-w [  <i class="calibre4">B</i> ]</p>
<p class="calibre1">Display  <i class="calibre4">B</i> bytes per line; acceptable formats are the same as in the -N option. Using -w by itself is equivalent to -</p>
<p class="calibre1">w32. (Default=16)</p>
<p class="calibre1">-s [  <i class="calibre4">B</i> ]</p>
<p class="calibre1">Group each row of bytes into sequences of  <i class="calibre4">B</i> bytes, </p>
<p class="calibre1">separated by whitespace; acceptable formats are the same</p>
<p class="calibre1">as in the -N option. Using -s by itself is equivalent to -</p>
<p class="calibre1">s3. (Default=2)</p>
<p class="calibre1"><b class="calibre3">62  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-10"></a>-A (d|o|x|n)</p>
<p class="calibre1">Display file offsets in the leftmost column, in decimal (d), octal (o), hexadecimal (x), or not at all (n). (Default=o)</p>
<p class="calibre1">-t(a|c)[z]</p>
<p class="calibre1">Display output in a character format, with</p>
<p class="calibre1">nonalphanumeric characters printed as escape sequences</p>
<p class="calibre1">(c) or by name (a). </p>
<p class="calibre1">-t(d|o|u|x)[z] Display output in an integer format, including octal (o), signed decimal (d), unsigned decimal (u), hexadecimal</p>
<p class="calibre1">(x). </p>
<p class="calibre1">Appending z to the -t option prints a new column on the</p>
<p class="calibre1">righthand side of the output, displaying the printable characters on each line. </p>
<p class="calibre1"><b class="calibre3">File Creation and Editing</b></p>
<p class="calibre1">Command Meaning</p>
<p class="calibre1">nano</p>
<p class="calibre1">A simple text editor included by default in popular Linux distros. </p>
<p class="calibre1">emacs</p>
<p class="calibre1">Text editor from Free Software Foundation. </p>
<p class="calibre1">vim</p>
<p class="calibre1">Text editor, extension of Unix vi. </p>
<p class="calibre1">To get far with Linux, you must become proficient with one of its text editors. The three major ones are nano, emacs from the Free Software Foundation, and vim, a successor to the Unix</p>
<p class="calibre1">editor vi. Teaching these editors fully is beyond the scope of this book, but all have online tutorials, and we list common operations in <a href="#calibre_link-65">Table 1</a>. To edit a file, run any of these commands:</p>
<p class="calibre1">→ <b class="calibre3">nano myfile</b></p>
<p class="calibre1">→ <b class="calibre3">emacs myfile</b></p>
<p class="calibre1">→ <b class="calibre3">vim myfile</b></p>
<p class="calibre1">If  <i class="calibre4">myfile</i> doesn’t exist, it is created automatically. </p>
<p class="calibre1">If you share files with Microsoft Windows systems, Linux also has fine programs for editing Microsoft Office documents:</p>
<p class="calibre1">LibreOffice (all documents), abiword (Word only), and gnu‐</p>
<p class="calibre1"><b class="calibre3">File Creation and Editing  |  63</b></p>
<p class="calibre1"><a id="calibre_link-66"></a>meric (Excel only). These are probably included in your distro, or you can find them easily through web search. </p>
<p class="calibre1"><b class="calibre3">Creating a File Quickly</b></p>
<p class="calibre1">You can quickly create an empty file (for later editing) using the touch command:</p>
<p class="calibre1">→ <b class="calibre3">touch newfile</b></p>
<p class="calibre1">or the echo -n command (see <a href="#calibre_link-11">“File Properties” on page 69</a><a href="#calibre_link-66">):10</a></p>
<p class="calibre1">→ <b class="calibre3">echo -n &gt; newfile2</b></p>
<p class="calibre1">or write data into a new file by redirecting the output of a program (see <a href="#calibre_link-59">“Input/output redirection” on page 33):</a></p>
<p class="calibre1">→ <b class="calibre3">echo anything at all &gt; newfile3</b></p>
<p class="calibre1"><b class="calibre3">Your Default Editor</b></p>
<p class="calibre1">Various Linux programs will run an editor when necessary, and usually the default editor is nano or vim. For example, your email program may invoke an editor to compose a new message, and less invokes an editor if you type “v”. But what if you want a different default editor? Set the environment variables VISUAL and EDITOR to your choice, for example:</p>
<p class="calibre1">→ <b class="calibre3">EDITOR=emacs</b></p>
<p class="calibre1">→ <b class="calibre3">VISUAL=emacs</b></p>
<p class="calibre1">→ <b class="calibre3">export EDITOR VISUAL</b></p>
<p class="calibre1">Both variables are necessary because different programs check one variable or the other. Set EDITOR and VISUAL in your</p>
<p class="calibre1"> <i class="calibre4">~/.bash_profile</i> startup file if you want your choices made permanent. Any program can be made your default editor as long</p>
<p class="calibre1">as it accepts a filename as an argument. </p>
<p class="calibre1">10 The -n option prevents a newline character from being written to the file, making it truly empty. </p>
<p class="calibre1"><b class="calibre3">64  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-236"></a>Regardless of how you set these variables, all users should know at least basic commands for each editor in case another program suddenly runs an editor on a critical file. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">nano</b></p>
<p class="calibre1">nano [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">Nano is a text editor with basic features. It’s included by default in many Linux distros, whereas more powerful editors like</p>
<p class="calibre1">emacs and vim might not be. To invoke nano, type</p>
<p class="calibre1">→ <b class="calibre3">nano</b></p>
<p class="calibre1">Nano commands generally involve holding down the control</p>
<p class="calibre1">key and typing a letter, such as ^o to save and ^x to quit. Nano helpfully displays common commands at the bottom of its edit window, though some of the vocabulary is a little obscure. (For example, nano uses the term “WriteOut” to mean “save file.”) Other commands involve the  <i class="calibre4">meta</i> key, which is usually the Escape key or the Alt key. Nano’s own documentation notates</p>
<p class="calibre1">the meta key as M- (as in M-F to mean “use the meta key and</p>
<p class="calibre1">type F”), so we will too. F<a href="#calibre_link-65">or basic keystrokes, see Table 1</a>. For more documenta<a href="http://nano-editor.org">tion, visit  <i class="calibre4">http://nano-editor.org</i></a>. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">emacs</b></p>
<p class="calibre1">emacs [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">emacs is an extremely powerful editing environment with</p>
<p class="calibre1">thousands of commands, plus a complete programming lan‐</p>
<p class="calibre1">guage to define your own editing features. To invoke emacs in a new X window, run:</p>
<p class="calibre1">→ <b class="calibre3">emacs</b></p>
<p class="calibre1">To run in a existing shell window:</p>
<p class="calibre1"><b class="calibre3">File Creation and Editing  |  65</b></p>
<p class="calibre1"><a id="calibre_link-221"></a>→ <b class="calibre3">emacs -nw</b></p>
<p class="calibre1">Now to invoke the built-in emacs tutorial, type ^h t. </p>
<p class="calibre1">Most emacs keystroke commands involve the control key (like</p>
<p class="calibre1">^F) or the  <i class="calibre4">meta</i> key, which is usually the Escape key or the Alt key. emacs’s own documentation notates the meta key as M- (as in M-F to mean “use the meta key and type F”), so we will too. </p>
<p class="calibre1">For basic keystrokes, see <a href="#calibre_link-65">Table 1</a>. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">vim</b></p>
<p class="calibre1">vim [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">vim is an enhanced version of the old standard Unix editor vi. </p>
<p class="calibre1">To invoke the editor in a new X window, run:</p>
<p class="calibre1">→ <b class="calibre3">gvim</b></p>
<p class="calibre1">To run in a existing shell window:</p>
<p class="calibre1">→ <b class="calibre3">vim</b></p>
<p class="calibre1">To run the vim tutorial, run:</p>
<p class="calibre1">→ <b class="calibre3">vimtutor</b></p>
<p class="calibre1">vim is a mode-based editor. It operates usually in two modes, <i class="calibre4">insert</i> and  <i class="calibre4">command</i>, and you must switch between them while editing. Insert mode is for entering text in the usual manner, while command mode is for deleting text, copy/paste, and</p>
<p class="calibre1">other operations. For basic keystrokes in normal mode, see</p>
<p class="calibre1"><a href="#calibre_link-65">Table 1</a>. </p>
<p class="calibre1"><b class="calibre3">66  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-65"></a> <i class="calibre4">Table 1. Basic keystrokes in text editors</i> Task</p>
<p class="calibre1">emacs</p>
<p class="calibre1">nano</p>
<p class="calibre1">vim</p>
<p class="calibre1">Type text</p>
<p class="calibre1">Just type</p>
<p class="calibre1">Just type</p>
<p class="calibre1">Switch to insert</p>
<p class="calibre1">mode if</p>
<p class="calibre1">necessary, by</p>
<p class="calibre1">typing i, then</p>
<p class="calibre1">type any text</p>
<p class="calibre1">Save and quit</p>
<p class="calibre1">^x^s then</p>
<p class="calibre1">^o then ^x</p>
<p class="calibre1">:wq</p>
<p class="calibre1">^x^c</p>
<p class="calibre1">Quit without saving</p>
<p class="calibre1">^x^c</p>
<p class="calibre1">^x</p>
<p class="calibre1">:q! </p>
<p class="calibre1">Respond “no” </p>
<p class="calibre1">Respond “no” </p>
<p class="calibre1">when asked to</p>
<p class="calibre1">when asked to</p>
<p class="calibre1">save buffers</p>
<p class="calibre1">save</p>
<p class="calibre1">Save</p>
<p class="calibre1">^x^s</p>
<p class="calibre1">^o</p>
<p class="calibre1">:w</p>
<p class="calibre1">Save As</p>
<p class="calibre1">^x^w</p>
<p class="calibre1">^o, then type a :w  <i class="calibre4">filename</i></p>
<p class="calibre1">filename</p>
<p class="calibre1">Undo</p>
<p class="calibre1">^/ or ^x u</p>
<p class="calibre1">M-u</p>
<p class="calibre1">u</p>
<p class="calibre1">Suspend editor (not in X)</p>
<p class="calibre1">^z</p>
<p class="calibre1">^z</p>
<p class="calibre1">^z</p>
<p class="calibre1">Switch to insert mode</p>
<p class="calibre1">( <i class="calibre4">N/A</i>)</p>
<p class="calibre1">( <i class="calibre4">N/A</i>)</p>
<p class="calibre1">i</p>
<p class="calibre1">Switch to command mode ( <i class="calibre4">N/A</i>)</p>
<p class="calibre1">( <i class="calibre4">N/A</i>)</p>
<p class="calibre1">ESC</p>
<p class="calibre1">Switch to command-line</p>
<p class="calibre1">M-x</p>
<p class="calibre1">( <i class="calibre4">N/A</i>)</p>
<p class="calibre1">:</p>
<p class="calibre1">mode</p>
<p class="calibre1">Abort command in</p>
<p class="calibre1">^g</p>
<p class="calibre1">^c</p>
<p class="calibre1">ESC</p>
<p class="calibre1">progress</p>
<p class="calibre1">Move forward</p>
<p class="calibre1">^f or right</p>
<p class="calibre1">^f or right</p>
<p class="calibre1">l or right arrow</p>
<p class="calibre1">arrow</p>
<p class="calibre1">arrow</p>
<p class="calibre1">Move backward</p>
<p class="calibre1">^b or left</p>
<p class="calibre1">^b or left</p>
<p class="calibre1">h or left arrow</p>
<p class="calibre1">arrow</p>
<p class="calibre1">arrow</p>
<p class="calibre1">Move up</p>
<p class="calibre1">^p or up arrow</p>
<p class="calibre1">^p or up arrow</p>
<p class="calibre1">k or up arrow</p>
<p class="calibre1">Move down</p>
<p class="calibre1">^n or down</p>
<p class="calibre1">^n or down</p>
<p class="calibre1">j or down</p>
<p class="calibre1">arrow</p>
<p class="calibre1">arrow</p>
<p class="calibre1">arrow</p>
<p class="calibre1"><b class="calibre3">File Creation and Editing  |  67</b></p>
<p class="calibre1"><a id="calibre_link-237"></a>Task</p>
<p class="calibre1">emacs</p>
<p class="calibre1">nano</p>
<p class="calibre1">vim</p>
<p class="calibre1">Move to next word</p>
<p class="calibre1">M-f</p>
<p class="calibre1">^SPACEBAR</p>
<p class="calibre1">w</p>
<p class="calibre1">Move to previous word</p>
<p class="calibre1">M-b</p>
<p class="calibre1">M-SPACEBAR</p>
<p class="calibre1">b</p>
<p class="calibre1">Move to beginning of line ^a</p>
<p class="calibre1">^a</p>
<p class="calibre1">0</p>
<p class="calibre1">Move to end of line</p>
<p class="calibre1">^e</p>
<p class="calibre1">^e</p>
<p class="calibre1">$</p>
<p class="calibre1">Move down one screen</p>
<p class="calibre1">^v</p>
<p class="calibre1">^v</p>
<p class="calibre1">^f</p>
<p class="calibre1">Move up one screen</p>
<p class="calibre1">M-v</p>
<p class="calibre1">^y</p>
<p class="calibre1">^b</p>
<p class="calibre1">Move to beginning of</p>
<p class="calibre1">M-&lt; </p>
<p class="calibre1">M-\</p>
<p class="calibre1">gg</p>
<p class="calibre1">document</p>
<p class="calibre1">Move to end of document M-&gt; </p>
<p class="calibre1">M-/</p>
<p class="calibre1">G</p>
<p class="calibre1">Delete next character</p>
<p class="calibre1">^d</p>
<p class="calibre1">^d</p>
<p class="calibre1">x</p>
<p class="calibre1">Delete previous character BACKSPACE</p>
<p class="calibre1">BACKSPACE</p>
<p class="calibre1">X</p>
<p class="calibre1">Delete next word</p>
<p class="calibre1">M-d</p>
<p class="calibre1">( <i class="calibre4">N/A</i>)</p>
<p class="calibre1">de</p>
<p class="calibre1">Delete previous word</p>
<p class="calibre1">M-</p>
<p class="calibre1">( <i class="calibre4">N/A</i>)</p>
<p class="calibre1">db</p>
<p class="calibre1">BACKSPACE</p>
<p class="calibre1">Delete current line</p>
<p class="calibre1">^a^k</p>
<p class="calibre1">^k</p>
<p class="calibre1">dd</p>
<p class="calibre1">Delete to end of line</p>
<p class="calibre1">^k</p>
<p class="calibre1">... </p>
<p class="calibre1">D</p>
<p class="calibre1">Define region (type this</p>
<p class="calibre1">^SPACEBAR</p>
<p class="calibre1">^^ (control</p>
<p class="calibre1">v</p>
<p class="calibre1">keystroke to mark the</p>
<p class="calibre1">caret)</p>
<p class="calibre1">beginning of the region, </p>
<p class="calibre1">then move the cursor to</p>
<p class="calibre1">the end of the desired</p>
<p class="calibre1">region)</p>
<p class="calibre1">Cut region</p>
<p class="calibre1">^w</p>
<p class="calibre1">^k</p>
<p class="calibre1">d</p>
<p class="calibre1">Copy region</p>
<p class="calibre1">M-w</p>
<p class="calibre1">M-^</p>
<p class="calibre1">y</p>
<p class="calibre1">Paste region</p>
<p class="calibre1">^y</p>
<p class="calibre1">^u</p>
<p class="calibre1">p</p>
<p class="calibre1">Get help</p>
<p class="calibre1">^h</p>
<p class="calibre1">^g</p>
<p class="calibre1">:help</p>
<p class="calibre1">View the manual</p>
<p class="calibre1">^h i</p>
<p class="calibre1">^g</p>
<p class="calibre1">:help</p>
<p class="calibre1"><b class="calibre3">68  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-11"></a><b class="calibre3">File Properties</b></p>
<p class="calibre1">stat</p>
<p class="calibre1">Display attributes of files and directories. </p>
<p class="calibre1">wc</p>
<p class="calibre1">Count bytes, words, and lines in a file. </p>
<p class="calibre1">du</p>
<p class="calibre1">Measure disk usage of files and directories. </p>
<p class="calibre1">file</p>
<p class="calibre1">Identify (guess) the type of a file. </p>
<p class="calibre1">touch</p>
<p class="calibre1">Change timestamps of files and directories. </p>
<p class="calibre1">chown</p>
<p class="calibre1">Change owner of files and directories. </p>
<p class="calibre1">chgrp</p>
<p class="calibre1">Change group ownership of files and directories. </p>
<p class="calibre1">chmod</p>
<p class="calibre1">Change protection mode of files and directories. </p>
<p class="calibre1">umask</p>
<p class="calibre1">Set a default mode for new files and directories. </p>
<p class="calibre1">chattr Change extended attributes of files and directories. </p>
<p class="calibre1">lsattr List extended attributes of files and directories. </p>
<p class="calibre1">When examining a Linux file, keep in mind that the contents</p>
<p class="calibre1">are only half the story. Every file and directory also has</p>
<p class="calibre1">attributes that describe its owner, size, access permissions, and other information. The ls -l <a href="#calibre_link-7">command (see “Basic File Opera‐</a></p>
<p class="calibre1"><a href="#calibre_link-7">tions” on page 47</a>) displays some of these attributes, but other commands provide additional information. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">stat</b></p>
<p class="calibre1">stat [ <i class="calibre4">options</i>]  <i class="calibre4">files</i></p>
<p class="calibre1">The stat command lists important attributes of files (by</p>
<p class="calibre1">default) or filesystems (-f option). File information looks like:</p>
<p class="calibre1">→ <b class="calibre3">stat myfile</b></p>
<p class="calibre1">File: ‘myfile’</p>
<p class="calibre1">Size: 1168            Blocks: 8</p>
<p class="calibre1">IO Block: 4096  regular file</p>
<p class="calibre1">Device: 811h/2065d      Inode: 37224455    Links: 1</p>
<p class="calibre1">Access: (0644/-rw-r--r--)  Uid: ( 600/lisa)</p>
<p class="calibre1"><b class="calibre3">File Properties  |  69</b></p>
<p class="calibre1"><a id="calibre_link-238"></a>  Gid: ( 620/users)</p>
<p class="calibre1">Access: 2015-11-07 11:15:14.766013415 -0500</p>
<p class="calibre1">Modify: 2015-11-07 11:15:14.722012802 -0500</p>
<p class="calibre1">Change: 2015-11-07 11:15:14.722012802 -0500</p>
<p class="calibre1">Birth: -</p>
<p class="calibre1">and includes the filename, size in bytes (1168), size in blocks (8), file type (Regular File), permissions in octal (0644), permissions in the format of “ls -l” (-rw-r--r--), owner’s user ID</p>
<p class="calibre1">(600), owner’s name (lisa), owner’s group ID (620), owner’s</p>
<p class="calibre1">group name (users), device type (811 in hexadecimal, 2065 in decimal), inode number (37224455), number of hard links (1), and timestamps of the file’s most recent access, modification, and status change. Filesystem information looks like:</p>
<p class="calibre1">→ <b class="calibre3">stat -f myfile</b></p>
<p class="calibre1">File: "myfile" </p>
<p class="calibre1">ID: f02ed2bb86590cc6 Namelen: 255</p>
<p class="calibre1">Type: ext2/ext3</p>
<p class="calibre1">Block size: 4096       Fundamental block size: 4096</p>
<p class="calibre1">Blocks: Total: 185788077  Free: 108262724</p>
<p class="calibre1">Available: 98819461</p>
<p class="calibre1">Inodes: Total: 47202304   Free: 46442864</p>
<p class="calibre1">and includes the filename ( <i class="calibre4">myfile</i>), filesystem ID</p>
<p class="calibre1">(f02ed2bb86590cc6), maximum allowable length of a filename</p>
<p class="calibre1">for that filesystem (255 bytes), filesystem type (ext), block size for the filesystem (4096), the counts of total, free, and available blocks in the filesystem (185788077, 108262724, and 98819461, respectively), and the counts of total and free inodes (47202304</p>
<p class="calibre1">and 46442864, respectively). </p>
<p class="calibre1">The -t option presents the same data but on a single line, </p>
<p class="calibre1">without headings. This is handy for processing by shell scripts or other programs:</p>
<p class="calibre1">→ <b class="calibre3">stat -t myfile</b></p>
<p class="calibre1">myfile 1168 8 81a4 600 620 811 37224455 1 0 0</p>
<p class="calibre1">1446912914 1446912914 1446912914 0 4096</p>
<p class="calibre1">→ <b class="calibre3">stat -tf myfile</b></p>
<p class="calibre1"><b class="calibre3">70  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-166"></a>myfile f02ed2bb86590cc6 255 ef53 4096 4096</p>
<p class="calibre1">185788077 108262715 98819452 47202304 46442864</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-L Follow symbolic links and report on the file they point to. </p>
<p class="calibre1">-f Report on the filesystem containing the file, not the file itself. </p>
<p class="calibre1">-t Terse mode: print information on a single line. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">wc</b></p>
<p class="calibre1">wc [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The wc (word count) program prints a count of bytes, words, </p>
<p class="calibre1">and lines in (presumably) a text file:</p>
<p class="calibre1">→ <b class="calibre3">wc myfile</b></p>
<p class="calibre1">18  211 1168 myfile</p>
<p class="calibre1">This file has 18 lines, 211 whitespace-delimited words, and</p>
<p class="calibre1">1168 bytes. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-l Print the line count only. </p>
<p class="calibre1">-w Print the word count only. </p>
<p class="calibre1">-c Print the byte count only. </p>
<p class="calibre1">-L Locate the longest line in each file and print its length in bytes. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">du</b></p>
<p class="calibre1">du [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>|  <i class="calibre4">directories</i>]</p>
<p class="calibre1">The du (disk usage) command measures the disk space occu‐</p>
<p class="calibre1">pied by files or directories. By default, it measures the current <b class="calibre3">File Properties  |  71</b></p>
<p class="calibre1"><a id="calibre_link-149"></a>directory and all its subdirectories, printing totals in blocks for each, with a grand total at the bottom:</p>
<p class="calibre1">→ <b class="calibre3">du</b></p>
<p class="calibre1">36   ./Mail</p>
<p class="calibre1">340  ./Files/mine</p>
<p class="calibre1">40   ./Files/bob</p>
<p class="calibre1">416  ./Files</p>
<p class="calibre1">216  ./PC</p>
<p class="calibre1">2404 . </p>
<p class="calibre1">It can also measure the size of files:</p>
<p class="calibre1">→ <b class="calibre3">du myfile emptyfile hugefile</b></p>
<p class="calibre1">4       myfile</p>
<p class="calibre1">0       emptyfile</p>
<p class="calibre1">18144   hugefile</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-b</p>
<p class="calibre1">Measure usage in bytes. </p>
<p class="calibre1">-k</p>
<p class="calibre1">Measure usage in kilobytes. </p>
<p class="calibre1">-m</p>
<p class="calibre1">Measure usage in megabytes. </p>
<p class="calibre1">-B  <i class="calibre4">N</i></p>
<p class="calibre1">Display sizes in blocks that you define, where 1 block =  <i class="calibre4">N</i> bytes. </p>
<p class="calibre1">(Default = 1024)</p>
<p class="calibre1">-h -H Print in human-readable units. For example, if two directories are of size 1 gigabyte or 25 kilobytes, respectively, du -h prints 1G and 25K. The</p>
<p class="calibre1">-h option uses powers of 1024, whereas -H uses powers of 1000. </p>
<p class="calibre1">-c</p>
<p class="calibre1">Print a total in the last line. This is the default behavior when measuring a directory, but for measuring individual files, provide -c if you want a total. </p>
<p class="calibre1">-L</p>
<p class="calibre1">Follow symbolic links and measure the files they point to. </p>
<p class="calibre1">-s</p>
<p class="calibre1">Print only the total size. </p>
<p class="calibre1"><b class="calibre3">72  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-165"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">file</b></p>
<p class="calibre1">file [ <i class="calibre4">options</i>]  <i class="calibre4">files</i></p>
<p class="calibre1">The file command reports the type of a file. The output is an educated guess based on the file content and other factors:</p>
<p class="calibre1">→ <b class="calibre3">file /etc/hosts /usr/bin/who letter.docx</b></p>
<p class="calibre1">/etc/hosts:    ASCII text</p>
<p class="calibre1">/usr/bin/who:  ELF 64-bit LSB executable ... </p>
<p class="calibre1">letter.docx:   Microsoft Word 2007+</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-b</p>
<p class="calibre1">Omit filenames (left column of output). </p>
<p class="calibre1">-i</p>
<p class="calibre1">Print MIME types for the file, such as “text/plain” or “audio/</p>
<p class="calibre1">mpeg”, instead of the usual output. </p>
<p class="calibre1">-f  <i class="calibre4">name_file </i> Read filenames, one per line, from the given  <i class="calibre4">name_file</i>, and report their types. Afterward, process filenames on the</p>
<p class="calibre1">command line as usual. </p>
<p class="calibre1">-L</p>
<p class="calibre1">Follow symbolic links, reporting the type of the destination file instead of the link. </p>
<p class="calibre1">-z</p>
<p class="calibre1">If a file is compressed (see <a href="#calibre_link-14">“File Compression and Packaging” </a></p>
<p class="calibre1"><a href="#calibre_link-14">on page 108), examine the uncompressed contents to decide</a></p>
<p class="calibre1">the file type, instead of reporting “compressed data.” </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">touch</b></p>
<p class="calibre1">touch [ <i class="calibre4">options</i>]  <i class="calibre4">files</i></p>
<p class="calibre1">The touch command changes two timestamps associated with a</p>
<p class="calibre1">file: its modification time (when the file’s data was last changed) and its access time (when the file was last read). To set both timestamps to right now, run:</p>
<p class="calibre1">→ <b class="calibre3">touch myfile</b></p>
<p class="calibre1"><b class="calibre3">File Properties  |  73</b></p>
<p class="calibre1"><a id="calibre_link-134"></a>You can set these timestamps to arbitrary values, for example:</p>
<p class="calibre1">→ <b class="calibre3">touch -d "November 18 1975" myfile</b></p>
<p class="calibre1">If a given file doesn’t exist, touch creates it, offering a handy way to create empty files. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-a</p>
<p class="calibre1">Change the access time only. </p>
<p class="calibre1">-m</p>
<p class="calibre1">Change the modification time only. </p>
<p class="calibre1">-c</p>
<p class="calibre1">If the file doesn’t exist, don’t create it (normally, touch</p>
<p class="calibre1">creates it). </p>
<p class="calibre1">-d  <i class="calibre4">timestamp </i> Set the file’s timestamp(s). A tremendous number of timestamp formats are acceptable, from “12/28/2001 3pm” to</p>
<p class="calibre1">“28-May” (the current year is assumed, and a time of</p>
<p class="calibre1">midnight) to “next tuesday 13:59” to “0” (midnight today). </p>
<p class="calibre1">Experiment and check your work with stat. Full</p>
<p class="calibre1">documentation is available from info touch. </p>
<p class="calibre1">-t  <i class="calibre4">timestamp </i> A more explicit way to set the file’s  <i class="calibre4">timestamp</i>, using the format [[ <i class="calibre4">CC</i>] <i class="calibre4">YY</i>] <i class="calibre4">MMDDhhmm</i> [.  <i class="calibre4">ss</i>], where  <i class="calibre4">CC</i> is the two-digit century,  <i class="calibre4">YY</i> is the two-digit year,  <i class="calibre4">MM</i> is the two-digit month, <i class="calibre4">DD</i> is the two-digit day,  <i class="calibre4">hh</i> is the two-digit hour,  <i class="calibre4">mm</i> is the two-digit minute, and  <i class="calibre4">ss</i> is the two-digit second. For example, -t 20030812150047 represents August 12, </p>
<p class="calibre1">2003, at 15:00:47. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">chown</b></p>
<p class="calibre1">chown [ <i class="calibre4">options</i>]  <i class="calibre4">user_spec files</i></p>
<p class="calibre1">The chown (change owner) command sets the ownership of files and directories. To make user “smith” the owner of several files and a directory, run:</p>
<p class="calibre1">→ <b class="calibre3">sudo chown smith myfile myfile2 mydir</b></p>
<p class="calibre1"><b class="calibre3">74  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-131"></a>The  <i class="calibre4">user_spec</i> parameter may be any of these possibilities:</p>
<p class="calibre1">• An existing username (or any numeric user ID), to set</p>
<p class="calibre1">the owner: chown smith myfile</p>
<p class="calibre1">• An existing username (or any numeric user ID), option‐</p>
<p class="calibre1">ally followed by a colon and an existing group name (or</p>
<p class="calibre1">any numeric group ID), to set the owner and group:</p>
<p class="calibre1">chown smith:users myfile</p>
<p class="calibre1">• An existing username (or any numeric user ID) followed</p>
<p class="calibre1">by a colon, to set the owner  <i class="calibre4">and</i> to set the group to the invoking user’s login group: chown smith: myfile</p>
<p class="calibre1">• An existing group name (or any numeric group ID) pre‐</p>
<p class="calibre1">ceded by a colon, to set the group only: chown :users</p>
<p class="calibre1">myfile</p>
<p class="calibre1">• --reference= <i class="calibre4">file</i> to set the same owner and group as another given file</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">--dereference Follow symbolic links and operate on the files they point to. </p>
<p class="calibre1">-R</p>
<p class="calibre1">Recursively change permissions within a directory</p>
<p class="calibre1">hierarchy. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">chgrp</b></p>
<p class="calibre1">chgrp [ <i class="calibre4">options</i>]  <i class="calibre4">group_spec files</i></p>
<p class="calibre1">The chgrp (change group) command sets the group ownership</p>
<p class="calibre1">of files and directories:</p>
<p class="calibre1">→ <b class="calibre3">chgrp smith myfile myfile2 mydir</b></p>
<p class="calibre1">The  <i class="calibre4">group_spec</i> parameter may be any of these possibilities:</p>
<p class="calibre1">• A group name or numeric group ID</p>
<p class="calibre1"><b class="calibre3">File Properties  |  75</b></p>
<p class="calibre1"><a id="calibre_link-132"></a>• --reference= <i class="calibre4">file</i>, to set the same group ownership as another given file</p>
<p class="calibre1"><a href="#calibre_link-28">See “Group Management” on page 167</a> for more information on groups. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">--dereference Follow symbolic links and operate on the files they point to. </p>
<p class="calibre1">-R</p>
<p class="calibre1">Recursively change the ownership within a directory</p>
<p class="calibre1">hierarchy. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">chmod</b></p>
<p class="calibre1">chmod [ <i class="calibre4">options</i>]  <i class="calibre4">permissions files</i></p>
<p class="calibre1">The chmod (change mode) command protects files and directo‐</p>
<p class="calibre1">ries from unauthorized users on the same system, by setting</p>
<p class="calibre1">access permissions. Typical permissions are read, write, and execute, and they may be limited to the file owner, the file’s group owner, and/or other users. The permissions argument</p>
<p class="calibre1">can take three different forms:</p>
<p class="calibre1">• --reference= <i class="calibre4">file</i>, to set the same permissions as another given file. </p>
<p class="calibre1">• An octal number, up to four digits long, that specifies the file’s  <i class="calibre4">absolute</i> permissions in bits, as in <a href="#calibre_link-67">Figure 6</a>. The leftmost digit is special (described later) and the second, </p>
<p class="calibre1">third, and fourth represent the file’s owner, the file’s</p>
<p class="calibre1">group, and all users, respectively. </p>
<p class="calibre1">• One or more strings specifying  <i class="calibre4">absolute or relative</i> permissions (i.e., relative to the file’s existing permissions). </p>
<p class="calibre1">For example, a+r makes a file readable by all users. </p>
<p class="calibre1"><b class="calibre3">76  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-67"></a><img src="images/000001.png" alt="Image 10" class="calibre2" /></p>
<p class="calibre1">The most common permissions are:</p>
<p class="calibre1">→ <b class="calibre3">chmod 600 myfile</b>      <i class="calibre4">Private file for you</i></p>
<p class="calibre1">→ <b class="calibre3">chmod 644 myfile</b>      <i class="calibre4">Everyone can read; you can write</i></p>
<p class="calibre1">→ <b class="calibre3">chmod 700 mydir</b>       <i class="calibre4">Private directory for you</i></p>
<p class="calibre1">→ <b class="calibre3">chmod 755 mydir</b>       <i class="calibre4">Everyone can read; you can write</i> <i class="calibre4">Figure 6. File permission bits explained</i></p>
<p class="calibre1">In the third form, each string consists of three parts:</p>
<p class="calibre1"> <i class="calibre4">Scope (optional)</i></p>
<p class="calibre1">u for user, g for group, o for other users not in the group, a for all users. The default is a. </p>
<p class="calibre1"> <i class="calibre4">Command</i></p>
<p class="calibre1">+ to add permissions; − to remove permissions; or = to set</p>
<p class="calibre1">absolute permissions, ignoring existing ones. </p>
<p class="calibre1"> <i class="calibre4">Permissions</i></p>
<p class="calibre1">r for read, w for write/modify, x for execute (for directo‐</p>
<p class="calibre1">ries, this is permission to cd into the directory), X for conditional execute (explained later), u to duplicate the user</p>
<p class="calibre1">permissions, g to duplicate the group permissions, o to</p>
<p class="calibre1">duplicate the “other users” permissions, s for setuid or</p>
<p class="calibre1">setgid, and t for the sticky bit. </p>
<p class="calibre1">For example, ug+rw would add read and write permission for</p>
<p class="calibre1">the user and the group, a-x (or just -x) would remove execute permission for everyone, and o=r would directly set the “other <b class="calibre3">File Properties  |  77</b></p>
<p class="calibre1"><a id="calibre_link-213"></a>users” permissions to read only. You can combine these strings by separating them with commas, such as ug+rw,a-x. </p>
<p class="calibre1">Conditional execute permission (X) means the same as x, </p>
<p class="calibre1">except that it succeeds only if the file is already executable, or if the file is a directory. Otherwise, it has no effect. </p>
<p class="calibre1">Setuid and setgid, when applied to executable files (programs and scripts), have a powerful effect. Suppose we have an executable file  <i class="calibre4">F</i> owned by user “smith” and the group “friends”. If file  <i class="calibre4">F</i> has setuid (set user ID) enabled, then anyone who runs  <i class="calibre4">F</i></p>
<p class="calibre1">will “become” user “smith,” with all her rights and privileges, for the duration of the program. Likewise, if  <i class="calibre4">F</i> has setgid (set group ID) enabled, anyone who executes  <i class="calibre4">F</i> becomes a member of the “friends” group for the duration of the program. As you might imagine, setuid and setgid can impact system security, so don’t use them unless you  <i class="calibre4">real y</i> know what you’re doing. One misplaced chmod +s can leave your whole system vulnerable to attack. </p>
<p class="calibre1">The sticky bit, most commonly used for  <i class="calibre4">/tmp</i> directories, controls removal of files in that directory. Normally, if you have write permission in a directory, you can delete or move files within it, even if you don’t have this access to the files themselves. Inside a directory with the sticky bit set, you need write permission on a file in order to delete or move it. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-R Recursively change the ownership within a directory hierarchy. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">umask</b></p>
<p class="calibre1">umask [ <i class="calibre4">options</i>] [ <i class="calibre4">mask</i>]</p>
<p class="calibre1">The umask command sets or displays your default mode for creating files and directories&mdash;whether they are readable, writable, and/or executable by yourself, your group, and the world:</p>
<p class="calibre1"><b class="calibre3">78  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-191"></a>→ <b class="calibre3">umask</b></p>
<p class="calibre1">0002</p>
<p class="calibre1">→ <b class="calibre3">umask -S</b></p>
<p class="calibre1">u=rwx,g=rwx,o=rx</p>
<p class="calibre1">Let’s start with some technical talk and follow with common-</p>
<p class="calibre1">sense advice. A umask is a binary (base two) value, though it is commonly presented in octal (base eight). It defines your</p>
<p class="calibre1">default protection mode by combining with the octal value</p>
<p class="calibre1">0666 for files and 0777 for directories, using the binary operation NOT AND. For example, the umask 0002 yields a default file mode of 0664:</p>
<p class="calibre1">0666 NOT AND 0002</p>
<p class="calibre1">= 000110110110 NOT AND 000000000010</p>
<p class="calibre1">= 000110110110 AND 111111111101</p>
<p class="calibre1">= 000110110100</p>
<p class="calibre1">= 0664</p>
<p class="calibre1">Similarly for directories, 0002 NOT AND 0777 yields a default mode of 0775. </p>
<p class="calibre1">If that explanation seems from outer space, here are some simple recipes. Use mask 0022 to give yourself full privileges, and all others read/execute privileges only:</p>
<p class="calibre1">→ <b class="calibre3">umask 0022</b></p>
<p class="calibre1">→ <b class="calibre3">touch newfile &amp;&amp; mkdir dir</b></p>
<p class="calibre1">→ <b class="calibre3">ls -ldG newfile dir</b></p>
<p class="calibre1">-rw-r--r--  1 smith      0 Nov 11 12:25 newfile</p>
<p class="calibre1">drwxr-xr-x  2 smith   4096 Nov 11 12:25 dir</p>
<p class="calibre1">Use mask 0002 to give yourself and your default group full</p>
<p class="calibre1">privileges, and read/execute to others:</p>
<p class="calibre1">→ <b class="calibre3">umask 0002</b></p>
<p class="calibre1">→ <b class="calibre3">touch newfile &amp;&amp; mkdir dir</b></p>
<p class="calibre1">→ <b class="calibre3">ls -ldG newfile dir</b></p>
<p class="calibre1">-rw-rw-r--  1 smith      0 Nov 11 12:26 newfile</p>
<p class="calibre1">drwxrwxr-x  2 smith   4096 Nov 11 12:26 dir</p>
<p class="calibre1">Use mask 0077 to give yourself full privileges with nothing for anyone else:</p>
<p class="calibre1"><b class="calibre3">File Properties  |  79</b></p>
<p class="calibre1"><a id="calibre_link-108"></a>→ <b class="calibre3">umask 0077</b></p>
<p class="calibre1">→ <b class="calibre3">touch newfile &amp;&amp; mkdir dir</b></p>
<p class="calibre1">→ <b class="calibre3">ls -ldG newfile dir</b></p>
<p class="calibre1">-rw-------  1 smith      0 Nov 11 12:27 newfile</p>
<p class="calibre1">drwx------  2 smith   4096 Nov 11 12:27 dir</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">chattr</b></p>
<p class="calibre1">chattr [ <i class="calibre4">options</i>] [+ − =] <i class="calibre4">attributes</i> [ <i class="calibre4">files</i>]</p>
<p class="calibre1">If you grew up with other Unix systems, you might be sur‐</p>
<p class="calibre1">prised that Linux files can have additional attributes beyond their access permissions. If a file is on an “ext” filesystem (ext2, ext3, etc.), you can set these extended attributes with the chattr (change attribute) command and list them with lsattr. </p>
<p class="calibre1">As with chmod, attributes may be added (+) or removed (-) relatively, or set absolutely (=). For example, to keep a file compressed and nondumpable, run:</p>
<p class="calibre1">→ <b class="calibre3">chattr +cd myfile</b></p>
<p class="calibre1">Attribute Meaning</p>
<p class="calibre1">a</p>
<p class="calibre1">Append-only: appends are permitted to this file, but it cannot otherwise be edited. Root only. </p>
<p class="calibre1">A</p>
<p class="calibre1">Accesses not timestamped: accesses to this file don’t update its access timestamp (atime). </p>
<p class="calibre1">c</p>
<p class="calibre1">Compressed: data is transparently compressed on writes and</p>
<p class="calibre1">uncompressed on reads. </p>
<p class="calibre1">d</p>
<p class="calibre1">Don’t dump: tell the dump program to ignore this file when making</p>
<p class="calibre1"><a href="#calibre_link-20">backups (see “Backups and Remote Storage” on page 134</a>). </p>
<p class="calibre1">i</p>
<p class="calibre1">Immutable: file cannot be changed or deleted (root only). </p>
<p class="calibre1">j</p>
<p class="calibre1">Journaled data (ext3 filesystems only). </p>
<p class="calibre1">s</p>
<p class="calibre1">Secure deletion: if deleted, this file’s data is overwritten with zeros. </p>
<p class="calibre1">S</p>
<p class="calibre1">Synchronous update: changes are written to disk immediately. </p>
<p class="calibre1"><b class="calibre3">80  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-12"></a>Attribute Meaning</p>
<p class="calibre1">u</p>
<p class="calibre1">Undeletable: file cannot be deleted. </p>
<p class="calibre1">There are a few other attributes too, some of them obscure or experimental. See the manpage for details. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-R Recursively process directories. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">lsattr</b></p>
<p class="calibre1">lsattr [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">If you set extended attributes with chattr, you can view them with lsattr (list attributes). The output uses the same letters as chattr; for example, this file is immutable and undeletable:</p>
<p class="calibre1">→ <b class="calibre3">lsattr myfile</b></p>
<p class="calibre1">-u--i--- myfile</p>
<p class="calibre1">With no files specified, lsattr prints the attributes of all files in the current directory. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-R Recursively process directories. </p>
<p class="calibre1">-a List all files, including those whose names begin with a dot. </p>
<p class="calibre1">-d If listing a directory, do not list its contents, just the directory itself. </p>
<p class="calibre1"><b class="calibre3">File Location</b></p>
<p class="calibre1">find</p>
<p class="calibre1">Locate files in a directory hierarchy. </p>
<p class="calibre1">xargs</p>
<p class="calibre1">Process a list of located files (and much more). </p>
<p class="calibre1">locate</p>
<p class="calibre1">Create an index of files, and search the index for string. </p>
<p class="calibre1">which</p>
<p class="calibre1">Locate executables in your search path (command). </p>
<p class="calibre1"><b class="calibre3">File Location  |  81</b></p>
<p class="calibre1"><a id="calibre_link-68"></a>type</p>
<p class="calibre1">Locate executables in your search path (bash built-in). </p>
<p class="calibre1">whereis Locate executables, documentation, and source files. </p>
<p class="calibre1">Linux systems can contain hundreds of thousands of files</p>
<p class="calibre1">easily. How can you find a particular file when you need to? </p>
<p class="calibre1">The first step is to organize your files logically into directories in some thoughtful manner, but there are several other ways to find files, depending on what you’re looking for. </p>
<p class="calibre1">For finding any file, find is a brute-force program that slogs file by file through a directory hierarchy to locate a target. locate is much faster, searching through a prebuilt index that you generate as needed. (Some distros generate the index nightly by</p>
<p class="calibre1">default.)</p>
<p class="calibre1">For finding programs, the which and type commands check all</p>
<p class="calibre1">directories in your shell search path. type is built into the bash shell (and therefore available only when you’re running bash), while which is a program (normally  <i class="calibre4">/usr/bin/which</i>); type is faster and can detect shell aliases. <a href="#calibre_link-68">11 In con</a>trast, whereis examines a known set of directories, rather than your search path. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">find</b></p>
<p class="calibre1">find [ <i class="calibre4">directories</i>] [ <i class="calibre4">expression</i>]</p>
<p class="calibre1">The find command searches one or more directories (and their subdirectories recursively) for files matching certain criteria. It is very powerful, with over 50 options, and unfortunately, a rather unusual syntax. Here are some simple examples that</p>
<p class="calibre1">search the entire filesystem from the current directory (indicated by a dot):</p>
<p class="calibre1">Find a particular file named  <i class="calibre4">myfile</i>:</p>
<p class="calibre1">11 The tcsh shell performs some trickery to make which detect aliases. </p>
<p class="calibre1"><b class="calibre3">82  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-202"></a>→ <b class="calibre3">find . -type f -name myfile -print</b></p>
<p class="calibre1">./myfile</p>
<p class="calibre1">Print filenames beginning with “myfile” (notice how the wildcard is escaped so the shell ignores it):</p>
<p class="calibre1">→ <b class="calibre3">find . -type f -name myfile\* -print</b></p>
<p class="calibre1">./myfile.zip</p>
<p class="calibre1">./myfile3</p>
<p class="calibre1">./myfile</p>
<p class="calibre1">./myfile2</p>
<p class="calibre1">Print all directory names:</p>
<p class="calibre1">→ <b class="calibre3">find . -type d -print</b></p>
<p class="calibre1">. </p>
<p class="calibre1">./jpegexample</p>
<p class="calibre1">./dir2</p>
<p class="calibre1">./mydir</p>
<p class="calibre1">./mydir/dir</p>
<p class="calibre1">./dir1</p>
<p class="calibre1">./dir3</p>
<p class="calibre1">./d</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-name  <i class="calibre4">pattern</i></p>
<p class="calibre1">The name (-name), pathname (-path), or symbolic link</p>
<p class="calibre1">-path  <i class="calibre4">pattern</i></p>
<p class="calibre1">target (-lname) of the desired file must match this shell</p>
<p class="calibre1">-lname  <i class="calibre4">pattern</i></p>
<p class="calibre1">pattern, which may include shell wildcards *, ?, and []. </p>
<p class="calibre1">(You must escape the wildcards, however, so they are</p>
<p class="calibre1">ignored by the shell and passed literally to find.) Paths</p>
<p class="calibre1">are relative to the directory tree being searched. </p>
<p class="calibre1">-iname  <i class="calibre4">pattern</i></p>
<p class="calibre1">The -iname, -ipath, and -ilname options are the</p>
<p class="calibre1">-ipath  <i class="calibre4">pattern</i></p>
<p class="calibre1">same as -name, -path, and -lname, respectively, but</p>
<p class="calibre1">-ilname  <i class="calibre4">pattern </i> are case-insensitive. </p>
<p class="calibre1">-regex  <i class="calibre4">regexp</i></p>
<p class="calibre1">The path (relative to the directory tree being searched)</p>
<p class="calibre1">must match the given regular expression. </p>
<p class="calibre1">-type  <i class="calibre4">t</i></p>
<p class="calibre1">Locate only files of type  <i class="calibre4">t</i>. This includes plain files (f), directories (d), symbolic links (l), block devices (b), </p>
<p class="calibre1">character devices (c), named pipes (p), and sockets (s). </p>
<p class="calibre1"><b class="calibre3">File Location  |  83</b></p>
<p class="calibre1"><a id="calibre_link-239"></a>-atime  <i class="calibre4">N</i></p>
<p class="calibre1">File was last accessed (-atime), last modified</p>
<p class="calibre1">-ctime  <i class="calibre4">N</i></p>
<p class="calibre1">(-mtime), or had a status change (-ctime) exactly  <i class="calibre4">N</i></p>
<p class="calibre1">-mtime  <i class="calibre4">N</i></p>
<p class="calibre1">*24 hours ago. Use + <i class="calibre4">N </i> for “greater than  <i class="calibre4">N</i>,” or - <i class="calibre4">N </i> for</p>
<p class="calibre1">“less than  <i class="calibre4">N</i>.” </p>
<p class="calibre1">-amin  <i class="calibre4">N</i></p>
<p class="calibre1">File was last accessed (-amin), last modified (-mmin), </p>
<p class="calibre1">-cmin  <i class="calibre4">N</i></p>
<p class="calibre1">or had a status change (-cmin) exactly  <i class="calibre4">N </i> minutes ago. </p>
<p class="calibre1">-mmin  <i class="calibre4">N</i></p>
<p class="calibre1">Use + <i class="calibre4">N </i> for “greater than  <i class="calibre4">N</i>,”or - <i class="calibre4">N </i> for “less than  <i class="calibre4">N</i>.” </p>
<p class="calibre1">-anewer</p>
<p class="calibre1">File was accessed (-anewer), modified (-newer), or</p>
<p class="calibre1"> <i class="calibre4">other_file</i></p>
<p class="calibre1">had a status change (-cnewer) more recently than</p>
<p class="calibre1">-cnewer</p>
<p class="calibre1"> <i class="calibre4">other_file</i>. </p>
<p class="calibre1"> <i class="calibre4">other_file</i></p>
<p class="calibre1">-newer</p>
<p class="calibre1"> <i class="calibre4">other_file</i></p>
<p class="calibre1">-maxdepth  <i class="calibre4">N</i></p>
<p class="calibre1">Consider files at least (-mindepth) or at most</p>
<p class="calibre1">-mindepth  <i class="calibre4">N</i></p>
<p class="calibre1">(-maxdepth)  <i class="calibre4">N </i> levels deep in the directory tree being searched. </p>
<p class="calibre1">-follow</p>
<p class="calibre1">Dereference symbolic links. </p>
<p class="calibre1">-depth</p>
<p class="calibre1">Proceed using depth-first search: completely search a</p>
<p class="calibre1">directory’s contents (recursively) before operating on the</p>
<p class="calibre1">directory itself. </p>
<p class="calibre1">-xdev</p>
<p class="calibre1">Limit the search to a single filesystem (i.e., don’t cross</p>
<p class="calibre1">device boundaries). </p>
<p class="calibre1">-size  <i class="calibre4">N</i> [bckw]</p>
<p class="calibre1">Consider files of size  <i class="calibre4">N</i>, which can be given in blocks (b), one-byte characters (c), kilobytes (k), or two-byte words</p>
<p class="calibre1">(w). Use + <i class="calibre4">N </i> for “greater than  <i class="calibre4">N</i>,” or - <i class="calibre4">N </i> for “less than <i class="calibre4">N</i>.” </p>
<p class="calibre1">-empty</p>
<p class="calibre1">File has zero size, and is a regular file or directory. </p>
<p class="calibre1">-user  <i class="calibre4">name</i></p>
<p class="calibre1">File is owned by the given user. </p>
<p class="calibre1">-group  <i class="calibre4">name</i></p>
<p class="calibre1">File is owned by the given group. </p>
<p class="calibre1">-perm  <i class="calibre4">mode</i></p>
<p class="calibre1">File has permissions equal to mode. Use -  <i class="calibre4">mode</i> to check that  <i class="calibre4">all</i> of the given bits are set, or + <i class="calibre4">mode</i> to check that <i class="calibre4">any</i> of the given bits are set. </p>
<p class="calibre1"><b class="calibre3">84  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-205"></a>You can group and negate parts of the expression with the following operators:</p>
<p class="calibre1"> <i class="calibre4">expression1 -a expression2</i></p>
<p class="calibre1">And. (This is the default if two expressions appear side by</p>
<p class="calibre1">side, so the “-a” is optional.)</p>
<p class="calibre1"> <i class="calibre4">expression1 -o expression2</i></p>
<p class="calibre1">Or. </p>
<p class="calibre1"> <i class="calibre4">! expression</i></p>
<p class="calibre1"> <i class="calibre4">-not expression</i></p>
<p class="calibre1">Negate the expression. </p>
<p class="calibre1"> <i class="calibre4">( expression )</i></p>
<p class="calibre1">Precedence markers, just like in algebra class. Evaluate</p>
<p class="calibre1">what’s in parentheses first. You may need to escape these</p>
<p class="calibre1">from the shell with “\”. </p>
<p class="calibre1"> <i class="calibre4">expression1 , expression2</i></p>
<p class="calibre1">Same as the comma operator in the C programming lan‐</p>
<p class="calibre1">guage. Evaluate both expressions and return the value of</p>
<p class="calibre1">the second one. </p>
<p class="calibre1">Once you’ve specified the search criteria, you can tell find to perform these actions on files that match the criteria. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-print</p>
<p class="calibre1">Simply print the path to the file, relative to the search</p>
<p class="calibre1">directory. </p>
<p class="calibre1">-printf  <i class="calibre4">string </i> Print the given string, which may have substitutions applied to it in the manner of the C library function, </p>
<p class="calibre1">printf(). See the manpage for the full list of outputs. </p>
<p class="calibre1">-print0</p>
<p class="calibre1">Like -print, but instead of separating each line of output</p>
<p class="calibre1">with a newline character, use a null (ASCII 0) character. Use when piping the output of find to another program, and</p>
<p class="calibre1">your list of filenames may contain space characters. Of</p>
<p class="calibre1">course, the receiving program must be capable of reading</p>
<p class="calibre1">and parsing these null-separated lines (e.g., xargs -0). </p>
<p class="calibre1"><b class="calibre3">File Location  |  85</b></p>
<p class="calibre1"><a id="calibre_link-222"></a>-exec  <i class="calibre4">cmd</i> ; </p>
<p class="calibre1">Invoke the given shell command,  <i class="calibre4">cmd</i>. Make sure to escape any shell metacharacters, including the required, final</p>
<p class="calibre1">semicolon, so they are not immediately evaluated on the</p>
<p class="calibre1">command line. Also, the symbol “{}” (make sure to quote or</p>
<p class="calibre1">escape it) represents the path to the file found. A full</p>
<p class="calibre1">example is:</p>
<p class="calibre1">find . -exec ls '{}' \; </p>
<p class="calibre1">-ok  <i class="calibre4">cmd</i> ; </p>
<p class="calibre1">Same as -exec, but also prompts the user before invoking</p>
<p class="calibre1">each command. </p>
<p class="calibre1">-ls</p>
<p class="calibre1">Perform the command ls -dils on the file. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">xargs</b></p>
<p class="calibre1">xargs [ <i class="calibre4">options</i>] [ <i class="calibre4">command</i>]</p>
<p class="calibre1">xargs is one of the oddest yet most powerful commands avail‐</p>
<p class="calibre1">able to the shell. It reads lines of text from standard input, turns them into commands, and executes them. This might not</p>
<p class="calibre1">sound exciting, but xargs has some unique uses, particularly for processing a list of files you’ve located. Suppose you made a file named  <i class="calibre4">important</i> that lists important files, one per line:</p>
<p class="calibre1">→ <b class="calibre3">cat important</b></p>
<p class="calibre1">/home/jsmith/mail/love-letters</p>
<p class="calibre1">/usr/local/lib/critical_stuff</p>
<p class="calibre1">/etc/passwd</p>
<p class="calibre1">... </p>
<p class="calibre1">With xargs, you can process each of these files easily with other Linux commands. For instance, the following command runs</p>
<p class="calibre1">the ls -l command on all the listed files:</p>
<p class="calibre1">→ <b class="calibre3">cat important | xargs ls -l</b></p>
<p class="calibre1">Similarly, you can view the files with less:</p>
<p class="calibre1">→ <b class="calibre3">cat important | xargs less</b></p>
<p class="calibre1"><b class="calibre3">86  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-171"></a>and even delete them with rm:</p>
<p class="calibre1">→ <b class="calibre3">cat important | xargs rm -f</b>     <i class="calibre4">Careful! Destructive! </i></p>
<p class="calibre1">Each of these pipelines reads the list of files from  <i class="calibre4">important</i> and produces and runs new Linux commands based on the list. The</p>
<p class="calibre1">power begins when the input list doesn’t come from a file, but from another command writing to standard output. In particular, the find command, which prints a list of files on standard output, makes a great partner for xargs. For example, to search your current directory hierarchy for files containing the word</p>
<p class="calibre1">“tomato”:</p>
<p class="calibre1">→ <b class="calibre3">find . -type f -print | xargs grep -l tomato</b></p>
<p class="calibre1">./findfile1</p>
<p class="calibre1">./findfile2</p>
<p class="calibre1">→ <b class="calibre3">cat findfile1</b></p>
<p class="calibre1">This file contains the word tomato. </p>
<p class="calibre1">This power comes with one warning: if any of the files located by find contains whitespace in its name, this will confuse grep. </p>
<p class="calibre1">If one file is named (say)  <i class="calibre4">my stuff</i>, then the grep command constructed is:</p>
<p class="calibre1">grep -l tomato my stuff</p>
<p class="calibre1">which tells grep to process  <i class="calibre4">two</i> files named  <i class="calibre4">my</i> and  <i class="calibre4">stuff</i>. Oops! </p>
<p class="calibre1">Now imagine if the program had been rm instead of grep. You’d be telling rm to delete the wrong files! To avoid this problem, always use find -print0 instead of -print, which separates</p>
<p class="calibre1">lines with ASCII null characters instead of newline characters, combined with xargs -0, which expects ASCII nulls:</p>
<p class="calibre1">→ <b class="calibre3">find . -type f -print0 | xargs -0 grep -l tomato</b></p>
<p class="calibre1">We have barely scratched the surface of the xargs command, so continue experimenting! (With harmless commands like grep</p>
<p class="calibre1">and ls at first!)</p>
<p class="calibre1"><b class="calibre3">File Location  |  87</b></p>
<p class="calibre1"><a id="calibre_link-125"></a><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n  <i class="calibre4">k </i> Feed  <i class="calibre4">k</i> lines of input to each executed command. The common -n1</p>
<p class="calibre1">guarantees that each execution will process only one line of input. </p>
<p class="calibre1">Otherwise, xargs may pass multiple lines of input to a single command. </p>
<p class="calibre1">-0</p>
<p class="calibre1">Set the end-of-line character for input to be ASCII zero rather than whitespace, and treat all characters literally. Use this when the input is coming from find -print0. </p>
<p class="calibre1"><b class="calibre3">xargs Versus Backquotes</b></p>
<p class="calibre1"><a href="#calibre_link-49">If you remember “Quoting” on page 36, you migh</a>t realize that some xargs tricks can be accomplished with backquotes:</p>
<p class="calibre1">→ <b class="calibre3">cat file_list | xargs rm -f</b>    <i class="calibre4">With xargs</i></p>
<p class="calibre1">→ <b class="calibre3">rm -f `cat file_list`</b>           <i class="calibre4">With backquotes</i></p>
<p class="calibre1">→ <b class="calibre3">rm -f $(cat file_list)</b>          <i class="calibre4">With $()</i></p>
<p class="calibre1">While these commands do similar things, the last two can fail if the command line gets so long, after the output of cat is expanded, that it exceeds the maximum length of a shell command</p>
<p class="calibre1">line. xargs writes to standard output, rather than appending to the command line, so it’s safer and more suitable for large or risky operations. </p>
<p class="calibre1"><b class="calibre3">88  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-69"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">locate</b></p>
<p class="calibre1">locate [ <i class="calibre4">options</i>]</p>
<p class="calibre1">The locate command, with its partner updatedb, creates an</p>
<p class="calibre1">index (database) of file locations that is quickly searchable. <a href="#calibre_link-69">12</a> If you plan to search for many files over time in a directory hierarchy that doesn’t change much, locate is a good choice. For locating a single file or performing more complex processing of found files, use find. </p>
<p class="calibre1">Some distros automatically index the entire filesystem on a regular basis (e.g., once a day), so you can simply run locate and it will work. But if you ever need to create an index yourself of a directory and all its subdirectories (say, storing it in  <i class="calibre4">/tmp/</i></p>
<p class="calibre1"> <i class="calibre4">myindex</i>), run:</p>
<p class="calibre1">→ <b class="calibre3">updatedb -l0 -U  <i class="calibre4">directory</i></b><b class="calibre3"> -o /tmp/myindex</b> (Note that -l0 is a lowercase L followed by a zero, not the number 10.) Then to search for a string in the index:</p>
<p class="calibre1">→ <b class="calibre3">locate -d /tmp/myindex  <i class="calibre4">string</i></b></p>
<p class="calibre1">locate has an interesting, optional security feature. You can create an index that, when searched, will display only files that the user is permitted to see. So if the superuser created an index of a protected directory, a nonsuperuser could search it but not see the protected files. This is done by omitting the -l0 option to updatedb and running it as root:</p>
<p class="calibre1">→ <b class="calibre3">sudo updatedb -U  <i class="calibre4">directory</i></b><b class="calibre3"> -o /tmp/myindex</b> 12 Our locate command comes from a package called “mlocate.” Some systems have an older package called “slocate” with slightly different usage. If you have slocate, simply type slocate instead of updatedb in our examples. </p>
<p class="calibre1"><b class="calibre3">File Location  |  89</b></p>
<p class="calibre1"><a id="calibre_link-203"></a><b class="calibre3">Indexing options for updatedb</b></p>
<p class="calibre1">-u</p>
<p class="calibre1">Create index from the root directory downward. </p>
<p class="calibre1">-U  <i class="calibre4">directory</i></p>
<p class="calibre1">Create index from  <i class="calibre4">directory</i> downward. </p>
<p class="calibre1">-l (0|1)</p>
<p class="calibre1">Turn security off (0) or on (1). The default is 1. </p>
<p class="calibre1">-e  <i class="calibre4">directories </i> Exclude one or more directories from the index. Separate their paths by commas. </p>
<p class="calibre1">-o  <i class="calibre4">outfile</i></p>
<p class="calibre1">Write the index to file  <i class="calibre4">outfile</i>. </p>
<p class="calibre1"><b class="calibre3">Search options for locate</b></p>
<p class="calibre1">-d  <i class="calibre4">index</i></p>
<p class="calibre1">Indicate which index to use (in our example,  <i class="calibre4">/tmp/myindex</i>). </p>
<p class="calibre1">-i</p>
<p class="calibre1">Case-insensitive search. </p>
<p class="calibre1">-r  <i class="calibre4">regexp </i> Search for files matching the given regular expression. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">which</b></p>
<p class="calibre1">which  <i class="calibre4">file</i></p>
<p class="calibre1">The which command locates an executable file in your shell’s search path. If you’ve been invoking a program by typing its name:</p>
<p class="calibre1">→ <b class="calibre3">who</b></p>
<p class="calibre1">the which command tells you where this command is located:</p>
<p class="calibre1">→ <b class="calibre3">which who</b></p>
<p class="calibre1">/usr/bin/who</p>
<p class="calibre1">You can even find the which program itself:</p>
<p class="calibre1">→ <b class="calibre3">which which</b></p>
<p class="calibre1">/usr/bin/which</p>
<p class="calibre1">If several programs in your search path have the same name</p>
<p class="calibre1">(e.g.,  <i class="calibre4">/usr/bin/who</i> and  <i class="calibre4">/usr/local/bin/who</i>), which reports only the first. </p>
<p class="calibre1"><b class="calibre3">90  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-130"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">type</b></p>
<p class="calibre1">type [ <i class="calibre4">options</i>]  <i class="calibre4">commands</i></p>
<p class="calibre1">The type command, like which, locates an executable file in</p>
<p class="calibre1">your shell’s search path:</p>
<p class="calibre1">→ <b class="calibre3">type grep who</b></p>
<p class="calibre1">grep is /bin/grep</p>
<p class="calibre1">who is /usr/bin/who</p>
<p class="calibre1">However, type is built into the bash shell, whereas which is a program on disk:</p>
<p class="calibre1">→ <b class="calibre3">type which type rm if</b></p>
<p class="calibre1">which is /usr/bin/which</p>
<p class="calibre1">type is a shell builtin</p>
<p class="calibre1">rm is aliased tò/bin/rm -i' </p>
<p class="calibre1">if is a shell keyword</p>
<p class="calibre1">As a built-in shell command, type is faster than which; how‐</p>
<p class="calibre1">ever, it’s available only in certain shells such as bash. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">whereis</b></p>
<p class="calibre1">whereis [ <i class="calibre4">options</i>]  <i class="calibre4">files</i></p>
<p class="calibre1">The whereis command attempts to locate the given files by</p>
<p class="calibre1">searching a hardcoded list of directories. It can find executables, documentation, and source code. whereis is somewhat</p>
<p class="calibre1">quirky because its list of directories might not include the ones you need. </p>
<p class="calibre1">→ <b class="calibre3">whereis vim</b></p>
<p class="calibre1">vim: /usr/bin/vim /etc/vim /usr/share/vim  <i class="calibre4">... </i></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-b</p>
<p class="calibre1">List only executables (-b), manpages (-m), or source code</p>
<p class="calibre1">-m</p>
<p class="calibre1">files (-s). </p>
<p class="calibre1">-s</p>
<p class="calibre1"><b class="calibre3">File Location  |  91</b></p>
<p class="calibre1"><a id="calibre_link-13"></a>-B  <i class="calibre4">dirs... </i> -f Search for executables (-B), manpages (-M), or source code</p>
<p class="calibre1">-M  <i class="calibre4">dirs... </i> -f files (-S) only in the given directories. You must follow the</p>
<p class="calibre1">-S  <i class="calibre4">dirs... </i> -f directory list with the -f option before listing the files you seek. </p>
<p class="calibre1"><b class="calibre3">File Text Manipulation</b></p>
<p class="calibre1">grep</p>
<p class="calibre1">Find lines in a file that match a regular expression. </p>
<p class="calibre1">cut</p>
<p class="calibre1">Extract columns from a file. </p>
<p class="calibre1">paste</p>
<p class="calibre1">Append columns. </p>
<p class="calibre1">tr</p>
<p class="calibre1">Translate characters into other characters. </p>
<p class="calibre1">expand, </p>
<p class="calibre1">Convert between tabs and spaces. </p>
<p class="calibre1">unexpand</p>
<p class="calibre1">sort</p>
<p class="calibre1">Sort lines of text by various criteria. </p>
<p class="calibre1">uniq</p>
<p class="calibre1">Locate identical lines in a file. </p>
<p class="calibre1">tee</p>
<p class="calibre1">Copy a file  <i class="calibre4">and</i> print it on standard output, simultaneously. </p>
<p class="calibre1">Perhaps Linux’s greatest strength is text manipulation: massaging a text file (or standard input) into a desired form by applying transformations, often in a pipeline. Any program that</p>
<p class="calibre1">reads standard input and writes standard output falls into this category, but here we’ll present some of the most important</p>
<p class="calibre1">tools. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">grep</b></p>
<p class="calibre1">grep [ <i class="calibre4">options</i>]  <i class="calibre4">pattern</i> [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The grep command is one of the most consistently useful and</p>
<p class="calibre1">powerful in the Linux arsenal. Its premise is simple: given one or more files, print all lines in those files that match a particular regular expression pattern. For example, if a file  <i class="calibre4">randomlines</i> contains these lines:</p>
<p class="calibre1"><b class="calibre3">92  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-240"></a>The quick brown fox jumped over the lazy dogs! </p>
<p class="calibre1">My very eager mother just served us nine pancakes. </p>
<p class="calibre1">Film at eleven. </p>
<p class="calibre1">and we search for all lines containing “pancake”, we get:</p>
<p class="calibre1">→ <b class="calibre3">grep pancake randomlines</b></p>
<p class="calibre1">My very eager mother just served us nine pancakes. </p>
<p class="calibre1">Now we use a regular expression to match lines ending in an</p>
<p class="calibre1">exclamation point:</p>
<p class="calibre1">→ <b class="calibre3">grep '\!$' randomlines</b></p>
<p class="calibre1">The quick brown fox jumped over the lazy dogs! </p>
<p class="calibre1">grep can use two different types of regular expressions, which it calls  <i class="calibre4">basic</i> and  <i class="calibre4">extended</i>. They are equally powerful, just different, and you may prefer one over the other based on your experience with other grep implementations. The basic syntax is in</p>
<p class="calibre1"><a href="#calibre_link-70">Table 2</a>. Regular expressions are well worth your time to learn. </p>
<p class="calibre1">Other powerful Linux programs use them as well, such as sed</p>
<p class="calibre1">and perl. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-v</p>
<p class="calibre1">Print only lines that  <i class="calibre4">do not</i> match the regular expression. </p>
<p class="calibre1">-l</p>
<p class="calibre1">Print only the  <i class="calibre4">names</i> of files that contain matching lines, not the lines themselves. </p>
<p class="calibre1">-L</p>
<p class="calibre1">Print only the names of files that  <i class="calibre4">do not</i> contain matching lines. </p>
<p class="calibre1">-c</p>
<p class="calibre1">Print only a count of matching lines. </p>
<p class="calibre1">-n</p>
<p class="calibre1">In front of each line of matching output, print its original line number. </p>
<p class="calibre1">-b</p>
<p class="calibre1">In front of each line of matching output, print the byte</p>
<p class="calibre1">offset of the line in the input file. </p>
<p class="calibre1">-i</p>
<p class="calibre1">Case-insensitive match. </p>
<p class="calibre1">-w</p>
<p class="calibre1">Match only complete words (i.e., words that match the</p>
<p class="calibre1">entire regular expression). </p>
<p class="calibre1"><b class="calibre3">File Text Manipulation  |  93</b></p>
<p class="calibre1"><a id="calibre_link-70"></a>-x</p>
<p class="calibre1">Match only complete lines (i.e., lines that match the entire regular expression). Overrides -w. </p>
<p class="calibre1">-A  <i class="calibre4">N</i></p>
<p class="calibre1">After each matching line, print the next  <i class="calibre4">N</i> lines from its file. </p>
<p class="calibre1">-B  <i class="calibre4">N</i></p>
<p class="calibre1">Before each matching line, print the previous  <i class="calibre4">N</i> lines from its file. </p>
<p class="calibre1">-C  <i class="calibre4">N</i></p>
<p class="calibre1">Same as -A  <i class="calibre4">N</i> -B  <i class="calibre4">N</i>: print  <i class="calibre4">N</i> lines (from the original file) above  <i class="calibre4">and</i> below each matching line. </p>
<p class="calibre1">--color=always Highlight the matched text in color, for better readability. </p>
<p class="calibre1">-r</p>
<p class="calibre1">Recursively search all files in a directory and its</p>
<p class="calibre1">subdirectories. </p>
<p class="calibre1">-E</p>
<p class="calibre1">Use extended regular expressions. See egrep. </p>
<p class="calibre1">-F</p>
<p class="calibre1">Use lists of fixed strings instead of regular expressions. See fgrep. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">egrep</b></p>
<p class="calibre1">egrep [ <i class="calibre4">options</i>]  <i class="calibre4">pattern</i> [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The egrep command is just like grep, but uses a different</p>
<p class="calibre1">(“extended”) language for regular expressions. It’s the same as grep -E. </p>
<p class="calibre1"> <i class="calibre4">Table 2. Regular expressions for grep and egrep</i></p>
<p class="calibre1">Regular expression</p>
<p class="calibre1">Plain</p>
<p class="calibre1">Extended Meaning</p>
<p class="calibre1">. </p>
<p class="calibre1">Any single character. </p>
<p class="calibre1">[...]</p>
<p class="calibre1">Match any single character in this list. </p>
<p class="calibre1">[^...]</p>
<p class="calibre1">Match any single character NOT in this list. </p>
<p class="calibre1">(...)</p>
<p class="calibre1">Grouping. </p>
<p class="calibre1">\|</p>
<p class="calibre1">|</p>
<p class="calibre1">Or. </p>
<p class="calibre1"><b class="calibre3">94  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-104"></a>Regular expression</p>
<p class="calibre1">Plain</p>
<p class="calibre1">Extended Meaning</p>
<p class="calibre1">^</p>
<p class="calibre1">Beginning of a line. </p>
<p class="calibre1">$</p>
<p class="calibre1">End of a line. </p>
<p class="calibre1">\&lt; </p>
<p class="calibre1">Beginning of a word. </p>
<p class="calibre1">\&gt; </p>
<p class="calibre1">End of a word. </p>
<p class="calibre1">[:alnum:]</p>
<p class="calibre1">Any alphanumeric character. </p>
<p class="calibre1">[:alpha:]</p>
<p class="calibre1">Any alphabetic character. </p>
<p class="calibre1">[:cntrl:]</p>
<p class="calibre1">Any control character. </p>
<p class="calibre1">[:digit:]</p>
<p class="calibre1">Any digit. </p>
<p class="calibre1">[:graph:]</p>
<p class="calibre1">Any graphic character. </p>
<p class="calibre1">[:lower:]</p>
<p class="calibre1">Any lowercase letter. </p>
<p class="calibre1">[:print:]</p>
<p class="calibre1">Any printable character. </p>
<p class="calibre1">[:punct:]</p>
<p class="calibre1">Any punctuation mark. </p>
<p class="calibre1">[:space:]</p>
<p class="calibre1">Any whitespace character. </p>
<p class="calibre1">[:upper:]</p>
<p class="calibre1">Any uppercase letter. </p>
<p class="calibre1">[:xdigit:]</p>
<p class="calibre1">Any hexadecimal digit. </p>
<p class="calibre1">*</p>
<p class="calibre1">Zero or more repetitions of a regular expression. </p>
<p class="calibre1">\+</p>
<p class="calibre1">+</p>
<p class="calibre1">One or more repetitions of a regular expression. </p>
<p class="calibre1">\? </p>
<p class="calibre1">? </p>
<p class="calibre1">Zero or one occurrence of a regular expression. </p>
<p class="calibre1">\{ <i class="calibre4">n</i> \}</p>
<p class="calibre1">{ <i class="calibre4">n</i> }</p>
<p class="calibre1">Exactly  <i class="calibre4">n</i> repetitions of a regular expression. </p>
<p class="calibre1">\{  <i class="calibre4">n</i> ,\}</p>
<p class="calibre1">{ <i class="calibre4">n</i> ,}</p>
<p class="calibre1"> <i class="calibre4">n</i> or more repetitions of a regular expression. </p>
<p class="calibre1">\{  <i class="calibre4">n</i> ,  <i class="calibre4">m</i></p>
<p class="calibre1">{  <i class="calibre4">n</i> ,  <i class="calibre4">m</i> } Between  <i class="calibre4">n</i> and  <i class="calibre4">m</i> (inclusive) repetitions of a regular</p>
<p class="calibre1">\}</p>
<p class="calibre1">expression,  <i class="calibre4">n</i> &lt;  <i class="calibre4">m</i>. </p>
<p class="calibre1"><b class="calibre3">File Text Manipulation  |  95</b></p>
<p class="calibre1"><a id="calibre_link-118"></a>Regular expression</p>
<p class="calibre1">Plain</p>
<p class="calibre1">Extended Meaning</p>
<p class="calibre1">\ <i class="calibre4">c</i></p>
<p class="calibre1">The literal character  <i class="calibre4">c</i>, even if  <i class="calibre4">c</i> is a special regular expression character. For example, use \* to match an</p>
<p class="calibre1">asterisk or \\ to match a backslash. Alternatively, put</p>
<p class="calibre1">the literal character in square brackets, like [*] or [\]. </p>
<p class="calibre1"><b class="calibre3">grep and End-of-Line Characters</b></p>
<p class="calibre1">When you match the end of a line ($) with grep, text files created on Microsoft Windows or Mac OS X systems may produce</p>
<p class="calibre1">odd results. Each operating system has a different standard for ending a line. On Linux, each line in a text file ends with a newline character (ASCII 10). On Windows, text lines end with a carriage return (ASCII 13) followed by a newline character. </p>
<p class="calibre1">And on OS X, a text file might end its lines with newlines or carriage returns alone. If grep isn’t matching the ends of lines properly, check for non-Linux end-of-line characters with</p>
<p class="calibre1">cat -v, which displays carriage returns as ^M:</p>
<p class="calibre1">→ <b class="calibre3">cat -v dosfile.txt</b></p>
<p class="calibre1">Uh-oh! This file seems to end its lines with^M</p>
<p class="calibre1">carriage returns before the newlines.^M</p>
<p class="calibre1">To remove the carriage returns, use the tr -d command:</p>
<p class="calibre1">→ <b class="calibre3">tr -d '\r' &lt; dosfile.txt &gt; linuxfile.txt</b></p>
<p class="calibre1">→ <b class="calibre3">cat -v linuxfile.txt</b></p>
<p class="calibre1">Uh-oh! This file seems to end its lines with</p>
<p class="calibre1">carriage returns before the newlines. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">fgrep</b></p>
<p class="calibre1">fgrep [ <i class="calibre4">options</i>] [ <i class="calibre4">fixed_strings</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The fgrep command is just like grep, but instead of accepting a regular expression, it accepts a list of fixed strings, separated by <b class="calibre3">96  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-141"></a>newlines. It’s the same as grep -F. For example, if you have a dictionary file full of strings, one per line:</p>
<p class="calibre1">→ <b class="calibre3">cat my_dictionary_file</b></p>
<p class="calibre1">aardvark</p>
<p class="calibre1">aback</p>
<p class="calibre1">abandon</p>
<p class="calibre1">... </p>
<p class="calibre1">you can conveniently search for those strings in a set of input files:</p>
<p class="calibre1">→ <b class="calibre3">fgrep -f my_dictionary_file story</b></p>
<p class="calibre1">a little aardvark who went to</p>
<p class="calibre1">visit the abbot at the abbey. </p>
<p class="calibre1">Normally, you’ll use the lowercase -f option to make fgrep</p>
<p class="calibre1">read the fixed strings from a file. You can also read the fixed strings on the command line using quoting, but it’s a bit trick-ier. To search for the strings “one”, “two”, and “three” in a file, you’d type:</p>
<p class="calibre1">→ <b class="calibre3">fgrep 'one</b>        <i class="calibre4">Note we are typing newline characters</i> <b class="calibre3">two</b></p>
<p class="calibre1"><b class="calibre3">three' myfile</b></p>
<p class="calibre1">fgrep is convenient when searching for nonalphanumeric char‐</p>
<p class="calibre1">acters like * and { because they are treated literally, not as regular expression characters. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">cut</b></p>
<p class="calibre1">cut -(b|c|f) <i class="calibre4">range</i> [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The cut command extracts columns of text from files. A “col‐</p>
<p class="calibre1">umn” is defined by character offsets (e.g., the nineteenth character of each line):</p>
<p class="calibre1">→ <b class="calibre3">cut -c19 myfile</b></p>
<p class="calibre1"><b class="calibre3">File Text Manipulation  |  97</b></p>
<p class="calibre1"><a id="calibre_link-241"></a>or by byte offsets (which are different from characters if your language has multibyte characters):</p>
<p class="calibre1">→ <b class="calibre3">cut -b19 myfile</b></p>
<p class="calibre1">or by delimited fields (e.g., the fifth field in each line of a comma-delimited file,  <i class="calibre4">data.csv</i>):</p>
<p class="calibre1">→ <b class="calibre3">cat data.csv</b></p>
<p class="calibre1">one,two,three,four,five,six,seven</p>
<p class="calibre1">ONE,TWO,THREE,FOUR,FIVE,SIX,SEVEN</p>
<p class="calibre1">1,2,3,4,5,6,7</p>
<p class="calibre1">→ <b class="calibre3">cut -f5 -d, data.csv</b></p>
<p class="calibre1">five</p>
<p class="calibre1">FIVE</p>
<p class="calibre1">5</p>
<p class="calibre1">You aren’t limited to printing a single column: you can provide a range (3-16), a comma-separated sequence (3,4,5,6,8,16), </p>
<p class="calibre1">or both (3,4,8-16). For ranges, if you omit the first number (-16), a 1 is assumed (1-16); if you omit the last number (5-), the end of line is used. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-d  <i class="calibre4">C</i></p>
<p class="calibre1">Use character  <i class="calibre4">C</i> as the  <i class="calibre4">input</i> delimiter character between fields for the -f option. By default it’s a</p>
<p class="calibre1">tab character. </p>
<p class="calibre1">--output-delimiter= <i class="calibre4">C </i> Use character  <i class="calibre4">C</i> as the  <i class="calibre4">output</i> delimiter character between fields for -f. By default it’s a tab</p>
<p class="calibre1">character. </p>
<p class="calibre1">-s</p>
<p class="calibre1">Suppress (don’t print) lines that don’t contain the</p>
<p class="calibre1">delimiter character. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">paste</b></p>
<p class="calibre1">paste [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1"><b class="calibre3">98  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-198"></a>The paste command is the opposite of cut: it treats several files as vertical columns and combines them on standard output:</p>
<p class="calibre1">→ <b class="calibre3">cat letters</b></p>
<p class="calibre1">A</p>
<p class="calibre1">B</p>
<p class="calibre1">C</p>
<p class="calibre1">→ <b class="calibre3">cat numbers</b></p>
<p class="calibre1">1</p>
<p class="calibre1">2</p>
<p class="calibre1">3</p>
<p class="calibre1">4</p>
<p class="calibre1">5</p>
<p class="calibre1">→ <b class="calibre3">paste numbers letters</b></p>
<p class="calibre1">1  A</p>
<p class="calibre1">2  B</p>
<p class="calibre1">3  C</p>
<p class="calibre1">4</p>
<p class="calibre1">5</p>
<p class="calibre1">→ <b class="calibre3">paste letters numbers</b></p>
<p class="calibre1">A  1</p>
<p class="calibre1">B  2</p>
<p class="calibre1">C  3</p>
<p class="calibre1">4</p>
<p class="calibre1">5</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-d  <i class="calibre4">delimiters </i> Use the given  <i class="calibre4">delimiters</i> characters between columns; the default is a tab character. Provide a single character</p>
<p class="calibre1">(-d:) to be used always, or a list of characters (-dxyz) to</p>
<p class="calibre1">be applied in sequence on each line (the first delimiter is x, then y, then z, then x, then y, ...). </p>
<p class="calibre1">-s</p>
<p class="calibre1">Sideways: transpose the rows and columns of output:</p>
<p class="calibre1">→ <b class="calibre3">paste -s letters numbers</b></p>
<p class="calibre1">A   B   C</p>
<p class="calibre1">1   2   3   4   5</p>
<p class="calibre1"><b class="calibre3">File Text Manipulation  |  99</b></p>
<p class="calibre1"><a id="calibre_link-220"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">tr</b></p>
<p class="calibre1">tr [ <i class="calibre4">options</i>]  <i class="calibre4">charset1</i> [ <i class="calibre4">charset2</i>]</p>
<p class="calibre1">The tr command performs some simple, useful translations of</p>
<p class="calibre1">one set of characters into another. For example, to capitalize everything in a file:</p>
<p class="calibre1">→ <b class="calibre3">cat wonderfulfile</b></p>
<p class="calibre1">This is a very wonderful file. </p>
<p class="calibre1">→ <b class="calibre3">cat wonderfulfile | tr 'a-z' 'A-Z' </b></p>
<p class="calibre1">THIS IS A VERY WONDERFUL FILE. </p>
<p class="calibre1">or to change all vowels into asterisks:</p>
<p class="calibre1">→ <b class="calibre3">cat wonderfulfile | tr aeiouAEIOU '*' </b></p>
<p class="calibre1">Th*s *s * v*ry w*nd*rf*l f*l*. </p>
<p class="calibre1">or to delete all vowels:</p>
<p class="calibre1">→ <b class="calibre3">cat wonderfulfile | tr -d aeiouAEIOU</b></p>
<p class="calibre1">Ths s  vry wndrfl fl. </p>
<p class="calibre1">As a practical example, delete all carriage returns from a DOS</p>
<p class="calibre1">text file so it’s more compatible with Linux text utilities like grep:</p>
<p class="calibre1">→ <b class="calibre3">tr -d '\r' &lt; dosfile.txt &gt; linuxfile.txt</b></p>
<p class="calibre1">tr translates the first character in  <i class="calibre4">charset1</i> into the first character in  <i class="calibre4">charset2</i>, the second into the second, the third into the third, and so on. If the length of  <i class="calibre4">charset1</i> is  <i class="calibre4">N</i>, only the first  <i class="calibre4">N</i></p>
<p class="calibre1">characters in  <i class="calibre4">charset2</i> are used. (If  <i class="calibre4">charset1</i> is longer than <i class="calibre4">charset2</i>, see the -t option.)</p>
<p class="calibre1">Character sets can have the following forms:</p>
<p class="calibre1">Form</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">ABDG</p>
<p class="calibre1">The sequence of characters A, B, D, G. </p>
<p class="calibre1">A-Z</p>
<p class="calibre1">The range of characters from A to Z. </p>
<p class="calibre1">[x*y]</p>
<p class="calibre1"> <i class="calibre4">y</i> repetitions of the character  <i class="calibre4">x</i>. </p>
<p class="calibre1"><b class="calibre3">100  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-117"></a>Form</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">[:  <i class="calibre4">class</i> :] The same character classes ([:alnum:], [:digit:], etc.) accepted by grep. </p>
<p class="calibre1">tr also understands the escape characters “\a” (^G = alert by ringing bell), “\b” (^H = backspace), “\f” (^L = formfeed), “\n” </p>
<p class="calibre1">(^J = newline), “\r” (^M = return), “\t” (^I = tab), and “\v” (^K =</p>
<p class="calibre1">vertical tab) accepted by printf (see <a href="#calibre_link-35">“Screen Output” on page</a></p>
<p class="calibre1"><a href="#calibre_link-35">198), as well as the nota</a>tion \ <i class="calibre4">nnn</i> to mean the character with octal value  <i class="calibre4">nnn</i>. </p>
<p class="calibre1">tr is great for quick and simple translations, but for more powerful jobs consider sed, awk, or perl. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-d Delete the characters in  <i class="calibre4">charset1</i> from the input. </p>
<p class="calibre1">-s Eliminate adjacent duplicates (found in  <i class="calibre4">charset1</i>) from the input. For example, tr -s aeiouAEIOU would squeeze adjacent, duplicate vowels to be single vowels (reeeeeeally would become really). </p>
<p class="calibre1">-c Complement: operate on all characters  <i class="calibre4">not</i> found in  <i class="calibre4">charset1</i>. </p>
<p class="calibre1">-t If  <i class="calibre4">charset1</i> is longer than  <i class="calibre4">charset2</i>, make them the same length by truncating  <i class="calibre4">charset1</i>. If -t is not present, the last character of  <i class="calibre4">charset2</i></p>
<p class="calibre1">is (invisibly) repeated until  <i class="calibre4">charset2</i> is the same length as  <i class="calibre4">charset1</i>. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">expand</b></p>
<p class="calibre1">expand [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">unexpand [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The expand command converts tab characters to an equivalent-</p>
<p class="calibre1">looking number of space characters, and unexpand does the</p>
<p class="calibre1">opposite. By default, a tab stop occurs every eight spaces, but you can change this with options. Both programs write to standard output by default. </p>
<p class="calibre1"><b class="calibre3">File Text Manipulation  |  101</b></p>
<p class="calibre1"><a id="calibre_link-95"></a>→ <b class="calibre3">expand tabfile &gt; spacefile</b></p>
<p class="calibre1">→ <b class="calibre3">expand spacefile &gt; tabfile</b></p>
<p class="calibre1">To check whether a file contains spaces or tabs, use the cat -T</p>
<p class="calibre1">command, which displays tabs as ^I, or the od -c command, </p>
<p class="calibre1">which displays tabs as \t. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-t  <i class="calibre4">N </i> Specify that one tab stop occurs every  <i class="calibre4">N</i> spaces. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">sort</b></p>
<p class="calibre1">sort [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The sort command prints lines of text in alphabetical order, or sorted by some other rule you specify. All provided files are concatenated, and the result is sorted and printed:</p>
<p class="calibre1">→ <b class="calibre3">cat threeletters</b></p>
<p class="calibre1">def</p>
<p class="calibre1">xyz</p>
<p class="calibre1">abc</p>
<p class="calibre1">→ <b class="calibre3">sort threeletters</b></p>
<p class="calibre1">abc</p>
<p class="calibre1">def</p>
<p class="calibre1">xyz</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-f</p>
<p class="calibre1">Case-insensitive sorting. </p>
<p class="calibre1">-n</p>
<p class="calibre1">Sort numerically (i.e., 9 comes before 10) instead of alphabetically (10</p>
<p class="calibre1">comes before 9 because it begins with a “1”). </p>
<p class="calibre1">-g</p>
<p class="calibre1">Another numerical sorting method with a different algorithm that, among other things, recognizes scientific notation (7.4e3 means “7.4</p>
<p class="calibre1">times ten to the third power,” or 7400). Run info sort for full technical details. </p>
<p class="calibre1">-u</p>
<p class="calibre1">Unique sort: ignore duplicate lines. (If used with -c for checking sorted files, fail if any consecutive lines are identical.)</p>
<p class="calibre1"><b class="calibre3">102  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-242"></a>-c</p>
<p class="calibre1">Don’t sort, just check if the input is already sorted. If it is, print nothing; otherwise, print an error message. </p>
<p class="calibre1">-b</p>
<p class="calibre1">Ignore leading whitespace in lines. </p>
<p class="calibre1">-r</p>
<p class="calibre1">Reverse the output: sort from greatest to least. </p>
<p class="calibre1">-t  <i class="calibre4">X</i></p>
<p class="calibre1">Use  <i class="calibre4">X</i> as the field delimiter for the -k option. </p>
<p class="calibre1">-k  <i class="calibre4">key </i> Choose sorting keys. (Combine with -t to choose a separator character between keys.)</p>
<p class="calibre1">A sorting key indicates a portion of a line to consider when sorting, instead of the entire line. An example could be the fifth character of each line. Normally, sort would consider these</p>
<p class="calibre1">lines to be in sorted order:</p>
<p class="calibre1">aaaaz</p>
<p class="calibre1">bbbby</p>
<p class="calibre1">but if your sorting key is “the fifth character of each line,” denoted -k1.5, then the lines are reversed because y comes before z. </p>
<p class="calibre1">A more practical example involves this file of names and</p>
<p class="calibre1">addresses:</p>
<p class="calibre1">→ <b class="calibre3">cat people</b></p>
<p class="calibre1">George Washington,123 Main Street,New York</p>
<p class="calibre1">Abraham Lincoln,54 First Avenue,San Francisco</p>
<p class="calibre1">John Adams,39 Tremont Street,Boston</p>
<p class="calibre1">An ordinary sort would display the “Abraham Lincoln” line</p>
<p class="calibre1">first. But if you consider each line as three comma-separated values, you can sort on the second value with:</p>
<p class="calibre1">→ <b class="calibre3">sort -k2 -t, people</b></p>
<p class="calibre1">George Washington,123 Main Street,New York</p>
<p class="calibre1">John Adams,39 Tremont Street,Boston</p>
<p class="calibre1">Abraham Lincoln,54 First Avenue,San Francisco</p>
<p class="calibre1">where “123 Main Street” is first alphabetically. Likewise, you can sort on the city (third value) with:</p>
<p class="calibre1">→ <b class="calibre3">sort -k3 -t, people</b></p>
<p class="calibre1">John Adams,39 Tremont Street,Boston</p>
<p class="calibre1"><b class="calibre3">File Text Manipulation  |  103</b></p>
<p class="calibre1"><a id="calibre_link-215"></a>George Washington,123 Main Street,New York</p>
<p class="calibre1">Abraham Lincoln,54 First Avenue,San Francisco</p>
<p class="calibre1">and see that Boston comes up first alphabetically. The general syntax -k  <i class="calibre4">F1[.C1][,F2[.C2]]</i> means:</p>
<p class="calibre1">Item Meaning</p>
<p class="calibre1">Default if not supplied</p>
<p class="calibre1"> <i class="calibre4">F1</i></p>
<p class="calibre1">Starting field</p>
<p class="calibre1">Required</p>
<p class="calibre1"> <i class="calibre4">C1</i></p>
<p class="calibre1">Starting position within field 1</p>
<p class="calibre1">1</p>
<p class="calibre1"> <i class="calibre4">F2</i></p>
<p class="calibre1">Ending field</p>
<p class="calibre1">Last field</p>
<p class="calibre1"> <i class="calibre4">C2</i></p>
<p class="calibre1">Starting position within ending field 1</p>
<p class="calibre1">So sort -k1.5 sorts based on the first field, beginning at its fifth character; and sort -k2.8,5 means “from the eighth character of the second field, up to the first character of the fifth field.” The -t option changes the behavior of -k so it considers delimiter characters such as commas rather than spaces. </p>
<p class="calibre1">You can repeat the -k option to define multiple keys, which will be applied from first to last as found on the command line. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">uniq</b></p>
<p class="calibre1">uniq [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The uniq command operates on consecutive, duplicate lines of text. For example, if you have a file  <i class="calibre4">myfile</i>:</p>
<p class="calibre1">→ <b class="calibre3">cat letters2</b></p>
<p class="calibre1">a</p>
<p class="calibre1">b</p>
<p class="calibre1">b</p>
<p class="calibre1">c</p>
<p class="calibre1">b</p>
<p class="calibre1">then uniq would detect and process (in whatever way you specify) the two consecutive b’s, but not the third b:</p>
<p class="calibre1"><b class="calibre3">104  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-243"></a>→ <b class="calibre3">uniq letters2</b></p>
<p class="calibre1">a</p>
<p class="calibre1">b</p>
<p class="calibre1">c</p>
<p class="calibre1">b</p>
<p class="calibre1">uniq is often used after sorting a file:</p>
<p class="calibre1">→ <b class="calibre3">sort letters2 | uniq</b></p>
<p class="calibre1">a</p>
<p class="calibre1">b</p>
<p class="calibre1">c</p>
<p class="calibre1">In this case, only a single b remains because all three were made adjacent by sort, then collapsed to one by uniq. Also, you can count duplicate lines instead of eliminating them:</p>
<p class="calibre1">→ <b class="calibre3">sort letters2 | uniq -c</b></p>
<p class="calibre1">1 a</p>
<p class="calibre1">3 b</p>
<p class="calibre1">1 c</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-c</p>
<p class="calibre1">Count adjacent duplicate lines. </p>
<p class="calibre1">-i</p>
<p class="calibre1">Case-insensitive operation. </p>
<p class="calibre1">-u</p>
<p class="calibre1">Print unique lines only. </p>
<p class="calibre1">-d</p>
<p class="calibre1">Print duplicate lines only. </p>
<p class="calibre1">-s  <i class="calibre4">N </i> Skip the first  <i class="calibre4">N</i> characters on each line when detecting duplicates. </p>
<p class="calibre1">-f  <i class="calibre4">N </i> Ignore the first  <i class="calibre4">N</i> whitespace-separated fields on each line when detecting duplicates. </p>
<p class="calibre1">-w  <i class="calibre4">N </i> Consider only the first  <i class="calibre4">N</i> characters on each line when detecting duplicates. If used with -s or -f, sort will ignore the specified number of characters or fields first, then consider the next  <i class="calibre4">N</i> characters. </p>
<p class="calibre1"><b class="calibre3">File Text Manipulation  |  105</b></p>
<p class="calibre1"><a id="calibre_link-123"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">tee</b></p>
<p class="calibre1">tee [ <i class="calibre4">options</i>]  <i class="calibre4">files</i></p>
<p class="calibre1">Like the cat command, the tee command copies standard</p>
<p class="calibre1">input to standard output unaltered. Simultaneously, however, it also copies that same standard input to one or more files. tee is most often found in the middle of pipelines, writing some</p>
<p class="calibre1">intermediate data to a file while also passing it to the next command in the pipeline:</p>
<p class="calibre1">→ <b class="calibre3">who | tee original_who | sort</b></p>
<p class="calibre1">barrett   pts/1    Sep 22 21:15</p>
<p class="calibre1">byrnes    pts/0    Sep 15 13:51</p>
<p class="calibre1">silver       :0    Sep 23 20:44</p>
<p class="calibre1">silver    pts/2    Sep 22 21:18</p>
<p class="calibre1">This command line produces the sorted output of who on</p>
<p class="calibre1">screen, but also writes the original, unsorted output of who to the file  <i class="calibre4">original_who</i>:</p>
<p class="calibre1">→ <b class="calibre3">cat original_who</b></p>
<p class="calibre1">silver       :0    Sep 23 20:44</p>
<p class="calibre1">byrnes    pts/0    Sep 15 13:51</p>
<p class="calibre1">barrett   pts/1    Sep 22 21:15</p>
<p class="calibre1">silver    pts/2    Sep 22 21:18</p>
<p class="calibre1">and then passes along that same output to the rest of the pipeline (sort), producing sorted output on screen. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-a Append instead of overwriting files. </p>
<p class="calibre1">-i Ignore interrupt signals. </p>
<p class="calibre1"><b class="calibre3">More Powerful Manipulations</b></p>
<p class="calibre1">We’ve just touched the tip of the iceberg for Linux text filtering. </p>
<p class="calibre1">Linux has hundreds of filters that produce ever more complex manipulations of the data. But with great power comes a great <b class="calibre3">106  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-116"></a>learning curve, too much for a short book. Here are a few filters to get you started. </p>
<p class="calibre1"><b class="calibre3">awk</b></p>
<p class="calibre1">AWK is a pattern-matching language. It matches data by regu‐</p>
<p class="calibre1">lar expression and then performs actions based on the data. </p>
<p class="calibre1">Here are a few simple examples for processing a text file,  <i class="calibre4">myfile</i>. </p>
<p class="calibre1">Print the second and fourth word on each line:</p>
<p class="calibre1">→ <b class="calibre3">awk '{print $2, $4}' myfile</b></p>
<p class="calibre1">Print all lines that are shorter than 60 characters:</p>
<p class="calibre1">→ <b class="calibre3">awk 'length &lt; 60 {print}' myfile</b></p>
<p class="calibre1"><b class="calibre3">sed</b></p>
<p class="calibre1">Like AWK, sed is a pattern-matching engine that can perform</p>
<p class="calibre1">manipulations on lines of text. Its syntax is closely related to that of vim and the line editor ed. Here are some trivial examples. </p>
<p class="calibre1">Print the file with all occurrences of the string “me” changed to</p>
<p class="calibre1">“YOU”:</p>
<p class="calibre1">→ <b class="calibre3">sed 's/me/YOU/g' myfile</b></p>
<p class="calibre1">Print the file with the first 10 lines removed:</p>
<p class="calibre1">→ <b class="calibre3">sed '1,10d' myfile</b></p>
<p class="calibre1"><b class="calibre3">m4</b></p>
<p class="calibre1">m4 is a macro-processing language and command. It locates</p>
<p class="calibre1">keywords within a file and substitutes values for them. For</p>
<p class="calibre1">example, given this file:</p>
<p class="calibre1">→ <b class="calibre3">cat substitutions</b></p>
<p class="calibre1">My name is NAME and I am AGE years old. </p>
<p class="calibre1">ifelse(QUOTE,yes,Learn Linux today!)</p>
<p class="calibre1">see what m4 does with substitutions for NAME, AGE, and QUOTE:</p>
<p class="calibre1">→ <b class="calibre3">m4 -DNAME=Sandy substitutions</b></p>
<p class="calibre1">My name is Sandy and I am AGE years old. </p>
<p class="calibre1"><b class="calibre3">File Text Manipulation  |  107</b></p>
<p class="calibre1"><a id="calibre_link-14"></a>→ <b class="calibre3">m4 -DNAME=Sandy -DAGE=25 substitutions</b> My name is Sandy and I am 25 years old. </p>
<p class="calibre1">→ <b class="calibre3">m4 -DNAME=Sandy -DAGE=25 -DQUOTE=yes substitutions</b></p>
<p class="calibre1">My name is Sandy and I am 25 years old. </p>
<p class="calibre1">Learn Linux today! </p>
<p class="calibre1"><b class="calibre3">Perl, PHP, Python, Ruby</b></p>
<p class="calibre1">Perl, PHP, Python, and Ruby are full-fledged programming languages powerful enough to build complete, robust applications. </p>
<p class="calibre1"><a href="#calibre_link-43">See “Beyond Shell Scripting” on page 248</a> for references. </p>
<p class="calibre1"><b class="calibre3">File Compression and Packaging</b></p>
<p class="calibre1">tar</p>
<p class="calibre1">Package multiple files into a single file. </p>
<p class="calibre1">gzip</p>
<p class="calibre1">Compress files with GNU Zip. </p>
<p class="calibre1">gunzip</p>
<p class="calibre1">Uncompress GNU Zip files. </p>
<p class="calibre1">bzip2</p>
<p class="calibre1">Compress files in BZip format. </p>
<p class="calibre1">bunzip2</p>
<p class="calibre1">Uncompress BZip files. </p>
<p class="calibre1">bzcat</p>
<p class="calibre1">Compress/uncompress BZip files via standard input/output. </p>
<p class="calibre1">compress</p>
<p class="calibre1">Compress files with traditional Unix compression. </p>
<p class="calibre1">uncompress Uncompress files with traditional Unix compression. </p>
<p class="calibre1">zcat</p>
<p class="calibre1">Compress/uncompress file via standard input/output (gzip or</p>
<p class="calibre1">compress). </p>
<p class="calibre1">zip</p>
<p class="calibre1">Compress files in Windows Zip format. </p>
<p class="calibre1">unzip</p>
<p class="calibre1">Uncompress Windows Zip files. </p>
<p class="calibre1">munpack</p>
<p class="calibre1">Extract MIME data to files. </p>
<p class="calibre1">mpack</p>
<p class="calibre1">Convert a file into MIME format. </p>
<p class="calibre1">Linux can compress files into a variety of formats and uncompress them. The most popular formats are GNU Zip (gzip), </p>
<p class="calibre1">whose compressed files are named with the  <i class="calibre4">.gz</i> extension, and BZip, which uses the  <i class="calibre4">.bz2</i> extension. Other common formats include Zip files from Windows systems ( <i class="calibre4">.zip</i> extension), xz <b class="calibre3">108  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-148"></a>files ( <i class="calibre4">.xz</i> and  <i class="calibre4">.lzma</i> extensions), and occasionally, classic Unix compression ( <i class="calibre4">.Z</i> extension). </p>
<p class="calibre1">A related technology involves converting binary files into tex-tual formats, so they can (say) be transmitted within an email message. Nowadays this is done automatically with attachments and MIME tools, but we’ll cover the munpack program, </p>
<p class="calibre1">which can do this from the command line. </p>
<p class="calibre1">If you come across a format we don’t cover, such as Mac OS X</p>
<p class="calibre1">sit files, Arc, Zoo, rar, and others, learn more a<a href="http://en.wikipedia.org/wiki/List_of_archive_formats">t  <i class="calibre4">http://en.wikipe</i></a></p>
<p class="calibre1"><a href="http://en.wikipedia.org/wiki/List_of_archive_formats"> <i class="calibre4">dia.org/wiki/List_of_archive_formats</i>. </a></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">tar</b></p>
<p class="calibre1">tar [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The tar program packs many files and directories into a single file for easy transport, optionally compressed. (It was originally for backing up files onto a tape drive; its name is short for “tape archive.”) Tar files are the most common file-packaging format for Linux. </p>
<p class="calibre1">→ <b class="calibre3">tar -czf myarchive.tar.gz mydir</b>       <i class="calibre4">Create</i></p>
<p class="calibre1">→ <b class="calibre3">ls -lG myarchive.tar.gz</b></p>
<p class="calibre1">-rw-r--r-- 1 smith 350 Nov  7 14:09 myarchive.tar.gz</p>
<p class="calibre1">→ <b class="calibre3">tar -tf myarchive.tar.gz</b>              <i class="calibre4">List contents</i> mydir/</p>
<p class="calibre1">mydir/dir/</p>
<p class="calibre1">mydir/dir/file10</p>
<p class="calibre1">mydir/file1</p>
<p class="calibre1">mydir/file2</p>
<p class="calibre1">... </p>
<p class="calibre1">→ <b class="calibre3">tar -xf myarchive.tar.gz</b>              <i class="calibre4">Extract</i></p>
<p class="calibre1">If you specify files on the command line, only those files are processed:</p>
<p class="calibre1">→ <b class="calibre3">tar -xvf myarchive.tar myfile myfile2 myfile3</b></p>
<p class="calibre1"><b class="calibre3">File Compression and Packaging  |  109</b></p>
<p class="calibre1"><a id="calibre_link-112"></a>Otherwise, the entire archive is processed. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-c</p>
<p class="calibre1">Create an archive. You’ll have to list the input files and directories on the command line. </p>
<p class="calibre1">-r</p>
<p class="calibre1">Append files to an existing archive. </p>
<p class="calibre1">-u</p>
<p class="calibre1">Append new/changed files to an existing archive. </p>
<p class="calibre1">-A</p>
<p class="calibre1">Append one archive to the end of another: for example, tar -A -f first.tar second.tar appends the contents of  <i class="calibre4">second.tar</i> to <i class="calibre4">first.tar</i>. Does not work for compressed archives. </p>
<p class="calibre1">-t</p>
<p class="calibre1">List (test) the archive. </p>
<p class="calibre1">-x</p>
<p class="calibre1">Extract files from the archive. </p>
<p class="calibre1">-f  <i class="calibre4">file </i> Read the archive from, or write the archive to, the given file. This is usually a tar file on disk (such as  <i class="calibre4">myarchive.tar</i>) but can also be a tape drive (such as  <i class="calibre4">/dev/tape</i>). </p>
<p class="calibre1">-d</p>
<p class="calibre1">Diff (compare) the archive against the filesystem. </p>
<p class="calibre1">-z</p>
<p class="calibre1">Use gzip compression. </p>
<p class="calibre1">-j</p>
<p class="calibre1">Use bzip2 compression. </p>
<p class="calibre1">-Z</p>
<p class="calibre1">Use Unix compression. </p>
<p class="calibre1">-v</p>
<p class="calibre1">Verbose mode: print extra information. </p>
<p class="calibre1">-h</p>
<p class="calibre1">Follow symbolic links rather than merely copying them. </p>
<p class="calibre1">-p</p>
<p class="calibre1">When extracting files, restore their original permissions and ownership. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">gzip</b></p>
<p class="calibre1">gzip [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">gunzip [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">zcat [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1"><b class="calibre3">110  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-107"></a>gzip and gunzip compress and uncompress files in GNU Zip format. The original file may be deleted in some cases, as</p>
<p class="calibre1">shown. Compressed files have the extension  <i class="calibre4">.gz</i>. </p>
<p class="calibre1"><b class="calibre3">Sample commands</b></p>
<p class="calibre1">gzip  <i class="calibre4">file</i></p>
<p class="calibre1">Compress  <i class="calibre4">file</i> to create  <i class="calibre4">file.gz</i>. Original</p>
<p class="calibre1"> <i class="calibre4">file</i> is deleted. </p>
<p class="calibre1">gzip -c  <i class="calibre4">file</i></p>
<p class="calibre1">Produce compressed data on standard output. </p>
<p class="calibre1">cat  <i class="calibre4">file</i> | gzip</p>
<p class="calibre1">Produce compressed data from a pipeline. </p>
<p class="calibre1">gunzip  <i class="calibre4">file</i>.gz</p>
<p class="calibre1">Uncompress  <i class="calibre4">file.gz </i> to create  <i class="calibre4">file</i>. Original <i class="calibre4">file.gz </i> is deleted. </p>
<p class="calibre1">gunzip -c  <i class="calibre4">file</i>.gz</p>
<p class="calibre1">Uncompress the data on standard output. </p>
<p class="calibre1">cat  <i class="calibre4">file</i>.gz | gunzip Uncompress the data from a pipeline. </p>
<p class="calibre1">zcat  <i class="calibre4">file</i>.gz</p>
<p class="calibre1">Uncompress the data on standard output. </p>
<p class="calibre1">tar -czf  <i class="calibre4">tarfile dir </i> Pack directory  <i class="calibre4">dir</i> into a gzipped tar file. Use</p>
<p class="calibre1">-cvzf to print filenames as they are processed. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">bzip2</b></p>
<p class="calibre1">bzip2 [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">bunzip2 [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">bzcat [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">bzip2 and bunzip2 compress and uncompress files in Burrows&ndash;</p>
<p class="calibre1">Wheeler format. The original file may be deleted in some cases, as shown. Compressed files have the extension  <i class="calibre4">.bz2</i>. </p>
<p class="calibre1"><b class="calibre3">Sample commands</b></p>
<p class="calibre1">bzip2  <i class="calibre4">file</i></p>
<p class="calibre1">Compress  <i class="calibre4">file</i> to create  <i class="calibre4">file.bz2</i>. Original</p>
<p class="calibre1"> <i class="calibre4">file</i> is deleted. </p>
<p class="calibre1">bzip2 -c  <i class="calibre4">file</i></p>
<p class="calibre1">Produce compressed data on standard output. </p>
<p class="calibre1">cat  <i class="calibre4">file</i> | bzip2</p>
<p class="calibre1">Produce compressed data on standard output. </p>
<p class="calibre1"><b class="calibre3">File Compression and Packaging  |  111</b></p>
<p class="calibre1"><a id="calibre_link-110"></a>bunzip2  <i class="calibre4">file</i>.bz2</p>
<p class="calibre1">Uncompress  <i class="calibre4">file.bz2</i> to create  <i class="calibre4">file</i>. </p>
<p class="calibre1">Original  <i class="calibre4">file.bz2</i> is deleted. </p>
<p class="calibre1">bunzip2 -c  <i class="calibre4">file</i>.bz2</p>
<p class="calibre1">Uncompress the data on standard output. </p>
<p class="calibre1">cat  <i class="calibre4">file</i>.bz2 | bunzip2 Uncompress the data on standard output. </p>
<p class="calibre1">bzcat  <i class="calibre4">file</i>.bz2</p>
<p class="calibre1">Uncompress the data on standard output. </p>
<p class="calibre1">tar -cjf  <i class="calibre4">tarfile dir</i></p>
<p class="calibre1">Pack directory  <i class="calibre4">dir</i> into a bzipped tar file. Use</p>
<p class="calibre1">-cvjf to print filenames as they are</p>
<p class="calibre1">processed. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">compress</b></p>
<p class="calibre1">compress [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">uncompress [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">zcat [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">compress and uncompress compress and uncompress files in</p>
<p class="calibre1">standard Unix compression format (Lempel Ziv). The original</p>
<p class="calibre1">file may be deleted in some cases, as shown. Compressed files have the extension  <i class="calibre4">.Z</i>. </p>
<p class="calibre1"><b class="calibre3">Sample commands</b></p>
<p class="calibre1">compress  <i class="calibre4">file</i></p>
<p class="calibre1">Compress  <i class="calibre4">file</i> to create  <i class="calibre4">file.Z</i>. Original</p>
<p class="calibre1"> <i class="calibre4">file</i> is deleted. </p>
<p class="calibre1">compress -c  <i class="calibre4">file</i></p>
<p class="calibre1">Produce compressed data on standard</p>
<p class="calibre1">output. </p>
<p class="calibre1">cat  <i class="calibre4">file</i> | compress</p>
<p class="calibre1">Produce compressed data from a pipeline. </p>
<p class="calibre1">uncompress  <i class="calibre4">file</i>.Z</p>
<p class="calibre1">Uncompress  <i class="calibre4">file.Z </i> to create  <i class="calibre4">file</i>. </p>
<p class="calibre1">Original  <i class="calibre4">file.Z </i> is deleted. </p>
<p class="calibre1">uncompress -c  <i class="calibre4">file</i>.Z</p>
<p class="calibre1">Uncompress the data on standard output. </p>
<p class="calibre1">cat  <i class="calibre4">file</i>.Z | uncompress Uncompress the data from a pipeline. </p>
<p class="calibre1">zcat  <i class="calibre4">file</i>.Z</p>
<p class="calibre1">Uncompress the data on standard output. </p>
<p class="calibre1"><b class="calibre3">112  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-195"></a>tar -cZf  <i class="calibre4">tarfile dir</i></p>
<p class="calibre1">Pack directory  <i class="calibre4">dir</i> into a compressed tar</p>
<p class="calibre1">file. Use -cvZf to print filenames as they</p>
<p class="calibre1">are processed. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">zip</b></p>
<p class="calibre1">zip [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">zip and unzip compress and uncompress files in Windows Zip</p>
<p class="calibre1">format. Compressed files have the extension  <i class="calibre4">.zip</i>. Unlike most other Linux compression commands, zip does not delete the</p>
<p class="calibre1">original files. </p>
<p class="calibre1">zip  <i class="calibre4"> myfile</i>.zip  <i class="calibre4">file1  file2  file3</i> ... Pack. </p>
<p class="calibre1">zip -r  <i class="calibre4"> myfile</i>.zip  <i class="calibre4"> dirname</i></p>
<p class="calibre1">Pack recursively. </p>
<p class="calibre1">unzip -l  <i class="calibre4"> myfile</i>.zip</p>
<p class="calibre1">List contents. </p>
<p class="calibre1">unzip  <i class="calibre4"> myfile</i>.zip</p>
<p class="calibre1">Unpack. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   --opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">munpack</b></p>
<p class="calibre1">munpack [ <i class="calibre4">options</i>]  <i class="calibre4">mail_file</i></p>
<p class="calibre1">mpack [ <i class="calibre4">options</i>]  <i class="calibre4">files</i></p>
<p class="calibre1">Modern email programs can send and receive attachments so</p>
<p class="calibre1">easily we rarely think about it, but this was not always the case. </p>
<p class="calibre1">Programs like munpack were created to work with attachments</p>
<p class="calibre1">directly on the command line, appending or extracting them to and from mail messages. For example, if you have an email</p>
<p class="calibre1">message in a file,  <i class="calibre4">messagefile</i>, and it contains a JPEG image and a PDF file as attachments, munpack can extract both attachments as files:</p>
<p class="calibre1"><b class="calibre3">File Compression and Packaging  |  113</b></p>
<p class="calibre1"><a id="calibre_link-15"></a>→ <b class="calibre3">munpack messagefile</b></p>
<p class="calibre1">beautiful.jpg (image/jpeg)</p>
<p class="calibre1">researchpaper.pdf (application/pdf)</p>
<p class="calibre1">Its partner program, mpack, does the opposite, inserting one or more files as attachments into a MIME-format file. Here we</p>
<p class="calibre1">create the file  <i class="calibre4">attachment.mime</i> containing a MIME-encoded image,  <i class="calibre4">photo.jpg</i>:</p>
<p class="calibre1">→ <b class="calibre3">mpack -o attachment.mime photo.jpg</b></p>
<p class="calibre1">Subject: <b class="calibre3">My photo</b></p>
<p class="calibre1"><b class="calibre3">File Comparison</b></p>
<p class="calibre1">diff</p>
<p class="calibre1">Line-by-line comparison of two files or directories. </p>
<p class="calibre1">comm</p>
<p class="calibre1">Line-by-line comparison of two sorted files. </p>
<p class="calibre1">cmp</p>
<p class="calibre1">Byte-by-byte comparison of two files. </p>
<p class="calibre1">md5sum Compute a checksum of the given files (MD5). </p>
<p class="calibre1">There are three ways to compare Linux files:</p>
<p class="calibre1">• Line by line (diff, diff3, sdiff, comm), best suited to text files</p>
<p class="calibre1">• Byte by byte (cmp), often used for binary files</p>
<p class="calibre1">• By comparing checksums (md5sum, sum, cksum)</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">diff</b></p>
<p class="calibre1">diff [ <i class="calibre4">options</i>]  <i class="calibre4">file1 file2</i></p>
<p class="calibre1">The diff command compares two files (or two directories) line by line. When comparing text files, diff can produce detailed reports of their differences. For binary files, diff merely</p>
<p class="calibre1">reports whether they differ or not. For all files, if there are no differences, diff produces no output. </p>
<p class="calibre1"><b class="calibre3">114  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-201"></a>The traditional output format looks like this: <i class="calibre4">Indication of line numbers and the type of change</i></p>
<p class="calibre1">&lt;  <i class="calibre4">Corresponding section of file1, if any</i></p>
<p class="calibre1">---</p>
<p class="calibre1">&gt;  <i class="calibre4">Corresponding section of file2, if any</i></p>
<p class="calibre1">For example, if we start with a file  <i class="calibre4">fileA</i>:</p>
<p class="calibre1">Hello, this is a wonderful file. </p>
<p class="calibre1">The quick brown fox jumped over</p>
<p class="calibre1">the lazy dogs. </p>
<p class="calibre1">Goodbye for now. </p>
<p class="calibre1">Suppose we delete the first line, change “brown” to “blue” on the second line, and add a final line, creating a file  <i class="calibre4">fileB</i>: The quick blue fox jumped over</p>
<p class="calibre1">the lazy dogs. </p>
<p class="calibre1">Goodbye for now. </p>
<p class="calibre1">Linux r00lz! </p>
<p class="calibre1">Then the diff command produces this output for these files:</p>
<p class="calibre1">→ diff fileA fileB</p>
<p class="calibre1">1,2c1                   <i class="calibre4">fileA lines 1-2 became fileB line 1</i></p>
<p class="calibre1">&lt; Hello, this is a wonderful file.  <i class="calibre4">Lines 1-2 of fileA</i></p>
<p class="calibre1">&lt; The quick brown fox jumped over</p>
<p class="calibre1">---                                   <i class="calibre4">diff separator</i></p>
<p class="calibre1">&gt; The quick blue fox jumped over      <i class="calibre4">Line 1 of fileB</i></p>
<p class="calibre1">4a4                          <i class="calibre4">Line 4 was added in fileB</i></p>
<p class="calibre1">&gt; Linux r00lz!  <i class="calibre4">The added line</i></p>
<p class="calibre1">The leading symbols &lt; and &gt; are arrows indicating  <i class="calibre4">fileA</i> and <i class="calibre4">fileB</i>, respectively. This output format is the default: many others are available, some of which can be fed directly to other tools. Try them out to see what they look like. </p>
<p class="calibre1">Option</p>
<p class="calibre1">Output format</p>
<p class="calibre1">-n</p>
<p class="calibre1">RCS version control format, as produced by rcsdiff (man</p>
<p class="calibre1">rcsdiff). </p>
<p class="calibre1"><b class="calibre3">File Comparison  |  115</b></p>
<p class="calibre1"><a id="calibre_link-144"></a>-c</p>
<p class="calibre1">Context diff format, as used by the patch command (man</p>
<p class="calibre1">patch). </p>
<p class="calibre1">-D  <i class="calibre4">macro </i> C preprocessor format, using #ifdef  <i class="calibre4">macro</i> ... #else ... </p>
<p class="calibre1">#endif. </p>
<p class="calibre1">-u</p>
<p class="calibre1">Unified format, which merges the files and prepends “-” for deletion and “+” for addition. </p>
<p class="calibre1">-y</p>
<p class="calibre1">Side-by-side format; use -W to adjust the width of the output. </p>
<p class="calibre1">-e</p>
<p class="calibre1">Create an ed script that would change  <i class="calibre4">fileA</i> into  <i class="calibre4">fileB</i> if run. </p>
<p class="calibre1">-q</p>
<p class="calibre1">Don’t report changes, just say whether the files differ. </p>
<p class="calibre1">diff can also compare directories:</p>
<p class="calibre1">→ <b class="calibre3">diff dir1 dir2</b></p>
<p class="calibre1">which compares any same-named files in those directories, and lists all files that appear in one directory but not the other. To compare entire directory hierarchies recursively, use the -r option:</p>
<p class="calibre1">→ <b class="calibre3">diff -r dir1 dir2</b></p>
<p class="calibre1">which produces a (potentially massive) report of all differences. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-b Don’t consider whitespace. </p>
<p class="calibre1">-B Don’t consider blank lines. </p>
<p class="calibre1">-i Ignore case. </p>
<p class="calibre1">-r When comparing directories, recurse into subdirectories. </p>
<p class="calibre1">diff is just one member of a family of programs that operate on file differences. Some others are diff3, which compares</p>
<p class="calibre1">three files at a time, and sdiff, which merges the differences between two files to create a third file according to your</p>
<p class="calibre1">instructions. </p>
<p class="calibre1"><b class="calibre3">116  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-138"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">comm</b></p>
<p class="calibre1">comm [ <i class="calibre4">options</i>]  <i class="calibre4">file1 file2</i></p>
<p class="calibre1">The comm command compares two sorted files and produces</p>
<p class="calibre1">three columns of output, separated by tabs:</p>
<p class="calibre1">1. All lines that appear in  <i class="calibre4">file1</i> but not in  <i class="calibre4">file2</i>. </p>
<p class="calibre1">2. All lines that appear in  <i class="calibre4">file2</i> but not in  <i class="calibre4">file1</i>. </p>
<p class="calibre1">3. All lines that appear in both files. </p>
<p class="calibre1">For example, if  <i class="calibre4">commfile1</i> and  <i class="calibre4">commfile2</i> contain these lines: <i class="calibre4">commfile1:               commfile2:</i></p>
<p class="calibre1">apple            baker</p>
<p class="calibre1">baker            charlie</p>
<p class="calibre1">charlie          dark</p>
<p class="calibre1">then comm produces this three-column output:</p>
<p class="calibre1">→ <b class="calibre3">comm commfile1 commfile2</b></p>
<p class="calibre1">apple</p>
<p class="calibre1">baker</p>
<p class="calibre1">charlie</p>
<p class="calibre1">dark</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-1 </p>
<p class="calibre1">Suppress column 1. </p>
<p class="calibre1">-2</p>
<p class="calibre1">Suppress column 2. </p>
<p class="calibre1">-3</p>
<p class="calibre1">Suppress column 3. </p>
<p class="calibre1">-23 Show lines that appear only in the first file. </p>
<p class="calibre1">-13 Show lines that appear only in the second file. </p>
<p class="calibre1">-12 Show only common lines. </p>
<p class="calibre1"><b class="calibre3">File Comparison  |  117</b></p>
<p class="calibre1"><a id="calibre_link-192"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">cmp</b></p>
<p class="calibre1">cmp [ <i class="calibre4">options</i>]  <i class="calibre4">file1 file2</i> [ <i class="calibre4">offset1</i> [ <i class="calibre4">offset2</i>]]</p>
<p class="calibre1">The cmp command compares two files. If their contents are the same, cmp reports nothing; otherwise, it lists the location of the first difference:</p>
<p class="calibre1">→ <b class="calibre3">cmp myfile yourfile</b></p>
<p class="calibre1">myfile yourfile differ: byte 225, line 4</p>
<p class="calibre1">By default, cmp does not tell you what the difference is, only where it is. It also is perfectly suitable for comparing binary files, as opposed to diff, which operates best on text files. </p>
<p class="calibre1">Normally, cmp starts its comparison at the beginning of each file, but it will start elsewhere if you provide offsets:</p>
<p class="calibre1">→ <b class="calibre3">cmp myfile yourfile 10 20</b></p>
<p class="calibre1">This begins the comparison at the tenth character of  <i class="calibre4">myfile</i> and the twentieth of  <i class="calibre4">yourfile</i>. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-l Long output: print all differences, byte by byte:</p>
<p class="calibre1">→ <b class="calibre3">cmp -l myfile yourfile</b></p>
<p class="calibre1">225 167 127</p>
<p class="calibre1">This means at offset 225 (in decimal),  <i class="calibre4">myfile</i> has a small “w” (octal 167) but <i class="calibre4">yourfile</i> has a capital “W” (octal 127). </p>
<p class="calibre1">-s Silent output: don’t print anything, just exit with an appropriate return code; 0 if the files match, 1 if they don’t. (Or other codes if the comparison fails.) <b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">md5sum</b></p>
<p class="calibre1">md5sum  <i class="calibre4">files</i> | --check  <i class="calibre4">file</i></p>
<p class="calibre1">The md5sum command works with checksums to verify that files are unchanged. The first form produces the 32-byte checksum</p>
<p class="calibre1">of the given files, using the MD5 algorithm:</p>
<p class="calibre1"><b class="calibre3">118  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-212"></a>→ <b class="calibre3">md5sum myfile</b></p>
<p class="calibre1">48760f921ec6111e3979efa14e22535d  myfile</p>
<p class="calibre1">while the second form tests whether a checksum matches its</p>
<p class="calibre1">file, using --check:</p>
<p class="calibre1">→ <b class="calibre3">md5sum myfile myfile2 myfile3 &gt; mysum</b></p>
<p class="calibre1">→ <b class="calibre3">cat mysum</b></p>
<p class="calibre1">48760f921ec6111e3979efa14e22535d  myfile</p>
<p class="calibre1">49f6c28a5ec01d15703794a31accd08d  myfile2</p>
<p class="calibre1">d28b9f7fc7d61c60913c8026fc91149a  myfile3</p>
<p class="calibre1">→ <b class="calibre3">md5sum --check mysum</b></p>
<p class="calibre1">myfile: OK</p>
<p class="calibre1">myfile2: OK</p>
<p class="calibre1">myfile3: OK</p>
<p class="calibre1">→ <b class="calibre3">echo "new data" &gt; myfile2</b></p>
<p class="calibre1">→ <b class="calibre3">md5sum --check mysum</b></p>
<p class="calibre1">myfile: OK</p>
<p class="calibre1">myfile2: FAILED</p>
<p class="calibre1">myfile3: OK</p>
<p class="calibre1">md5sum: WARNING: 1 of 3 computed checksums did NOT </p>
<p class="calibre1">match</p>
<p class="calibre1">Two different files are highly unlikely to have the same MD5</p>
<p class="calibre1">checksum, so comparing checksums is a reasonably reliable</p>
<p class="calibre1">way to detect if two files differ:</p>
<p class="calibre1">→ <b class="calibre3">md5sum myfile | cut -c1-32 &gt; sum1</b></p>
<p class="calibre1">→ <b class="calibre3">md5sum myfile2 | cut -c1-32 &gt; sum2</b></p>
<p class="calibre1">→ <b class="calibre3">diff -q sum1 sum2</b></p>
<p class="calibre1">Files sum1 and sum2 differ</p>
<p class="calibre1">A stronger but (as yet) less popular program is shasum, which can produce longer hashes using a different algorithm. It is likely more reliable than md5sum. </p>
<p class="calibre1">→ <b class="calibre3">shasum myfile</b>                     <i class="calibre4">SHA-1 algorithm</i> 253c9c5836261859a77f83dc296168b35c1230ac  myfile</p>
<p class="calibre1">→ <b class="calibre3">shasum -a 256 myfile</b>              <i class="calibre4">SHA-256 algorithm</i> e8183aaa23aa9b74c7033cbc843041fcf1d1e9e93724b7ef63c94d</p>
<p class="calibre1">4c50a15df8 myfile</p>
<p class="calibre1">→ <b class="calibre3">shasum myfile &gt; mysum</b></p>
<p class="calibre1"><b class="calibre3">File Comparison  |  119</b></p>
<p class="calibre1"><a id="calibre_link-16"></a>→ <b class="calibre3">shasum --check mysum</b></p>
<p class="calibre1">myfile: OK</p>
<p class="calibre1">Avoid older, weaker programs such as sum and cksum which</p>
<p class="calibre1">produce much smaller, unreliable checksums. </p>
<p class="calibre1"><b class="calibre3">PDF and PostScript File Handling</b></p>
<p class="calibre1">pdftotext</p>
<p class="calibre1">Extract text from PDF files. </p>
<p class="calibre1">ps2ascii</p>
<p class="calibre1">Extract text from PostScript or PDF files. </p>
<p class="calibre1">pdfseparate</p>
<p class="calibre1">Extract individual pages from a PDF file. </p>
<p class="calibre1">pdftk</p>
<p class="calibre1">Split, join, rotate, and otherwise manipulate PDF files. </p>
<p class="calibre1">pdf2ps, ps2pdf Convert between PDF and PostScript file formats. </p>
<p class="calibre1">You may commonly encounter files in Adobe PDF format, </p>
<p class="calibre1">especially when exchanging files with Windows or Mac OS X</p>
<p class="calibre1">computers. Less commonly, you may encounter files in Post‐</p>
<p class="calibre1">Script format, or you might need to convert files to PostScript in order to print them. Linux has a rich set of tools for working with PDF and PostScript files, even if you’re working in the shell and can’t view the files graphically. </p>
<p class="calibre1">If you simply want to display PDF and PostScript files, you</p>
<p class="calibre1">have a number of choices. The commands evince, okular, and</p>
<p class="calibre1">gv (Ghostview) all display both types of files, and xpdf displays only PDFs. There’s also a full-featured but ancient “official” </p>
<p class="calibre1">PDF viewer from Adobe, acroread, but it is no longer main‐</p>
<p class="calibre1">tained and is relatively slow. All of these programs are available on the command line. For more complex handling of PDF and</p>
<p class="calibre1">PostScript files, read on. </p>
<p class="calibre1"><b class="calibre3">120  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-71"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">pdftotext</b></p>
<p class="calibre1">pdftotext [ <i class="calibre4">options</i>] [ <i class="calibre4">file</i>.pdf [ <i class="calibre4">outfile</i>.txt]]</p>
<p class="calibre1">The pdftotext command extracts text from a PDF file and</p>
<p class="calibre1">writes it to a file. This works only if the PDF contains actual text, not images that look like text (say, a magazine article that’s been scanned on a graphical scanner). </p>
<p class="calibre1">→ <b class="calibre3">pdftotext sample.pdf</b>    <i class="calibre4">Creates sample.txt</i></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-f  <i class="calibre4">N</i></p>
<p class="calibre1">Begin with page  <i class="calibre4">N</i> of the PDF file. You must</p>
<p class="calibre1">have a space between the option and the</p>
<p class="calibre1">number. </p>
<p class="calibre1">-l  <i class="calibre4">N</i></p>
<p class="calibre1">End with page  <i class="calibre4">N</i> of the PDF file. You must</p>
<p class="calibre1">have a space between the option and the</p>
<p class="calibre1">number. </p>
<p class="calibre1">-htmlmeta</p>
<p class="calibre1">Generate HTML rather than plain text. </p>
<p class="calibre1">-eol (dos | mac | unix) Write end-of-line characters in the text file for the given operating system. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ps2ascii</b></p>
<p class="calibre1">ps2ascii  <i class="calibre4">file</i>.(ps|pdf)] [ <i class="calibre4">outfile</i>.txt]</p>
<p class="calibre1">The ps2ascii command extracts text from a PostScript file. It’s a simple command with no options. <a href="#calibre_link-71">13 </a>To extract text from  <i class="calibre4">sample.ps</i> and place it into  <i class="calibre4">extracted.txt</i>:</p>
<p class="calibre1">→ <b class="calibre3">ps2ascii sample.ps extracted.txt</b></p>
<p class="calibre1">13 Actually, if you run ps2ascii --help, you’ll be presented with command-line options, but they don’t work. They are the options of a related program, gs, which gets invoked by ps2ascii. </p>
<p class="calibre1"><b class="calibre3">PDF and PostScript File Handling  |  121</b></p>
<p class="calibre1"><a id="calibre_link-72"></a>ps2ascii can also extract text from a PDF file, though you wouldn’t guess tha<a href="#calibre_link-72">t from the command name.14</a></p>
<p class="calibre1">→ <b class="calibre3">ps2ascii sample.pdf extracted.txt</b></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">pdfseparate</b></p>
<p class="calibre1">pdfseparate [ <i class="calibre4">options</i>] [ <i class="calibre4">file</i>.pdf] [ <i class="calibre4">pattern</i>.txt]</p>
<p class="calibre1">The pdfseparate command splits a PDF file into separate PDF</p>
<p class="calibre1">files, one per page. For example, if  <i class="calibre4">one.pdf</i> is 10 pages long, then this command will create 10 PDF files named  <i class="calibre4">split1.pdf</i> through  <i class="calibre4">split10.pdf</i>, each containing one page:</p>
<p class="calibre1">→ <b class="calibre3">pdfseparate one.pdf split%d.pdf</b></p>
<p class="calibre1">The final argument is a pattern for forming the names of the individual page files. The special notation %d stands for the extracted page number. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-f  <i class="calibre4">N </i> Begin with page  <i class="calibre4">N</i> of the PDF file. You must have a space between the option and the number. </p>
<p class="calibre1">-l  <i class="calibre4">N </i> End with page  <i class="calibre4">N</i> of the PDF file. You must have a space between the option and the number. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">pdftk</b></p>
<p class="calibre1">pdftk [ <i class="calibre4">arguments</i>]</p>
<p class="calibre1">14 At press time, the manpage for ps2ascii says that the PDF file cannot come from standard input, but in practice it seems to work fine: cat sample.pdf | ps2ascii. </p>
<p class="calibre1"><b class="calibre3">122  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-200"></a>pdftk is the “Swiss Army knife” of PDF commands. This versa-tile program can extract pages from a PDF file, join several PDFs into one, rotate pages, add watermarks, encrypt and</p>
<p class="calibre1">decrypt files, and much more, all from the command line. This power comes with complicated syntax, unfortunately, but with a little effort you can learn a few useful tricks. </p>
<p class="calibre1">To join the files  <i class="calibre4">one.pdf</i> and  <i class="calibre4">two.pdf</i> into a single PDF file,  <i class="calibre4">combined.pdf</i>:</p>
<p class="calibre1">→ <b class="calibre3">pdftk one.pdf two.pdf cat output combined.pdf</b></p>
<p class="calibre1">To extract pages 5, 7, and 10&ndash;15 from the file  <i class="calibre4">one.pdf</i> and write them to  <i class="calibre4">new.pdf</i>:</p>
<p class="calibre1">→ <b class="calibre3">pdftk one.pdf cat 5 7 10-15 output new.pdf</b></p>
<p class="calibre1">Extract the first five pages from  <i class="calibre4">one.pdf</i> and the odd-numbered pages from  <i class="calibre4">two.pdf</i> and combine them as  <i class="calibre4">combined.pdf</i>:</p>
<p class="calibre1">→ <b class="calibre3">pdftk A=one.pdf B=two.pdf cat A1-5 Bodd output \</b></p>
<p class="calibre1"><b class="calibre3">  combined.pdf</b></p>
<p class="calibre1">Copy the file  <i class="calibre4">one.pdf</i> to  <i class="calibre4">new.pdf</i>, but with page 7 rotated by 90</p>
<p class="calibre1">degrees clockwise (“east”):</p>
<p class="calibre1">→ <b class="calibre3">pdftk one.pdf cat 1-6 7east 8-end output new.pdf</b></p>
<p class="calibre1">Interleave the pages of  <i class="calibre4">one.pdf</i> and  <i class="calibre4">two.pdf</i>, creating  <i class="calibre4">interleaved.pdf</i>:</p>
<p class="calibre1">→ <b class="calibre3">pdftk one.pdf two.pdf shuffle output \</b></p>
<p class="calibre1"><b class="calibre3">  interleaved.pdf</b></p>
<p class="calibre1">You may have noticed that the page selection criteria, typically appearing before the output keyword, are very powerful. They consist of one or more page ranges with qualifiers. A page</p>
<p class="calibre1">range can be a single page like 5, a range like 5-10, or a reverse range like 10-5 (which will reverse the pages in the output). </p>
<p class="calibre1">Qualifiers can remove pages from a range, like 1-100~20-25, </p>
<p class="calibre1">which means “all pages from 1 to 100 except for pages 20 to 25.” </p>
<p class="calibre1">They can also specify only odd pages or even pages, using the keywords odd or even, and rotations using the compass direc-PDF and PostScript File Handling  |  123</p>
<p class="calibre1"><a id="calibre_link-17"></a>tions north, south, east, and west. We’ve only scratched the surface of pdftk’s abilities. The manpage has many more examples and full syntax. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">pdf2ps</b></p>
<p class="calibre1">pdf2ps [ <i class="calibre4">options</i>]  <i class="calibre4">file</i>.pdf [ <i class="calibre4">file</i>.ps]</p>
<p class="calibre1">ps2pdf [ <i class="calibre4">options</i>]  <i class="calibre4">file</i>.ps [ <i class="calibre4">file</i>.pdf]</p>
<p class="calibre1">The pdf2ps command converts an Adobe PDF file into a Post‐</p>
<p class="calibre1">Script file (if you don’t provide an output file name, the default is to use the input filename, with  <i class="calibre4">.pdf</i> replaced by  <i class="calibre4">.ps</i>):</p>
<p class="calibre1">→ <b class="calibre3">pdf2ps sample.pdf converted.ps</b></p>
<p class="calibre1">The command has a couple of options but they are rarely used. </p>
<p class="calibre1">See the manpage if you’re interested. </p>
<p class="calibre1">To go in the opposite direction, converting a PostScript file to PDF format, use ps2pdf:</p>
<p class="calibre1">→ <b class="calibre3">ps2pdf sample.ps converted.pdf</b></p>
<p class="calibre1"><b class="calibre3">Printing</b></p>
<p class="calibre1">lpr</p>
<p class="calibre1">Print a file. </p>
<p class="calibre1">lpq</p>
<p class="calibre1">View the print queue. </p>
<p class="calibre1">lprm Remove a print job from the queue. </p>
<p class="calibre1">Linux has two popular printing systems, called CUPS and</p>
<p class="calibre1">LPRng. Both systems use commands with the same names: lpr, </p>
<p class="calibre1">lpq, and lprm. However, these commands have different</p>
<p class="calibre1">options depending on whether you’re using CUPS or LPRng. </p>
<p class="calibre1">To be generally helpful, we will present common options that work with both systems. </p>
<p class="calibre1">In the past, installing a printer on Linux required editing a cryptic configuration file, such as  <i class="calibre4">/etc/cups/printers.conf</i> or  <i class="calibre4">/etc/</i></p>
<p class="calibre1"><b class="calibre3">124  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-187"></a> <i class="calibre4">printcap</i>. Nowadays, both GNOME and KDE have printer configuration tools in their system settings that generate these files. </p>
<p class="calibre1">To troubleshoot a CUPS printer, visit  <i class="calibre4">http://localhost:631</i> to access your computer’s CUPS management system. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">lpr</b></p>
<p class="calibre1">lpr [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The lpr (line printer) command sends a file to a printer:</p>
<p class="calibre1">→ <b class="calibre3">lpr -P myprinter myfile</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-P  <i class="calibre4">printername </i> Send the file to printer  <i class="calibre4">printername</i>, which you have previously set up. </p>
<p class="calibre1">-#  <i class="calibre4">N</i></p>
<p class="calibre1">Print  <i class="calibre4">N</i> copies of the file. </p>
<p class="calibre1">-J  <i class="calibre4">name</i></p>
<p class="calibre1">Set the job  <i class="calibre4">name</i> that prints on the cover page (if your system is set up to print cover pages). </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">lpq</b></p>
<p class="calibre1">lpq [ <i class="calibre4">options</i>]</p>
<p class="calibre1">The lpq (line printer queue) command lists all print jobs waiting to be printed. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-P  <i class="calibre4">printername </i> List the queue for printer  <i class="calibre4">printername</i>. </p>
<p class="calibre1">-a</p>
<p class="calibre1">List the queue for all printers. </p>
<p class="calibre1">-l</p>
<p class="calibre1">Be verbose: display information in a longer format. </p>
<p class="calibre1"><b class="calibre3">Printing  |  125</b></p>
<p class="calibre1"><a id="calibre_link-18"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">lprm</b></p>
<p class="calibre1">lprm [ <i class="calibre4">options</i>] [ <i class="calibre4">job_IDs</i>]</p>
<p class="calibre1">The lprm (line printer remove) command cancels one or more</p>
<p class="calibre1">print jobs. Use lpq to learn the ID of the desired print jobs (say, 61 and 78), then type:</p>
<p class="calibre1">→ <b class="calibre3">lprm -P  <i class="calibre4">printername</i></b><b class="calibre3"> 61 78</b></p>
<p class="calibre1">If you don’t supply any job IDs, your current print job is canceled. (Only the superuser can cancel other users’ jobs.) The -P</p>
<p class="calibre1">option specifies which print queue contains the job. </p>
<p class="calibre1"><b class="calibre3">Spellchecking</b></p>
<p class="calibre1">look</p>
<p class="calibre1">Look up the spelling of a word quickly. </p>
<p class="calibre1">aspell Interactive spelling checker. </p>
<p class="calibre1">spell</p>
<p class="calibre1">Batch spelling checker. </p>
<p class="calibre1">Linux has several spellcheckers built in. If you’re accustomed to graphical spellcheckers, you might find Linux’s text-based ones fairly primitive, but they can be used in pipelines, which is quite powerful. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">look</b></p>
<p class="calibre1">look [ <i class="calibre4">options</i>]  <i class="calibre4">prefix</i> [ <i class="calibre4">dictionary_file</i>]</p>
<p class="calibre1">The look command prints (on standard output) words that</p>
<p class="calibre1">begin with a given string  <i class="calibre4">prefix</i>. The words are located in a dictionary file (default  <i class="calibre4">/usr/share/dict/words)</i>:</p>
<p class="calibre1">→ <b class="calibre3">look bigg</b></p>
<p class="calibre1">bigger</p>
<p class="calibre1">biggest</p>
<p class="calibre1">Biggs</p>
<p class="calibre1"><b class="calibre3">126  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-103"></a>If you supply your own dictionary file&mdash;any text file with alphabetically sorted lines&mdash;look will print all lines beginning with the given  <i class="calibre4">prefix</i>. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-f</p>
<p class="calibre1">Ignore case. </p>
<p class="calibre1">-t  <i class="calibre4">X </i> Match the prefix only up to and including the termination character  <i class="calibre4">X</i>. For instance, look -t i big prints all words beginning with “bi”. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">aspell</b></p>
<p class="calibre1">aspell [ <i class="calibre4">options</i>]  <i class="calibre4">file</i> |  <i class="calibre4">command</i></p>
<p class="calibre1">aspell is an interactive spellchecker. It identifies words that it doesn’t recognize and presents alternatives. A few useful commands are:</p>
<p class="calibre1">aspell -c <i class="calibre4"> file</i></p>
<p class="calibre1">Interactively check, and optionally correct, the spelling of all words in file. </p>
<p class="calibre1">aspell dump master</p>
<p class="calibre1">Print aspell’s master dictionary on standard output. </p>
<p class="calibre1">aspell help</p>
<p class="calibre1">Prin<a href="http://aspell.net">t a concise help message. See  <i class="calibre4">http://aspell.net</i></a> for more information. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   -file   --opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">spell</b></p>
<p class="calibre1">spell [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The spell command prints all words in the given files that are misspelled, according to its dictionary (it is not interactive):</p>
<p class="calibre1">→ <b class="calibre3">cat badwords</b></p>
<p class="calibre1">This Linux file has some spelling errors. </p>
<p class="calibre1"><b class="calibre3">Spellchecking  |  127</b></p>
<p class="calibre1"><a id="calibre_link-19"></a>You may naturaly wonder if a spelling checker will pick them up. Careful Linuxx users should</p>
<p class="calibre1">run thier favorite spelling checker on this file. </p>
<p class="calibre1">→ <b class="calibre3">spell badwords</b></p>
<p class="calibre1">naturaly</p>
<p class="calibre1">Linuxx</p>
<p class="calibre1">thier</p>
<p class="calibre1"><b class="calibre3">Disks and Filesystems</b></p>
<p class="calibre1">df</p>
<p class="calibre1">Display available space on mounted filesystems. </p>
<p class="calibre1">mount</p>
<p class="calibre1">Make a disk partition accessible. </p>
<p class="calibre1">umount Unmount a disk partition (make it inaccessible). </p>
<p class="calibre1">fsck</p>
<p class="calibre1">Check a disk partition for errors. </p>
<p class="calibre1">eject</p>
<p class="calibre1">Eject a CD, DVD, or other removable disk. </p>
<p class="calibre1">Linux systems can have multiple disks or disk partitions. In casual conversation, these are variously called disks, partitions, filesystems, volumes, even directories. We’ll try to be more accurate. </p>
<p class="calibre1">A  <i class="calibre4">disk</i> is a hardware device, which may be divided into  <i class="calibre4">partitions</i> that act as independent storage devices. Partitions are represented on Linux systems as special files in (usually) the directory  <i class="calibre4">/dev</i>. For example,  <i class="calibre4">/dev/sda7</i> could be a partition on your hard drive. Some common devices in  <i class="calibre4">/dev</i> are:</p>
<p class="calibre1"> <i class="calibre4">sda </i> First block device, such as SCSI, SATA, USB, or FireWire hard drives; partitions are  <i class="calibre4">sda1</i>,  <i class="calibre4">sda2</i>, ... </p>
<p class="calibre1"> <i class="calibre4">sdb </i> Second block device; partitions are  <i class="calibre4">sdb1</i>,  <i class="calibre4">sdb2</i>, ... Likewise for  <i class="calibre4">sdc</i>,  <i class="calibre4">sdd</i>, ... </p>
<p class="calibre1"> <i class="calibre4">scd0 </i> First SCSI CD-ROM drive (then  <i class="calibre4">scd1</i>,  <i class="calibre4">scd2</i>, ...) Before a partition can hold files, it is “formatted” by a program that writes a  <i class="calibre4">filesystem</i> on it (see <a href="#calibre_link-73">“Partitioning and Formatting” </a></p>
<p class="calibre1"><a href="#calibre_link-73">on page 129). A filesystem defines how files are represen</a>ted; examples are ext3 (a Linux journaling filesystem) and ntfs</p>
<p class="calibre1"><b class="calibre3">128  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-73"></a>(Microsoft Windows NT filesystem). Formatting is generally done for you when you install Linux. </p>
<p class="calibre1">Once a filesystem is created, you can make it available for use by  <i class="calibre4">mounting</i> it on an empty directory. <a href="#calibre_link-73">15 F</a>or example, if you mount a Windows filesystem on a directory  <i class="calibre4">/mnt/win</i>, it becomes part of your system’s directory tree, and you can create and edit files like  <i class="calibre4">/mnt/win/myfile</i>. Mounting is generally done automatically at boot time. Filesystems can also be</p>
<p class="calibre1">unmounted to make them inaccessible via the filesystem, say, for maintenance. </p>
<p class="calibre1"><b class="calibre3">Partitioning and Formatting</b></p>
<p class="calibre1">Disk-related operations like partitioning and formatting can be complex on Linux systems. Here are pointers to the programs</p>
<p class="calibre1">you may need (start with their manpages):</p>
<p class="calibre1">gparted <i class="calibre4">, </i> parted <i class="calibre4">, </i> fdisk <i class="calibre4">, or </i> sfdisk Partition a hard drive. Any of these programs will work in</p>
<p class="calibre1">most cases. gparted has the simplest user interface. </p>
<p class="calibre1">mkfs</p>
<p class="calibre1">Format a hard disk (i.e., create a new filesystem). </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">df</b></p>
<p class="calibre1">df [ <i class="calibre4">options</i>] [ <i class="calibre4">disk devices</i> |  <i class="calibre4">files</i> |  <i class="calibre4">directories</i>]</p>
<p class="calibre1">The df (disk free) program shows you the size, used space, and free space on a given disk partition. If you supply a file or directory, df describes the disk device on which that file or 15 You can mount a filesystem on a nonempty directory, but the directory’s contents will become inaccessible until you unmount. </p>
<p class="calibre1"><b class="calibre3">Disks and Filesystems  |  129</b></p>
<p class="calibre1"><a id="calibre_link-142"></a>directory resides. With no arguments, df reports on all mounted filesystems:</p>
<p class="calibre1">→ <b class="calibre3">df</b></p>
<p class="calibre1">Filesystem 1k-blocks    Used    Avail Use% Mounted on</p>
<p class="calibre1">/dev/sda     1011928  225464   735060  24% /</p>
<p class="calibre1">/dev/sda9     521748  249148   246096  51% /var</p>
<p class="calibre1">/dev/sda8    8064272 4088636  3565984  54% /usr</p>
<p class="calibre1">/dev/sda10   8064272 4586576  3068044  60% /home</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-k</p>
<p class="calibre1">List sizes in kilobytes (the default). </p>
<p class="calibre1">-m</p>
<p class="calibre1">List sizes in megabytes. </p>
<p class="calibre1">-B  <i class="calibre4">N</i></p>
<p class="calibre1">Display sizes in blocks of  <i class="calibre4">N </i> bytes. (Default = 1024)</p>
<p class="calibre1">-h</p>
<p class="calibre1">Print human-readable output, and choose the most appropriate unit</p>
<p class="calibre1">-H</p>
<p class="calibre1">for each size. For example, if your two disks have 1 gigabyte and 25</p>
<p class="calibre1">kilobytes free, respectively, df -h prints 1G and 25K. The -h option uses powers of 1024, whereas -H uses powers of 1000. </p>
<p class="calibre1">-l</p>
<p class="calibre1">Display only local filesystems, not networked filesystems. </p>
<p class="calibre1">-T</p>
<p class="calibre1">Include the filesystem type (ext3, vfat, etc.) in the output. </p>
<p class="calibre1">-t  <i class="calibre4">type </i> Display only filesystems of the given type. </p>
<p class="calibre1">-x  <i class="calibre4">type </i> Don’t display filesystems of the given type. </p>
<p class="calibre1">-i</p>
<p class="calibre1">Inode mode. Display total, used, and free inodes for each filesystem, instead of disk blocks. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">mount</b></p>
<p class="calibre1">mount [ <i class="calibre4">options</i>]  <i class="calibre4">device</i> |  <i class="calibre4">directory</i></p>
<p class="calibre1">The mount command makes a partition accessible. Most com‐</p>
<p class="calibre1">monly it handles disk drives (say,  <i class="calibre4">/dev/sda1</i>) and removable media (e.g., USB keys), making them accessible via an existing directory (say,  <i class="calibre4">/mnt/mydir</i>):</p>
<p class="calibre1"><b class="calibre3">130  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-244"></a>→ <b class="calibre3">sudo mkdir /mnt/mydir</b></p>
<p class="calibre1">→ <b class="calibre3">ls /mnt/mydir</b>                  <i class="calibre4">Notice it’s empty</i></p>
<p class="calibre1">→ <b class="calibre3">sudo mount /dev/sda1 /mnt/mydir</b></p>
<p class="calibre1">→ <b class="calibre3">ls /mnt/mydir</b></p>
<p class="calibre1">file1  file2  file3      <i class="calibre4">Files on the mounted partition</i></p>
<p class="calibre1">→ <b class="calibre3">df /mnt/mydir</b></p>
<p class="calibre1">Filesystem 1K-blocks   Used  Avail Use% Mounted on</p>
<p class="calibre1">/dev/sda1    1011928 285744 674780  30% /mnt/mydir</p>
<p class="calibre1">mount has tons of options and uses; we will discuss only the most basic. </p>
<p class="calibre1">In most common cases, mount reads the file  <i class="calibre4">/etc/fstab</i> (filesystem table) to learn how to mount a desired disk. For example, if you type mount /usr, the mount command looks up “/usr” </p>
<p class="calibre1">in  <i class="calibre4">/etc/fstab</i>, whose line might look like this:</p>
<p class="calibre1">/dev/sda8    /usr    ext3    defaults    1    2</p>
<p class="calibre1">Here mount learns, among other things, that disk device  <i class="calibre4">/dev/</i></p>
<p class="calibre1"> <i class="calibre4">sda8</i> should be mounted on  <i class="calibre4">/usr</i> as a Linux ext3-formatted filesystem. Now you can mount  <i class="calibre4">/dev/sda8</i> on  <i class="calibre4">/usr</i> with either of these commands:</p>
<p class="calibre1">→ <b class="calibre3">sudo mount /dev/sda8</b>      <i class="calibre4">By device</i></p>
<p class="calibre1">→ <b class="calibre3">sudo mount /usr</b>           <i class="calibre4">By directory</i></p>
<p class="calibre1">mount is run typically by the superuser, but common removable devices like USB keys and DVDs often can be mounted and</p>
<p class="calibre1">unmounted by any user. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-t  <i class="calibre4">type </i> Specify the type of filesystem, such as ext3 or ntfs. </p>
<p class="calibre1">-l</p>
<p class="calibre1">List all mounted filesystems; works with -t too. </p>
<p class="calibre1">-a</p>
<p class="calibre1">Mount all filesystems listed in  <i class="calibre4">/etc/fstab</i>. Ignores entries that include the noauto option. Works well with -t too. </p>
<p class="calibre1">-r</p>
<p class="calibre1">Mount the filesystem read-only (but see the manpage for some disclaimers). </p>
<p class="calibre1"><b class="calibre3">Disks and Filesystems  |  131</b></p>
<p class="calibre1"><a id="calibre_link-74"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">umount</b></p>
<p class="calibre1">umount [ <i class="calibre4">options</i>] [ <i class="calibre4">device</i> |  <i class="calibre4">directory</i>]</p>
<p class="calibre1">umount does the opposite of mount: it makes a disk partition una<a href="#calibre_link-74">vailable via the filesystem.16 </a>For instance, if you’ve mounted a DVD, you can’t eject it until it’s umounted:</p>
<p class="calibre1">→ <b class="calibre3">umount "/media/smith/My Vacation Photos" </b></p>
<p class="calibre1">Always unmount a removable medium before ejecting it, par‐</p>
<p class="calibre1">ticularly if it’s writable, or you risk damage to its filesystem. To unmount all mounted devices:</p>
<p class="calibre1">→ <b class="calibre3">sudo umount -a</b></p>
<p class="calibre1">Don’t unmount a filesystem that’s in use; in fact, the umount command will refuse to do so for safety reasons. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">fsck</b></p>
<p class="calibre1">fsck [ <i class="calibre4">options</i>] [ <i class="calibre4">devices</i>]</p>
<p class="calibre1">The fsck (filesystem check) command validates a Linux disk</p>
<p class="calibre1">partition and, if requested, repairs errors found on it. fsck is run automatically when your system boots; however, you can</p>
<p class="calibre1">run it manually if you like. In general, unmount a device before checking it, so no other programs are operating on it at the same time:</p>
<p class="calibre1">→ <b class="calibre3">sudo umount /dev/sda10</b></p>
<p class="calibre1">→ <b class="calibre3">sudo fsck -f /dev/sda10</b></p>
<p class="calibre1">Pass 1: Checking inodes, blocks, and sizes</p>
<p class="calibre1">Pass 2: Checking directory structure</p>
<p class="calibre1">Pass 3: Checking directory connectivity</p>
<p class="calibre1">Pass 4: Checking reference counts</p>
<p class="calibre1">16 Notice the spelling is “umount,” not “unmount.” </p>
<p class="calibre1"><b class="calibre3">132  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-161"></a>Pass 5: Checking group summary information</p>
<p class="calibre1">/home: 172/1281696 files (11.6% non-contiguous), ... </p>
<p class="calibre1">You cannot use fsck to fix your root filesystem while your system is running normally. You’ll need to boot first on a Linux CD, DVD, or other rescue media. </p>
<p class="calibre1">fsck is a frontend for a set of filesystem-checking programs found in  <i class="calibre4">/sbin</i>, with names beginning “fsck”. Only certain types of filesystems are supported; you can list them with the command:</p>
<p class="calibre1">→ <b class="calibre3">ls /sbin/fsck.* | cut -d. -f2</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-A Check all disks listed in  <i class="calibre4">/etc/fstab</i>, in order. </p>
<p class="calibre1">-N Print a description of the checking that would be done, but exit without performing any checking. </p>
<p class="calibre1">-r Fix errors interactively, prompting before each fix. </p>
<p class="calibre1">-a Fix errors automatically (use only if you  <i class="calibre4">really</i> know what you’re doing; if not, you can seriously mess up a filesystem). </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">eject</b></p>
<p class="calibre1">eject [ <i class="calibre4">options</i>] [ <i class="calibre4">device_name</i>]</p>
<p class="calibre1">The eject command does the same thing as pressing the open/</p>
<p class="calibre1">close button on a removable drive, such as a CD-ROM or DVD</p>
<p class="calibre1">drive. It’s handy for ejecting a disc when you’re physically away from the computer. Of course, the media must be in a state</p>
<p class="calibre1">where ejection is possible. </p>
<p class="calibre1">→ <b class="calibre3">eject</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-h</p>
<p class="calibre1">Display a help message. </p>
<p class="calibre1"><b class="calibre3">Disks and Filesystems  |  133</b></p>
<p class="calibre1"><a id="calibre_link-20"></a>-n</p>
<p class="calibre1">Don’t eject anything, just say what would be done. Combine with -v for a detailed description. </p>
<p class="calibre1">-v</p>
<p class="calibre1">Produce verbose output. </p>
<p class="calibre1">-d</p>
<p class="calibre1">Print the name of the default device to be ejected, such as /dev/</p>
<p class="calibre1">cdrom, and exit. </p>
<p class="calibre1">-c  <i class="calibre4">N </i> Eject disc  <i class="calibre4">N</i> from a multi-disc changer. </p>
<p class="calibre1"><b class="calibre3">Backups and Remote Storage</b></p>
<p class="calibre1">rsync</p>
<p class="calibre1">Efficiently copy a set of files, even across a network. </p>
<p class="calibre1">dd</p>
<p class="calibre1">Low-level copying of data. </p>
<p class="calibre1">growisofs Burn a DVD or Blu-ray disc. </p>
<p class="calibre1">There are various way to back up your precious Linux files:</p>
<p class="calibre1">• Copy them to a backup medium, such as an external</p>
<p class="calibre1">hard drive. </p>
<p class="calibre1">• Burn them onto a writable CD, DVD, or Blu-ray disc. </p>
<p class="calibre1">• Mirror them to a remote machine. </p>
<p class="calibre1">We aren’t presenting every available Linux command for back‐</p>
<p class="calibre1">ups. Some users prefer cpio for its flexibility, and some long-time administrators swear by dump and restore as the only reliable way to back up every type of file. See the manpages for these programs if you are interested in them. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">rsync</b></p>
<p class="calibre1">rsync [ <i class="calibre4">options</i>]  <i class="calibre4">source destination</i></p>
<p class="calibre1">The rsync command copies a set of files. It can make an exact copy, including file permissions and other attributes (called <i class="calibre4">mirroring</i>), or it can just copy the data. It can run over a network or on a single machine. rsync has many uses and over 50</p>
<p class="calibre1"><b class="calibre3">134  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-209"></a>options; we’ll present just a few common cases relating to backups. </p>
<p class="calibre1">To mirror the directory  <i class="calibre4">mydir</i> and its contents into another directory  <i class="calibre4">mydir2</i> on a single machine:</p>
<p class="calibre1">→ <b class="calibre3">rsync -a mydir mydir2</b></p>
<p class="calibre1">rsync is finicky about how you specify the first directory. If you write mydir as in the example here, that directory will be copied <i class="calibre4">into</i>  <i class="calibre4">mydir2</i>, creating  <i class="calibre4">mydir2/mydir</i>. That might not be what you want. If you’d rather have the  <i class="calibre4">contents</i> of  <i class="calibre4">mydir</i> copied into <i class="calibre4">mydir2</i>, append a slash onto mydir:</p>
<p class="calibre1">→ <b class="calibre3">rsync -a mydir/ mydir2</b></p>
<p class="calibre1">In order to mirror directory  <i class="calibre4">mydir</i> over the network to another host,  <i class="calibre4">server.example.com</i>, where you have an account with username “smith.” rsync automatically secures the connection with SSH to prevent eavesdropping:</p>
<p class="calibre1">→ <b class="calibre3">rsync -a mydir smith@server.example.com:D2</b></p>
<p class="calibre1">If you like working with rsync but want to have incremental</p>
<p class="calibre1">backups and manage them efficiently, look into rsnapshot</p>
<p class="calibre1">(<a href="http://rsnapshot.org/"> <i class="calibre4">http://rsnapshot.org/</i>). </a></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-o Copy the ownership of the files. (You might need superuser privileges on the remote host.)</p>
<p class="calibre1">-g Copy the group ownership of the files. (You might need superuser privileges on the remote host.)</p>
<p class="calibre1">-p Copy the file permissions. </p>
<p class="calibre1">-t Copy the file timestamps. </p>
<p class="calibre1">-r Copy directories recursively (i.e., including their contents). </p>
<p class="calibre1">-l Permit symbolic links to be copied (not the files they point to). </p>
<p class="calibre1">-D Permit devices to be copied. (Superuser only.)</p>
<p class="calibre1"><b class="calibre3">Backups and Remote Storage  |  135</b></p>
<p class="calibre1"><a id="calibre_link-140"></a>-a Mirroring: copy all attributes of the original files. This implies all of the options -ogptrlD. </p>
<p class="calibre1">-x When copying a tree of files, remain within the current filesystem; do not cross over into other mounted filesystems. </p>
<p class="calibre1">-n Dry-run mode: don’t actually do any copying. Just display what  <i class="calibre4">would</i> be done. </p>
<p class="calibre1">-v Verbose mode: print information about what’s happening during the copy. </p>
<p class="calibre1">Add --progress to display a numeric progress meter while files are copied. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">dd</b></p>
<p class="calibre1">dd [ <i class="calibre4">options</i>]</p>
<p class="calibre1">dd is a low-level copier of bits and bytes. It can copy data from one file to another, say, from  <i class="calibre4">file1</i> to  <i class="calibre4">file2</i>:</p>
<p class="calibre1">→ <b class="calibre3">dd if=fileA of=fileC</b></p>
<p class="calibre1">7+1 records in</p>
<p class="calibre1">7+1 records out</p>
<p class="calibre1">3816 bytes (3.8 kB) copied, 0.000356028 s, 10.7 MB/s</p>
<p class="calibre1">and it can even perform data conversions while it copies. For example, you can convert all characters to uppercase as you</p>
<p class="calibre1">transfer data between files:</p>
<p class="calibre1">→ <b class="calibre3">dd if=fileA of=filecaps conv=ucase</b></p>
<p class="calibre1">7+1 records in</p>
<p class="calibre1">7+1 records out</p>
<p class="calibre1">3816 bytes (3.8 kB) copied, 0.000389499 s, 9.8 MB/s</p>
<p class="calibre1">dd does much more than copying files, however. It can clone a disk by copying from one device to another ( <i class="calibre4">Warning! This wil</i> <i class="calibre4">DESTROY all data on the destination device!)</i>:</p>
<p class="calibre1">→ <b class="calibre3">sudo dd if=/dev/device1 of=/dev/device2 bs=512 \</b></p>
<p class="calibre1"><b class="calibre3">  conv=noerror,sync</b></p>
<p class="calibre1"><b class="calibre3">136  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-109"></a>dd is simple in the sense that it does one thing very well&mdash;moving bits&mdash;but it’s also complex because if you’re not careful, you can  <i class="calibre4">wipe out your hard drive</i> in seconds. Back up your computer and keep a Linux “live” DVD on hand (see <a href="#calibre_link-1">“What’s in</a></p>
<p class="calibre1"><a href="#calibre_link-1">This Book?” on page 1) before pla</a>ying around with dd as the superuser. </p>
<p class="calibre1">V<a href="https://wiki.archlinux.org/index.php/Disk_cloning">isit  <i class="calibre4">https://wiki.archlinux.org/index.php/Disk_cloning</i></a> for some great advice on sophisticated uses of dd. My favorite is copying just the master boot record (MBR) from a disk, where the MBR</p>
<p class="calibre1">is 512 bytes long, to a file called  <i class="calibre4">mybootrecord</i>:</p>
<p class="calibre1">→ <b class="calibre3">sudo dd if=/dev/ <i class="calibre4">device</i></b><b class="calibre3"> of=mybootrecord bs=512 \</b> <b class="calibre3">  count=1</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">if= <i class="calibre4">file</i></p>
<p class="calibre1">Specify an input file or device. </p>
<p class="calibre1">of= <i class="calibre4">file</i></p>
<p class="calibre1">Specify an output file or device. </p>
<p class="calibre1">bs= <i class="calibre4">N</i></p>
<p class="calibre1">Copy  <i class="calibre4">N </i> bytes at a time, known as the “block size.” (To set the block size differently for the input and the output, use ibs and obs, respectively.)</p>
<p class="calibre1">skip= <i class="calibre4">N</i></p>
<p class="calibre1">Skip past  <i class="calibre4">N </i> blocks of input before starting the copy. </p>
<p class="calibre1">seek= <i class="calibre4">N</i></p>
<p class="calibre1">Discard  <i class="calibre4">N </i> blocks of output before starting the copy. </p>
<p class="calibre1">conv= <i class="calibre4">spec </i> Convert the data being copied.  <i class="calibre4">spec</i> can be ucase (convert to uppercase), lcase (convert to lowercase), ascii (convert to</p>
<p class="calibre1">ASCII from EBCDIC), and many others listed on the manpage. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">growisofs</b></p>
<p class="calibre1">growisofs [ <i class="calibre4">options</i>]  <i class="calibre4">tracks</i></p>
<p class="calibre1">The growisofs command burns a writable CD, DVD, or Blu-</p>
<p class="calibre1">ray disc. To burn the contents of a Linux directory onto a disc readable on Linux, Windows, and Mac OS X systems:</p>
<p class="calibre1"><b class="calibre3">Backups and Remote Storage  |  137</b></p>
<p class="calibre1"><a id="calibre_link-21"></a>1. Locate your disc writer’s device by running:</p>
<p class="calibre1">→ <b class="calibre3">more /proc/sys/dev/cdrom/info</b></p>
<p class="calibre1">CD-ROM information, Id: cdrom.c 3.20 2003/12/17</p>
<p class="calibre1">drive name:             sr1     sr0</p>
<p class="calibre1">drive speed:            48      12</p>
<p class="calibre1">drive # of slots:       1       1</p>
<p class="calibre1">Can close tray:         1       1</p>
<p class="calibre1">Can open tray:          1       1</p>
<p class="calibre1">... </p>
<p class="calibre1">The available devices here are  <i class="calibre4">/dev/sr1</i> and  <i class="calibre4">/dev/sr0</i>. </p>
<p class="calibre1">2. Put the files you want to burn into a directory, say,  <i class="calibre4">dir</i>. </p>
<p class="calibre1">Arrange them exactly as you’d like them on the disc. The</p>
<p class="calibre1">directory  <i class="calibre4">dir</i> itself will not be copied to the disc, just its contents. </p>
<p class="calibre1">3. Use the mkisofs command to create an ISO (disc) image</p>
<p class="calibre1">file, and burn it onto a disc using growisofs, assuming</p>
<p class="calibre1">your device is  <i class="calibre4">/dev/sr1</i>:</p>
<p class="calibre1">→ <b class="calibre3">mkisofs -R -l -o $HOME/mydisk.iso dir</b></p>
<p class="calibre1">→ <b class="calibre3">growisofs -dvd-compat -Z /dev/sr1=$HOME/mydisk.iso</b></p>
<p class="calibre1">→ <b class="calibre3">rm $HOME/mydisk.iso</b></p>
<p class="calibre1">If you want to burn audio CDs, use a friendlier, graphical program like k3b instead. </p>
<p class="calibre1"><b class="calibre3">Viewing Processes</b></p>
<p class="calibre1">ps</p>
<p class="calibre1">List process. </p>
<p class="calibre1">uptime View the system load. </p>
<p class="calibre1">w</p>
<p class="calibre1">List active processes for all users. </p>
<p class="calibre1">top</p>
<p class="calibre1">Monitor resource-intensive processes interactively. </p>
<p class="calibre1">free</p>
<p class="calibre1">Display free memory. </p>
<p class="calibre1">A  <i class="calibre4">process</i> is a unit of work on a Linux system. Each program you run represents one or more processes, and Linux provides <b class="calibre3">138  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-207"></a>commands for viewing and manipulating them. Every process is identified by a numeric  <i class="calibre4">process ID</i>, or PID. </p>
<p class="calibre1">Processes are differen<a href="#calibre_link-60">t from jobs (see “Shell Job Control” on</a></p>
<p class="calibre1"><a href="#calibre_link-60">page 39): processes are part of the opera</a>ting system, whereas jobs are higher-level constructs known only to the shell in</p>
<p class="calibre1">which they’re running. A running program comprises one or</p>
<p class="calibre1">more processes; a job consists of one or more programs exe‐</p>
<p class="calibre1">cuted as a shell command. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ps</b></p>
<p class="calibre1">ps [ <i class="calibre4">options</i>]</p>
<p class="calibre1">The ps command displays information about your running</p>
<p class="calibre1">processes, and optionally the processes of other users:</p>
<p class="calibre1">→ <b class="calibre3">ps</b></p>
<p class="calibre1">PID TTY          TIME CMD</p>
<p class="calibre1">4706 pts/2    00:00:01 bash</p>
<p class="calibre1">15007 pts/2    00:00:00 emacs</p>
<p class="calibre1">16729 pts/2    00:00:00 ps</p>
<p class="calibre1">ps has at least 80 options; we’ll cover just a few useful combina-tions. If the options seem arbitrary or inconsistent, it’s because the supplied ps command (GNU ps) incorporates the features</p>
<p class="calibre1">of several other Unix ps commands, attempting to be compati‐</p>
<p class="calibre1">ble with all of them. </p>
<p class="calibre1">To view your processes:</p>
<p class="calibre1">→ <b class="calibre3">ps -ux</b></p>
<p class="calibre1">all of user “smith’s” processes:</p>
<p class="calibre1">→ <b class="calibre3">ps -U smith</b></p>
<p class="calibre1">all occurrences of a program:</p>
<p class="calibre1">→ <b class="calibre3">ps -C  <i class="calibre4">program_name</i></b></p>
<p class="calibre1">processes on terminal  <i class="calibre4">N</i>:</p>
<p class="calibre1"><b class="calibre3">Viewing Processes  |  139</b></p>
<p class="calibre1"><a id="calibre_link-180"></a>→ <b class="calibre3">ps -t <i class="calibre4">N</i></b></p>
<p class="calibre1">particular processes 1, 2, and 3505:</p>
<p class="calibre1">→ <b class="calibre3">ps -p1,2,3505</b></p>
<p class="calibre1">all processes with command lines truncated to screen width:</p>
<p class="calibre1">→ <b class="calibre3">ps -ef</b></p>
<p class="calibre1">all processes with full command lines:</p>
<p class="calibre1">→ <b class="calibre3">ps -efww</b></p>
<p class="calibre1">and all processes in a threaded view, which indents child processes below their parents:</p>
<p class="calibre1">→ <b class="calibre3">ps -efH</b></p>
<p class="calibre1">Remember, you can extract information more finely from the</p>
<p class="calibre1">output of ps using grep and other filter programs:</p>
<p class="calibre1">→ <b class="calibre3">ps -ux | grep myprogram</b></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">uptime</b></p>
<p class="calibre1">uptime</p>
<p class="calibre1">The uptime command tells you how long the system has been</p>
<p class="calibre1">running since the last boot:</p>
<p class="calibre1">→ <b class="calibre3">uptime</b></p>
<p class="calibre1">10:54pm up 8 days, 3:44, 3 users, </p>
<p class="calibre1">load average: 0.89, 1.00, 2.15</p>
<p class="calibre1">This information is, from beginning to end: the current time (10:54pm), system uptime (8 days, 3 hours, 44 minutes), number of users logged in (3), and system load average for three time periods: one minute (0.89), five minutes (1.00), and fifteen minutes (2.15). The load average is the average number of processes ready to run in that time interval. </p>
<p class="calibre1"><b class="calibre3">140  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-219"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">w</b></p>
<p class="calibre1">w [ <i class="calibre4">username</i>]</p>
<p class="calibre1">The w command displays the current process running in each</p>
<p class="calibre1">shell for all logged-in users:</p>
<p class="calibre1">→ <b class="calibre3">w</b></p>
<p class="calibre1">10:51pm  up 8 days,  3:42,  8 users, </p>
<p class="calibre1">load average: 2.02, 3.79, 5.44</p>
<p class="calibre1">USER    TTY   FROM  LOGIN@  IDLE   JCPU   PCPU  WHAT</p>
<p class="calibre1">barrett pts/0 :0    Sat 2pm 27:13m 0.07s  0.07s emacs</p>
<p class="calibre1">jones   pts/1 host1 6Sep03   2:33m 0.74s  0.21s bash</p>
<p class="calibre1">smith   pts/2 host2 6Sep03   0.00s 13.35s 0.04s w</p>
<p class="calibre1">The top line is the same one printed by uptime. The columns</p>
<p class="calibre1">indicate the user’s terminal, originating host or X display (if applicable), login time, idle time, two measures of the CPU</p>
<p class="calibre1">time (run man w for details), and the current process. Provide a username to see only that user’s information. </p>
<p class="calibre1">For the briefest output, try w -hfs. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-h Don’t print the header line. </p>
<p class="calibre1">-f Don’t print the FROM column. </p>
<p class="calibre1">-s Don’t print the JCPU and PCPU columns. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">top</b></p>
<p class="calibre1">top [ <i class="calibre4">options</i>]</p>
<p class="calibre1">The top command lets you monitor the most active processes, </p>
<p class="calibre1">updating the display at regular intervals (say, every second). It is a screen-based program that updates the display in place, interactively:</p>
<p class="calibre1"><b class="calibre3">Viewing Processes  |  141</b></p>
<p class="calibre1"><a id="calibre_link-179"></a>→ <b class="calibre3">top</b></p>
<p class="calibre1">94 processes: 81 sleeping, 1 running, 0 zombie, </p>
<p class="calibre1">11 stopped</p>
<p class="calibre1">CPU states: 1.1% user, 0.5% system, 0.0% nice, </p>
<p class="calibre1">4.5% idle</p>
<p class="calibre1">Mem: 523812K av, 502328K used, 21484K free, ... </p>
<p class="calibre1">Swap:  530104K av,  0K used, 530104K free</p>
<p class="calibre1">115300K cached</p>
<p class="calibre1">PID   USER PRI NI SIZE SHARE STAT %CPU %MEM TIME CMD</p>
<p class="calibre1">26265 smith 10 0  1092  840  R    4.7  0.2  0:00 top</p>
<p class="calibre1">1 root   0 0   540  472  S    0.0  0.1  0:07 init</p>
<p class="calibre1">914 www    0 0     0    0  SW   0.0  0.0  0:00 httpd</p>
<p class="calibre1">... </p>
<p class="calibre1">While top is running, you can press keys to change its behavior, such as setting the update speed (s), hiding idle processes (i), or killing processes (k). Type h to see a complete list and q to quit. For similar programs to monitor your system’s I/O and</p>
<p class="calibre1">network bandwidth, try iotop and iftop. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n <i class="calibre4">N</i></p>
<p class="calibre1">Perform  <i class="calibre4">N </i> updates, then quit. </p>
<p class="calibre1">-d <i class="calibre4">N</i></p>
<p class="calibre1">Update the display every  <i class="calibre4">N </i> seconds. </p>
<p class="calibre1">-p <i class="calibre4">N</i> -p <i class="calibre4">M</i> ... Display only the processes with PID  <i class="calibre4">N</i>,  <i class="calibre4">M</i>, ..., up to 20 processes. </p>
<p class="calibre1">-c</p>
<p class="calibre1">Display the command-line arguments of processes. </p>
<p class="calibre1">-b</p>
<p class="calibre1">Print on standard output noninteractively, without playing</p>
<p class="calibre1">screen tricks. top -b -n1 &gt; outfile saves a quick</p>
<p class="calibre1">snapshot to a file. </p>
<p class="calibre1"><b class="calibre3">142  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-22"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">free</b></p>
<p class="calibre1">free [ <i class="calibre4">options</i>]</p>
<p class="calibre1">The free command displays memory usage in kilobytes:</p>
<p class="calibre1">→ <b class="calibre3">free</b></p>
<p class="calibre1">total    used    free shared buffers cached</p>
<p class="calibre1">Mem:  523812  491944   31868      0   67856 199276</p>
<p class="calibre1">-/+ buffers/cache: 224812  299000 </p>
<p class="calibre1">Swap: 530104       0  530104</p>
<p class="calibre1">The Linux kernel reserves as much memory as possible for</p>
<p class="calibre1">caching purposes, so your best estimate of free RAM in the preceding output is in the buffers/cache row, free column (i.e., 299000K). </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-s  <i class="calibre4">N </i> Run continuously and update the display every  <i class="calibre4">N </i> seconds. </p>
<p class="calibre1">-b</p>
<p class="calibre1">Display amounts in bytes. </p>
<p class="calibre1">-m</p>
<p class="calibre1">Display amounts in megabytes. </p>
<p class="calibre1">-t</p>
<p class="calibre1">Add a totals row at the bottom. </p>
<p class="calibre1">-o</p>
<p class="calibre1">Don’t display the “buffers/cache” row. </p>
<p class="calibre1"><b class="calibre3">Controlling Processes</b></p>
<p class="calibre1">kill</p>
<p class="calibre1">Terminate a process (or send it a signal). </p>
<p class="calibre1">timeout Kill a command that runs for too long. </p>
<p class="calibre1">nice</p>
<p class="calibre1">Invoke a program at a particular priority. </p>
<p class="calibre1">renice</p>
<p class="calibre1">Change a process’s priority as it runs. </p>
<p class="calibre1">flock</p>
<p class="calibre1">Ensure that only one copy of a process runs at the same time, using locks. </p>
<p class="calibre1">Once processes are started, they can be stopped, restarted, killed, and reprioritized. We discussed some of these operations as <b class="calibre3">Controlling Processes  |  143</b></p>
<p class="calibre1"><a id="calibre_link-124"></a>handled by the shell in <a href="#calibre_link-60">“Shell Job Control” on page 39</a>. Now we cover killing and reprioritizing. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">kill</b></p>
<p class="calibre1">kill [ <i class="calibre4">options</i>] [ <i class="calibre4">process_ids</i>]</p>
<p class="calibre1">The kill command sends a signal to a process. This can terminate a process (the default action), interrupt it, suspend it, crash it, and so on. You must own the process, or be the superuser, to affect it. To terminate process 13243, for example, run:</p>
<p class="calibre1">→ <b class="calibre3">kill 13243</b></p>
<p class="calibre1">If this does not work&mdash;some programs catch this signal without terminating&mdash;add the -KILL or (equivalently) -9 option:</p>
<p class="calibre1">→ <b class="calibre3">kill -KILL 13243</b></p>
<p class="calibre1">which is virtually guaranteed to work. However, this is not a clean exit for the program, which may leave resources allocated (or cause other inconsistencies) upon its death. </p>
<p class="calibre1">If you don’t know the PID of a process, run ps and examine the output:</p>
<p class="calibre1">→ <b class="calibre3">ps -uax | grep emacs</b></p>
<p class="calibre1">or even better, try the pidof command, which looks up and</p>
<p class="calibre1">prints the PID of a process by its name:</p>
<p class="calibre1">→ <b class="calibre3">pidof emacs</b></p>
<p class="calibre1">8374</p>
<p class="calibre1">Now you can kill a process knowing only its program name in</p>
<p class="calibre1">a single line, using shell backquotes to execute pidof:</p>
<p class="calibre1">→ <b class="calibre3">kill `pidof emacs`</b></p>
<p class="calibre1">Or use the killall command to kill all processes for a given program:</p>
<p class="calibre1">→ <b class="calibre3">killall emacs</b></p>
<p class="calibre1"><b class="calibre3">144  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-218"></a>In addition to the kill program in the filesystem (usually  <i class="calibre4">/bin/</i></p>
<p class="calibre1"> <i class="calibre4">kil </i>), most shells have built-in kill commands, but their syntax and behavior differ. However, they all support the following usage:</p>
<p class="calibre1">→ <b class="calibre3">kill - <i class="calibre4">N PID</i></b></p>
<p class="calibre1">→ <b class="calibre3">kill - <i class="calibre4">NAME PID</i></b></p>
<p class="calibre1">where  <i class="calibre4">N</i> is a signal number, and  <i class="calibre4">NAME</i> is a signal name without its leading “SIG” (e.g., use -HUP to send the SIGHUP signal). To see a complete list of signals transmitted by kill, run kill -l, though its output differs depending on which kill you’re running. For descriptions of the signals, run man 7 signal. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">timeout</b></p>
<p class="calibre1">timeout [ <i class="calibre4">options</i>]  <i class="calibre4">seconds</i>  <i class="calibre4">command... </i></p>
<p class="calibre1">The timeout command sets a time limit for running another</p>
<p class="calibre1">program, in seconds. If the program runs longer than the limit, timeout kills it. As a demonstration, here is a sleep command that should run for a minute but gets killed after 3 seconds:</p>
<p class="calibre1">→ <b class="calibre3">sleep 60</b>                <i class="calibre4">Runs for 60 seconds</i></p>
<p class="calibre1">→ <b class="calibre3">timeout 3 sleep 60</b>      <i class="calibre4">Kil ed after 3 seconds</i></p>
<p class="calibre1">As a more practical example, play music from your MP3 collection for an hour, then stop:</p>
<p class="calibre1">→ <b class="calibre3">timeout 3600 mplayer *.mp3</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-s  <i class="calibre4">signal</i></p>
<p class="calibre1">Send a signal other than the default (TERM). The choices are the same ones listed by kill -l. </p>
<p class="calibre1">-k  <i class="calibre4">seconds </i> If the program doesn’t die after the first signal, wait this many seconds longer and send a deadly KILL signal. </p>
<p class="calibre1"><b class="calibre3">Controlling Processes  |  145</b></p>
<p class="calibre1"><a id="calibre_link-75"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">nice</b></p>
<p class="calibre1">nice [-n  <i class="calibre4">level</i>]  <i class="calibre4">command_line</i></p>
<p class="calibre1">When invoking a system-intensive program, you can be nice to the other processes (and users) by lowering its priority. That’s what the nice command is for: it sets a  <i class="calibre4">nice level</i> (an amount of</p>
<p class="calibre1">“niceness”) for a process so it gets less attention from the Linux process scheduler. <a href="#calibre_link-75">17 H</a>ere’s an example of setting a big job to run at nice level 7:</p>
<p class="calibre1">→ <b class="calibre3">nice -n 7 sort hugefile &gt; outfile</b></p>
<p class="calibre1">If you run nice without a level, 10 is used. Normal processes (run without nice) run at level zero, which you can see by running nice with no arguments:</p>
<p class="calibre1">→ <b class="calibre3">nice</b></p>
<p class="calibre1">0</p>
<p class="calibre1">The superuser can also lower the nice level, increasing a process’s priority:</p>
<p class="calibre1">→ <b class="calibre3">sudo nice -n -10 myprogram</b></p>
<p class="calibre1">To see the nice levels of your jobs, use ps and look at the “NI” </p>
<p class="calibre1">column:</p>
<p class="calibre1">→ <b class="calibre3">ps -o pid,user,args,nice</b></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">renice</b></p>
<p class="calibre1">renice [-n  <i class="calibre4">N</i>] [ <i class="calibre4">options</i>]  <i class="calibre4">PID</i></p>
<p class="calibre1">While the nice command can invoke a program at a given nice</p>
<p class="calibre1">level, renice changes the nice level of an already-running pro-17 This is called “nicing” the process. You’ll hear the term used as a verb:</p>
<p class="calibre1">“That process was niced to 12.” </p>
<p class="calibre1"><b class="calibre3">146  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-206"></a>cess. Here we increase the nice level (decrease the priority) of process 28734 by five:</p>
<p class="calibre1">→ <b class="calibre3">renice -n 5 -p 28734</b></p>
<p class="calibre1">As a quick (though trivial) test, you can create a process that just sleeps for 2 minutes, run it in the background, and change its priority:</p>
<p class="calibre1">→ <b class="calibre3">sleep 120 &amp; </b></p>
<p class="calibre1">→ <b class="calibre3">pidof sleep</b></p>
<p class="calibre1">2673</p>
<p class="calibre1">→ <b class="calibre3">renice -n 5 -p 2673</b></p>
<p class="calibre1">2673 (process ID) old priority 0, new priority 5</p>
<p class="calibre1">Ordinary users can increase the nice level of their own pro‐</p>
<p class="calibre1">cesses, while the superuser can also decrease it (increasing the priority) and can operate on any process. The valid range is</p>
<p class="calibre1">−20 to +20, but avoid high negative numbers or you might</p>
<p class="calibre1">interfere with vital system processes. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-p  <i class="calibre4">pid</i></p>
<p class="calibre1">Affect the given process ID. You can omit the -p and just</p>
<p class="calibre1">provide a PID (renice -n 5 28734). </p>
<p class="calibre1">-u  <i class="calibre4">username </i> Affect all processes owned by the given user. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">flock</b></p>
<p class="calibre1">flock  [ <i class="calibre4">options</i>]  <i class="calibre4">lockfile command... </i></p>
<p class="calibre1">Do you ever need to ensure that only one copy of a program</p>
<p class="calibre1">runs at a time on your computer? For example, if you run automatic backups every hour using a command like rsync, there’s a slight chance that a previous backup might still be running when the next backup launches. The flock command solves</p>
<p class="calibre1">this sort of problem. It prevents a command, such as a backup script, from running concurrently with itself. If you try to run two copies of the command at once, the second will fail. For <b class="calibre3">Controlling Processes  |  147</b></p>
<p class="calibre1"><a id="calibre_link-23"></a>example, this rsync command, when run with flock, will instantly fail if another instance of the same command is</p>
<p class="calibre1">already running:</p>
<p class="calibre1">→ <b class="calibre3">flock -n /tmp/mylock rsync</b>  <i class="calibre4">... </i></p>
<p class="calibre1">To see flock in action, open two shell windows and run the following command in each shell, one at a time (we’ll use the</p>
<p class="calibre1">sleep command as a demonstration, which does nothing but</p>
<p class="calibre1">wait for a given number of seconds):</p>
<p class="calibre1">→ <b class="calibre3">flock -n /tmp/mylock sleep 60</b></p>
<p class="calibre1">The first command will run, and the second will instantly terminate. The two commands needn’t be identical, but they must refer to the same  <i class="calibre4">lockfile</i> as the first argument. This can be the name of any file or directory, which flock treats as a unique marker to prevent any other commands from running. For</p>
<p class="calibre1">example, if you run the same sleep command in one shell and</p>
<p class="calibre1">a different command such as ls in another, with the same lock file:</p>
<p class="calibre1">→ <b class="calibre3">flock -n /tmp/mylock ls</b></p>
<p class="calibre1">the second will still fail. But if you provide different lock files, both commands will run. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n</p>
<p class="calibre1">Instantly fail if another command is already running. </p>
<p class="calibre1">-w  <i class="calibre4">N </i> Fail after waiting  <i class="calibre4">N </i> seconds, if another command is already running. </p>
<p class="calibre1">-s</p>
<p class="calibre1">Use a shared lock instead of an exclusive lock. You can run multiple commands simultaneously with this option, but flock will fail if you omit the option. This is useful for permitting a limited number of commands to run simultaneously. </p>
<p class="calibre1"><b class="calibre3">Scheduling Jobs</b></p>
<p class="calibre1">sleep</p>
<p class="calibre1">Wait a set number of seconds, doing nothing. </p>
<p class="calibre1">watch</p>
<p class="calibre1">Run a program at set intervals. </p>
<p class="calibre1"><b class="calibre3">148  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-159"></a>at</p>
<p class="calibre1">Schedule a job for a single, future time. </p>
<p class="calibre1">crontab Schedule jobs for many future times. </p>
<p class="calibre1">If you need to launch programs at particular times or at regular intervals, Linux provides several scheduling tools at various degrees of complexity. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">sleep</b></p>
<p class="calibre1">sleep  <i class="calibre4">time_specification</i></p>
<p class="calibre1">The sleep command simply waits a set amount of time. The</p>
<p class="calibre1">given time specification can be an integer (meaning seconds) or an integer followed by the letter s (also seconds), m</p>
<p class="calibre1">(minutes), h (hours), or d (days). For example:</p>
<p class="calibre1">→ <b class="calibre3">sleep 5m</b>               <i class="calibre4">Do nothing for 5 minutes</i></p>
<p class="calibre1">sleep is useful for delaying a command for a set amount of</p>
<p class="calibre1">time:</p>
<p class="calibre1">→ <b class="calibre3">sleep 10 &amp;&amp; echo 'Ten seconds have passed.' </b></p>
<p class="calibre1"> <i class="calibre4">(10 seconds pass)</i></p>
<p class="calibre1">Ten seconds have passed. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">watch</b></p>
<p class="calibre1">watch [ <i class="calibre4">options</i>]  <i class="calibre4">command</i></p>
<p class="calibre1">The watch program executes a given command at regular inter‐</p>
<p class="calibre1">vals; the default is every two seconds. The command is passed to the shell (so be sure to quote or escape any special characters), and the results are displayed in a full-screen mode, so you can observe the output conveniently and see what has changed. </p>
<p class="calibre1">For example, watch -n 60 date executes the date command</p>
<p class="calibre1">once a minute, sort of a poor man’s clock. Type ^C to exit. </p>
<p class="calibre1"><b class="calibre3">Scheduling Jobs  |  149</b></p>
<p class="calibre1"><a id="calibre_link-105"></a><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n  <i class="calibre4">seconds </i> Set the time between executions, in seconds. </p>
<p class="calibre1">-d</p>
<p class="calibre1">Highlight differences in the output, to emphasize what has</p>
<p class="calibre1">changed from one execution to the next. </p>
<p class="calibre1">-g</p>
<p class="calibre1">Exit when the command produces output that is different from the previous execution. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">at</b></p>
<p class="calibre1">at [ <i class="calibre4">options</i>]  <i class="calibre4">time_specification</i></p>
<p class="calibre1">The at command runs a shell command once at a specified</p>
<p class="calibre1">time:</p>
<p class="calibre1">→ <b class="calibre3">at 7am next sunday</b></p>
<p class="calibre1">at&gt; <b class="calibre3">echo Remember to go shopping | mail smith</b></p>
<p class="calibre1">at&gt; <b class="calibre3">lpr $HOME/shopping-list</b></p>
<p class="calibre1">at&gt; <b class="calibre3">^D</b></p>
<p class="calibre1">&lt;EOT&gt; </p>
<p class="calibre1">job 559 at 2015-09-14 21:30</p>
<p class="calibre1">The time specifications understood by at are enormously flexible. In general, you can specify:</p>
<p class="calibre1">• A time followed by a date (not a date followed by a time)</p>
<p class="calibre1">• Only a date (assumes the current clock time)</p>
<p class="calibre1">• Only a time (assumes the very next occurrence, whether</p>
<p class="calibre1">today or tomorrow)</p>
<p class="calibre1">• A special word like now, midnight, or teatime (16:00)</p>
<p class="calibre1">• Any of the preceding followed by an offset, like “+ 3</p>
<p class="calibre1">days” </p>
<p class="calibre1">Dates are acceptable in many forms: december 25 2015, 25</p>
<p class="calibre1">december 2015, december 25, 25 december, 12/25/2015, </p>
<p class="calibre1">25.12.2015, 20151225, today, thursday, next thursday, next</p>
<p class="calibre1"><b class="calibre3">150  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-76"></a>month, next year, and more. Month names can be abbreviated to three letters (jan, feb, mar, ...). Times are also flexible: 8pm, 8 pm, 8:00pm, 8:00 pm, 20:00, and 2000 are equivalent. Offsets are a plus or minus sign followed by whitespace and an amount of time: + 3 seconds, + 2 weeks, - 1 hour<a href="#calibre_link-76">, and so on.18</a></p>
<p class="calibre1">If you don’t specify a part of the date or time, at copies the missing information from the system date and time. So “next</p>
<p class="calibre1">year” means one year from right now, “thursday” means the</p>
<p class="calibre1">upcoming Thursday at the current clock time, “december 25” </p>
<p class="calibre1">means the next upcoming December 25, and “4:30pm” means</p>
<p class="calibre1">the very next occurrence of 4:30 p.m. in the future. </p>
<p class="calibre1">The command you supply to at is not evaluated by the shell</p>
<p class="calibre1">until execution time, so wildcards, variables, and other shell constructs are not expanded until then. Also, your current</p>
<p class="calibre1">environment (see printenv) is preserved within each job so it executes as if you were logged in. Aliases, however, aren’t available to at jobs, so don’t include them. </p>
<p class="calibre1">To list your at jobs, use atq (“at queue”):</p>
<p class="calibre1">→ <b class="calibre3">atq</b></p>
<p class="calibre1">559  2015-09-14 07:00 a smith</p>
<p class="calibre1">To delete an at job, run atrm (“at remove”) with the job number:</p>
<p class="calibre1">→ <b class="calibre3">atrm 559</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-f  <i class="calibre4">filename</i></p>
<p class="calibre1">Read commands from the given file instead of standard</p>
<p class="calibre1">input. </p>
<p class="calibre1">-c  <i class="calibre4">job_number </i> Print the job commands to standard output. </p>
<p class="calibre1">18 Programmers can read the precise syntax in  <i class="calibre4">/usr/share/doc/at/time-spec</i>. </p>
<p class="calibre1"><b class="calibre3">Scheduling Jobs  |  151</b></p>
<p class="calibre1"><a id="calibre_link-155"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">crontab</b></p>
<p class="calibre1">crontab [ <i class="calibre4">options</i>] [ <i class="calibre4">file</i>]</p>
<p class="calibre1">The crontab command, like the at command, schedules jobs</p>
<p class="calibre1">for specific times. However, crontab is for recurring jobs, such as “Run this command at midnight on the second Tuesday of</p>
<p class="calibre1">each month.” To make this work, you edit and save a file (called your  <i class="calibre4">crontab file</i>), which automatically gets installed in a system directory ( <i class="calibre4">/var/spool/cron</i>). Once a minute, a Linux process called cron wakes up, checks your crontab file, and executes any jobs that are due. </p>
<p class="calibre1">→ <b class="calibre3">crontab -e</b></p>
<p class="calibre1">Edit your crontab file in your default editor ($VISUAL). </p>
<p class="calibre1">→ <b class="calibre3">crontab -l</b></p>
<p class="calibre1">Print your crontab file on standard output. </p>
<p class="calibre1">→ <b class="calibre3">crontab -r</b></p>
<p class="calibre1">Delete your crontab file. </p>
<p class="calibre1">→ <b class="calibre3">crontab myfile</b></p>
<p class="calibre1">Install the file  <i class="calibre4">myfile</i> as your crontab file. </p>
<p class="calibre1">The superuser can add the option -u  <i class="calibre4">username</i> to work with other users’ crontab files. </p>
<p class="calibre1">Crontab files contain one job per line. (Blank lines and comment lines beginning with “#” are ignored.) Each line has six fields, separated by whitespace. The first five fields specify the time to run the job, and the last is the job command itself. </p>
<p class="calibre1"> <i class="calibre4">Minutes of the hour</i></p>
<p class="calibre1">Integers between 0 and 59. This can be a single number</p>
<p class="calibre1">(30), a sequence of numbers separated by commas</p>
<p class="calibre1">(0,15,30,45), a range (20&ndash;30), a sequence of ranges</p>
<p class="calibre1">(0-15,50-59), or an asterisk to mean “all.” You can also</p>
<p class="calibre1">specify “every  <i class="calibre4">n</i> th time” with the suffix / <i class="calibre4">n</i>; for instance, both */12 and 0-59/12 mean 0,12,24,36,48 (i.e., every 12</p>
<p class="calibre1">minutes). </p>
<p class="calibre1"><b class="calibre3">152  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-245"></a> <i class="calibre4">Hours of the day</i></p>
<p class="calibre1">Same syntax as for minutes. </p>
<p class="calibre1"> <i class="calibre4">Days of the month</i></p>
<p class="calibre1">Integers between 1 and 31; again, you may use sequences, </p>
<p class="calibre1">ranges, sequences of ranges, or an asterisk. </p>
<p class="calibre1"> <i class="calibre4">Months of the year</i></p>
<p class="calibre1">Integers between 1 and 12; again, you may use sequences, </p>
<p class="calibre1">ranges, sequences of ranges, or an asterisk. Additionally, </p>
<p class="calibre1">you may use three-letter abbreviations (jan, feb, mar, ...), but not in ranges or sequences. </p>
<p class="calibre1"> <i class="calibre4">Days of the week</i></p>
<p class="calibre1">Integers between 0 (Sunday) and 6 (Saturday); again, you</p>
<p class="calibre1">may use sequences, ranges, sequences of ranges, or an</p>
<p class="calibre1">asterisk. Additionally, you may use three-letter abbrevia‐</p>
<p class="calibre1">tions (sun, mon, tue, ...), but not in ranges or sequences. </p>
<p class="calibre1"> <i class="calibre4">Command to execute</i></p>
<p class="calibre1">Any shell command, which will be executed in your login</p>
<p class="calibre1">environment, so you can refer to environment variables</p>
<p class="calibre1">like $HOME and expect them to work. Use only absolute</p>
<p class="calibre1">paths to your commands (e.g.,  <i class="calibre4">/usr/bin/who</i> instead of who) to ensure that cron is running the right programs, as</p>
<p class="calibre1">a Linux system may have several programs with the same</p>
<p class="calibre1">name. </p>
<p class="calibre1">Here are some example time specifications:</p><p class="calibre1">
</p><p class="calibre5">*    *    *    *    *</p>
Every minute<p class="calibre1"></p>
<p class="calibre1">45   *    *    *    *</p>
<p class="calibre1">45 minutes after each hour (1:45, 2:45, etc.)</p>
<p class="calibre1">45   9    *    *    *</p>
<p class="calibre1">Every day at 9:45 am</p>
<p class="calibre1">45   9    8    *    *</p>
<p class="calibre1">The eighth day of every month at 9:45 am</p>
<p class="calibre1">45   9    8    12   *</p>
<p class="calibre1">Every December 8 at 9:45 am</p>
<p class="calibre1">45   9    8    dec  *</p>
<p class="calibre1">Every December 8 at 9:45 am</p>
<p class="calibre1"><b class="calibre3">Scheduling Jobs  |  153</b></p>
<p class="calibre1"><a id="calibre_link-24"></a>45   9    *    *    6</p>
<p class="calibre1">Every Saturday at 9:45 am</p>
<p class="calibre1">45   9    *    *    sat Every Saturday at 9:45 am</p>
<p class="calibre1">45   9    *    12   6</p>
<p class="calibre1">Every Saturday in December, at 9:45 am</p>
<p class="calibre1">45   9    8    12   6</p>
<p class="calibre1">Every Saturday in December, plus December 8, </p>
<p class="calibre1">at 9:45 am</p>
<p class="calibre1">If the command produces any output upon execution, cron will email it to you (or more precisely, to the owning user for that crontab file: see the manpage for cron). </p>
<p class="calibre1"><b class="calibre3">Logins, Logouts, and Shutdowns</b></p>
<p class="calibre1">We assume you know how to log into your Linux account. To</p>
<p class="calibre1">log out using GNOME or KDE, choose Logout from the main</p>
<p class="calibre1">menu. To log out from a remote shell, just close the shell (type exit or logout). </p>
<p class="calibre1">Never simply turn off the power to a Linux system: it needs a more graceful shutdown. To perform a shutdown from</p>
<p class="calibre1">GNOME or KDE, use the main menu. To perform a shutdown</p>
<p class="calibre1">from a shell, run the shutdown or systemctl command as the</p>
<p class="calibre1">superuser, as follows. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">shutdown</b></p>
<p class="calibre1">shutdown [ <i class="calibre4">options</i>]  <i class="calibre4">time</i> [ <i class="calibre4">message</i>]</p>
<p class="calibre1">The shutdown command halts or reboots a Linux system; only</p>
<p class="calibre1">the superuser may run it. Here’s a command to halt the system in 10 minutes, broadcasting the message “scheduled maintenance” to all users logged in:</p>
<p class="calibre1">→ <b class="calibre3">sudo shutdown -h +10 "scheduled maintenance" </b></p>
<p class="calibre1"><b class="calibre3">154  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-175"></a>The  <i class="calibre4">time</i> may be a number of minutes preceded by a plus sign, like +10; an absolute time in hours and minutes, like 16:25; or the word now to mean immediately. </p>
<p class="calibre1">With no options, shutdown puts the system into single-user</p>
<p class="calibre1">mode, a special maintenance mode in which only one person is logged in (at the system console), and all nonessential services are off. To exit single-user mode, either perform another shut down to halt or reboot, or type ^D to bring up the system in normal, multiuser mode. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-r Reboot the system. </p>
<p class="calibre1">-h Halt the system. </p>
<p class="calibre1">-k Kidding: don’t really perform a shutdown, just broadcast warning messages to all users as if the system were going down. </p>
<p class="calibre1">-c Cancel a shutdown in progress (omit the  <i class="calibre4">time</i> argument). </p>
<p class="calibre1">-f On reboot, skip the usual filesystem check performed by the fsck program (described in <a href="#calibre_link-19">“Disks and Filesystems” on page 128</a>). </p>
<p class="calibre1">-F On reboot, require the usual filesystem check. </p>
<p class="calibre1">For technical information about shutdowns, single-user mode, and various system states, see the manpages for init and init tab. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">systemctl</b></p>
<p class="calibre1">systemctl [ <i class="calibre4">options</i>]  <i class="calibre4">command</i> [ <i class="calibre4">arguments</i>]</p>
<p class="calibre1">In some Linux distros, the shutdown command is a symbolic</p>
<p class="calibre1">link to systemctl, a multipurpose command for starting and</p>
<p class="calibre1">stopping services, including the entire host. systemctl is part of a service manager called systemd; a full treatment is beyond the scope of this book, but we’ll cover a few basic uses. (See  <i class="calibre4">man</i> <i class="calibre4">systemd</i> for more details.)</p>
<p class="calibre1"><b class="calibre3">Logins, Logouts, and Shutdowns  |  155</b></p>
<p class="calibre1"><a id="calibre_link-25"></a>sudo systemctl poweroff Shut down the system. </p>
<p class="calibre1">sudo systemctl reboot</p>
<p class="calibre1">Reboot the system. </p>
<p class="calibre1">sudo systemctl suspend</p>
<p class="calibre1">Suspend the system. </p>
<p class="calibre1"><b class="calibre3">Users and Their Environment</b></p>
<p class="calibre1">logname</p>
<p class="calibre1">Print your login name. </p>
<p class="calibre1">whoami</p>
<p class="calibre1">Print your current, effective username. </p>
<p class="calibre1">id</p>
<p class="calibre1">Print the user ID and group membership of a user. </p>
<p class="calibre1">who</p>
<p class="calibre1">List logged-in users, long output. </p>
<p class="calibre1">users</p>
<p class="calibre1">List logged-in users, short output. </p>
<p class="calibre1">finger</p>
<p class="calibre1">Print information about users. </p>
<p class="calibre1">last</p>
<p class="calibre1">Determine when someone last logged in. </p>
<p class="calibre1">printenv Print your environment. </p>
<p class="calibre1">Who are you? Only the system knows for sure. This grab-bag</p>
<p class="calibre1">of programs tells you all about  <i class="calibre4">users</i>: their names, login times, and properties of their environment. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">logname</b></p>
<p class="calibre1">logname</p>
<p class="calibre1">The logname command prints your login name (it might seem</p>
<p class="calibre1">trivial, but it’s useful in shell scripts):</p>
<p class="calibre1">→ <b class="calibre3">logname</b></p>
<p class="calibre1">smith</p>
<p class="calibre1">If this command does not work on your system, try instead:</p>
<p class="calibre1">→ <b class="calibre3">echo $LOGNAME</b></p>
<p class="calibre1"><b class="calibre3">156  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-177"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">whoami</b></p>
<p class="calibre1">whoami</p>
<p class="calibre1">The whoami command prints the name of the current, effective user. This may differ from your login name (the output of</p>
<p class="calibre1">logname) if you’ve used the sudo command. This example dis‐</p>
<p class="calibre1">tinguishes whoami from logname:</p>
<p class="calibre1">→ <b class="calibre3">logname</b></p>
<p class="calibre1">smith</p>
<p class="calibre1">→ <b class="calibre3">sudo logname</b></p>
<p class="calibre1">smith</p>
<p class="calibre1">→ <b class="calibre3">whoami</b></p>
<p class="calibre1">smith</p>
<p class="calibre1">→ <b class="calibre3">sudo whoami</b></p>
<p class="calibre1">root</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">id</b></p>
<p class="calibre1">id [ <i class="calibre4">options</i>] [ <i class="calibre4">username</i>]</p>
<p class="calibre1">Every user has a unique, numeric  <i class="calibre4">user ID</i>, and a default group with a unique, numeric  <i class="calibre4">group ID</i>. The id command prints these values along with their associated user and group names:</p>
<p class="calibre1">→ <b class="calibre3">id</b></p>
<p class="calibre1">uid=500(smith) gid=500(smith)</p>
<p class="calibre1">groups=500(smith),6(disk),490(src),501(cdwrite)</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-u Print the effective user ID and exit. </p>
<p class="calibre1">-g Print the effective group ID and exit. </p>
<p class="calibre1">-G Print the IDs of all other groups to which the user belongs. </p>
<p class="calibre1">-n Print names (for users and groups) rather than numeric IDs. Must be combined with -u, -g, or -G. For example, id -Gn produces the same output as the groups command. </p>
<p class="calibre1"><b class="calibre3">Users and Their Environment  |  157</b></p>
<p class="calibre1"><a id="calibre_link-77"></a>-r Print login values instead of effective values. Must be combined with -u, </p>
<p class="calibre1">-g, or -G. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">who</b></p>
<p class="calibre1">who [ <i class="calibre4">options</i>] [ <i class="calibre4">filename</i>]</p>
<p class="calibre1">The who command lists all logged-in users, one user shell per line:</p>
<p class="calibre1">→ <b class="calibre3">who</b></p>
<p class="calibre1">smith    pts/0    Sep  6 17:09 (:0)</p>
<p class="calibre1">barrett  pts/1    Sep  6 17:10 (10.24.19.240)</p>
<p class="calibre1">jones    pts/2    Sep  8 20:58 (192.168.13.7)</p>
<p class="calibre1">jones    pts/4    Sep  3 05:11 (192.168.13.7)</p>
<p class="calibre1">Normally, who gets its data from the file  <i class="calibre4">/var/run/utmp</i>. The <i class="calibre4">filename</i> argument can specify a different data file, such as  <i class="calibre4">/var/log/wtmp</i> for past logins or  <i class="calibre4">/var/log/btmp</i> for failed log‐</p>
<p class="calibre1"><a href="#calibre_link-77">ins.19</a></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-H</p>
<p class="calibre1">Print a row of headings as the first line. </p>
<p class="calibre1">--lookup For remotely logged-in users, print the hostnames of origin. </p>
<p class="calibre1">-u</p>
<p class="calibre1">Also print each user’s idle time at his/her terminal. </p>
<p class="calibre1">-T</p>
<p class="calibre1">Also indicate whether each user’s terminal is writable (see mesg in</p>
<p class="calibre1"><a href="#calibre_link-34">“Instant Messaging” on page 193</a>). A plus sign means “yes,” a minus sign means “no,” and a question mark means “unknown.” </p>
<p class="calibre1">-m</p>
<p class="calibre1">Display information only about yourself (i.e., the user associated with the current terminal). </p>
<p class="calibre1">-q</p>
<p class="calibre1">Quick display of usernames only, and a count of users. Much like the users command, but it adds a count. </p>
<p class="calibre1">19 If your system is configured to log this information. </p>
<p class="calibre1"><b class="calibre3">158  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-172"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">users</b></p>
<p class="calibre1">users [ <i class="calibre4">filename</i>]</p>
<p class="calibre1">The users command prints a quick listing of users who have</p>
<p class="calibre1">login sessions (if a user is running multiple shells, she appears multiple times):</p>
<p class="calibre1">→ <b class="calibre3">users</b></p>
<p class="calibre1">barrett jones smith smith smith</p>
<p class="calibre1">Like the who command, users reads  <i class="calibre4">/var/log/utmp</i> by default but can read from another supplied file instead. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">finger</b></p>
<p class="calibre1">finger [ <i class="calibre4">options</i>] [ <i class="calibre4">user</i>[@ <i class="calibre4">host</i>]]</p>
<p class="calibre1">The finger command prints logged-in user information in a</p>
<p class="calibre1">short form:</p>
<p class="calibre1">→ <b class="calibre3">finger</b></p>
<p class="calibre1">Login     Name             Tty   Idle  Login Time</p>
<p class="calibre1">smith    Sandy Smith     :0          Sep  6 17:09</p>
<p class="calibre1">barrett  Daniel Barrett  :pts/1  24  Sep  6 17:10</p>
<p class="calibre1">jones    Jill Jones      :pts/2      Sep  8 20:58</p>
<p class="calibre1">or a long form:</p>
<p class="calibre1">→ <b class="calibre3">finger smith</b></p>
<p class="calibre1">Login: smith                       Name: Sandy Smith</p>
<p class="calibre1">Directory: /home/smith             Shell: /bin/bash</p>
<p class="calibre1">On since Sat Sep  6 17:09 (EDT) on :0</p>
<p class="calibre1">Last login Mon Sep  8 21:07 (EDT) on pts/6 from web1</p>
<p class="calibre1">No mail. </p>
<p class="calibre1">Project:</p>
<p class="calibre1">Enhance world peace</p>
<p class="calibre1">Plan:</p>
<p class="calibre1">Mistrust first impulses; they are always right. </p>
<p class="calibre1"><b class="calibre3">Users and Their Environment  |  159</b></p>
<p class="calibre1"><a id="calibre_link-188"></a>The  <i class="calibre4">user</i> argument can be a local username or a remote user in the form  <i class="calibre4">user@host</i>. Remote hosts will respond to finger requests only if they are configured to do so. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-l Print in long format. </p>
<p class="calibre1">-s Print in short format. </p>
<p class="calibre1">-p Don’t display the Project and Plan sections, which are ordinarily read from the user’s  <i class="calibre4">~/.project</i> and  <i class="calibre4">~/.plan</i> files, respectively. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">last</b></p>
<p class="calibre1">last [ <i class="calibre4">options</i>] [ <i class="calibre4">users</i>] [ <i class="calibre4">ttys</i>]</p>
<p class="calibre1">The last command displays a history of logins, in reverse</p>
<p class="calibre1">chronological order:</p>
<p class="calibre1">→ <b class="calibre3">last</b></p>
<p class="calibre1">bob pts/3 localhost Mon Sep 8 21:07 - 21:08 (00:01)</p>
<p class="calibre1">sue pts/6 :0        Mon Sep 8 20:25 - 20:56 (00:31)</p>
<p class="calibre1">bob pts/4 myhost    Sun Sep 7 22:19 still logged in</p>
<p class="calibre1">... </p>
<p class="calibre1">You may provide usernames or tty names to limit the output. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">- <i class="calibre4">N</i></p>
<p class="calibre1">Print only the latest  <i class="calibre4">N</i> lines of output, where  <i class="calibre4">N</i> is a positive integer. </p>
<p class="calibre1">-i</p>
<p class="calibre1">Display IP addresses instead of hostnames. </p>
<p class="calibre1">-R</p>
<p class="calibre1">Don’t display hostnames. </p>
<p class="calibre1">-x</p>
<p class="calibre1">Also display system shutdowns and changes in system runlevel (e.g., from single-user mode into multiuser mode). </p>
<p class="calibre1">-f  <i class="calibre4">filename </i> Read from some other data file than  <i class="calibre4">/var/run/wtmp</i>; see the who command for more details. </p>
<p class="calibre1"><b class="calibre3">160  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-26"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">printenv</b></p>
<p class="calibre1">printenv [ <i class="calibre4">environment_variables</i>]</p>
<p class="calibre1">The printenv command prints all environment variables</p>
<p class="calibre1">known to your shell and their values:</p>
<p class="calibre1">→ <b class="calibre3">printenv</b></p>
<p class="calibre1">HOME=/home/smith</p>
<p class="calibre1">MAIL=/var/spool/mail/smith</p>
<p class="calibre1">NAME=Sandy Smith</p>
<p class="calibre1">SHELL=/bin/bash</p>
<p class="calibre1">... </p>
<p class="calibre1">or only specified variables:</p>
<p class="calibre1">→ <b class="calibre3">printenv HOME SHELL</b></p>
<p class="calibre1">/home/smith</p>
<p class="calibre1">/bin/bash</p>
<p class="calibre1"><b class="calibre3">User Account Management</b></p>
<p class="calibre1">useradd Create an account. </p>
<p class="calibre1">userdel Delete an account. </p>
<p class="calibre1">usermod Modify an account. </p>
<p class="calibre1">passwd</p>
<p class="calibre1">Change a password. </p>
<p class="calibre1">chfn</p>
<p class="calibre1">Change a user’s personal information. </p>
<p class="calibre1">chsh</p>
<p class="calibre1">Change a user’s shell. </p>
<p class="calibre1">The installation process for your Linux distro undoubtedly</p>
<p class="calibre1">prompted you to create a superuser account (root), and possibly also an ordinary user account (presumably for yourself). </p>
<p class="calibre1">But you might want to create other accounts, too. </p>
<p class="calibre1">Creating users is an important job not to be taken lightly. Every account is a potential avenue for an intruder to enter your system, so every user should have a strong, hard-to-guess pass‐</p>
<p class="calibre1">word. </p>
<p class="calibre1"><b class="calibre3">User Account Management  |  161</b></p>
<p class="calibre1"><a id="calibre_link-129"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">useradd</b></p>
<p class="calibre1">useradd [ <i class="calibre4">options</i>]  <i class="calibre4">username</i></p>
<p class="calibre1">The useradd command lets the superuser create a user account:</p>
<p class="calibre1">→ <b class="calibre3">sudo useradd smith</b></p>
<p class="calibre1">Its defaults are not very useful (run useradd -D to see them), so be sure to supply all desired options. For example:</p>
<p class="calibre1">→ <b class="calibre3">sudo useradd -d /home/smith -s /bin/bash \</b></p>
<p class="calibre1"><b class="calibre3">  -g users smith</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-d  <i class="calibre4">dir</i></p>
<p class="calibre1">Set the user’s home directory to be  <i class="calibre4">dir</i>. </p>
<p class="calibre1">-s  <i class="calibre4">shell</i></p>
<p class="calibre1">Set the user’s login shell to be  <i class="calibre4">shell</i>. </p>
<p class="calibre1">-u  <i class="calibre4">uid</i></p>
<p class="calibre1">Set the user’s ID to be  <i class="calibre4">uid</i>. Unless you know what</p>
<p class="calibre1">you’re doing, omit this option and accept the</p>
<p class="calibre1">default. </p>
<p class="calibre1">-c  <i class="calibre4">string</i></p>
<p class="calibre1">Set the user’s comment field (historically called</p>
<p class="calibre1">the GECOS field). This is usually the user’s full</p>
<p class="calibre1">name, but it can be any string. The chfn</p>
<p class="calibre1">command can also set this information. </p>
<p class="calibre1">-g  <i class="calibre4">group</i></p>
<p class="calibre1">Set the user’s initial (default) group to  <i class="calibre4">group</i>, </p>
<p class="calibre1">which can either be a numeric group ID or a group</p>
<p class="calibre1">name, and which must already exist. </p>
<p class="calibre1">-G  <i class="calibre4">group1,group2,... </i> Make the user a member of the additional, existing groups  <i class="calibre4">group1</i>,  <i class="calibre4">group2</i>, and so on. </p>
<p class="calibre1">-m</p>
<p class="calibre1">Copy all files from your system skeleton</p>
<p class="calibre1">directory,  <i class="calibre4">/etc/skel</i>, into the newly created home</p>
<p class="calibre1">directory. The skeleton directory traditionally</p>
<p class="calibre1">contains minimal (skeletal) versions of</p>
<p class="calibre1">initialization files, like  <i class="calibre4">~/.bash_profile</i>, to get new users started. If you prefer to copy from a different</p>
<p class="calibre1">directory, add the -k option (-k  <i class="calibre4">dirname</i>). </p>
<p class="calibre1"><b class="calibre3">162  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-217"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">userdel</b></p>
<p class="calibre1">userdel [ <i class="calibre4">-r</i>]  <i class="calibre4">username</i></p>
<p class="calibre1">The userdel command deletes an existing user. </p>
<p class="calibre1">→ <b class="calibre3">sudo userdel smith</b></p>
<p class="calibre1">It does not delete the files in the user’s home directory unless you supply the -r option. Think carefully before deleting a</p>
<p class="calibre1">user; consider deactivating the account instead (with usermod</p>
<p class="calibre1">-L). And make sure you have backups of all the user’s files</p>
<p class="calibre1">before deleting them: you might need them again someday. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">usermod</b></p>
<p class="calibre1">usermod [ <i class="calibre4">options</i>]  <i class="calibre4">username</i></p>
<p class="calibre1">The usermod command modifies the given user’s account in</p>
<p class="calibre1">various ways, such as changing a home directory:</p>
<p class="calibre1">→ <b class="calibre3">sudo usermod -d /home/another smith</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-d  <i class="calibre4">dir</i></p>
<p class="calibre1">Change the user’s home directory to  <i class="calibre4">dir</i>. </p>
<p class="calibre1">-l  <i class="calibre4">username</i></p>
<p class="calibre1">Change the user’s login name to  <i class="calibre4">username</i>. </p>
<p class="calibre1">Think carefully before doing this, in case anything</p>
<p class="calibre1">on your system depends on the original name. </p>
<p class="calibre1">And don’t change system accounts (root, daemon, </p>
<p class="calibre1">etc.) unless you really know what you’re doing! </p>
<p class="calibre1">-s  <i class="calibre4">shell</i></p>
<p class="calibre1">Change the user’s login shell to  <i class="calibre4">shell</i>. </p>
<p class="calibre1">-g  <i class="calibre4">group</i></p>
<p class="calibre1">Change the user’s initial (default) group to</p>
<p class="calibre1"> <i class="calibre4">group</i>, which can either be a numeric group ID or</p>
<p class="calibre1">a group name, and which must already exist. </p>
<p class="calibre1"><b class="calibre3">User Account Management  |  163</b></p>
<p class="calibre1"><a id="calibre_link-128"></a>-G  <i class="calibre4">group1,group2,... </i> Make the user a member  <i class="calibre4">only</i> of the additional, existing groups  <i class="calibre4">group1</i>,  <i class="calibre4">group2</i>, and so on. If the user previously belonged to other groups, but</p>
<p class="calibre1">you don’t specify them here, the user will no</p>
<p class="calibre1">longer belong to them. </p>
<p class="calibre1">-L</p>
<p class="calibre1">Disable (lock) the account so the user cannot log</p>
<p class="calibre1">in. </p>
<p class="calibre1">-U</p>
<p class="calibre1">Unlock the account after a lock (-L) operation. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">passwd</b></p>
<p class="calibre1">passwd [ <i class="calibre4">options</i>] [ <i class="calibre4">username</i>]</p>
<p class="calibre1">The passwd command changes a login password, yours by</p>
<p class="calibre1">default:</p>
<p class="calibre1">→ <b class="calibre3">passwd</b></p>
<p class="calibre1">or another user’s password if run by the superuser:</p>
<p class="calibre1">→ <b class="calibre3">sudo passwd smith</b></p>
<p class="calibre1">passwd does have options, most of them related to password</p>
<p class="calibre1">expiration. Use them only in the context of a well-thought-out security policy. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">chfn</b></p>
<p class="calibre1">chfn [ <i class="calibre4">options</i>] [ <i class="calibre4">username</i>]</p>
<p class="calibre1">The chfn (change finger) command updates a few pieces of</p>
<p class="calibre1">personal information maintained by the system: real name, </p>
<p class="calibre1">home telephone, office telephone, and office location, as displayed by the finger command. Invoked without a username, </p>
<p class="calibre1">chfn affects your account; invoked with a username (by root), it affects that user. With no options, chfn will prompt you for the desired information:</p>
<p class="calibre1"><b class="calibre3">164  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-56"></a>→ <b class="calibre3">chfn</b></p>
<p class="calibre1">Password: <b class="calibre3">********</b></p>
<p class="calibre1">Name [Shawn Smith]: Shawn E. Smith</p>
<p class="calibre1">Office [100 Barton Hall]:</p>
<p class="calibre1">Office Phone [212-555-1212]: 212-555-1234</p>
<p class="calibre1">Home Phone []:</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-f  <i class="calibre4">name</i></p>
<p class="calibre1">Change the full name to  <i class="calibre4">name</i>. </p>
<p class="calibre1">-h  <i class="calibre4">phone</i></p>
<p class="calibre1">Change the home phone number to  <i class="calibre4">phone</i>. </p>
<p class="calibre1">-p  <i class="calibre4">phone</i></p>
<p class="calibre1">Change the office phone number to  <i class="calibre4">phone</i>. </p>
<p class="calibre1">-o  <i class="calibre4">office </i> Change the office location to  <i class="calibre4">office</i>. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">chsh</b></p>
<p class="calibre1">chsh [ <i class="calibre4">options</i>] [ <i class="calibre4">username</i>]</p>
<p class="calibre1">The chsh (change shell) command sets your login shell pro‐</p>
<p class="calibre1">gram. Invoked without a username, chsh affects your account; invoked with a username (by root), it affects that user. With no options, chsh will prompt you for the desired information:</p>
<p class="calibre1">→ <b class="calibre3">chsh</b></p>
<p class="calibre1">Changing shell for smith. </p>
<p class="calibre1">Password: <b class="calibre3">*******</b></p>
<p class="calibre1">New shell [/bin/bash]: <b class="calibre3">/bin/tcsh</b></p>
<p class="calibre1">The new shell must be listed in the file  <i class="calibre4">/etc/shel s</i>. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-s  <i class="calibre4">shell </i> Specify the new shell. </p>
<p class="calibre1">-l</p>
<p class="calibre1">List all permissible shells. </p>
<p class="calibre1"><b class="calibre3">User Account Management  |  165</b></p>
<p class="calibre1"><a id="calibre_link-27"></a><b class="calibre3">Becoming the Superuser</b></p>
<p class="calibre1">Normal users, for the most part, can modify only the files they own. One special user, called the  <i class="calibre4">superuser</i> or  <i class="calibre4">root</i>, has full access to the machine and can do anything on it. You should</p>
<p class="calibre1">rarely need superuser privileges; and in fact, you should use them only when absolutely necessary, to avoid accidentally</p>
<p class="calibre1">harming your Linux system. </p>
<p class="calibre1">You can become the superuser in several ways. One is to use</p>
<p class="calibre1">the sudo command to gain superuser abilities for the duration of a single command. Simply type “sudo” followed by the command. You may be prompted for your password, depending on</p>
<p class="calibre1">how sudo is configured on your machine:</p>
<p class="calibre1">→ <b class="calibre3">sudo rm protected_file</b></p>
<p class="calibre1">Password: <b class="calibre3">********</b>          <i class="calibre4">Your own password</i></p>
<p class="calibre1">To make your superuser powers last for multiple commands, </p>
<p class="calibre1">you can run a shell with sudo:</p>
<p class="calibre1">→ <b class="calibre3">sudo bash</b></p>
<p class="calibre1">This is convenient, say, before browsing through many pro‐</p>
<p class="calibre1">tected directories with cd. When finished executing commands as the superuser, type ^D or run exit to end the superuser shell and become yourself again. If you forget whether your shell is a superuser shell or just a normal one, check your identity with the whoami command. If you’re the superuser, it will display root. </p>
<p class="calibre1">Another way to become the superuser is the su command, </p>
<p class="calibre1">which also creates a superuser shell, but you’ll need a different password, called the root password, to use it. If you don’t know the root password on the system, you can’t use su. (If you</p>
<p class="calibre1">installed Linux yourself, you chose the root password during installation):</p>
<p class="calibre1">→ <b class="calibre3">su -l</b></p>
<p class="calibre1">Password: <b class="calibre3">*******</b>          <i class="calibre4">root password</i></p>
<p class="calibre1">#</p>
<p class="calibre1"><b class="calibre3">166  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-28"></a>Your shell prompt may change, often to a hash mark (#), to indicate you are the superuser. </p>
<p class="calibre1">If you provide a username to su:</p>
<p class="calibre1">→ <b class="calibre3">su -l sophia</b></p>
<p class="calibre1">Password: <b class="calibre3">*******</b>          <i class="calibre4">sophia's password</i></p>
<p class="calibre1">you can become that user (provided you know her password). </p>
<p class="calibre1">sudo and su have important differences. su is standard on every Linux system, but you need a password other than your own in order to run it. sudo uses your own password, but it must be configured to do so. sudo is superior for systems with multiple superusers, as it provides precise control over privileges (in the  <i class="calibre4">/etc/sudoers</i> file) and even logs the commands that get run. </p>
<p class="calibre1">A full discussion is beyond the scope of this book: see man sudo</p>
<p class="calibre1"><a href="http://www.sudo.ws/">and  <i class="calibre4">http://www.sudo.ws/</i> for full details. </a></p>
<p class="calibre1"><b class="calibre3">Group Management</b></p>
<p class="calibre1">groups</p>
<p class="calibre1">Print the group membership of a user. </p>
<p class="calibre1">groupadd Create a group. </p>
<p class="calibre1">groupdel Delete a group. </p>
<p class="calibre1">groupmod Modify a group. </p>
<p class="calibre1">A  <i class="calibre4">group</i> is a set of accounts treated as a single entity. If you give permission for a group to take some action (such as modify a file), then all members of that group can take it. For example, you can give full permissions for the group friends to read, write, and execute the file  <i class="calibre4">/tmp/sample</i>:</p>
<p class="calibre1">→ <b class="calibre3">groups</b></p>
<p class="calibre1">users smith friends</p>
<p class="calibre1">→ <b class="calibre3">chgrp friends /tmp/sample</b></p>
<p class="calibre1">→ <b class="calibre3">chmod 770 /tmp/sample</b></p>
<p class="calibre1">→ <b class="calibre3">ls -l /tmp/sample</b></p>
<p class="calibre1">-rwxrwx--- 1 smith friends 2874  <i class="calibre4">... </i> /tmp/sample</p>
<p class="calibre1"><b class="calibre3">Group Management  |  167</b></p>
<p class="calibre1"><a id="calibre_link-78"></a>To add users to a group, edit  <i class="calibre4">/etc/group</i> as root. <a href="#calibre_link-78">20 </a>To change the group ownership of a file, recall the chgrp commands from</p>
<p class="calibre1"><a href="#calibre_link-11">“File Properties” on page 69. </a></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">groups</b></p>
<p class="calibre1">groups [ <i class="calibre4">usernames</i>]</p>
<p class="calibre1">The groups command prints the Linux groups to which you</p>
<p class="calibre1">belong, or to which other users belong:</p>
<p class="calibre1">→ <b class="calibre3">whoami</b></p>
<p class="calibre1">smith</p>
<p class="calibre1">→ <b class="calibre3">groups</b></p>
<p class="calibre1">smith users</p>
<p class="calibre1">→ <b class="calibre3">groups jones root</b></p>
<p class="calibre1">jones : jones users</p>
<p class="calibre1">root : root bin daemon sys adm disk wheel src</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">groupadd</b></p>
<p class="calibre1">groupadd [ <i class="calibre4">options</i>]  <i class="calibre4">group</i></p>
<p class="calibre1">The groupadd command creates a group. In most cases, you</p>
<p class="calibre1">should use the -f option to prevent duplicate groups from</p>
<p class="calibre1">being created:</p>
<p class="calibre1">→ <b class="calibre3">sudo groupadd -f friends</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-g  <i class="calibre4">gid </i> Specify your own numeric group ID instead of letting groupadd choose one. </p>
<p class="calibre1">-f</p>
<p class="calibre1">If the specified group exists already, complain and exit. </p>
<p class="calibre1">20 Different systems may store the group member list in other ways. </p>
<p class="calibre1"><b class="calibre3">168  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-181"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">groupdel</b></p>
<p class="calibre1">groupdel  <i class="calibre4">group</i></p>
<p class="calibre1">The groupdel command deletes an existing group:</p>
<p class="calibre1">→ <b class="calibre3">sudo groupdel friends</b></p>
<p class="calibre1">Before doing this, it’s a good idea to identify all files that have their group ID set to the given group, so you can deal with</p>
<p class="calibre1">them later:</p>
<p class="calibre1">→ <b class="calibre3">sudo find / -group friends -print</b></p>
<p class="calibre1">because groupdel does not change the group ownership of any</p>
<p class="calibre1">files. It simply removes the group name from the system’s</p>
<p class="calibre1">records. If you list such files, you’ll see a numeric group ID in place of a group name. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">groupmod</b></p>
<p class="calibre1">groupmod [ <i class="calibre4">options</i>]  <i class="calibre4">group</i></p>
<p class="calibre1">The groupmod command modifies the given group, changing its</p>
<p class="calibre1">name or group ID:</p>
<p class="calibre1">→ <b class="calibre3">sudo groupmod -n newname friends</b></p>
<p class="calibre1">groupmod does not affect any files owned by this group: it simply changes the ID or name in the system’s records. Be careful when changing the ID, or these files will have group ownership by a nonexistent group. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n  <i class="calibre4">name </i> Change the group’s name to  <i class="calibre4">name</i> (safe). </p>
<p class="calibre1">-g  <i class="calibre4">gid</i></p>
<p class="calibre1">Change the group’s ID to  <i class="calibre4">gid</i> (risky). </p>
<p class="calibre1"><b class="calibre3">Group Management  |  169</b></p>
<p class="calibre1"><a id="calibre_link-29"></a><b class="calibre3">Host Information</b></p>
<p class="calibre1">uname</p>
<p class="calibre1">Print basic system information. </p>
<p class="calibre1">hostname</p>
<p class="calibre1">Print the system’s hostname. </p>
<p class="calibre1">domainname Same as hostname -y. </p>
<p class="calibre1">ip</p>
<p class="calibre1">Set and display network interface information. </p>
<p class="calibre1">ifconfig</p>
<p class="calibre1">Older command to set and display network interface</p>
<p class="calibre1">information. </p>
<p class="calibre1">Every Linux machine (or  <i class="calibre4">host</i>) has a name, a network IP</p>
<p class="calibre1">address, and other properties. Here’s how to display this information. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">uname</b></p>
<p class="calibre1">uname [ <i class="calibre4">options</i>]</p>
<p class="calibre1">The uname command prints fundamental information about</p>
<p class="calibre1">your computer:</p>
<p class="calibre1">→ <b class="calibre3">uname -a</b></p>
<p class="calibre1">Linux server.example.com 4.2.0-17-generic</p>
<p class="calibre1">#21-Ubuntu SMP Fri Oct 23 19:56:16</p>
<p class="calibre1">UTC 2015 x86_64  <i class="calibre4">... </i> GNU/Linux</p>
<p class="calibre1">This includes the kernel name (Linux), hostname</p>
<p class="calibre1">(server.example.com), kernel release (4.2.0-17-generic), kernel version (#21-Ubuntu SMP Fri Oct 23 19:56:16 UTC 2015), </p>
<p class="calibre1">hardware name (x86_64), and operating system name (GNU/</p>
<p class="calibre1">Linux). Each of these values can be printed individually using options. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-a All information. </p>
<p class="calibre1">-s Only the kernel name (the default). </p>
<p class="calibre1"><b class="calibre3">170  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-79"></a>-n Only the hostname, as with the hostname command. </p>
<p class="calibre1">-r Only the kernel release. </p>
<p class="calibre1">-v Only the kernel version. </p>
<p class="calibre1">-m Only the hardware name. </p>
<p class="calibre1">-p Only the processor type. </p>
<p class="calibre1">-i Only the hardware platform. </p>
<p class="calibre1">-o Only the operating system name. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">hostname</b></p>
<p class="calibre1">hostname [ <i class="calibre4">options</i>] [ <i class="calibre4">name</i>]</p>
<p class="calibre1">The hostname command prints the name of your computer. </p>
<p class="calibre1">Depending on how you have things set up, this might be the</p>
<p class="calibre1">fully qualified hostname:</p>
<p class="calibre1">→ <b class="calibre3">hostname</b></p>
<p class="calibre1">myhost.example.com</p>
<p class="calibre1">or your short hostname:</p>
<p class="calibre1">→ <b class="calibre3">hostname</b></p>
<p class="calibre1">myhost</p>
<p class="calibre1">You can also set your hostname, as root:<a href="#calibre_link-79">21</a></p>
<p class="calibre1">→ <b class="calibre3">sudo hostname orange</b></p>
<p class="calibre1">However, hostnames and nameservers are complicated topics</p>
<p class="calibre1">well beyond the scope of this book. Don’t just blindly start setting hostnames! </p>
<p class="calibre1">21 This change might not survive a reboot. Some Linux distros require additional steps, such as placing the hostname into a configuration file that is read at boot time. Consult the documentation for your distro. </p>
<p class="calibre1"><b class="calibre3">Host Information  |  171</b></p>
<p class="calibre1"><a id="calibre_link-183"></a><b class="calibre3">Useful options</b></p>
<p class="calibre1">-i</p>
<p class="calibre1">Print your host’s IP address. </p>
<p class="calibre1">-a</p>
<p class="calibre1">Print your host’s alias name. </p>
<p class="calibre1">-s</p>
<p class="calibre1">Print your host’s short name. </p>
<p class="calibre1">-f</p>
<p class="calibre1">Print your host’s fully qualified name. </p>
<p class="calibre1">-d</p>
<p class="calibre1">Print your host’s DNS domain name. </p>
<p class="calibre1">-y</p>
<p class="calibre1">Print your host’s NIS or YP domain name. </p>
<p class="calibre1">-F  <i class="calibre4">hostfile </i> Set your hostname by reading the name from file  <i class="calibre4">hostfile</i>. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ip</b></p>
<p class="calibre1">ip [ <i class="calibre4">options</i>]  <i class="calibre4">object</i>  <i class="calibre4">command... </i></p>
<p class="calibre1">The ip command displays and sets various aspects of your</p>
<p class="calibre1">computer’s network interface. This topic is beyond the scope of the book, but we’ll teach you a few tricks. </p>
<p class="calibre1">You can get information about the default network interface</p>
<p class="calibre1">(usually called  <i class="calibre4">eth0</i>):</p>
<p class="calibre1">→ <b class="calibre3">ip addr show eth0</b></p>
<p class="calibre1">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;  <i class="calibre4">... </i></p>
<p class="calibre1">link/ether 00:50:ba:48:4f:ba brd ff:ff:ff: <i class="calibre4">... </i></p>
<p class="calibre1">inet 192.168.0.21/24 brd 192.168.0.255 scope  <i class="calibre4">... </i></p>
<p class="calibre1">inet6 fe80::21e:8cff:fe53:41e4/64  <i class="calibre4">... </i></p>
<p class="calibre1">This includes your MAC address (00:50:ba:48:4f:ba), your IP</p>
<p class="calibre1">address (192.168.0.21), and various other information. To view all loaded network interfaces, run:</p>
<p class="calibre1">→ <b class="calibre3">ip addr show</b></p>
<p class="calibre1">Some other useful commands for displaying network informa‐</p>
<p class="calibre1">tion include:</p>
<p class="calibre1">ip help</p>
<p class="calibre1">See usage information for all these commands. </p>
<p class="calibre1"><b class="calibre3">172  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-178"></a>ip addr</p>
<p class="calibre1">Display IP addresses of your network devices. </p>
<p class="calibre1">ip maddr</p>
<p class="calibre1">Display multicast addresses of your network devices. </p>
<p class="calibre1">ip link</p>
<p class="calibre1">Display attributes of your network devices. </p>
<p class="calibre1">ip route</p>
<p class="calibre1">Display your routing table. </p>
<p class="calibre1">ip monitor</p>
<p class="calibre1">Begin monitoring your network devices; type ^C to stop. </p>
<p class="calibre1">Each of these commands has various options: add help on the</p>
<p class="calibre1">end (e.g., ip link help) for usage. Additionally, ip can modify your network when run by the superuser: configuring your</p>
<p class="calibre1">network devices, managing routing tables and rules, creating tunnels, and more. It’s part of a suite of tools called  <i class="calibre4">iproute2</i>. </p>
<p class="calibre1">You’ll need networking experience to understand this complex command; see the ip manpage to get started, or visit <a href="http://lartc.org"> <i class="calibre4">http://</i></a></p>
<p class="calibre1"><a href="http://lartc.org"> <i class="calibre4">lartc.org</i>. </a></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ifconfig</b></p>
<p class="calibre1">ifconfig [ <i class="calibre4">options</i>]  <i class="calibre4">interface</i></p>
<p class="calibre1">The ifconfig command is an ancestor of ip. It is still found on many Linux systems but is less powerful (some would call it</p>
<p class="calibre1">obsolete). We’ll cover a few simple commands here, but you</p>
<p class="calibre1">should be using ip instead. </p>
<p class="calibre1">To display information about the default network interface</p>
<p class="calibre1">(usually called  <i class="calibre4">eth0</i>):</p>
<p class="calibre1">→ <b class="calibre3">ifconfig eth0</b></p>
<p class="calibre1">eth0  Link encap:Ethernet  HWaddr 00:50:BA:48:4F:BA</p>
<p class="calibre1">inet addr:192.168.0.21  Bcast:192.168.0.255  <i class="calibre4">... </i></p>
<p class="calibre1">UP BROADCAST RUNNING MULTICAST  MTU:1500  <i class="calibre4">... </i></p>
<p class="calibre1"><b class="calibre3">Host Information  |  173</b></p>
<p class="calibre1"><a id="calibre_link-30"></a>  RX packets:1955231 errors:0 dropped:0 overruns:0  <i class="calibre4">... </i></p>
<p class="calibre1">TX packets:1314765 errors:0 dropped:0 overruns:0  <i class="calibre4">... </i></p>
<p class="calibre1">collisions:0 txqueuelen:100</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">This includes your MAC address (00:50:BA:48:4F:BA), your IP</p>
<p class="calibre1">address (192.168.0.21), your netmask (255.255.255.0), and various other information. To view all loaded network interfaces, run:</p>
<p class="calibre1">→ <b class="calibre3">ifconfig -a</b></p>
<p class="calibre1"><b class="calibre3">Host Location</b></p>
<p class="calibre1">host</p>
<p class="calibre1">Look up hostnames, IP addresses, and DNS info. </p>
<p class="calibre1">whois</p>
<p class="calibre1">Look up the registrants of Internet domains. </p>
<p class="calibre1">ping</p>
<p class="calibre1">Check if a remote host is reachable. </p>
<p class="calibre1">traceroute View the network path to a remote host. </p>
<p class="calibre1">When dealing with remote computers, you might want to</p>
<p class="calibre1">know more about them. Who owns them? What are the IP</p>
<p class="calibre1">addresses? Where on the network are they located? </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">host</b></p>
<p class="calibre1">host [ <i class="calibre4">options</i>]  <i class="calibre4">name</i> [ <i class="calibre4">server</i>]</p>
<p class="calibre1">The host command looks up the hostname or IP address of a</p>
<p class="calibre1">remote machine by querying DNS:</p>
<p class="calibre1">→ <b class="calibre3">host www.ubuntu.org</b></p>
<p class="calibre1">www.ubuntu.com has address 91.189.90.41</p>
<p class="calibre1">→ <b class="calibre3">host 91.189.90.41</b></p>
<p class="calibre1">41.90.189.91.in-addr.arpa domain name pointer</p>
<p class="calibre1">jujube.canonical.com. </p>
<p class="calibre1">It can also find out much more:</p>
<p class="calibre1"><b class="calibre3">174  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-246"></a>→ <b class="calibre3">host -a www.ubuntu.org</b></p>
<p class="calibre1">Trying "www.ubuntu.org" </p>
<p class="calibre1">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR  <i class="calibre4">... </i></p>
<p class="calibre1">;; flags: qr rd ra; QUERY: 1, ANSWER: 1,  <i class="calibre4">... </i></p>
<p class="calibre1">;; QUESTION SECTION:</p>
<p class="calibre1">;www.ubuntu.org.                     IN      ANY</p>
<p class="calibre1">;; ANSWER SECTION:</p>
<p class="calibre1">www.ubuntu.org.      60      IN      CNAME   </p>
<p class="calibre1">ubuntu.org. </p>
<p class="calibre1">though a full discussion of this output is beyond the scope of this book. The final, optional “server” parameter specifies a particular nameserver for the query:</p>
<p class="calibre1">→ <b class="calibre3">host www.ubuntu.org ns2.dondominio.com</b></p>
<p class="calibre1">Using domain server:</p>
<p class="calibre1">Name: ns2.dondominio.com</p>
<p class="calibre1">Address: 93.93.67.2#53</p>
<p class="calibre1">Aliases: </p>
<p class="calibre1">www.ubuntu.org is an alias for ubuntu.org. </p>
<p class="calibre1">ubuntu.org has address 147.83.195.55</p>
<p class="calibre1">ubuntu.org mail is handled by 10 mx2.upc.es. </p>
<p class="calibre1">ubuntu.org mail is handled by 10 mx1.upc.es. </p>
<p class="calibre1">To see all options, type host by itself. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-a Display all available information. </p>
<p class="calibre1">-t Choose the type of nameserver query: A, AXFR, CNAME, HINFO, KEY, MX, NS, PTR, SIG, SOA, and so on. </p>
<p class="calibre1">Here’s an example of the -t option to locate MX records:</p>
<p class="calibre1">→ <b class="calibre3">host -t MX redhat.com</b></p>
<p class="calibre1">redhat.com mail is handled by 5 mx1.redhat.com. </p>
<p class="calibre1">redhat.com mail is handled by 10 mx2.redhat.com. </p>
<p class="calibre1"><b class="calibre3">Host Location  |  175</b></p>
<p class="calibre1"><a id="calibre_link-145"></a>If the host command doesn’t do what you want, try dig, another powerful DNS lookup utility. You might also encounter the nslookup command, mostly obsolete but still found on</p>
<p class="calibre1">some Linux and Unix systems. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">whois</b></p>
<p class="calibre1">whois [ <i class="calibre4">options</i>]  <i class="calibre4">domain_name</i></p>
<p class="calibre1">The whois command looks up the registration of an Internet</p>
<p class="calibre1">domain:</p>
<p class="calibre1">→ <b class="calibre3">whois linuxmint.com</b></p>
<p class="calibre1">... </p>
<p class="calibre1">Domain name: LINUXMINT.COM</p>
<p class="calibre1">Registrar: TUCOWS DOMAINS INC. </p>
<p class="calibre1">... </p>
<p class="calibre1">Administrative Contact:</p>
<p class="calibre1">Lefebvre, Clement</p>
<p class="calibre1">... </p>
<p class="calibre1">Technical Contact:</p>
<p class="calibre1">Hostmaster, Servage</p>
<p class="calibre1">... </p>
<p class="calibre1">Creation Date: 07-jun-2006</p>
<p class="calibre1">Expiration Date: 07-jun-2016</p>
<p class="calibre1">... </p>
<p class="calibre1">plus a few screens full of legal disclaimers from the registrar. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-h  <i class="calibre4">registrar </i> Perform the lookup at the given registrar’s server. For example, whois -h whois.networksolutions.com</p>
<p class="calibre1">yahoo.com. </p>
<p class="calibre1">-p  <i class="calibre4">port</i></p>
<p class="calibre1">Query the given TCP port instead of the default, 43 (the</p>
<p class="calibre1">whois service). </p>
<p class="calibre1"><b class="calibre3">176  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-176"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">ping</b></p>
<p class="calibre1">ping [ <i class="calibre4">options</i>]  <i class="calibre4">host</i></p>
<p class="calibre1">The ping command tells you if a remote host is reachable. It sends small packets (ICMP packets to be precise) to a remote host and waits for responses:</p>
<p class="calibre1">→ <b class="calibre3">ping google.com</b></p>
<p class="calibre1">PING google.com (74.125.226.144) from 192.168.0.10 :</p>
<p class="calibre1">56(84) bytes of data. </p>
<p class="calibre1">64 bytes from www.google.com (74.125.226.144):</p>
<p class="calibre1">icmp_seq=0 ttl=49 time=32.390 msec</p>
<p class="calibre1">64 bytes from www.google.com (74.125.226.144):</p>
<p class="calibre1">icmp_seq=1 ttl=49 time=24.208 msec</p>
<p class="calibre1"><b class="calibre3">^C</b></p>
<p class="calibre1">--- google.com ping statistics ---</p>
<p class="calibre1">2 packets transmitted, 2 packets received, </p>
<p class="calibre1">0% packet loss</p>
<p class="calibre1">round-trip min/avg/max/mdev =</p>
<p class="calibre1">24.208/28.299/32.390/4.091 ms</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-c  <i class="calibre4">N </i> Ping at most  <i class="calibre4">N</i> times. </p>
<p class="calibre1">-i  <i class="calibre4">N </i> Wait  <i class="calibre4">N</i> seconds (default 1) between pings. </p>
<p class="calibre1">-n</p>
<p class="calibre1">Print IP addresses in the output, rather than hostnames. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">traceroute</b></p>
<p class="calibre1">traceroute [ <i class="calibre4">options</i>]  <i class="calibre4">host</i> [ <i class="calibre4">packet_length</i>]</p>
<p class="calibre1">The traceroute command prints the network path from your</p>
<p class="calibre1">local host to a remote host, and the time it takes for packets to traverse the path:</p>
<p class="calibre1"><b class="calibre3">Host Location  |  177</b></p>
<p class="calibre1"><a id="calibre_link-247"></a>→ <b class="calibre3">traceroute yahoo.com</b></p>
<p class="calibre1">1 server.mydomain.com (192.168.0.20) 1.397 ms ... </p>
<p class="calibre1">2  10.221.16.1 (10.221.16.1) 15.397 ms ... </p>
<p class="calibre1">3  router.example.com (92.242.140.21) 4.952 ms ... </p>
<p class="calibre1">... </p>
<p class="calibre1">... </p>
<p class="calibre1">16  p6.www.dcn.yahoo.com (216.109.118.69)  * ... </p>
<p class="calibre1">Each host in the path is sent three “probes” and the return</p>
<p class="calibre1">times are reported. If five seconds pass with no response, </p>
<p class="calibre1">traceroute prints an asterisk. Also, traceroute may be blocked by firewalls or unable to proceed for various reasons, in which case it prints a symbol:</p>
<p class="calibre1">Symbol Meaning</p>
<p class="calibre1">!F</p>
<p class="calibre1">Fragmentation needed. </p>
<p class="calibre1">!H</p>
<p class="calibre1">Host unreachable. </p>
<p class="calibre1">!N</p>
<p class="calibre1">Network unreachable. </p>
<p class="calibre1">!P</p>
<p class="calibre1">Protocol unreachable. </p>
<p class="calibre1">!S</p>
<p class="calibre1">Source route failed. </p>
<p class="calibre1">!X</p>
<p class="calibre1">Communication administratively prohibited. </p>
<p class="calibre1">!  <i class="calibre4">N</i></p>
<p class="calibre1">ICMP unreachable code  <i class="calibre4">N</i>. </p>
<p class="calibre1">The default packet size is 40 bytes, but you can change this with the final, optional  <i class="calibre4">packet_length</i> parameter (e.g., traceroute myhost 120). </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n</p>
<p class="calibre1">Numeric mode: print IP addresses instead of hostnames. </p>
<p class="calibre1">-w  <i class="calibre4">N </i> Change the timeout from five seconds to  <i class="calibre4">N </i> seconds. </p>
<p class="calibre1"><b class="calibre3">178  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-31"></a><b class="calibre3">Network Connections</b></p>
<p class="calibre1">ssh</p>
<p class="calibre1">Securely log into a remote host, or run commands on it. </p>
<p class="calibre1">scp</p>
<p class="calibre1">Securely copy files to/from a remote host (batch). </p>
<p class="calibre1">sftp</p>
<p class="calibre1">Securely copy files to/from a remote host (interactive). </p>
<p class="calibre1">ftp</p>
<p class="calibre1">Copy files to/from a remote host (interactive, insecure!). </p>
<p class="calibre1">netcat Create arbitrary network connections. </p>
<p class="calibre1">With Linux, it’s easy to establish network connections from one machine to another for remote logins and file transfers. Just make sure you do it securely. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ssh</b></p>
<p class="calibre1">ssh [ <i class="calibre4">options</i>]  <i class="calibre4">host</i> [ <i class="calibre4">command</i>]</p>
<p class="calibre1">The ssh (Secure Shell) program securely logs you into a remote machine where you already have an account:</p>
<p class="calibre1">→ <b class="calibre3">ssh remote.example.com</b></p>
<p class="calibre1">Alternatively, it can invoke a program on that remote machine without logging you in:</p>
<p class="calibre1">→ <b class="calibre3">ssh remote.example.com who</b></p>
<p class="calibre1">ssh encrypts all data that travels across its connection, including your username and password (which you’ll need to access</p>
<p class="calibre1">the remote machine). The SSH protocol also supports other</p>
<p class="calibre1">ways to authenticate, such as public keys and host IDs. See man sshd for details. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-l  <i class="calibre4">user </i> Specify your remote username; otherwise, ssh assumes your local username. You can also use the syntax  <i class="calibre4">username</i>@ <i class="calibre4">host</i>:</p>
<p class="calibre1">→ <b class="calibre3">ssh smith@server.example.com</b></p>
<p class="calibre1"><b class="calibre3">Network Connections  |  179</b></p>
<p class="calibre1"><a id="calibre_link-169"></a>-p  <i class="calibre4">port </i> Use a  <i class="calibre4">port</i> number other than the default (22). </p>
<p class="calibre1">-t</p>
<p class="calibre1">Allocate a tty on the remote system; useful when trying to run a remote command with an interactive user interface, such as a text editor. </p>
<p class="calibre1">-v</p>
<p class="calibre1">Produce verbose output, useful for debugging. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">scp</b></p>
<p class="calibre1">scp  <i class="calibre4">local_spec remote_spec</i></p>
<p class="calibre1">The scp (secure copy) command copies files and directories</p>
<p class="calibre1">from one computer to another in batch. (For an interactive</p>
<p class="calibre1">user interface, see sftp.) It encrypts all communication</p>
<p class="calibre1">between the two machines. As a simple example, scp can copy</p>
<p class="calibre1">a local file to a remote machine:</p>
<p class="calibre1">→ <b class="calibre3">scp myfile remote.example.com:newfile</b></p>
<p class="calibre1">recursively copy a directory to a remote machine:</p>
<p class="calibre1">→ <b class="calibre3">scp -r mydir remote.example.com:</b></p>
<p class="calibre1">copy a remote file to your local machine:</p>
<p class="calibre1">→ <b class="calibre3">scp remote.example.com:myfile . </b></p>
<p class="calibre1">or recursively copy a remote directory to your local machine:</p>
<p class="calibre1">→ <b class="calibre3">scp -r remote.example.com:mydir . </b></p>
<p class="calibre1">To specify an alternate username on the remote system, use the <i class="calibre4">username</i>@ <i class="calibre4">host</i> syntax:</p>
<p class="calibre1">→ <b class="calibre3">scp myfile smith@remote.example.com:</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-p Duplicate all file attributes (permissions, timestamps) when copying. </p>
<p class="calibre1">-r Recursively copy a directory and its contents. </p>
<p class="calibre1">-v Produce verbose output, useful for debugging. </p>
<p class="calibre1"><b class="calibre3">180  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-204"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">sftp</b></p>
<p class="calibre1">sftp ( <i class="calibre4">host</i>  <i class="calibre4">username</i>@ <i class="calibre4">host</i>)</p>
<p class="calibre1">The sftp program copies files interactively and securely</p>
<p class="calibre1">between two computers. (As opposed to scp, which copies files in batch.) The user interface is much like that of ftp, but ftp is not secure:</p>
<p class="calibre1">→ <b class="calibre3">sftp remote.example.com</b></p>
<p class="calibre1">Password: <b class="calibre3">********</b></p>
<p class="calibre1">sftp&gt; <b class="calibre3">cd MyFiles</b></p>
<p class="calibre1">sftp&gt; <b class="calibre3">ls</b></p>
<p class="calibre1">README</p>
<p class="calibre1">file1</p>
<p class="calibre1">file2</p>
<p class="calibre1">file3</p>
<p class="calibre1">sftp&gt; <b class="calibre3">get file2</b></p>
<p class="calibre1">Fetching /home/smith/MyFiles/file2 to file2</p>
<p class="calibre1">sftp&gt; <b class="calibre3">quit</b></p>
<p class="calibre1">If your username on the remote system is different from your local one, use the  <i class="calibre4">username</i>@ <i class="calibre4">host</i> argument:</p>
<p class="calibre1">→ <b class="calibre3">sftp smith@remote.example.com</b></p>
<p class="calibre1">Command</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">help</p>
<p class="calibre1">View a list of available commands. </p>
<p class="calibre1">ls</p>
<p class="calibre1">List the files in the current remote directory. </p>
<p class="calibre1">lls</p>
<p class="calibre1">List the files in the current local directory. </p>
<p class="calibre1">pwd</p>
<p class="calibre1">Print the remote working directory. </p>
<p class="calibre1">lpwd</p>
<p class="calibre1">Print the local working directory. </p>
<p class="calibre1">cd  <i class="calibre4">dir</i></p>
<p class="calibre1">Change your remote directory to be  <i class="calibre4">dir</i>. </p>
<p class="calibre1">lcd  <i class="calibre4">dir</i></p>
<p class="calibre1">Change your local directory to be  <i class="calibre4">dir</i>. </p>
<p class="calibre1">get  <i class="calibre4">file1 </i>[ <i class="calibre4">file2</i>] Copy remote  <i class="calibre4">file1 </i> to local machine, optionally renamed as  <i class="calibre4">file2</i>. </p>
<p class="calibre1"><b class="calibre3">Network Connections  |  181</b></p>
<p class="calibre1"><a id="calibre_link-170"></a>Command</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">put  <i class="calibre4">file1 </i>[ <i class="calibre4">file2</i>] Copy local  <i class="calibre4">file1</i> to remote machine, optionally renamed as  <i class="calibre4">file2</i>. </p>
<p class="calibre1">mget  <i class="calibre4">file</i>*</p>
<p class="calibre1">Copy multiple remote files to the local machine using</p>
<p class="calibre1">wildcards * and ?. </p>
<p class="calibre1">mput  <i class="calibre4">file</i>*</p>
<p class="calibre1">Copy multiple local files to the remote machine using</p>
<p class="calibre1">wildcards * and ?. </p>
<p class="calibre1">quit</p>
<p class="calibre1">Exit sftp. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ftp</b></p>
<p class="calibre1">ftp [ <i class="calibre4">options</i>]  <i class="calibre4">host</i></p>
<p class="calibre1">The popular ftp (File Transfer Protocol) program copies files between computers, but not in a secure manner: your username and password travel over the network as plain text. Use sftp instead if your remote server supports it. </p>
<p class="calibre1">The same commands we listed for sftp also work for ftp. </p>
<p class="calibre1">(However, the two programs support other, differing com‐</p>
<p class="calibre1">mands, too.)</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">netcat</b></p>
<p class="calibre1">netcat [ <i class="calibre4">options</i>] [ <i class="calibre4">destination</i>] [ <i class="calibre4">port</i>]</p>
<p class="calibre1">nc [ <i class="calibre4">options</i>] [ <i class="calibre4">destination</i>] [ <i class="calibre4">port</i>]</p>
<p class="calibre1">netcat, or equivalently, nc, is a general-purpose tool for making network connections. It’s handy for debugging, learning about networking, and many other uses. For example, netcat can</p>
<p class="calibre1">speak directly to any TCP or UDP service, such as an SSH</p>
<p class="calibre1">server on your local TCP port 22:</p>
<p class="calibre1"><b class="calibre3">182  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-216"></a>→ <b class="calibre3">netcat localhost 22</b></p>
<p class="calibre1">SSH-2.0-OpenSSH_6.9p1 Ubuntu-2ubuntu0.1</p>
<p class="calibre1"><b class="calibre3">^C</b></p>
<p class="calibre1">This feature, which is handy for determining if a particular service is up or down, also works with service names as listed</p>
<p class="calibre1">in  <i class="calibre4">/etc/services</i>. For example, you could connect to Google’s web service (port 80) with:</p>
<p class="calibre1">→ <b class="calibre3">netcat www.google.com http</b></p>
<p class="calibre1"><b class="calibre3">xxx</b>                       <i class="calibre4">Type some junk and press Enter</i> HTTP/1.0 400 Bad Request</p>
<p class="calibre1">Content-Type: text/html; charset=UTF-8</p>
<p class="calibre1">Content-Length: 1555</p>
<p class="calibre1">Date: Fri, 04 Mar 2016 02:17:37 GMT</p>
<p class="calibre1">... </p>
<p class="calibre1">If you’re an old-school Linux user, you might be using telnet for connecting in this way to arbitrary TCP ports. netcat is much more flexible. For example, using two shells, you can create a client and a service and have them talk to each other. Start a service listening on port 55555:</p>
<p class="calibre1">→ <b class="calibre3">netcat -l 55555</b></p>
<p class="calibre1">Now in another window, run a client that talks to that same</p>
<p class="calibre1">port, and type a message:</p>
<p class="calibre1">→ <b class="calibre3">netcat localhost 55555</b></p>
<p class="calibre1"><b class="calibre3">Hello world, how are you? </b></p>
<p class="calibre1">Your message gets sent to your service, which will print “Hello world, how are you?” and any subsequent lines you enter. Press</p>
<p class="calibre1">^D to close the connection. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-u</p>
<p class="calibre1">Establish a UDP connection instead of TCP. </p>
<p class="calibre1">-l</p>
<p class="calibre1">Listen for connections on the given port. </p>
<p class="calibre1">-p  <i class="calibre4">N </i> Use port  <i class="calibre4">N </i> as the source port. </p>
<p class="calibre1">-w  <i class="calibre4">N </i> Time out after  <i class="calibre4">N </i> seconds. </p>
<p class="calibre1"><b class="calibre3">Network Connections  |  183</b></p>
<p class="calibre1"><a id="calibre_link-32"></a>-h</p>
<p class="calibre1">Get help. </p>
<p class="calibre1"><b class="calibre3">Email</b></p>
<p class="calibre1">mutt</p>
<p class="calibre1">Text-based mail client. </p>
<p class="calibre1">mail</p>
<p class="calibre1">Minimal text-based mail client. </p>
<p class="calibre1">mailq View the outgoing mail queue on your system. </p>
<p class="calibre1">Linux includes a number of text-based mail clients. We’ll look at several with different purposes and strengths. (Linux also has graphical email clients, such as Thunderbird, Evolution, and KMail.) </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">mutt</b></p>
<p class="calibre1">mutt [ <i class="calibre4">options</i>]</p>
<p class="calibre1">Mutt is a text-based mailer that runs in an ordinary terminal (or terminal window), so it can be used both locally (e.g., in an X terminal window) or remotely over an SSH connection. It is very powerful, with many commands and options. To invoke it, type:</p>
<p class="calibre1">→ <b class="calibre3">mutt</b></p>
<p class="calibre1">When the main screen appears, any messages in your mailbox</p>
<p class="calibre1">are listed briefly, one per line, and the following commands are available:</p>
<p class="calibre1">Keystroke</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">Up arrow</p>
<p class="calibre1">Move to the previous message. </p>
<p class="calibre1">Down arrow Move to the next message. </p>
<p class="calibre1">PageUp</p>
<p class="calibre1">Scroll up one pageful of messages. </p>
<p class="calibre1">PageDown</p>
<p class="calibre1">Scroll down one pageful of messages. </p>
<p class="calibre1">Home</p>
<p class="calibre1">Move to the first message. </p>
<p class="calibre1"><b class="calibre3">184  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-248"></a>Keystroke</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">End</p>
<p class="calibre1">Move to the last message. </p>
<p class="calibre1">m</p>
<p class="calibre1">Compose a new mail message. This invokes your default text</p>
<p class="calibre1">editor. After editing the message and exiting the editor, type y to send the message or q to postpone it. </p>
<p class="calibre1">r</p>
<p class="calibre1">Reply to current message. Works like m. </p>
<p class="calibre1">f</p>
<p class="calibre1">Forward the current message to a third party. Works like m. </p>
<p class="calibre1">i</p>
<p class="calibre1">View the contents of your mailbox. </p>
<p class="calibre1">C</p>
<p class="calibre1">Copy the current message to another mailbox. </p>
<p class="calibre1">d</p>
<p class="calibre1">Delete the current message. </p>
<p class="calibre1">While writing a message, after you exit your text editor, the following commands are available:</p>
<p class="calibre1">Keystroke Meaning</p>
<p class="calibre1">a</p>
<p class="calibre1">Attach a file (an attachment) to the message. </p>
<p class="calibre1">c</p>
<p class="calibre1">Set the CC list. </p>
<p class="calibre1">b</p>
<p class="calibre1">Set the BCC list. </p>
<p class="calibre1">e</p>
<p class="calibre1">Edit the message again. </p>
<p class="calibre1">r</p>
<p class="calibre1">Edit the Reply-To field. </p>
<p class="calibre1">s</p>
<p class="calibre1">Edit the subject line. </p>
<p class="calibre1">y</p>
<p class="calibre1">Send the message. </p>
<p class="calibre1">C</p>
<p class="calibre1">Copy the message to a file. </p>
<p class="calibre1">q</p>
<p class="calibre1">Postpone the message without sending it. </p>
<p class="calibre1">Additional commands are always available:</p>
<p class="calibre1">Keystroke Meaning</p>
<p class="calibre1">? </p>
<p class="calibre1">See a list of all commands (press the SPACEBAR to scroll down, q to quit). </p>
<p class="calibre1">^G</p>
<p class="calibre1">Cancel the command in progress. </p>
<p class="calibre1"><b class="calibre3">Email  |  185</b></p>
<p class="calibre1"><a id="calibre_link-96"></a>Keystroke Meaning</p>
<p class="calibre1">q</p>
<p class="calibre1">Quit. </p>
<p class="calibre1">The official Mutt site is <a href="http://www.mutt.org"> <i class="calibre4">http://www.mutt.org</i>. F</a>or a different command-line mail client for Linux, check out alpine (<a href="http://patches.freeiz.com/"> <i class="calibre4">http://</i></a></p>
<p class="calibre1"><a href="http://patches.freeiz.com/"> <i class="calibre4">patches.freeiz.com/</i>). </a></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">mail</b></p>
<p class="calibre1">mail [ <i class="calibre4">options</i>]  <i class="calibre4">recipient</i></p>
<p class="calibre1">The mail program is a quick, simple email client. Most people want a more powerful program for regular use, but for quick</p>
<p class="calibre1">messages from the command line or in scripts, mail is really handy. </p>
<p class="calibre1">To send a quick message:</p>
<p class="calibre1">→ <b class="calibre3">mail smith@example.com</b></p>
<p class="calibre1">Subject: <b class="calibre3">my subject</b></p>
<p class="calibre1"><b class="calibre3">I'm typing a message. </b></p>
<p class="calibre1"><b class="calibre3">To end it, I type a period by itself on a line. </b></p>
<p class="calibre1"><b class="calibre3">. </b></p>
<p class="calibre1">Cc: <b class="calibre3">jones@example.com</b></p>
<p class="calibre1">→</p>
<p class="calibre1">To send a quick message using a single command, use a pipe‐</p>
<p class="calibre1">line:</p>
<p class="calibre1">→ <b class="calibre3">echo "Hey!" | mail -s "subject" smith@example.com</b> To mail a file using a single command, you can use redirection or a pipeline:</p>
<p class="calibre1">→ <b class="calibre3">mail -s "my subject" smith@example.com &lt; filename</b></p>
<p class="calibre1">→ <b class="calibre3">cat filename \</b></p>
<p class="calibre1"><b class="calibre3">  | mail -s "my subject" smith@example.com</b></p>
<p class="calibre1">Notice how easily you can send the output of a pipeline as an email message; this is useful in scripts. </p>
<p class="calibre1"><b class="calibre3">186  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-164"></a><b class="calibre3">Useful options</b></p>
<p class="calibre1">-s  <i class="calibre4">subject</i></p>
<p class="calibre1">Set the subject line of an outgoing message. </p>
<p class="calibre1">-v</p>
<p class="calibre1">Verbose mode: print messages about mail delivery. </p>
<p class="calibre1">-c  <i class="calibre4">addresses </i> CC the message to the given addresses, a comma-separated list. </p>
<p class="calibre1">-b  <i class="calibre4">addresses </i> BCC the message to the given addresses, a comma-separated list. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">mailq</b></p>
<p class="calibre1">mailq</p>
<p class="calibre1">The mailq command lists any outgoing email messages await‐</p>
<p class="calibre1">ing delivery, if any (mail delivery is usually so quick, however, that mailq typically has no output):</p>
<p class="calibre1">→ <b class="calibre3">mailq</b></p>
<p class="calibre1"> <i class="calibre4">... </i> Size-- ----Arrival Time--  -Sender/Recipient---</p>
<p class="calibre1">333 Tue Jan 10 21:17:14 smith@example.com</p>
<p class="calibre1">jones@elsewhere.org</p>
<p class="calibre1">Sent mail messages are also recorded in a log file such</p>
<p class="calibre1">as  <i class="calibre4">/var/log/mail.log</i>; the name may differ from distro to distro. </p>
<p class="calibre1">To see the most recent mail delivery actions, view the last few lines with tail:</p>
<p class="calibre1">→ <b class="calibre3">tail /var/log/mail.log</b></p>
<p class="calibre1"><b class="calibre3">Beyond Mail Readers</b></p>
<p class="calibre1">Email is more “transparent” on Linux than on other platforms that merely display your mailbox and send and receive messages. The ability to list outgoing email messages with mailq is just one example. Here are some other options to whet your</p>
<p class="calibre1">appetite and encourage you to explore. </p>
<p class="calibre1"><b class="calibre3">Email  |  187</b></p>
<p class="calibre1"><a id="calibre_link-33"></a>• You can process your mailboxes with any command-line tools, such as grep, because mail files are plain text. </p>
<p class="calibre1">• You can manually retrieve messages from your mail</p>
<p class="calibre1">server at the command line with the fetchmail com‐</p>
<p class="calibre1">mand. Using a simple configuration file, this command</p>
<p class="calibre1">can reach out to IMAP and POP servers and download</p>
<p class="calibre1">mail in batch. See man fetchmail. </p>
<p class="calibre1">• Your system can run a mail server, such as postfix or</p>
<p class="calibre1">sendmail, to handle the most complex mail delivery sit‐</p>
<p class="calibre1">uations. </p>
<p class="calibre1">• You can control local mail delivery in sophisticated ways</p>
<p class="calibre1">with the procmail command, which filters arriving email</p>
<p class="calibre1">messages through any arbitrary program. For more</p>
<p class="calibre1">information, see man procmail. </p>
<p class="calibre1">• Spam filtering is sophisticated on Linux: check out the</p>
<p class="calibre1">SpamAssassin suite of programs. You can run it person‐</p>
<p class="calibre1">ally on your incoming email, or at the server level for</p>
<p class="calibre1">large numbers of users. </p>
<p class="calibre1">In short, email is not limited to the features of your mail-</p>
<p class="calibre1">reading program. Investigate and experiment! </p>
<p class="calibre1"><b class="calibre3">Web Browsing</b></p>
<p class="calibre1">lynx Text-only web browser. </p>
<p class="calibre1">wget Download web pages and files. </p>
<p class="calibre1">Besides the usual web browsers such as Chrome and Firefox, </p>
<p class="calibre1">Linux offers several ways to explore the World Wide Web via</p>
<p class="calibre1">the command line. </p>
<p class="calibre1"><b class="calibre3">188  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-189"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">lynx</b></p>
<p class="calibre1">lynx [ <i class="calibre4">options</i>] [ <i class="calibre4">URL</i>]</p>
<p class="calibre1">Lynx is a stripped-down, text-only web browser. It doesn’t display pictures, play audio or video, or even respond to your</p>
<p class="calibre1">mouse. But it’s incredibly useful when you just want a quick look at a page, or when the network is slow, or for downloading the HTML of a website. It’s particularly good for checking out a suspicious URL, as Lynx doesn’t run JavaScript and won’t even accept a cookie without asking you first. </p>
<p class="calibre1">→ <b class="calibre3">lynx http://www.yahoo.com</b></p>
<p class="calibre1">All browsing is done by keyboard. Many pages will not look</p>
<p class="calibre1">quite right, especially if they use tables or frames extensively, but usually you can find your way around a site. </p>
<p class="calibre1">Keystroke</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">? </p>
<p class="calibre1">Get help. </p>
<p class="calibre1">k</p>
<p class="calibre1">List all keystrokes and their meanings. </p>
<p class="calibre1">^G</p>
<p class="calibre1">Cancel a command in progress. </p>
<p class="calibre1">q</p>
<p class="calibre1">Quit Lynx. </p>
<p class="calibre1">Enter</p>
<p class="calibre1">“Click” the current link, or finish the current form field. </p>
<p class="calibre1">Left arrow</p>
<p class="calibre1">Back to previous page. </p>
<p class="calibre1">Right arrow Forward to next page, or “click” the current link. </p>
<p class="calibre1">g</p>
<p class="calibre1">Go to a URL (you’ll be prompted to enter it). </p>
<p class="calibre1">p</p>
<p class="calibre1">Save, print, or mail the current page. </p>
<p class="calibre1">Space bar</p>
<p class="calibre1">Scroll down. </p>
<p class="calibre1">b</p>
<p class="calibre1">Scroll up. </p>
<p class="calibre1">Down arrow Go to the next link or form field. </p>
<p class="calibre1">Up arrow</p>
<p class="calibre1">Go to the previous link or form field. </p>
<p class="calibre1">^A</p>
<p class="calibre1">Go to top of page. </p>
<p class="calibre1"><b class="calibre3">Web Browsing  |  189</b></p>
<p class="calibre1"><a id="calibre_link-162"></a>Keystroke</p>
<p class="calibre1">Meaning</p>
<p class="calibre1">^E</p>
<p class="calibre1">Go to end of page. </p>
<p class="calibre1">m</p>
<p class="calibre1">Return to the main/home page. </p>
<p class="calibre1">/</p>
<p class="calibre1">Search for text on the page. </p>
<p class="calibre1">a</p>
<p class="calibre1">Bookmark the current page. </p>
<p class="calibre1">v</p>
<p class="calibre1">View your bookmark list. </p>
<p class="calibre1">r</p>
<p class="calibre1">Delete a bookmark. </p>
<p class="calibre1">=</p>
<p class="calibre1">Display properties of the current page and link. </p>
<p class="calibre1">\</p>
<p class="calibre1">View HTML source (type again to return to normal view). </p>
<p class="calibre1">Lynx has over 100 command-line options, so the manpage is</p>
<p class="calibre1">well worth exploring. If you like text-based browsing but Lynx isn’t to your taste, try similar programs such as w3m, links, and elinks. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-dump</p>
<p class="calibre1">Print the rendered page to standard output and exit. </p>
<p class="calibre1">(Compare to the -source option.)</p>
<p class="calibre1">-source</p>
<p class="calibre1">Print the HTML source to standard output and exit. </p>
<p class="calibre1">(Compare to the wget command.)</p>
<p class="calibre1">-emacskeys </p>
<p class="calibre1">Make Lynx obey keystrokes reminiscent of the emacs editor. </p>
<p class="calibre1">-vikeys </p>
<p class="calibre1">Make Lynx obey keystrokes reminiscent of the vim (or vi)</p>
<p class="calibre1">editor. </p>
<p class="calibre1">-homepage= <i class="calibre4">URL </i> Set your home page URL to be  <i class="calibre4">URL</i>. </p>
<p class="calibre1">-color</p>
<p class="calibre1">Turn colored text mode on. </p>
<p class="calibre1">-nocolor</p>
<p class="calibre1">Turn colored text mode off. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">wget</b></p>
<p class="calibre1">wget [ <i class="calibre4">options</i>]  <i class="calibre4">URL</i></p>
<p class="calibre1"><b class="calibre3">190  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-156"></a>The wget command hits a URL and downloads the data to a file or standard output. It’s great for capturing individual web</p>
<p class="calibre1">pages, downloading files, or duplicating entire website hierarchies to arbitrary depth. For example, let’s capture the Yahoo! </p>
<p class="calibre1">home page:</p>
<p class="calibre1">→ <b class="calibre3">wget http://www.yahoo.com</b></p>
<p class="calibre1">23:19:51 (220.84 KB/s) - 'index.html' saved [31434]</p>
<p class="calibre1">which is saved to a file  <i class="calibre4">index.html</i> in the current directory. wget has the added ability to resume a download if it gets interrupted in the middle, say, due to a network failure: just run</p>
<p class="calibre1">wget -c with the same URL and it picks up where it left off. </p>
<p class="calibre1">Perhaps the most useful feature of wget is its ability to download files without needing a web browser:</p>
<p class="calibre1">→ <b class="calibre3">wget http://linuxpocketguide.com/sample.pdf</b></p>
<p class="calibre1">This is great for large files like videos and ISO images. You can even write shell scripts to download sets of files if you know their names:</p>
<p class="calibre1">→ <b class="calibre3">for i in 1 2 3</b></p>
<p class="calibre1"><b class="calibre3">do</b></p>
<p class="calibre1"><b class="calibre3">  wget http://example.com/$i.mpeg</b></p>
<p class="calibre1"><b class="calibre3">done</b></p>
<p class="calibre1">Another similar command is curl, which writes to standard</p>
<p class="calibre1">output by default&mdash;unlike wget, which duplicates the original page and file names by default:</p>
<p class="calibre1">→ <b class="calibre3">curl http://www.yahoo.com &gt; mypage.html</b></p>
<p class="calibre1">wget has over 70 options, so we’ll cover just a few important ones. (curl has a different set of options; see its manpage.) <b class="calibre3">Useful options</b></p>
<p class="calibre1">-i  <i class="calibre4">filename</i></p>
<p class="calibre1">Read URLs from the given file and retrieve them in turn. </p>
<p class="calibre1">-O  <i class="calibre4">filename</i></p>
<p class="calibre1">Write all the captured HTML to the given file, one page</p>
<p class="calibre1">appended after the other. </p>
<p class="calibre1"><b class="calibre3">Web Browsing  |  191</b></p>
<p class="calibre1"><a id="calibre_link-249"></a>-c</p>
<p class="calibre1">Continue mode: if a previous retrieval was interrupted, </p>
<p class="calibre1">leaving only a partial file as a result, pick up where wget</p>
<p class="calibre1">left off. That is, if wget had downloaded 100K of a 150K</p>
<p class="calibre1">file, the -c option says to retrieve only the remaining 50K</p>
<p class="calibre1">and append it to the existing file. wget can be fooled, </p>
<p class="calibre1">however, if the remote file has changed since the first</p>
<p class="calibre1">(partial) download, so use this option only if you know the</p>
<p class="calibre1">remote file hasn’t changed. </p>
<p class="calibre1">-t  <i class="calibre4">N</i></p>
<p class="calibre1">Try  <i class="calibre4">N</i> times before giving up.  <i class="calibre4">N</i> =0 means try forever. </p>
<p class="calibre1">--progress=dot Print dots to show the download progress. </p>
<p class="calibre1">--progress=bar Print bars to show the download progress. </p>
<p class="calibre1">--spider</p>
<p class="calibre1">Don’t download, just check existence of remote pages. </p>
<p class="calibre1">-nd</p>
<p class="calibre1">Retrieve all files into the current directory, even if</p>
<p class="calibre1">remotely they are in a more complex directory tree. (By</p>
<p class="calibre1">default, wget duplicates the remote directory hierarchy.)</p>
<p class="calibre1">-r</p>
<p class="calibre1">Retrieve a page hierarchy recursively, including</p>
<p class="calibre1">subdirectories. </p>
<p class="calibre1">-l  <i class="calibre4">N</i></p>
<p class="calibre1">Retrieve files at most  <i class="calibre4">N </i> levels deep (5 by default). </p>
<p class="calibre1">-k</p>
<p class="calibre1">Inside retrieved files, modify URLs so the files can be</p>
<p class="calibre1">viewed locally in a web browser. </p>
<p class="calibre1">-p</p>
<p class="calibre1">Download all necessary files to make a page display</p>
<p class="calibre1">completely, such as stylesheets and images. </p>
<p class="calibre1">-L</p>
<p class="calibre1">Follow relative links (within a page) but not absolute links. </p>
<p class="calibre1">-A  <i class="calibre4">pattern</i></p>
<p class="calibre1">Accept mode: download only files whose names match a</p>
<p class="calibre1">given pattern. Patterns may contain the same wildcards as</p>
<p class="calibre1">the shell. </p>
<p class="calibre1">-R  <i class="calibre4">pattern</i></p>
<p class="calibre1">Reject mode: download only files whose names  <i class="calibre4">do not</i></p>
<p class="calibre1">match a given pattern. </p>
<p class="calibre1">-I  <i class="calibre4">pattern</i></p>
<p class="calibre1">Directory inclusion: download files only from directories</p>
<p class="calibre1">that match a given pattern. </p>
<p class="calibre1">-X  <i class="calibre4">pattern</i></p>
<p class="calibre1">Directory exclusion: download files only from directories</p>
<p class="calibre1">that  <i class="calibre4">do not</i> match a given pattern. </p>
<p class="calibre1"><b class="calibre3">192  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-34"></a><b class="calibre3">Instant Messaging</b></p>
<p class="calibre1">write</p>
<p class="calibre1">Send messages to a terminal. </p>
<p class="calibre1">mesg</p>
<p class="calibre1">Prohibit write. </p>
<p class="calibre1">tty</p>
<p class="calibre1">Print your terminal device name. </p>
<p class="calibre1">sendxmpp</p>
<p class="calibre1">Send instant messages via XMPP (Jabber). </p>
<p class="calibre1">profanity Text-based XMPP client. </p>
<p class="calibre1">irssi</p>
<p class="calibre1">Text-based IRC client. </p>
<p class="calibre1">Linux provides two types of instant messaging. The first is for contacting other users on the same Linux machine, using an</p>
<p class="calibre1">ancient command called write. The second is modern instant</p>
<p class="calibre1">messaging, with commands such as sendxmpp. In the second</p>
<p class="calibre1">case, it’s more common to use a graphical instant messaging</p>
<p class="calibre1">program such as pidgin (<a href="http://www.pidgin.im/"> <i class="calibre4">http://www.pidgin.im/</i></a>), but command-line tools are helpful if you aren’t using a graphical desktop. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">write</b></p>
<p class="calibre1">write  <i class="calibre4">user</i> [ <i class="calibre4">tty</i>]</p>
<p class="calibre1">The write program sends lines of text from one logged-in user to another on the same Linux machine:</p>
<p class="calibre1">→ <b class="calibre3">write smith</b></p>
<p class="calibre1">Hi, how are you? </p>
<p class="calibre1">See you later. </p>
<p class="calibre1">^D</p>
<p class="calibre1">^D ends the connection. write is also useful in pipelines for quick one-off messages:</p>
<p class="calibre1">→ <b class="calibre3">echo 'Howdy!' | write smith</b></p>
<p class="calibre1">The related command wall sends a message to all logged-in</p>
<p class="calibre1">users at once:</p>
<p class="calibre1"><b class="calibre3">Instant Messaging  |  193</b></p>
<p class="calibre1"><a id="calibre_link-193"></a>→ <b class="calibre3">wall The system will reboot in 1 hour</b></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">mesg</b></p>
<p class="calibre1">mesg [y|n]</p>
<p class="calibre1">The mesg program controls whether write connections can</p>
<p class="calibre1">reach your terminal. mesg y permits them, mesg n denies them, and mesg prints the current status (y or n); y is the default. mesg has no effect on modern instant messaging programs:</p>
<p class="calibre1">→ <b class="calibre3">mesg</b></p>
<p class="calibre1">is y</p>
<p class="calibre1">→ <b class="calibre3">mesg n</b></p>
<p class="calibre1">→ <b class="calibre3">mesg</b></p>
<p class="calibre1">is n</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">tty</b></p>
<p class="calibre1">tty</p>
<p class="calibre1">The tty program prints the name of the terminal device associated with the current shell (write may need this information if your recipient is logged in multiple times):</p>
<p class="calibre1">→ <b class="calibre3">tty</b></p>
<p class="calibre1">/dev/pts/4</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">sendxmpp</b></p>
<p class="calibre1">sendxmpp [ <i class="calibre4">options</i>] recipients</p>
<p class="calibre1">The sendxmpp command provides a quick way to send an</p>
<p class="calibre1">instant message via the XMPP protocol (Jabber). It’s convenient when you just want to send a single message, which can be a</p>
<p class="calibre1"><b class="calibre3">194  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-184"></a>simple “hello” or the contents of a text file, and you don’t need to receive a message in return. </p>
<p class="calibre1">You’ll need a Jabber username and password first, which you</p>
<p class="calibre1">can obtain by registering on any Jabber server around the Web; visit <a href="http://www.jabber.org"> <i class="calibre4">http://www.jabber.org</i></a> for a list of servers. Once you’ve registered, put your username and password into the file</p>
<p class="calibre1"> <i class="calibre4">~/.sendxmpp</i> in your home directory. Different versions of sendxmpp use different file formats. If your username is smith, your Jabber server is jabber.example.com, and your password</p>
<p class="calibre1">is wQVY6LC/8pCH, the older file format is:</p>
<p class="calibre1">smith@jabber.example.com  wQVY6LC/8pCH</p>
<p class="calibre1">and the newer format is:</p>
<p class="calibre1">username: smith</p>
<p class="calibre1">jserver: jabber.example.com</p>
<p class="calibre1">password: wQVY6LC/8pCH</p>
<p class="calibre1">Once this setup is complete, you can send a message to a friend on Jabber with:</p>
<p class="calibre1">→ <b class="calibre3">echo "Hello world" | sendxmpp  <i class="calibre4">user@host</i></b></p>
<p class="calibre1">Many Jabber servers use secure connections, so you will probably need to add the option -t (for TLS connections) or -e (for SSL connections) for your command to work. Here’s an example that secures the connection with TLS and sends the con‐</p>
<p class="calibre1">tents of a text file  <i class="calibre4">message.txt</i> file:</p>
<p class="calibre1">→ <b class="calibre3">sendxmpp -t  <i class="calibre4">user@host</i></b><b class="calibre3"> &lt; message.txt</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-t</p>
<p class="calibre1">Use TLS to secure the connection. </p>
<p class="calibre1">-e</p>
<p class="calibre1">Use SSL to secure the connection. </p>
<p class="calibre1">-s  <i class="calibre4">text </i> Send a subject line along with your message. </p>
<p class="calibre1">-v</p>
<p class="calibre1">Verbose mode: print debugging information. Helpful if your</p>
<p class="calibre1">connection fails. </p>
<p class="calibre1"><b class="calibre3">Instant Messaging  |  195</b></p>
<p class="calibre1"><a id="calibre_link-185"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">profanity</b></p>
<p class="calibre1">profanity [ <i class="calibre4">options</i>]</p>
<p class="calibre1">The profanity command is a fully functional instant messag‐</p>
<p class="calibre1">ing client for the XMPP protocol (Jabber). Unlike graphical clients, profanity runs in a shell window, so you can use it over SSH, for example. </p>
<p class="calibre1">You’ll need a Jabber username and password, as with sendxmpp:</p>
<p class="calibre1">→ <b class="calibre3">profanity -a  <i class="calibre4">user@host</i></b></p>
<p class="calibre1">profanity then prompts you for commands, which always</p>
<p class="calibre1">begin with a slash. For example, to open a text-based “window” </p>
<p class="calibre1">for messaging with a friend, enter:</p>
<p class="calibre1"><b class="calibre3">/msg friend@jabber.example.com</b></p>
<p class="calibre1">and to send a message to that friend, enter:</p>
<p class="calibre1"><b class="calibre3">/msg Hi there! </b></p>
<p class="calibre1"><b class="calibre3">Selected commands</b></p>
<p class="calibre1">/help</p>
<p class="calibre1">Get help on all available commands. </p>
<p class="calibre1">/connect  <i class="calibre4">you@host </i> Log in. </p>
<p class="calibre1">/msg  <i class="calibre4">user@host</i></p>
<p class="calibre1">Open a messaging window to communicate with</p>
<p class="calibre1"> <i class="calibre4">user@host</i>. </p>
<p class="calibre1">/msg  <i class="calibre4">text</i></p>
<p class="calibre1">Send an instant message in your current messaging</p>
<p class="calibre1">window. </p>
<p class="calibre1">/close</p>
<p class="calibre1">Close the current messaging window. </p>
<p class="calibre1">/wins</p>
<p class="calibre1">List your messaging windows. </p>
<p class="calibre1">F1&ndash;F10</p>
<p class="calibre1">Switch between messaging windows 1 through 10. </p>
<p class="calibre1">(Does not work over SSH.)</p>
<p class="calibre1">/disconnect</p>
<p class="calibre1">Log out. </p>
<p class="calibre1">/quit</p>
<p class="calibre1">Exit profanity. </p>
<p class="calibre1"><b class="calibre3">196  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-182"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">irssi</b></p>
<p class="calibre1">irssi [ <i class="calibre4">options</i>]</p>
<p class="calibre1">The irssi command is a fully functional IRC (Internet Relay</p>
<p class="calibre1">Chat) client that is text-based, so it runs in a shell window. A full tutorial on chatting with IRC is beyond the scope of this book: see <a href="https://irssi.org"> <i class="calibre4">https://irssi.org</i></a> and <a href="http://irchelp.org"> <i class="calibre4">http://irchelp.org</i></a> for more information. To get started, run:</p>
<p class="calibre1">→ <b class="calibre3">irssi</b></p>
<p class="calibre1">irssi then prompts you to type something. This can either be a command, which begins with a slash, or any other text, which is broadcast as a message to everyone else connected to your current IRC channel:</p>
<p class="calibre1">→ <b class="calibre3">irssi</b></p>
<p class="calibre1">[[status]] <b class="calibre3">/connect irc.example.com</b></p>
<p class="calibre1"> <i class="calibre4">... </i> Irssi: Connection to irc.example.com established</p>
<p class="calibre1">[[status]] <b class="calibre3">/nick zippy</b></p>
<p class="calibre1">You're now known as zippy</p>
<p class="calibre1">[[status]] <b class="calibre3">/join test</b></p>
<p class="calibre1">Irssi: Join to #test was synced in 0 secs</p>
<p class="calibre1">&lt;zerbina&gt; Hi there, zippy! </p>
<p class="calibre1">&lt;fuelrod&gt; Welcome back! </p>
<p class="calibre1">[#test] <b class="calibre3">Are we having fun yet? </b></p>
<p class="calibre1">&lt;zippy&gt; Are we having fun yet? </p>
<p class="calibre1">&lt;fuelrod&gt; Totally! </p>
<p class="calibre1">&lt;zerbina&gt; Yow! </p>
<p class="calibre1">[#test] <b class="calibre3">/quit</b></p>
<p class="calibre1"><b class="calibre3">Selected commands</b></p>
<p class="calibre1">/help</p>
<p class="calibre1">List the available commands. For help on a single</p>
<p class="calibre1">command, type /help / <i class="calibre4">command</i>. For</p>
<p class="calibre1">example: /help /join</p>
<p class="calibre1">/connect  <i class="calibre4">server </i> Connect to an IRC server. </p>
<p class="calibre1">/nick  <i class="calibre4">name</i></p>
<p class="calibre1">Set your IRC nickname. </p>
<p class="calibre1">/join  <i class="calibre4">channel</i></p>
<p class="calibre1">Join a given IRC channel. </p>
<p class="calibre1"><b class="calibre3">Instant Messaging  |  197</b></p>
<p class="calibre1"><a id="calibre_link-35"></a>/names</p>
<p class="calibre1">List the users connected on the current channel. </p>
<p class="calibre1">/disconnect</p>
<p class="calibre1">Disconnect from the IRC server. </p>
<p class="calibre1">/quit</p>
<p class="calibre1">Exit irssi. </p>
<p class="calibre1"><b class="calibre3">Screen Output</b></p>
<p class="calibre1">echo</p>
<p class="calibre1">Print simple text on standard output. </p>
<p class="calibre1">printf Print formatted text on standard output. </p>
<p class="calibre1">yes</p>
<p class="calibre1">Print repeated text on standard output. </p>
<p class="calibre1">seq</p>
<p class="calibre1">Print a sequence of numbers on standard output. </p>
<p class="calibre1">clear</p>
<p class="calibre1">Clear the screen or window. </p>
<p class="calibre1">Linux provides several commands for printing messages on</p>
<p class="calibre1">standard output, such as echo:</p>
<p class="calibre1">→ <b class="calibre3">echo hello world</b></p>
<p class="calibre1">hello world</p>
<p class="calibre1">Each command has different strengths and intended purposes. </p>
<p class="calibre1">These commands are invaluable for learning about Linux, </p>
<p class="calibre1">debugging problems, writing shell scripts (see <a href="#calibre_link-42">“Programming</a></p>
<p class="calibre1"><a href="#calibre_link-42">with Shell Scripts” on page 232), or just talking to yourself. </a></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">echo</b></p>
<p class="calibre1">echo [ <i class="calibre4">options</i>]  <i class="calibre4">strings</i></p>
<p class="calibre1">The echo command simply prints its arguments:</p>
<p class="calibre1">→ <b class="calibre3">echo We are having fun</b></p>
<p class="calibre1">We are having fun</p>
<p class="calibre1">Confusingly, there are several different echo commands with</p>
<p class="calibre1">slightly different behavior. There’s  <i class="calibre4">/bin/echo</i>, but Linux shells typically override this with a built-in command called echo. To find out which you’re using, run the command:</p>
<p class="calibre1"><b class="calibre3">198  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-250"></a>→ <b class="calibre3">type echo</b></p>
<p class="calibre1">echo is a shell builtin</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-n Don’t print a final newline character. </p>
<p class="calibre1">-e Recognize and interpret escape characters. For example, try echo 'hello</p>
<p class="calibre1">\a' and echo -e 'hello\a'. The first prints literally and the second makes a beep. </p>
<p class="calibre1">-E Don’t interpret escape characters: the opposite of -e. </p>
<p class="calibre1">Available escape characters are:</p>
<p class="calibre1">\a</p>
<p class="calibre1">Alert (play a beep)</p>
<p class="calibre1">\b</p>
<p class="calibre1">Backspace</p>
<p class="calibre1">\c</p>
<p class="calibre1">Don’t print the final newline (same effect as -n)</p>
<p class="calibre1">\f</p>
<p class="calibre1">Form feed</p>
<p class="calibre1">\n</p>
<p class="calibre1">Line feed (newline)</p>
<p class="calibre1">\r</p>
<p class="calibre1">Carriage return</p>
<p class="calibre1">\t</p>
<p class="calibre1">Horizontal tab</p>
<p class="calibre1">\v</p>
<p class="calibre1">Vertical tab</p>
<p class="calibre1">\\</p>
<p class="calibre1">A backslash</p>
<p class="calibre1">\' </p>
<p class="calibre1">Single quote</p>
<p class="calibre1">\" </p>
<p class="calibre1">Double quote</p>
<p class="calibre1"> <i class="calibre4">\nnn </i> The character whose ASCII value is  <i class="calibre4">nnn</i> in octal <b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">printf</b></p>
<p class="calibre1">printf  <i class="calibre4">format_string</i> [ <i class="calibre4">arguments</i>]</p>
<p class="calibre1">The printf command is an enhanced echo: it prints formatted</p>
<p class="calibre1">strings on standard output. It operates much like the C pro‐</p>
<p class="calibre1">gramming language function printf(), which applies a format</p>
<p class="calibre1"><b class="calibre3">Screen Output  |  199</b></p>
<p class="calibre1"><a id="calibre_link-127"></a>string to a sequence of arguments to create some specified output. For example:</p>
<p class="calibre1">→ <b class="calibre3">printf "User %s is %d years old.\n" sandy 29</b></p>
<p class="calibre1">User sandy is 29 years old. </p>
<p class="calibre1">The first argument is the format string, which in our example contains two format specifications, %s and %d. The subsequent arguments, sandy and 29, are substituted by printf into the</p>
<p class="calibre1">format string and then printed. Format specifications can get fancy with floating-point numbers:</p>
<p class="calibre1">→ <b class="calibre3">printf "That\'ll be $%0.2f, sir.\n" 3</b></p>
<p class="calibre1">That'll be $3.00, sir. </p>
<p class="calibre1">There are two printf commands available in Linux: one built</p>
<p class="calibre1">into the bash shell, and one in  <i class="calibre4">/usr/bin/printf</i>. The two are identical except for one format specification, %q, supported only by the bash built-in: it prints escape symbols (“\”) so its output can be used as shell input safely. Note the difference:</p>
<p class="calibre1">→ <b class="calibre3">printf "This is a quote: %s\n" "\"" </b></p>
<p class="calibre1">This is a quote: " </p>
<p class="calibre1">→ <b class="calibre3">printf "This is a quote: %q\n" "\"" </b></p>
<p class="calibre1">This is a quote: \" </p>
<p class="calibre1">It is your responsibility to make sure the number of format</p>
<p class="calibre1">specifications (%) equals the number of arguments supplied to printf. If you have too many arguments, the extras are</p>
<p class="calibre1">ignored, and if you have too few, printf assumes default values (0 for numeric formats, an empty string for string formats). </p>
<p class="calibre1">Nevertheless, you should treat such mismatches as errors, even though printf is forgiving. If they lurk in your shell scripts, they are bugs waiting to happen. </p>
<p class="calibre1">Format specifications are described in detail on the manpage for the C function printf (see man 3 printf). Here are some</p>
<p class="calibre1">useful ones:</p>
<p class="calibre1">%d</p>
<p class="calibre1">Decimal integer</p>
<p class="calibre1">%ld Long decimal integer</p>
<p class="calibre1"><b class="calibre3">200  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-224"></a>%o</p>
<p class="calibre1">Octal integer</p>
<p class="calibre1">%x</p>
<p class="calibre1">Hexadecimal integer</p>
<p class="calibre1">%f</p>
<p class="calibre1">Floating point</p>
<p class="calibre1">%lf Double-precision floating point</p>
<p class="calibre1">%c</p>
<p class="calibre1">A single character</p>
<p class="calibre1">%s</p>
<p class="calibre1">String</p>
<p class="calibre1">%q</p>
<p class="calibre1">String with any shell metacharacters escaped</p>
<p class="calibre1">%%</p>
<p class="calibre1">A percent sign by itself</p>
<p class="calibre1">Just after the leading percent sign, you can insert a numeric expression for the minimum width of the output. For example, </p>
<p class="calibre1">“%5d” means to print a decimal number in a five-character-</p>
<p class="calibre1">wide field, and “%6.2f” means a floating-point number in a six-character-wide field with two digits after the decimal point. </p>
<p class="calibre1">Some useful numeric expressions are:</p>
<p class="calibre1"> <i class="calibre4">n</i></p>
<p class="calibre1">Minimum width  <i class="calibre4">n</i>. </p>
<p class="calibre1">0 <i class="calibre4">n</i></p>
<p class="calibre1">Minimum width  <i class="calibre4">n</i>, padded with leading zeros. </p>
<p class="calibre1"> <i class="calibre4">n.m </i> Minimum width  <i class="calibre4">n</i>, with  <i class="calibre4">m</i> digits after the decimal point. </p>
<p class="calibre1">printf also interprets escape characters like “\n” (print a newline character) and “\a” (ring the bell). See the echo command for the full list. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">yes</b></p>
<p class="calibre1">yes [ <i class="calibre4">string</i>]</p>
<p class="calibre1">The yes command prints the given string (or “y” by default)</p>
<p class="calibre1">forever, one string per line:</p>
<p class="calibre1">→ <b class="calibre3">yes again</b></p>
<p class="calibre1">again</p>
<p class="calibre1">again</p>
<p class="calibre1"><b class="calibre3">Screen Output  |  201</b></p>
<p class="calibre1"><a id="calibre_link-83"></a>again</p>
<p class="calibre1">... </p>
<p class="calibre1">Though it might seem useless at first glance, yes can be perfect for turning interactive commands into batch commands. Want</p>
<p class="calibre1">to get rid of an annoying “Are you SURE you want to do that?” </p>
<p class="calibre1">message? Pipe the output of yes into the input of the command to answer all those prompts:</p>
<p class="calibre1">→ <b class="calibre3">yes |  <i class="calibre4">my_interactive_command</i></b></p>
<p class="calibre1">When  <i class="calibre4">my_interactive_command</i> terminates, so will yes. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">seq</b></p>
<p class="calibre1">seq [ <i class="calibre4">options</i>]  <i class="calibre4">specification</i></p>
<p class="calibre1">The seq command prints a sequence of integers or real num‐</p>
<p class="calibre1">bers, suitable for piping to other programs. There are three kinds of specification arguments:</p>
<p class="calibre1"> <i class="calibre4">A single number: an upper limit</i></p>
<p class="calibre1">seq begins at 1 and counts up to the number:</p>
<p class="calibre1">→ <b class="calibre3">seq 3</b></p>
<p class="calibre1">1</p>
<p class="calibre1">2</p>
<p class="calibre1">3</p>
<p class="calibre1"> <i class="calibre4">Two numbers: lower and upper limit</i></p>
<p class="calibre1">seq begins at the first number and counts as far as it can</p>
<p class="calibre1">without passing the second number:</p>
<p class="calibre1">→ <b class="calibre3">seq 2 5</b></p>
<p class="calibre1">2</p>
<p class="calibre1">3</p>
<p class="calibre1">4</p>
<p class="calibre1">5</p>
<p class="calibre1"> <i class="calibre4">Three numbers: lower limit, increment, and upper limit</i></p>
<p class="calibre1">seq begins at the first number, increments by the second</p>
<p class="calibre1">number, and stops at (or before) the third number:</p>
<p class="calibre1"><b class="calibre3">202  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-136"></a>→ <b class="calibre3">seq 1 .3 2</b></p>
<p class="calibre1">1</p>
<p class="calibre1">1.3</p>
<p class="calibre1">1.6</p>
<p class="calibre1">1.9</p>
<p class="calibre1">You can also go backward with a negative increment:</p>
<p class="calibre1">→ <b class="calibre3">seq 5 -1 2</b></p>
<p class="calibre1">5</p>
<p class="calibre1">4</p>
<p class="calibre1">3</p>
<p class="calibre1">2</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-w</p>
<p class="calibre1">Print leading zeros, as necessary, to give all lines the same width:</p>
<p class="calibre1">→ <b class="calibre3">seq -w 8 10</b></p>
<p class="calibre1">08</p>
<p class="calibre1">09</p>
<p class="calibre1">10</p>
<p class="calibre1">-f  <i class="calibre4">format </i> Format the output lines with a printf-like format string, which must include either %g (the default), %e, or %f:</p>
<p class="calibre1">→ <b class="calibre3">seq -f '**%g**' 3</b></p>
<p class="calibre1">**1**</p>
<p class="calibre1">**2**</p>
<p class="calibre1">**3**</p>
<p class="calibre1">-s  <i class="calibre4">string </i> Use the given string as a separator between the numbers. By default, a newline is printed (i.e., one number per line):</p>
<p class="calibre1">→ <b class="calibre3">seq -s ':' 10</b></p>
<p class="calibre1">1:2:3:4:5:6:7:8:9:10</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">clear</b></p>
<p class="calibre1">clear</p>
<p class="calibre1">This command simply clears your display or shell window. </p>
<p class="calibre1"><b class="calibre3">Screen Output  |  203</b></p>
<p class="calibre1"><a id="calibre_link-36"></a><b class="calibre3">Copy and Paste</b></p>
<p class="calibre1">xclip Copy and paste between the shell and the clipboard. </p>
<p class="calibre1">xsel</p>
<p class="calibre1">Manipulate the clipboard from the shell. </p>
<p class="calibre1">Linux has a clipboard for copying and pasting between graphical applications. Actually, Linux has three different clipboards, which are called  <i class="calibre4">selections</i>. You can access the selections from the command line, sending the output of any shell command to the selection, or reading the selection like standard input. Note that these commands work only if your shell is running in a</p>
<p class="calibre1">graphical environment such as GNOME or KDE. Otherwise, </p>
<p class="calibre1">no selection exists. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   -help   -version</b></p>
<p class="calibre1"><b class="calibre3">xclip</b></p>
<p class="calibre1">xclip [ <i class="calibre4">options</i>]</p>
<p class="calibre1">xclip reads and writes the three Linux selections (clipboards), so you can copy and paste text between the shell and graphical applications. </p>
<p class="calibre1">To see it in action, use your mouse to copy some text to a selection&mdash;say, double-click a word in your terminal window&mdash;and</p>
<p class="calibre1">then run:</p>
<p class="calibre1">→ <b class="calibre3">xclip -o</b></p>
<p class="calibre1">The text you copied will be printed on standard output. </p>
<p class="calibre1">As another example, copy the contents of a file to a selection, and then print the selection:</p>
<p class="calibre1">→ <b class="calibre3">cat poem</b>                         <i class="calibre4">See the file</i></p>
<p class="calibre1">Once upon a time, there was</p>
<p class="calibre1">a little operating system named</p>
<p class="calibre1">Linux, which everybody loved. </p>
<p class="calibre1">→ <b class="calibre3">cat poem | xclip -i</b>              <i class="calibre4">Pipe file to selection</i></p>
<p class="calibre1">→ <b class="calibre3">xclip -o</b>                         <i class="calibre4">Print selection</i> <b class="calibre3">204  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-223"></a>Once upon a time, there was</p>
<p class="calibre1">a little operating system named</p>
<p class="calibre1">Linux, which everybody loved. </p>
<p class="calibre1">All command-line options for xclip use single dashes, even</p>
<p class="calibre1">-help and -version. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-selection  <i class="calibre4">name </i> Choose a selection by name, either primary, secondary, or clipboard. The default is primary. </p>
<p class="calibre1">In my terminal windows, the mouse’s middle button</p>
<p class="calibre1">pastes from primary, but the right-button menu uses</p>
<p class="calibre1">clipboard for its “Paste” command. </p>
<p class="calibre1">-i</p>
<p class="calibre1">Read the selection contents from standard input. You</p>
<p class="calibre1">may omit this option. </p>
<p class="calibre1">-o</p>
<p class="calibre1">Write the selection contents to standard output. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">xsel</b></p>
<p class="calibre1">xsel [ <i class="calibre4">options</i>]</p>
<p class="calibre1">xsel is a more powerful version of xclip. Along with reading and writing the three selections (clipboards), it can also append to them, swap them, and clear them:</p>
<p class="calibre1">→ <b class="calibre3">echo Hello | xsel -i</b></p>
<p class="calibre1">→ <b class="calibre3">xsel -o</b></p>
<p class="calibre1">Hello</p>
<p class="calibre1">→ <b class="calibre3">echo World | xsel -a</b>      <i class="calibre4">Append</i></p>
<p class="calibre1">→ <b class="calibre3">xsel -o</b></p>
<p class="calibre1">Hello</p>
<p class="calibre1">World</p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-p Use the primary selection (default). </p>
<p class="calibre1">-s Use the secondary selection. </p>
<p class="calibre1"><b class="calibre3">Copy and Paste  |  205</b></p>
<p class="calibre1"><a id="calibre_link-37"></a>-b Use the clipboard selection. </p>
<p class="calibre1">-i Read the selection contents from standard input. This is the default behavior. </p>
<p class="calibre1">-a Append to the selection. </p>
<p class="calibre1">-o Write the selection contents to standard output. </p>
<p class="calibre1">-c Clear the selection contents. </p>
<p class="calibre1">-x Swap (exchange) the contents of the primary and secondary selection. </p>
<p class="calibre1"><b class="calibre3">Math and Calculations</b></p>
<p class="calibre1">expr Do simple math on the command line. </p>
<p class="calibre1">bc</p>
<p class="calibre1">Text-based calculator. </p>
<p class="calibre1">dc</p>
<p class="calibre1">Text-based RPN calculator. </p>
<p class="calibre1">Need a calculator? Linux provides some command-line pro‐</p>
<p class="calibre1">grams to compute mathematical truths for you. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">expr</b></p>
<p class="calibre1">expr  <i class="calibre4">expression</i></p>
<p class="calibre1">The expr command does simple math (and other expression</p>
<p class="calibre1">evaluation) on the command line:</p>
<p class="calibre1">→ <b class="calibre3">expr 7 + 3</b></p>
<p class="calibre1">10</p>
<p class="calibre1">→ <b class="calibre3">expr '(' 7 + 3 ')' '*' 14</b>    <i class="calibre4">Shell characters are quoted</i> 140</p>
<p class="calibre1">→ <b class="calibre3">expr length ABCDEFG</b></p>
<p class="calibre1">7</p>
<p class="calibre1">→ <b class="calibre3">expr 15 '&gt;' 16</b></p>
<p class="calibre1">0                              <i class="calibre4">Meaning false</i></p>
<p class="calibre1">Each argument must be separated by whitespace. Notice that</p>
<p class="calibre1">we had to quote or escape any characters that have special</p>
<p class="calibre1"><b class="calibre3">206  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-135"></a>meaning to the shell. Parentheses (escaped) may be used for grouping. Operators for expr include:</p>
<p class="calibre1">Operator</p>
<p class="calibre1">Numeric operation</p>
<p class="calibre1">String operation</p>
<p class="calibre1">+, -, *, /</p>
<p class="calibre1">Addition, subtraction, </p>
<p class="calibre1">multiplication, and</p>
<p class="calibre1">integer division, </p>
<p class="calibre1">respectively</p>
<p class="calibre1">%</p>
<p class="calibre1">Remainder (mod)</p>
<p class="calibre1">&lt; </p>
<p class="calibre1">Less than</p>
<p class="calibre1">Earlier in dictionary</p>
<p class="calibre1">&lt;=</p>
<p class="calibre1">Less than or equal</p>
<p class="calibre1">Earlier in dictionary, or equal</p>
<p class="calibre1">&gt; </p>
<p class="calibre1">Greater than</p>
<p class="calibre1">Later in dictionary</p>
<p class="calibre1">&gt;=</p>
<p class="calibre1">Greater than or equal Later in dictionary, or equal</p>
<p class="calibre1">=</p>
<p class="calibre1">Equality</p>
<p class="calibre1">Equality</p>
<p class="calibre1">!=</p>
<p class="calibre1">Inequality</p>
<p class="calibre1">Inequality</p>
<p class="calibre1">|</p>
<p class="calibre1">Boolean “or” </p>
<p class="calibre1">Boolean “or” </p>
<p class="calibre1">&amp; </p>
<p class="calibre1">Boolean “and” </p>
<p class="calibre1">Boolean “and” </p>
<p class="calibre1">s :  <i class="calibre4">regexp</i></p>
<p class="calibre1">Does the regular expression</p>
<p class="calibre1"> <i class="calibre4">regexp</i> match string  <i class="calibre4">s</i>? </p>
<p class="calibre1">substr  <i class="calibre4">s p n</i></p>
<p class="calibre1">Print  <i class="calibre4">n</i> characters of string  <i class="calibre4">s</i>, </p>
<p class="calibre1">beginning at position  <i class="calibre4">p</i> ( <i class="calibre4">p</i> =1 is the</p>
<p class="calibre1">first character)</p>
<p class="calibre1">index  <i class="calibre4">s chars</i></p>
<p class="calibre1">Return the index of the first</p>
<p class="calibre1">position in string  <i class="calibre4">s</i> containing a</p>
<p class="calibre1">character from string  <i class="calibre4">chars</i>. </p>
<p class="calibre1">Return 0 if not found. Same</p>
<p class="calibre1">behavior as the C function</p>
<p class="calibre1">index( ). </p>
<p class="calibre1">For Boolean expressions, the number 0 and the empty string</p>
<p class="calibre1">are considered false; any other value is true. For Boolean</p>
<p class="calibre1">results, 0 is false and 1 is true. </p>
<p class="calibre1"><b class="calibre3">Math and Calculations  |  207</b></p>
<p class="calibre1"><a id="calibre_link-80"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">bc</b></p>
<p class="calibre1">bc [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">bc is a text-based calculator that reads arithmetic expressions, one per line, and prints the results. Unlike most other calculators, bc can handle numbers of unlimited size and any number of decimal places:</p>
<p class="calibre1">→ <b class="calibre3">bc</b></p>
<p class="calibre1"><b class="calibre3">1+2+3+4+5</b></p>
<p class="calibre1">15</p>
<p class="calibre1"><b class="calibre3">scale=2</b></p>
<p class="calibre1"><b class="calibre3">(1 + 2 * 3 / 4) - 5</b></p>
<p class="calibre1">-2.50</p>
<p class="calibre1"><b class="calibre3">2^100</b></p>
<p class="calibre1">1267650600228229401496703205376</p>
<p class="calibre1"><b class="calibre3">^D</b></p>
<p class="calibre1">Programmers may enjoy the ability to switch bases to perform calculations and conversions in binary, octal, hexadecimal, or even custom bases:</p>
<p class="calibre1">→ <b class="calibre3">bc</b></p>
<p class="calibre1"><b class="calibre3">obase=2</b>         <i class="calibre4">Display results in base 2</i></p>
<p class="calibre1"><b class="calibre3">999</b></p>
<p class="calibre1">1111100111</p>
<p class="calibre1"><b class="calibre3">obase=16</b>        <i class="calibre4">Or base 16</i></p>
<p class="calibre1"><b class="calibre3">999</b></p>
<p class="calibre1">3E7</p>
<p class="calibre1">But bc doesn’t stop there. It’s also a programmable calculator in which you can define your own functions. Here’s a function</p>
<p class="calibre1">that implements the quadratic formula from algebra and prints the real roots of a given equation, stored in a file called</p>
<p class="calibre1"> <i class="calibre4">quadratic.txt</i><a href="#calibre_link-80">:22</a></p>
<p class="calibre1">22 This demonstration code will fail if the roots are imaginary. </p>
<p class="calibre1"><b class="calibre3">208  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-251"></a>→ <b class="calibre3">cat quadratic.txt</b></p>
<p class="calibre1">scale=2</p>
<p class="calibre1">define quadform ( a, b, c ) {</p>
<p class="calibre1">root1 = (-b + sqrt(b^2 - 4*a*c)) / (2*a)</p>
<p class="calibre1">root2 = (-b - sqrt(b^2 - 4*a*c)) / (2*a)</p>
<p class="calibre1">print root1, "  ", root2, "\n" </p>
<p class="calibre1">}</p>
<p class="calibre1">quadform(1, 7, 12)      <i class="calibre4">solve x2 + 7x + 12 = 0</i></p>
<p class="calibre1">Redirect the file to bc, and see the results:</p>
<p class="calibre1">→ <b class="calibre3">bc &lt; quadratic.txt</b></p>
<p class="calibre1"></p>
<p class="calibre1">-3.00  -4.00</p>
<p class="calibre1">In its most powerful form, bc is a programming language for</p>
<p class="calibre1">arithmetic. You can assign values to variables, manipulate</p>
<p class="calibre1">arrays, execute conditional expressions and loops, and even</p>
<p class="calibre1">write scripts that prompt the user for values and run any</p>
<p class="calibre1">sequence of math operations you like. For full details, see the manpage. </p>
<p class="calibre1"><b class="calibre3">Useful arithmetic operations</b></p>
<p class="calibre1">+, -, *, / Addition, subtraction, multiplication, and division, respectively. </p>
<p class="calibre1">Results of division are truncated to the current scale (see below). </p>
<p class="calibre1">%</p>
<p class="calibre1">Remainder (mod). </p>
<p class="calibre1">^</p>
<p class="calibre1">Exponentiation, as in 10^5 for “ten to the fifth power.” </p>
<p class="calibre1">sqrt( <i class="calibre4">N</i>)</p>
<p class="calibre1">Square root of  <i class="calibre4">N</i>. </p>
<p class="calibre1">ibase= <i class="calibre4">N</i></p>
<p class="calibre1">Treat all input numbers as base  <i class="calibre4">N</i>. </p>
<p class="calibre1">obase= <i class="calibre4">N</i></p>
<p class="calibre1">Output all numbers in base  <i class="calibre4">N</i>. </p>
<p class="calibre1">scale= <i class="calibre4">N</i></p>
<p class="calibre1">Set the number of significant digits after the decimal point to  <i class="calibre4">N</i>. </p>
<p class="calibre1">( ... )</p>
<p class="calibre1">Parentheses for grouping (changing precedence). </p>
<p class="calibre1"> <i class="calibre4">name</i>= <i class="calibre4">value </i> Assign a value to the variable  <i class="calibre4">name</i>. </p>
<p class="calibre1"><b class="calibre3">Math and Calculations  |  209</b></p>
<p class="calibre1"><a id="calibre_link-139"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">dc</b></p>
<p class="calibre1">dc [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The dc (desk calculator) command is a reverse-polish notation (RPN), stack-based calculator that reads expressions from standard input and writes results to standard output. If you know how to use a Hewlett-Packard RPN calculator, dc is pretty easy to use once you understand its syntax. But if you’re accustomed to traditional calculators, dc may seem inscrutable. We’ll cover only some basic commands. </p>
<p class="calibre1">For stack and calculator operations:</p>
<p class="calibre1">q</p>
<p class="calibre1">Quit dc. </p>
<p class="calibre1">f</p>
<p class="calibre1">Print the entire stack. </p>
<p class="calibre1">c</p>
<p class="calibre1">Delete (clear) the entire stack. </p>
<p class="calibre1">p</p>
<p class="calibre1">Print the topmost value on the stack. </p>
<p class="calibre1">P</p>
<p class="calibre1">Pop (remove) the topmost value from the stack. </p>
<p class="calibre1"> <i class="calibre4">n</i> k Set precision of future operations to be  <i class="calibre4">n</i> decimal places (default is 0, meaning integer operations). </p>
<p class="calibre1">To pop the top two values from the stack, perform a requested operation, and push the result:</p>
<p class="calibre1">+, -, *, / Addition, subtraction, multiplication, and division, respectively. </p>
<p class="calibre1">%</p>
<p class="calibre1">Remainder (mod). </p>
<p class="calibre1">^</p>
<p class="calibre1">Exponentiation (second-to-top value is the base, top value is the exponent). </p>
<p class="calibre1">To pop the top value from the stack, perform a requested operation, and push the result:</p>
<p class="calibre1">v Square root. </p>
<p class="calibre1">Examples:</p>
<p class="calibre1"><b class="calibre3">210  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-38"></a>→ <b class="calibre3">dc</b></p>
<p class="calibre1"><b class="calibre3">4 5 + p</b>        <i class="calibre4">Print the sum of 4 and 5</i></p>
<p class="calibre1">9</p>
<p class="calibre1"><b class="calibre3">2 3 ^ p</b>        <i class="calibre4">Raise 2 to the 3rd power and print the result</i> 8</p>
<p class="calibre1"><b class="calibre3">10 * p</b>         <i class="calibre4">Multiply the stack top by 10 and print the result</i> 80</p>
<p class="calibre1"><b class="calibre3">f</b>              <i class="calibre4">Print the stack</i></p>
<p class="calibre1">80</p>
<p class="calibre1">9</p>
<p class="calibre1"><b class="calibre3">+p</b>             <i class="calibre4">Pop the top two values and print their sum</i> 89</p>
<p class="calibre1"><b class="calibre3">Dates and Times</b></p>
<p class="calibre1">cal</p>
<p class="calibre1">Print a calendar. </p>
<p class="calibre1">date</p>
<p class="calibre1">Print or set the date and time. </p>
<p class="calibre1">ntpdate Set the system time using a remote timeserver. </p>
<p class="calibre1">Need a date? How about a good time? Try these programs to</p>
<p class="calibre1">display and set dates and times on your system. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">cal</b></p>
<p class="calibre1">cal [ <i class="calibre4">options</i>] [ <i class="calibre4">month</i> [ <i class="calibre4">year</i>]]</p>
<p class="calibre1">The cal command prints a calendar&mdash;by default, the current</p>
<p class="calibre1">month:</p>
<p class="calibre1">→ <b class="calibre3">cal</b></p>
<p class="calibre1">November 2015      </p>
<p class="calibre1">Su Mo Tu We Th Fr Sa  </p>
<p class="calibre1">1  2  3  4  5  6  7  </p>
<p class="calibre1">8  9 10 11 12 13 14  </p>
<p class="calibre1">15 16 17 18 19 20 21  </p>
<p class="calibre1">22 23 24 25 26 27 28  </p>
<p class="calibre1">29 30</p>
<p class="calibre1"><b class="calibre3">Dates and Times  |  211</b></p>
<p class="calibre1"><a id="calibre_link-158"></a>To print a different calendar, supply a month and four-digit year: cal 8 2016. If you omit the month (cal 2016), the entire year is printed. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-y Print the current year’s calendar. </p>
<p class="calibre1">-3 Three-month view: print the previous and next month as well. </p>
<p class="calibre1">-j Number each day by its position in the year; in our example, February 1</p>
<p class="calibre1">would be displayed as 32, February 2 as 33, and so on. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">date</b></p>
<p class="calibre1">date [ <i class="calibre4">options</i>] [ <i class="calibre4">format</i>]</p>
<p class="calibre1">The date command prints dates and times. The results will</p>
<p class="calibre1">depend on your system’s locale settings (for your country and language). In this section, we assume an English, US-based</p>
<p class="calibre1">locale. </p>
<p class="calibre1">By default, date prints the system date and time in the local timezone:</p>
<p class="calibre1">→ <b class="calibre3">date</b></p>
<p class="calibre1">Fri Mar 18 22:32:04 EDT 2016</p>
<p class="calibre1">You can format the output differently by supplying a format</p>
<p class="calibre1">string beginning with a plus sign:</p>
<p class="calibre1">→ <b class="calibre3">date '+%D' </b></p>
<p class="calibre1">03/18/16</p>
<p class="calibre1">→ <b class="calibre3">date '+The time is %l:%M %p on a lovely %A in %B' </b></p>
<p class="calibre1">The time is 10:32 PM on a lovely Friday in March</p>
<p class="calibre1">Here is a sampling of the date command’s many formats:</p>
<p class="calibre1"><b class="calibre3">212  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-252"></a>Format Meaning</p>
<p class="calibre1">Example (US English)</p>
<p class="calibre1"><b class="calibre3">Whole dates and times:</b></p>
<p class="calibre1">%c</p>
<p class="calibre1">Full date and time, 12-hour clock</p>
<p class="calibre1">Sun 28 Sep 2003, </p>
<p class="calibre1">09:01:25 PM EDT</p>
<p class="calibre1">%D</p>
<p class="calibre1">Numeric date, 2-digit year</p>
<p class="calibre1">09/28/03</p>
<p class="calibre1">%x</p>
<p class="calibre1">Numeric date, 4-digit year</p>
<p class="calibre1">09/28/2003</p>
<p class="calibre1">%T</p>
<p class="calibre1">Time, 24-hour clock</p>
<p class="calibre1">21:01:25</p>
<p class="calibre1">%X</p>
<p class="calibre1">Time, 12-hour clock</p>
<p class="calibre1">09:01:25 PM</p>
<p class="calibre1"><b class="calibre3">Words:</b></p>
<p class="calibre1">%a</p>
<p class="calibre1">Day of week (abbreviated)</p>
<p class="calibre1">Sun</p>
<p class="calibre1">%A</p>
<p class="calibre1">Day of week (complete)</p>
<p class="calibre1">Sunday</p>
<p class="calibre1">%b</p>
<p class="calibre1">Month name (abbreviated)</p>
<p class="calibre1">Sep</p>
<p class="calibre1">%B</p>
<p class="calibre1">Month name (complete)</p>
<p class="calibre1">September</p>
<p class="calibre1">%Z</p>
<p class="calibre1">Time zone</p>
<p class="calibre1">EDT</p>
<p class="calibre1">%p</p>
<p class="calibre1">AM or PM</p>
<p class="calibre1">PM</p>
<p class="calibre1"><b class="calibre3">Numbers:</b></p>
<p class="calibre1">%w</p>
<p class="calibre1">Day of week (0&ndash;6, 0=Sunday)</p>
<p class="calibre1">0</p>
<p class="calibre1">%u</p>
<p class="calibre1">Day of week (1&ndash;7, 1=Monday)</p>
<p class="calibre1">7</p>
<p class="calibre1">%d</p>
<p class="calibre1">Day of month, leading zero</p>
<p class="calibre1">02</p>
<p class="calibre1">%e</p>
<p class="calibre1">Day of month, leading blank</p>
<p class="calibre1">2</p>
<p class="calibre1">%j</p>
<p class="calibre1">Day of year, leading zeros</p>
<p class="calibre1">005</p>
<p class="calibre1">%m</p>
<p class="calibre1">Month number, leading zero</p>
<p class="calibre1">09</p>
<p class="calibre1">%y</p>
<p class="calibre1">Year, 2 digits</p>
<p class="calibre1">03</p>
<p class="calibre1">%Y</p>
<p class="calibre1">Year, 4 digits</p>
<p class="calibre1">2003</p>
<p class="calibre1">%M</p>
<p class="calibre1">Minute, leading zero</p>
<p class="calibre1">09</p>
<p class="calibre1">%S</p>
<p class="calibre1">Seconds, leading zero</p>
<p class="calibre1">05</p>
<p class="calibre1">%l</p>
<p class="calibre1">Hour, 12-hour clock, leading blank</p>
<p class="calibre1">9</p>
<p class="calibre1"><b class="calibre3">Dates and Times  |  213</b></p>
<p class="calibre1"><a id="calibre_link-137"></a>Format Meaning</p>
<p class="calibre1">Example (US English)</p>
<p class="calibre1">%I</p>
<p class="calibre1">Hour, 12-hour clock, leading zero</p>
<p class="calibre1">09</p>
<p class="calibre1">%k</p>
<p class="calibre1">Hour, 24-hour clock, leading blank</p>
<p class="calibre1">9</p>
<p class="calibre1">%H</p>
<p class="calibre1">Hour, 24-hour clock, leading zero</p>
<p class="calibre1">09</p>
<p class="calibre1">%N</p>
<p class="calibre1">Nanoseconds</p>
<p class="calibre1">737418000</p>
<p class="calibre1">%s</p>
<p class="calibre1">Seconds since the beginning of Linux time:</p>
<p class="calibre1">1068583983</p>
<p class="calibre1">midnight January 1, 1970</p>
<p class="calibre1"><b class="calibre3">Other:</b></p>
<p class="calibre1">%n</p>
<p class="calibre1">Newline character</p>
<p class="calibre1">%t</p>
<p class="calibre1">Tab character</p>
<p class="calibre1">%%</p>
<p class="calibre1">Percent sign</p>
<p class="calibre1">%</p>
<p class="calibre1">Through its options, date can also display other dates and</p>
<p class="calibre1">times. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-d  <i class="calibre4">string</i></p>
<p class="calibre1">Display the given date or time  <i class="calibre4">string</i>, formatted as you wish. </p>
<p class="calibre1">-r  <i class="calibre4">filename </i> Display the last-modified timestamp of the given file, formatted as you wish. </p>
<p class="calibre1">-s  <i class="calibre4">string</i></p>
<p class="calibre1">Set the system date and/or time to be  <i class="calibre4">string</i>; only the superuser can do this. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ntpdate</b></p>
<p class="calibre1">ntpdate  <i class="calibre4">timeserver</i></p>
<p class="calibre1">The ntpdate command sets the current system time by contact‐</p>
<p class="calibre1">ing a timeserver machine on the network (you must be root to set the system time):</p>
<p class="calibre1"><b class="calibre3">214  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-39"></a>→ <b class="calibre3">sudo /usr/sbin/ntpdate timeserver.someplace.edu</b> 7 Sep 21:01:25 ntpdate[2399]: step time server</p>
<p class="calibre1">178.99.1.8</p>
<p class="calibre1">offset 0.51 sec</p>
<p class="calibre1">To keep your system date in sync with a timeserver over long periods, use the daemon ntpd <a href="http://www.ntp.org">instead; see  <i class="calibre4">http://www.ntp.org</i>. If</a></p>
<p class="calibre1">you don’t know a local timeserver, search the Web for “public ntp time server”. </p>
<p class="calibre1"><b class="calibre3">Graphics</b></p>
<p class="calibre1">display Display a graphics file. </p>
<p class="calibre1">convert Convert files from one graphical format into another. </p>
<p class="calibre1">mogrify Modify a graphics file. </p>
<p class="calibre1">montage Combine graphics files. </p>
<p class="calibre1">For viewing or editing graphics, Linux has handy tools with</p>
<p class="calibre1">tons of options. We’ll focus on command-line tools from a</p>
<p class="calibre1">package called ImageMagick (<a href="http://imagemagick.org"> <i class="calibre4">http://imagemagick.org</i>). I</a>ts commands all have similar usage, and a full explanation is at <a href="http://imagemagick.org/script/command-line-processing.php"> <i class="calibre4">http://</i></a></p>
<p class="calibre1"><a href="http://imagemagick.org/script/command-line-processing.php"> <i class="calibre4">imagemagick.org/script/command-line-processing.php</i></a>. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">display</b></p>
<p class="calibre1">display [ <i class="calibre4">options</i>]  <i class="calibre4">files</i></p>
<p class="calibre1">The display command lets you view images in numerous for‐</p>
<p class="calibre1">mats: JPEG, PNG, GIF, BMP, and more. It also includes a small suite of image editing tools that appear if you left-click the displayed image. Type q to exit the program. </p>
<p class="calibre1">→ <b class="calibre3">display photo.jpg</b></p>
<p class="calibre1">The command is very powerful, with more than 100 options</p>
<p class="calibre1">listed on its manpage. </p>
<p class="calibre1"><b class="calibre3">Graphics  |  215</b></p>
<p class="calibre1"><a id="calibre_link-152"></a><b class="calibre3">Useful options</b></p>
<p class="calibre1">-resize  <i class="calibre4">size </i> Resize the image. The  <i class="calibre4">size</i> values are extremely flexible, including setting the width (800), the height (x600), both</p>
<p class="calibre1">(800x600), a percentage to grow or shrink (50%), an area in</p>
<p class="calibre1">pixels (480000@), and more. </p>
<p class="calibre1">-flip</p>
<p class="calibre1">Reverse the image vertically. </p>
<p class="calibre1">-flop</p>
<p class="calibre1">Reverse the image horizontally. </p>
<p class="calibre1">-rotate  <i class="calibre4">N</i></p>
<p class="calibre1">Rotate the image by  <i class="calibre4">N </i> degrees. </p>
<p class="calibre1">-backdrop</p>
<p class="calibre1">Display the image on a backdrop of solid color that covers the rest of your screen. </p>
<p class="calibre1">-fill</p>
<p class="calibre1">Set the solid color used by the -backdrop option. </p>
<p class="calibre1">-delay  <i class="calibre4">N</i></p>
<p class="calibre1">Show the image for  <i class="calibre4">N </i> seconds and then exit. If you list multiple images, you get a slideshow with a delay of  <i class="calibre4">N</i></p>
<p class="calibre1">seconds between images. </p>
<p class="calibre1">-identify</p>
<p class="calibre1">Print information about the image’s format, size, and other</p>
<p class="calibre1">statistics to standard output. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">convert</b></p>
<p class="calibre1">convert [ <i class="calibre4">input_options</i>]  <i class="calibre4">infile</i> [ <i class="calibre4">output_options</i>]  <i class="calibre4">outfile</i> The convert command makes a copy of an image but converted to a different graphics format. For example, if you have a JPEG file, you can produce a PNG file of the same image:</p>
<p class="calibre1">→ <b class="calibre3">convert photo.jpg newphoto.png</b></p>
<p class="calibre1">At the same time, you can perform modifications on the copy, such as resizing or reversing it:</p>
<p class="calibre1">→ <b class="calibre3">convert photo.jpg -resize 50% -flip newphoto.png</b></p>
<p class="calibre1">convert accepts largely the same options as display. </p>
<p class="calibre1"><b class="calibre3">216  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-196"></a><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b> <b class="calibre3">mogrify</b></p>
<p class="calibre1">mogrify [ <i class="calibre4">options</i>]  <i class="calibre4">file</i></p>
<p class="calibre1">The mogrify command transforms an image just like convert</p>
<p class="calibre1">does, but the changes are made directly to the image file you provide, not in a copy. (So convert is a safer command when</p>
<p class="calibre1">experimenting on a favorite photo.) It accepts largely the same options as convert:</p>
<p class="calibre1">→ <b class="calibre3">mogrify -resize 25% photo.jpg</b></p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">montage</b></p>
<p class="calibre1">montage  <i class="calibre4">infiles</i> [ <i class="calibre4">options</i>]  <i class="calibre4">outfile</i></p>
<p class="calibre1">montage produces a single image file from a collection of input files. For example, you can create a sheet of thumbnails in a single image, where each thumbnail is labeled with its original filename:</p>
<p class="calibre1">→ <b class="calibre3">montage photo.jpg photo2.png photo3.gif \</b></p>
<p class="calibre1"><b class="calibre3">  -geometry 120x176+10+10 -label '%f' outfile.jpg</b></p>
<p class="calibre1">montage provides great control over how those images appear. </p>
<p class="calibre1">The preceding command, for example, produces thumbnails of</p>
<p class="calibre1">size 120x176 pixels, offset by 10 pixels horizontally and vertically (creating space between the thumbnails), and labeled with their input filename. </p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-geometry</p>
<p class="calibre1">Set the height, width, and  <i class="calibre4">(x,y)</i> offset</p>
<p class="calibre1"> <i class="calibre4">width</i> x <i class="calibre4">height</i>[+-] <i class="calibre4">x</i>[+-] <i class="calibre4">y</i></p>
<p class="calibre1">of the images. </p>
<p class="calibre1">-frame  <i class="calibre4">N</i></p>
<p class="calibre1">Draw a frame of  <i class="calibre4">N</i> pixels around each</p>
<p class="calibre1">image. </p>
<p class="calibre1"><b class="calibre3">Graphics  |  217</b></p>
<p class="calibre1"><a id="calibre_link-40"></a>-label  <i class="calibre4">string</i></p>
<p class="calibre1">Label each image with any  <i class="calibre4">string</i>, </p>
<p class="calibre1">which can contain special escape</p>
<p class="calibre1">characters beginning with a percent sign:</p>
<p class="calibre1">%f for the original filename, %h and %w</p>
<p class="calibre1">for height and width, %m for file format, </p>
<p class="calibre1">and about 40 others. </p>
<p class="calibre1"><b class="calibre3">Audio and Video</b></p>
<p class="calibre1">cdparanoia Rip audio from CDs to WAV files. </p>
<p class="calibre1">lame</p>
<p class="calibre1">Convert from WAV to MP3. </p>
<p class="calibre1">id3info</p>
<p class="calibre1">View ID3 tags in an MP3 file. </p>
<p class="calibre1">id3tag</p>
<p class="calibre1">Edit ID3 tags in an MP3 file. </p>
<p class="calibre1">ogginfo</p>
<p class="calibre1">View information about an OGG file. </p>
<p class="calibre1">metaflac</p>
<p class="calibre1">View and edit information about a FLAC file. </p>
<p class="calibre1">sox</p>
<p class="calibre1">Convert between audio file formats. </p>
<p class="calibre1">mplayer</p>
<p class="calibre1">Play a video or audio file. </p>
<p class="calibre1">There are numerous Linux programs with graphical interfaces</p>
<p class="calibre1">for playing and editing audio and video, but we’ll focus once again on command-line tools. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">cdparanoia</b></p>
<p class="calibre1">cdparanoia [ <i class="calibre4">options</i>]  <i class="calibre4">span</i> [ <i class="calibre4">outfile</i>]</p>
<p class="calibre1">The cdparanoia command reads (rips) audio data from a CD</p>
<p class="calibre1">and stores it in WAV files (or other formats: see the manpage). </p>
<p class="calibre1">Common uses are: </p>
<p class="calibre1">→ <b class="calibre3">cdparanoia</b> <i class="calibre4"> N</i></p>
<p class="calibre1">Rip track  <i class="calibre4">N</i> to a file. </p>
<p class="calibre1">→ <b class="calibre3">cdparanoia -B</b></p>
<p class="calibre1">Rip all tracks on the CD into separate files. </p>
<p class="calibre1"><b class="calibre3">218  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-111"></a>→ <b class="calibre3">cdparanoia -B 2-4</b></p>
<p class="calibre1">Rip tracks 2, 3, and 4 into separate files. </p>
<p class="calibre1">→ <b class="calibre3">cdparanoia 2-4</b></p>
<p class="calibre1">Rip tracks 2, 3, and 4 into a single file. </p>
<p class="calibre1">If you experience difficulty with accessing your drive, try running cdparanoia -Qvs (“search for CD-ROM drives verbosely”)</p>
<p class="calibre1">and look for clues. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">lame</b></p>
<p class="calibre1">lame [ <i class="calibre4">options</i>]  <i class="calibre4">file</i>.wav </p>
<p class="calibre1">The lame command converts a WAV audio file (say,  <i class="calibre4">song.wav</i>) into an MP3 file:</p>
<p class="calibre1">→ <b class="calibre3">lame song.wav song.mp3</b></p>
<p class="calibre1">It has over 100 options to control bit rate, convert other formats, add ID3 tags, and much more. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">id3info</b></p>
<p class="calibre1">id3info [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The id3info command displays information about an MP3</p>
<p class="calibre1">audio file, such as the song title, recording artist, album name, and year. This assumes the file has ID3 tags inside it. There are no options except displaying a help message and the program</p>
<p class="calibre1">version:</p>
<p class="calibre1">→ <b class="calibre3">id3info guitar.mp3</b></p>
<p class="calibre1">*** Tag information for guitar.mp3</p>
<p class="calibre1">=== TYER (Year): 2004</p>
<p class="calibre1">=== TCON (Content type): Sample File</p>
<p class="calibre1">=== TPE1 (Lead performer(s)/Soloist(s)): Gentle Giant</p>
<p class="calibre1">=== TIT2 (Title/songname): Guitar Solo</p>
<p class="calibre1">=== TALB (Album/Movie/Show title): Scraping the Barrel</p>
<p class="calibre1"><b class="calibre3">Audio and Video  |  219</b></p>
<p class="calibre1"><a id="calibre_link-114"></a>*** mp3 info</p>
<p class="calibre1">MPEG1/layer III</p>
<p class="calibre1">Bitrate: 256KBps</p>
<p class="calibre1">Frequency: 44KHz</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">id3tag</b></p>
<p class="calibre1">id3tag [ <i class="calibre4">options</i>]  <i class="calibre4">files</i></p>
<p class="calibre1">The id3tag command adds or modifies ID3 tags in an MP3 file. </p>
<p class="calibre1">For example, to tag an MP3 file with a new title and artist, run:</p>
<p class="calibre1">→ <b class="calibre3">id3tag -A "My Album" -a "Loud Linux Squad" song.mp3</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">-A  <i class="calibre4">name</i></p>
<p class="calibre1">Set the artist’s name. </p>
<p class="calibre1">-a  <i class="calibre4">title</i></p>
<p class="calibre1">Set the album title. </p>
<p class="calibre1">-s  <i class="calibre4">title</i></p>
<p class="calibre1">Set the song title. </p>
<p class="calibre1">-y  <i class="calibre4">year</i></p>
<p class="calibre1">Set the year. </p>
<p class="calibre1">-t  <i class="calibre4">number </i> Set the track number. </p>
<p class="calibre1">-g  <i class="calibre4">number </i> Set the genre number. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">ogginfo</b></p>
<p class="calibre1">ogginfo [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">ogginfo is a simple command that displays information about</p>
<p class="calibre1">an OGG Vorbis audio file:</p>
<p class="calibre1">→ <b class="calibre3">ogginfo guitar.ogg</b></p>
<p class="calibre1">Processing file "guitar.ogg"... </p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">Channels: 2</p>
<p class="calibre1">Rate: 44100</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1"><b class="calibre3">220  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-115"></a>Nominal bitrate: 112.000000 kb/s</p>
<p class="calibre1">User comments section follows... </p>
<p class="calibre1">Title=Guitar Solo</p>
<p class="calibre1">Artist=Gentle Giant</p>
<p class="calibre1">Album=Scraping the Barrel</p>
<p class="calibre1">Year=2004</p>
<p class="calibre1">Genre=Sample File</p>
<p class="calibre1">Vorbis stream 1:</p>
<p class="calibre1">Total data length: 102390 bytes</p>
<p class="calibre1">Playback length: 0m:09.952s</p>
<p class="calibre1">Average bitrate: 82.301673 kb/s</p>
<p class="calibre1">Add the -h option for more detailed usage information. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">metaflac</b></p>
<p class="calibre1">metaflac [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">The metaflac command displays or changes information about</p>
<p class="calibre1">a FLAC audio file. To display information, run:</p>
<p class="calibre1">→ <b class="calibre3">metaflac --list guitar.flac</b></p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">sample_rate: 44100 Hz</p>
<p class="calibre1">channels: 2</p>
<p class="calibre1">bits-per-sample: 16</p>
<p class="calibre1">total samples: 438912</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">comments: 5</p>
<p class="calibre1">comment[0]: Title=Guitar Solo</p>
<p class="calibre1">comment[1]: Artist=Gentle Giant</p>
<p class="calibre1">comment[2]: Album=Scraping the Barrel</p>
<p class="calibre1">comment[3]: Year=2004</p>
<p class="calibre1">comment[4]: Genre=Sample File</p>
<p class="calibre1">The simplest way to change information, such as the title and artist, is to export the information to a text file, edit the file, and then reimport it:</p>
<p class="calibre1"><b class="calibre3">Audio and Video  |  221</b></p>
<p class="calibre1"><a id="calibre_link-113"></a>→ <b class="calibre3">metaflac --export-tags-to info.txt guitar.flac</b></p>
<p class="calibre1">→ <b class="calibre3">cat info.txt</b></p>
<p class="calibre1">Title=Guitar Solo</p>
<p class="calibre1">Artist=Gentle Giant</p>
<p class="calibre1">Album=Scraping the Barrel</p>
<p class="calibre1">Year=2004</p>
<p class="calibre1">Genre=Sample File</p>
<p class="calibre1">→ <b class="calibre3">nano info.txt</b>      <i class="calibre4">Make changes and save the file</i></p>
<p class="calibre1">→ <b class="calibre3">metaflac --import-tags-from info.txt guitar.flac</b></p>
<p class="calibre1"><b class="calibre3">Useful options</b></p>
<p class="calibre1">--show-tag  <i class="calibre4">name</i></p>
<p class="calibre1">Display the value for the given tag, such as title, </p>
<p class="calibre1">artist, album, year, etc. There are many other</p>
<p class="calibre1">“show” options for other information: see the</p>
<p class="calibre1">manpage. </p>
<p class="calibre1">--remove-tag  <i class="calibre4">name </i> Remove all occurrences of the given tag (title, artist, etc.) from the FLAC file. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">sox</b></p>
<p class="calibre1">sox [ <i class="calibre4">options</i>]  <i class="calibre4">infile</i>  <i class="calibre4">outfile</i></p>
<p class="calibre1">sox is the simplest command for converting from one audio file format to another. MP3, OGG, FLAC, WAV, and dozens of</p>
<p class="calibre1">other formats are supported. (Run man soxformat for a list.) Simply specify the new format using the correct file extension:</p>
<p class="calibre1">→ <b class="calibre3">sox guitar.mp3 guitar2.wav</b>      <i class="calibre4">MP3 to WAV</i></p>
<p class="calibre1">→ <b class="calibre3">sox guitar.ogg guitar2.mp3</b>      <i class="calibre4">OGG to MP3</i></p>
<p class="calibre1">→ <b class="calibre3">sox guitar.flac guitar2.ogg</b>     <i class="calibre4">FLAC to OGG</i></p>
<p class="calibre1"> <i class="calibre4">...and so forth... </i></p>
<p class="calibre1">sox has  <i class="calibre4">many</i> other uses, including combining audio files and adding special effects; it’s often called the “Swiss Army knife” of audio commands. See the manpage for details. </p>
<p class="calibre1"><b class="calibre3">222  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-41"></a><b class="calibre3">Useful options</b></p>
<p class="calibre1">-S</p>
<p class="calibre1">Show a progress meter; useful for long conversions. </p>
<p class="calibre1">--no-clobber Don’t overwrite the output file if it already exists. </p>
<p class="calibre1">-t  <i class="calibre4">type</i></p>
<p class="calibre1">Specify the type of the input file, if sox cannot figure it out. </p>
<p class="calibre1">See man soxformat for the list of types. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   -file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">mplayer</b></p>
<p class="calibre1">mplayer [ <i class="calibre4">options</i>]  <i class="calibre4">video_files... </i></p>
<p class="calibre1">The mplayer command plays video files in many formats</p>
<p class="calibre1">(MPEG, AVI, MOV, and more):</p>
<p class="calibre1">→ <b class="calibre3">mplayer myfile.avi</b></p>
<p class="calibre1">While the video is playing, press the space bar to pause and resume, the cursor keys to jump forward and backward in</p>
<p class="calibre1">time, and Q to quit. mplayer also plays audio files. The program has dozens of options on its manpage, and you can learn more a<a href="http://www.mplayerhq.hu">t  <i class="calibre4">http://www.mplayerhq.hu</i>. </a></p>
<p class="calibre1">Other popular video players for Linux include vlc (<a href="http://www.videolan.org/vlc/"> <i class="calibre4">http://</i></a></p>
<p class="calibre1"><a href="http://www.videolan.org/vlc/"> <i class="calibre4">www.videolan.org/vlc/</i></a>), kaffeine (<a href="http://kaffeine.kde.org/"> <i class="calibre4">http://kaffeine.kde.org/</i></a>), and xine (<a href="http://www.xine-project.org/"> <i class="calibre4">http://www.xine-project.org/</i>). </a></p>
<p class="calibre1"><b class="calibre3">Installing Software</b></p>
<p class="calibre1">You will probably want to add further software to your Linux system from time to time. The method of installation varies, however, because Linux has multiple standards for “packaged” </p>
<p class="calibre1">software. Your distro might perform installations on the command line, with one or more GUI tools, or both. The most</p>
<p class="calibre1">common package types are:</p>
<p class="calibre1"><b class="calibre3">Installing Software  |  223</b></p>
<p class="calibre1"><a id="calibre_link-100"></a> <i class="calibre4">*.deb files</i></p>
<p class="calibre1">Debian packages, used by Debian, Ubuntu, and other dis‐</p>
<p class="calibre1">tros. We’ll cover the package management commands</p>
<p class="calibre1">aptitude, apt-get, and dpkg for installing software in this</p>
<p class="calibre1">format. </p>
<p class="calibre1"> <i class="calibre4">*.rpm files</i></p>
<p class="calibre1">RPM Package Manager files are used by Red Hat, Fedora, </p>
<p class="calibre1">CentOS, and other distros. These are installed by the pack‐</p>
<p class="calibre1">age managers dnf, yum, and rpm. </p>
<p class="calibre1"> <i class="calibre4">*.tar.gz files and *.tar.bz2 files</i></p>
<p class="calibre1">Compressed tar files. This kind of file isn’t an installable</p>
<p class="calibre1">“package” but a collection of files created by tar and com‐</p>
<p class="calibre1">pressed with gzip ( <i class="calibre4">.gz</i>) or bzip2 ( <i class="calibre4">.bz2</i>). Whereas Debian and RPM packages can be installed with a single command, compressed tar files usually require multiple man‐</p>
<p class="calibre1">ual steps. </p>
<p class="calibre1"> <i class="calibre4">You must learn which package type is used by your Linux system</i>. </p>
<p class="calibre1">In general, you cannot (or should not) mix package types like Debian and RPM. Fortunately, modern Linux systems are usually set up with a package manager when initially installed, so all you need to do is use it. </p>
<p class="calibre1">If you aren’t sure which Linux distro you’re running, one of the following commands should give you a clue:</p>
<p class="calibre1">→ <b class="calibre3">cat /etc/issue</b></p>
<p class="calibre1">Ubuntu 15.10 \n \l</p>
<p class="calibre1">→ <b class="calibre3">more /etc/*-release</b></p>
<p class="calibre1">NAME="Ubuntu" </p>
<p class="calibre1">VERSION="15.10 (Wily Werewolf)" </p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">Most new software must be installed by the superuser, so you’ll need to run the sudo command (or equivalent) for any installation. For example:</p>
<p class="calibre1">→ <b class="calibre3">sudo rpm -ivh mypackage.rpm</b></p>
<p class="calibre1">Password: <b class="calibre3">********</b></p>
<p class="calibre1"><b class="calibre3">224  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-154"></a>Your Linux distribution almost certainly comes with graphical programs for manipulating packages, but you may find the</p>
<p class="calibre1">command-line programs to be simpler or faster depending on</p>
<p class="calibre1">your needs. </p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">dnf</b></p>
<p class="calibre1">dnf [ <i class="calibre4">options</i>] [ <i class="calibre4">packages</i>]</p>
<p class="calibre1">dnf is the newest package manager for RPM packages ( <i class="calibre4">.rpm</i> files). </p>
<p class="calibre1">The following table lists common operations with dnf:</p>
<p class="calibre1">Action</p>
<p class="calibre1">dnf command</p>
<p class="calibre1">Search for a package that meets your needs</p>
<p class="calibre1">dnf search  <i class="calibre4">command_name</i></p>
<p class="calibre1">(supports wildcards * and ?)</p>
<p class="calibre1">Check if a package is installed</p>
<p class="calibre1">dnf list installed </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Download a package but don’t install it</p>
<p class="calibre1">dnf download </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Download and install a package</p>
<p class="calibre1">sudo dnf install </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Install a package file</p>
<p class="calibre1">sudo dnf install </p>
<p class="calibre1"> <i class="calibre4">file</i>.rpm</p>
<p class="calibre1">Learn about a package</p>
<p class="calibre1">dnf info  <i class="calibre4">package_name</i></p>
<p class="calibre1">List the contents of a package</p>
<p class="calibre1">rpm -ql  <i class="calibre4">package_name</i></p>
<p class="calibre1">Discover which package an installed file</p>
<p class="calibre1">dnf </p>
<p class="calibre1">belongs to</p>
<p class="calibre1">provides  <i class="calibre4">/path/to/file</i></p>
<p class="calibre1">Update an installed package</p>
<p class="calibre1">sudo dnf upgrade </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1"><b class="calibre3">Installing Software  |  225</b></p>
<p class="calibre1"><a id="calibre_link-197"></a>Action</p>
<p class="calibre1">dnf command</p>
<p class="calibre1">Remove an installed package</p>
<p class="calibre1">sudo dnf remove </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">List all packages installed on the system</p>
<p class="calibre1">dnf list installed </p>
<p class="calibre1">| less</p>
<p class="calibre1">Check for updates for all packages on the</p>
<p class="calibre1">dnf check-update</p>
<p class="calibre1">system</p>
<p class="calibre1">Update all packages on the system</p>
<p class="calibre1">sudo dnf upgrade</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">yum</b></p>
<p class="calibre1">yum [ <i class="calibre4">options</i>] [ <i class="calibre4">packages</i>]</p>
<p class="calibre1">yum is a popular package manager for RPM packages ( <i class="calibre4">.rpm</i></p>
<p class="calibre1">files) found on Red Hat Enterprise Linux, Fedora, CentOS, and other distros. It is primarily a command-line tool, though you may encounter graphical frontends for yum, such as PackageKit on Fedora Linux. </p>
<p class="calibre1">The following table lists common operations with yum. For</p>
<p class="calibre1">operations on local files, which yum does not provide, we use the rpm command directly:</p>
<p class="calibre1">Action</p>
<p class="calibre1">yum command</p>
<p class="calibre1">Search for a package that meets your needs</p>
<p class="calibre1">yum search  <i class="calibre4">command_name</i></p>
<p class="calibre1">(supports wildcards * and ?)</p>
<p class="calibre1">Check if a package is installed</p>
<p class="calibre1">yum list installed </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Download a package but don’t install it. </p>
<p class="calibre1">sudo yum --downloadonly </p>
<p class="calibre1">Requires the downloadonly plugin; to</p>
<p class="calibre1">install  <i class="calibre4">package_name</i></p>
<p class="calibre1">install it, run:</p>
<p class="calibre1">sudo yum install \ </p>
<p class="calibre1">yum-downloadonly</p>
<p class="calibre1"><b class="calibre3">226  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-253"></a>Action</p>
<p class="calibre1">yum command</p>
<p class="calibre1">Download and install a package</p>
<p class="calibre1">sudo yum install </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Install a package file</p>
<p class="calibre1">rpm -ivh  <i class="calibre4">package</i>.rpm</p>
<p class="calibre1">Learn about a package</p>
<p class="calibre1">yum info  <i class="calibre4">package_name</i></p>
<p class="calibre1">List the contents of a package</p>
<p class="calibre1">rpm -ql  <i class="calibre4">package_name</i></p>
<p class="calibre1">Discover which package an installed file</p>
<p class="calibre1">yum provides  <i class="calibre4">/path/to/</i></p>
<p class="calibre1">belongs to</p>
<p class="calibre1"> <i class="calibre4">file</i></p>
<p class="calibre1">Update an installed package</p>
<p class="calibre1">sudo yum update </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Remove an installed package</p>
<p class="calibre1">sudo yum remove </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">List all packages installed on the system</p>
<p class="calibre1">yum list installed </p>
<p class="calibre1">| less</p>
<p class="calibre1">Check for updates for all packages on the</p>
<p class="calibre1">yum check-update</p>
<p class="calibre1">system</p>
<p class="calibre1">Update all packages on the system</p>
<p class="calibre1">sudo yum update</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">rpm</b></p>
<p class="calibre1">rpm [ <i class="calibre4">options</i>] [ <i class="calibre4">files</i>]</p>
<p class="calibre1">If you prefer to download and install RPM packages by hand, </p>
<p class="calibre1">use rpm, the same package-management program that yum runs</p>
<p class="calibre1">behind the scenes. Unlike yum, rpm works locally on your computer: it does not search software archives on the Internet for new packages. </p>
<p class="calibre1">rpm not only installs the software, but also confirms that your system has all prerequisites. For example, if package  <i class="calibre4">superstuff</i> <b class="calibre3">Installing Software  |  227</b></p>
<p class="calibre1"><a id="calibre_link-208"></a>requires package  <i class="calibre4">otherstuff</i> that you haven’t installed, rpm will not install  <i class="calibre4">superstuff</i>. If your system passes the test, however, rpm installs the requested package. </p>
<p class="calibre1">RPM filenames typically take the following form</p>
<p class="calibre1"> <i class="calibre4">&lt;name&gt;-&lt;version&gt;.&lt;architecture&gt;.rpm</i>. For example, the filename  <i class="calibre4">emacs-23.1-17.i386.rpm</i> indicates the emacs package, version 23.1-17, for i386 (Intel 80386 and higher) machines. Be aware that rpm sometimes requires a filename argument (like</p>
<p class="calibre1"> <i class="calibre4">emacs-23.1-17.i386.rpm</i>) and other times just the package name (like  <i class="calibre4">emacs</i>). </p>
<p class="calibre1">Action</p>
<p class="calibre1">rpm command</p>
<p class="calibre1">Check if a package is installed</p>
<p class="calibre1">rpm -q  <i class="calibre4">package_name</i></p>
<p class="calibre1">Install a package file</p>
<p class="calibre1">sudo rpm -ivh </p>
<p class="calibre1"> <i class="calibre4">package_file</i>.rpm</p>
<p class="calibre1">Learn about a package</p>
<p class="calibre1">rpm -qi  <i class="calibre4">package_name</i></p>
<p class="calibre1">List the contents of a package</p>
<p class="calibre1">rpm -ql  <i class="calibre4">package_name</i></p>
<p class="calibre1">Discover which package an installed</p>
<p class="calibre1">rpm -qf  <i class="calibre4">/path/to/file</i></p>
<p class="calibre1">file belongs to</p>
<p class="calibre1">Update an installed package</p>
<p class="calibre1">sudo rpm -Uvh </p>
<p class="calibre1"> <i class="calibre4">package_file</i>.rpm</p>
<p class="calibre1">Remove an installed package</p>
<p class="calibre1">sudo rpm -e  <i class="calibre4">package_name</i></p>
<p class="calibre1">List all packages installed on the</p>
<p class="calibre1">rpm -qa | less</p>
<p class="calibre1">system</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">APT</b></p>
<p class="calibre1">apt-get [ <i class="calibre4">options</i>]  <i class="calibre4">packages</i></p>
<p class="calibre1">apt-file [ <i class="calibre4">options</i>]  <i class="calibre4">string</i></p>
<p class="calibre1">apt-cache [ <i class="calibre4">options</i>]  <i class="calibre4">packages</i></p>
<p class="calibre1"><b class="calibre3">228  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-98"></a>dpkg [ <i class="calibre4">options</i>]  <i class="calibre4">packages</i></p>
<p class="calibre1">The APT (Advanced Packaging Tool) suite of commands can</p>
<p class="calibre1">install, remove, and manipulate Debian ( <i class="calibre4">.deb</i>) packages. </p>
<p class="calibre1">Before upgrading packages on your system, run sudo apt-get</p>
<p class="calibre1">update to retrieve the latest information on which packages are available. </p>
<p class="calibre1">Action</p>
<p class="calibre1">APT command</p>
<p class="calibre1">Search for a package that meets your needs</p>
<p class="calibre1">apt-file search </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Check if a package is installed</p>
<p class="calibre1">dpkg -s  <i class="calibre4">package_name</i></p>
<p class="calibre1">Download a package but don’t install it</p>
<p class="calibre1">apt-get -d  <i class="calibre4">package_name</i></p>
<p class="calibre1">Download and install a package</p>
<p class="calibre1">sudo apt-get install </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Install a package file</p>
<p class="calibre1">dpkg -i  <i class="calibre4">package_file</i>.deb</p>
<p class="calibre1">Learn about a package</p>
<p class="calibre1">apt-cache show </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">List the contents of a package</p>
<p class="calibre1">dpkg -L  <i class="calibre4">package_name</i></p>
<p class="calibre1">Discover which package an installed file</p>
<p class="calibre1">dpkg -S  <i class="calibre4">/path/to/file</i></p>
<p class="calibre1">belongs to</p>
<p class="calibre1">Update an installed package</p>
<p class="calibre1">sudo apt-get upgrade </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Remove an installed package</p>
<p class="calibre1">sudo apt-get remove </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">List all packages installed on the system</p>
<p class="calibre1">dpkg -l</p>
<p class="calibre1">Check for updates for all packages on the</p>
<p class="calibre1">sudo apt-get -u upgrade</p>
<p class="calibre1">system</p>
<p class="calibre1"><b class="calibre3">Installing Software  |  229</b></p>
<p class="calibre1"><a id="calibre_link-101"></a>Action</p>
<p class="calibre1">APT command</p>
<p class="calibre1">Update all packages on the system (to</p>
<p class="calibre1">sudo apt-get upgrade</p>
<p class="calibre1">include kernel packages, replace upgrade</p>
<p class="calibre1">by dist-upgrade)</p>
<p class="calibre1"><b class="calibre3">stdin   stdout   - file   -- opt   --help   --version</b></p>
<p class="calibre1"><b class="calibre3">aptitude</b></p>
<p class="calibre1">aptitude [ <i class="calibre4">options</i>] [ <i class="calibre4">packages</i>]</p>
<p class="calibre1">aptitude is another package manager for the command line</p>
<p class="calibre1">that manipulates Debian ( <i class="calibre4">.deb</i>) packages. You’ll also need to know dpkg for some operations, such as working with local  <i class="calibre4">.deb</i> files, as aptitude does not have that capability. </p>
<p class="calibre1">Action</p>
<p class="calibre1">aptitude command</p>
<p class="calibre1">Search for a package that meets your</p>
<p class="calibre1">aptitude search </p>
<p class="calibre1">needs</p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Check if a package is installed (examine</p>
<p class="calibre1">aptitude show  <i class="calibre4">package_name</i></p>
<p class="calibre1">the output for “State: not installed” or</p>
<p class="calibre1">“State: installed”)</p>
<p class="calibre1">Download a package but don’t install it</p>
<p class="calibre1">aptitude download </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Download and install a package</p>
<p class="calibre1">sudo aptitude install </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">Install a package file</p>
<p class="calibre1">dpkg -i  <i class="calibre4">package_file</i>.deb</p>
<p class="calibre1">Learn about a package</p>
<p class="calibre1">aptitude show  <i class="calibre4">package_name</i></p>
<p class="calibre1">List the contents of a package</p>
<p class="calibre1">dpkg -L  <i class="calibre4">package_name</i></p>
<p class="calibre1">Discover which package an installed file</p>
<p class="calibre1">dpkg -S  <i class="calibre4">/path/to/file</i></p>
<p class="calibre1">belongs to</p>
<p class="calibre1"><b class="calibre3">230  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-81"></a>Action</p>
<p class="calibre1">aptitude command</p>
<p class="calibre1">Update an installed package</p>
<p class="calibre1">sudo aptitude safe-</p>
<p class="calibre1">upgrade  <i class="calibre4">package_name</i></p>
<p class="calibre1">Remove an installed package</p>
<p class="calibre1">sudo aptitude remove </p>
<p class="calibre1"> <i class="calibre4">package_name</i></p>
<p class="calibre1">List all packages installed on the system</p>
<p class="calibre1">aptitude search '~i' | </p>
<p class="calibre1">less</p>
<p class="calibre1">Check for updates for all packages on the</p>
<p class="calibre1">aptitude --simulate full-</p>
<p class="calibre1">system</p>
<p class="calibre1">upgrade</p>
<p class="calibre1">Update all packages on the system</p>
<p class="calibre1">sudo aptitude full-upgrade</p>
<p class="calibre1"><b class="calibre3">tar.gz and tar.bz2 Files</b></p>
<p class="calibre1">Packaged software files with names ending  <i class="calibre4">.tar.gz</i> and  <i class="calibre4">.tar.bz2</i></p>
<p class="calibre1">typically contain source code that you’ll need to compile</p>
<p class="calibre1">(build) before installation. Typical build instructions are: 1. List the package contents, one file per line. Assure yourself that each file, when extracted, won’t overwrite something</p>
<p class="calibre1">precious on your system, either accidentally or mali‐</p>
<p class="calibre1">ciously<a href="#calibre_link-81">:23</a></p>
<p class="calibre1">→ <b class="calibre3">tar tvf  <i class="calibre4">package</i></b><b class="calibre3">.tar.gz | less</b>          <i class="calibre4">gzip</i></p>
<p class="calibre1">→ <b class="calibre3">tar tvf  <i class="calibre4">package</i></b><b class="calibre3">.tar.bz2 | less</b>         <i class="calibre4">bzip2</i></p>
<p class="calibre1">2. If satisfied, extract the files into a new directory. Run these commands as yourself, not as root, for safety reasons:</p>
<p class="calibre1">→ <b class="calibre3">mkdir newdir</b></p>
<p class="calibre1">→ <b class="calibre3">cd  <i class="calibre4">installation_directory</i></b></p>
<p class="calibre1">23 A maliciously designed tar file could include an absolute file path like  <i class="calibre4">/etc/passwd</i> designed to overwrite your system password file. </p>
<p class="calibre1"><b class="calibre3">Installing Software  |  231</b></p>
<p class="calibre1"><a id="calibre_link-42"></a>→ <b class="calibre3">tar xvf  <i class="calibre4">&lt;path&gt; </i></b><b class="calibre3">/ <i class="calibre4">package</i></b><b class="calibre3">.tar.gz</b>          <i class="calibre4">gzip</i></p>
<p class="calibre1">→ <b class="calibre3">tar xvf  <i class="calibre4">&lt;path&gt; </i></b><b class="calibre3">/ <i class="calibre4">package</i></b><b class="calibre3">.tar.bz2</b>         <i class="calibre4">bzip2</i></p>
<p class="calibre1">3. Look for an extracted file named  <i class="calibre4">INSTALL</i> or  <i class="calibre4">README</i>. </p>
<p class="calibre1">Read it to learn how to build the software, for example:</p>
<p class="calibre1">→ <b class="calibre3">cd newdir</b></p>
<p class="calibre1">→ <b class="calibre3">less INSTALL</b></p>
<p class="calibre1">4. Usually the  <i class="calibre4">INSTALL</i> or  <i class="calibre4">README</i> file will tell you to run a script called configure in the current directory, then run</p>
<p class="calibre1">make, then run make install. Examine the options you</p>
<p class="calibre1">may pass to the configure script:</p>
<p class="calibre1">→ <b class="calibre3">./configure --help</b></p>
<p class="calibre1">Then install the software:</p>
<p class="calibre1">→ <b class="calibre3">./configure  <i class="calibre4">options</i></b></p>
<p class="calibre1">→ <b class="calibre3">make</b></p>
<p class="calibre1">→ <b class="calibre3">sudo make install</b></p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts</b></p>
<p class="calibre1">Earlier when we covered the shell (bash), we said it had a programming language built in. In fact, you can write programs, or  <i class="calibre4">shell scripts</i>, to accomplish tasks that a single command cannot. The command reset-lpg, supplied in the book’s examples</p>
<p class="calibre1">directory, is a shell script that you can read:</p>
<p class="calibre1">→ <b class="calibre3">less ~/linuxpocketguide/reset-lpg</b></p>
<p class="calibre1">Like any good programming language, the shell has variables, conditionals (if-then-else), loops, input and output, and more. </p>
<p class="calibre1">Entire books have been written on shell scripting, so we’ll be covering the bare minimum to get you started. For full documentation, run info bash, search the Web, or pick up a more</p>
<p class="calibre1">in-depth O’Reilly book like <a href="http://shop.oreilly.com/product/9780596009656.do"> <i class="calibre4">Learning the bash Shel </i> or </a><a href="http://shop.oreilly.com/product/0636920046288.do"> <i class="calibre4">Bash</i></a></p>
<p class="calibre1"><a href="http://shop.oreilly.com/product/0636920046288.do"> <i class="calibre4">Pocket Reference</i></a>. </p>
<p class="calibre1"><b class="calibre3">232  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-82"></a><b class="calibre3">Creating and Running Shell Scripts</b></p>
<p class="calibre1">To create a shell script, simply put bash commands into a file as you would type them. To run the script, you have three choices: <i class="calibre4">Prepend #!/bin/bash and make the file executable</i></p>
<p class="calibre1">This is the most common way to run scripts. Add the line:</p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">to the very top of the script file. It must be the first line of the file, left-justified. Then make the file executable:</p>
<p class="calibre1">→ <b class="calibre3">chmod +x myscript</b></p>
<p class="calibre1">Optionally, move it into a directory in your search path. </p>
<p class="calibre1">Then run it like any other command:</p>
<p class="calibre1">→ <b class="calibre3">myscript</b></p>
<p class="calibre1">If the script is in your current directory, but the current</p>
<p class="calibre1">directory “.” is not in your search path, you’ll need to prepend “./” so the shell finds the script:</p>
<p class="calibre1">→ <b class="calibre3">./myscript</b></p>
<p class="calibre1">The current directory is generally not in your search path</p>
<p class="calibre1">for security reasons. (You wouldn’t want a local script</p>
<p class="calibre1">named (say) “ls” to override the real ls command.)</p>
<p class="calibre1"> <i class="calibre4">Pass to bash</i></p>
<p class="calibre1">bash will interpret its argument as the name of a script and run it. </p>
<p class="calibre1">→ <b class="calibre3">bash myscript</b></p>
<p class="calibre1"> <i class="calibre4">Run in current shell with “.” or </i> source</p>
<p class="calibre1">The preceding methods run your script as an independent</p>
<p class="calibre1">entity that has no effect on your current shell. <a href="#calibre_link-82">24</a> If you want your script to make changes to your current shell</p>
<p class="calibre1">24 That’s because the script runs in a separate shell (a  <i class="calibre4">subshel </i> or  <i class="calibre4">child</i> <i class="calibre4">shel </i>) that cannot alter the original shell. </p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts  |  233</b></p>
<p class="calibre1"><a id="calibre_link-57"></a>(setting variables, changing directory, etc.), it can be run in the current shell with the source or “.” command:</p>
<p class="calibre1">→ <b class="calibre3">. myscript</b></p>
<p class="calibre1">→ <b class="calibre3">source myscript</b></p>
<p class="calibre1"><b class="calibre3">Whitespace and Linebreaks</b></p>
<p class="calibre1">Bash shell scripts are very sensitive to whitespace and linebreaks. Because the “keywords” of this programming language</p>
<p class="calibre1">are actually commands evaluated by the shell, you need to separate arguments with whitespace. Likewise, a linebreak in the middle of a command will mislead the shell into thinking the command is incomplete. Follow the conventions we present</p>
<p class="calibre1">here and you should be fine. </p>
<p class="calibre1">If you must break a long command into multiple lines, end</p>
<p class="calibre1">each line (except the last) with a single \ character, which means “continued on next line”:</p>
<p class="calibre1">→ <b class="calibre3">grep abcdefghijklmnopqrstuvwxyz file1 file2 \</b></p>
<p class="calibre1"><b class="calibre3">  file3 file4</b></p>
<p class="calibre1"><b class="calibre3">Variables</b></p>
<p class="calibre1">We described shell variables earlier:</p>
<p class="calibre1">→ <b class="calibre3">MYVAR=6</b></p>
<p class="calibre1">→ <b class="calibre3">echo $MYVAR</b></p>
<p class="calibre1">6</p>
<p class="calibre1">All values held in variables are strings, but if they are numeric, the shell will treat them as numbers when appropriate:</p>
<p class="calibre1">→ <b class="calibre3">NUMBER="10" </b></p>
<p class="calibre1">→ <b class="calibre3">expr $NUMBER + 5</b></p>
<p class="calibre1">15</p>
<p class="calibre1">When you refer to a variable’s value in a shell script, it’s a good idea to surround it with double quotes to prevent certain runtime errors. An undefined variable, or a variable with spaces in its value, will evaluate to something unexpected if not surrounded by quotes, causing your script to malfunction:</p>
<p class="calibre1"><b class="calibre3">234  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-106"></a>→ <b class="calibre3">FILENAME="My Document" </b>             <i class="calibre4">Space in the name</i></p>
<p class="calibre1">→ <b class="calibre3">ls $FILENAME</b>                       <i class="calibre4">Try to list it</i> ls: My: No such file or directory    <i class="calibre4">ls saw 2 arguments</i></p>
<p class="calibre1">ls: Document: No such file or directory</p>
<p class="calibre1">→ <b class="calibre3">ls -l "$FILENAME" </b>          <i class="calibre4">List it properly</i> My Document                  <i class="calibre4">ls saw only 1 argument</i></p>
<p class="calibre1">If a variable name is evaluated adjacent to another string, surround it with curly braces to prevent unexpected behavior:</p>
<p class="calibre1">→ <b class="calibre3">HAT="fedora" </b></p>
<p class="calibre1">→ <b class="calibre3">echo "The plural of $HAT is $HATs" </b></p>
<p class="calibre1">The plural of fedora is             <i class="calibre4">No variable "HATs" </i></p>
<p class="calibre1">→ <b class="calibre3">echo "The plural of $HAT is ${HAT}s" </b></p>
<p class="calibre1">The plural of fedora is fedoras     <i class="calibre4">What we wanted</i></p>
<p class="calibre1"><b class="calibre3">Input and Output</b></p>
<p class="calibre1">Script output is provided by the echo and printf commands, </p>
<p class="calibre1">which we described in <a href="#calibre_link-35">“Screen Output” on page 198</a>:</p>
<p class="calibre1">→ <b class="calibre3">echo "Hello world" </b></p>
<p class="calibre1">Hello world</p>
<p class="calibre1">→ <b class="calibre3">printf "I am %d years old\n" èxpr 20 + 20`</b></p>
<p class="calibre1">I am 40 years old</p>
<p class="calibre1">Input is provided by the read command, which reads one line</p>
<p class="calibre1">from standard input and stores it in a variable:</p>
<p class="calibre1">→ <b class="calibre3">read name</b></p>
<p class="calibre1"><b class="calibre3">Sandy Smith</b> &lt;ENTER&gt; </p>
<p class="calibre1">→ <b class="calibre3">echo "I read the name $name" </b></p>
<p class="calibre1">I read the name Sandy Smith</p>
<p class="calibre1"><b class="calibre3">Booleans and Return Codes</b></p>
<p class="calibre1">Before we can describe conditionals and loops, we need to</p>
<p class="calibre1">explain the concept of a Boolean (true/false) test. To the shell, the value 0 means true or success, and anything else means</p>
<p class="calibre1">false or failure. (Think of zero as “no error” and other values as error codes.)</p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts  |  235</b></p>
<p class="calibre1"><a id="calibre_link-163"></a>Additionally, every Linux command returns an integer value, called a  <i class="calibre4">return code</i> or  <i class="calibre4">exit status</i>, to the shell when the command exits. </p>
<p class="calibre1">You can see this value in the special variable $?:</p>
<p class="calibre1">→ <b class="calibre3">cat myfile</b></p>
<p class="calibre1">My name is Sandy Smith and</p>
<p class="calibre1">I really like Ubuntu Linux</p>
<p class="calibre1">→ <b class="calibre3">grep Smith myfile</b></p>
<p class="calibre1">My name is Sandy Smith and     <i class="calibre4">A match was found... </i></p>
<p class="calibre1">→ <b class="calibre3">echo $? </b></p>
<p class="calibre1">0                              <i class="calibre4">...so return code is “success” </i></p>
<p class="calibre1">→ <b class="calibre3">grep aardvark myfile</b></p>
<p class="calibre1">→ <b class="calibre3">echo $? </b>                      <i class="calibre4">No match was found... </i></p>
<p class="calibre1">1                              <i class="calibre4">...so return code is “failure” </i></p>
<p class="calibre1">The return codes of a command are usually documented on its</p>
<p class="calibre1">manpage. </p>
<p class="calibre1"><b class="calibre3">test and “[” </b></p>
<p class="calibre1">The test command (built into the shell) will evaluate simple Boolean expressions involving numbers and strings, setting its exit status to 0 (true) or 1 (false):</p>
<p class="calibre1">→ <b class="calibre3">test 10 -lt 5</b>      <i class="calibre4">Is 10 less than 5? </i></p>
<p class="calibre1">→ <b class="calibre3">echo $? </b></p>
<p class="calibre1">1                    <i class="calibre4">No, it isn’t</i></p>
<p class="calibre1">→ <b class="calibre3">test -n "hello" </b>    <i class="calibre4">Does “hel o” have nonzero length? </i></p>
<p class="calibre1">→ <b class="calibre3">echo $? </b></p>
<p class="calibre1">0                    <i class="calibre4">Yes, it does</i></p>
<p class="calibre1">Here are common test arguments for checking properties of</p>
<p class="calibre1">integers, strings, and files:</p>
<p class="calibre1"><b class="calibre3">File tests</b></p>
<p class="calibre1">-d  <i class="calibre4">name</i></p>
<p class="calibre1">File  <i class="calibre4">name</i> is a directory</p>
<p class="calibre1">-f  <i class="calibre4">name</i></p>
<p class="calibre1">File  <i class="calibre4">name</i> is a regular file</p>
<p class="calibre1">-L  <i class="calibre4">name</i></p>
<p class="calibre1">File  <i class="calibre4">name</i> is a symbolic link</p>
<p class="calibre1"><b class="calibre3">236  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-97"></a>-r  <i class="calibre4">name</i></p>
<p class="calibre1">File  <i class="calibre4">name</i> exists and is readable</p>
<p class="calibre1">-w  <i class="calibre4">name</i></p>
<p class="calibre1">File  <i class="calibre4">name</i> exists and is writable</p>
<p class="calibre1">-x  <i class="calibre4">name</i></p>
<p class="calibre1">File  <i class="calibre4">name</i> exists and is executable</p>
<p class="calibre1">-s  <i class="calibre4">name</i></p>
<p class="calibre1">File  <i class="calibre4">name</i> exists and its size is nonzero</p>
<p class="calibre1"> <i class="calibre4">f1</i> -nt  <i class="calibre4">f2</i></p>
<p class="calibre1">File  <i class="calibre4">f1</i> is newer than file  <i class="calibre4">f2</i></p>
<p class="calibre1"> <i class="calibre4">f1</i> -ot  <i class="calibre4">f2</i></p>
<p class="calibre1">File  <i class="calibre4">f1</i> is older than file  <i class="calibre4">f2</i></p>
<p class="calibre1"><b class="calibre3">String tests</b></p>
<p class="calibre1"> <i class="calibre4">s1</i> =  <i class="calibre4">s2</i></p>
<p class="calibre1">String  <i class="calibre4">s1</i> equals string  <i class="calibre4">s2</i></p>
<p class="calibre1"> <i class="calibre4">s1</i> !=  <i class="calibre4">s2</i></p>
<p class="calibre1">String  <i class="calibre4">s1</i> does not equal string  <i class="calibre4">s2</i></p>
<p class="calibre1">-z  <i class="calibre4">s1</i></p>
<p class="calibre1">String  <i class="calibre4">s1</i> has zero length</p>
<p class="calibre1">-n  <i class="calibre4">s1</i></p>
<p class="calibre1">String  <i class="calibre4">s1</i> has nonzero length</p>
<p class="calibre1"><b class="calibre3">Numeric tests</b></p>
<p class="calibre1"> <i class="calibre4">a</i> -eq  <i class="calibre4">b</i></p>
<p class="calibre1">Integers  <i class="calibre4">a</i> and  <i class="calibre4">b</i> are equal</p>
<p class="calibre1"> <i class="calibre4">a</i> -ne  <i class="calibre4">b</i></p>
<p class="calibre1">Integers  <i class="calibre4">a</i> and  <i class="calibre4">b</i> are not equal</p>
<p class="calibre1"> <i class="calibre4">a</i> -gt  <i class="calibre4">b</i></p>
<p class="calibre1">Integer  <i class="calibre4">a</i> is greater than integer  <i class="calibre4">b</i></p>
<p class="calibre1"> <i class="calibre4">a</i> -ge  <i class="calibre4">b</i></p>
<p class="calibre1">Integer  <i class="calibre4">a</i> is greater than or equal to integer  <i class="calibre4">b</i></p>
<p class="calibre1"> <i class="calibre4">a</i> -lt  <i class="calibre4">b</i></p>
<p class="calibre1">Integer  <i class="calibre4">a</i> is less than integer  <i class="calibre4">b</i></p>
<p class="calibre1"> <i class="calibre4">a</i> -le  <i class="calibre4">b</i></p>
<p class="calibre1">Integer  <i class="calibre4">a</i> is less than or equal to integer  <i class="calibre4">b</i></p>
<p class="calibre1"><b class="calibre3">Combining and negating tests</b></p>
<p class="calibre1">t1 -a t2</p>
<p class="calibre1">And: Both tests t1 and t2 are true</p>
<p class="calibre1">t1 -o t2</p>
<p class="calibre1">Or: Either test t1 or t2 is true</p>
<p class="calibre1">!  <i class="calibre4">your_test</i></p>
<p class="calibre1">Negate the test (i.e., your_test is false)</p>
<p class="calibre1">\(  <i class="calibre4">your_test</i> \) Parentheses are used for grouping, as in algebra test has an unusual alias, “[” (left square bracket), as a shorthand for use with conditionals and loops. If you use this shorthand, you must supply a final argument of “]” (right square</p>
<p class="calibre1">bracket) to signify the end of the test. The following tests are identical to the previous two:</p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts  |  237</b></p>
<p class="calibre1"><a id="calibre_link-150"></a>→ <b class="calibre3">[ 10 -lt 5 ]</b></p>
<p class="calibre1">→ <b class="calibre3">echo $? </b></p>
<p class="calibre1">1</p>
<p class="calibre1">→ <b class="calibre3">[ -n "hello" ]</b></p>
<p class="calibre1">→ <b class="calibre3">echo $? </b></p>
<p class="calibre1">0</p>
<p class="calibre1">Remember that “[” is a command like any other, so it is fol‐</p>
<p class="calibre1">lowed by  <i class="calibre4">individual arguments separated by whitespace</i>. So if you mistakenly forget some whitespace:</p>
<p class="calibre1">→ <b class="calibre3">[ 5 -lt 4]</b>           <i class="calibre4">No space between 4 and ]</i></p>
<p class="calibre1">bash: [: missing ']' </p>
<p class="calibre1">then test thinks the final argument is the string “4]” and complains that the final bracket is missing. </p>
<p class="calibre1">A more powerful&mdash;but less portable&mdash;syntax for Boolean tests</p>
<p class="calibre1">is the double bracket, [[, which adds regular expression matching and eliminates some of the quirks of test. See <a href="http://mywiki.wooledge.org/BashFAQ/031"> <i class="calibre4">http://</i></a></p>
<p class="calibre1"><a href="http://mywiki.wooledge.org/BashFAQ/031"> <i class="calibre4">mywiki.wooledge.org/BashFAQ/031</i> for details. </a></p>
<p class="calibre1"><b class="calibre3">Conditionals</b></p>
<p class="calibre1">The if statement chooses between alternatives, each of which may have a complex test. The simplest form is the if-then</p>
<p class="calibre1">statement:</p>
<p class="calibre1">if  <i class="calibre4">command</i>            <i class="calibre4">If exit status of command is 0</i></p>
<p class="calibre1">then</p>
<p class="calibre1"> <i class="calibre4">body</i></p>
<p class="calibre1">fi</p>
<p class="calibre1">Here’s an example script with an if statement:</p>
<p class="calibre1">→ <b class="calibre3">cat script-if</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">if [ `whoamì = "root" ]</p>
<p class="calibre1">then</p>
<p class="calibre1">echo "You are the superuser" </p>
<p class="calibre1">fi</p>
<p class="calibre1">Next is the if-then-else statement:</p>
<p class="calibre1"><b class="calibre3">238  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-254"></a>if  <i class="calibre4">command</i></p>
<p class="calibre1">then</p>
<p class="calibre1"> <i class="calibre4">body1</i></p>
<p class="calibre1">else</p>
<p class="calibre1"> <i class="calibre4">body2</i></p>
<p class="calibre1">fi</p>
<p class="calibre1">For example:</p>
<p class="calibre1">→ <b class="calibre3">cat script-else</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">if [ `whoamì = "root" ]</p>
<p class="calibre1">then</p>
<p class="calibre1">echo "You are the superuser" </p>
<p class="calibre1">else</p>
<p class="calibre1">echo "You are a mere mortal" </p>
<p class="calibre1">fi</p>
<p class="calibre1">→ <b class="calibre3">./script-else</b></p>
<p class="calibre1">You are a mere mortal</p>
<p class="calibre1">→ <b class="calibre3">sudo ./script-else</b></p>
<p class="calibre1">Password: <b class="calibre3">********</b></p>
<p class="calibre1">You are the superuser</p>
<p class="calibre1">Finally, we have the form if-then-elif-else, which may have</p>
<p class="calibre1">as many tests as you like:</p>
<p class="calibre1">if  <i class="calibre4">command1</i></p>
<p class="calibre1">then</p>
<p class="calibre1"> <i class="calibre4">body1</i></p>
<p class="calibre1">elif  <i class="calibre4">command2</i></p>
<p class="calibre1">then</p>
<p class="calibre1"> <i class="calibre4">body2</i></p>
<p class="calibre1">elif ... </p>
<p class="calibre1">... </p>
<p class="calibre1">else</p>
<p class="calibre1"> <i class="calibre4">bodyN</i></p>
<p class="calibre1">fi</p>
<p class="calibre1">For example:</p>
<p class="calibre1">→ <b class="calibre3">cat script-elif</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">bribe=20000</p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts  |  239</b></p>
<p class="calibre1"><a id="calibre_link-119"></a>if [ `whoamì = "root" ]</p>
<p class="calibre1">then</p>
<p class="calibre1">echo "You are the superuser" </p>
<p class="calibre1">elif [ "$USER" = "root" ]</p>
<p class="calibre1">then</p>
<p class="calibre1">echo "You might be the superuser" </p>
<p class="calibre1">elif [ "$bribe" -gt 10000 ]</p>
<p class="calibre1">then</p>
<p class="calibre1">echo "You can pay to be the superuser" </p>
<p class="calibre1">else</p>
<p class="calibre1">echo "You are still a mere mortal" </p>
<p class="calibre1">fi</p>
<p class="calibre1">→ <b class="calibre3">./script-elif</b></p>
<p class="calibre1">You can pay to be the superuser</p>
<p class="calibre1">The case statement evaluates a single value and branches to an appropriate piece of code:</p>
<p class="calibre1">→ <b class="calibre3">cat script-case</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">echo -n "What would you like to do (eat, sleep)? " </p>
<p class="calibre1">read answer</p>
<p class="calibre1">case "$answer" in</p>
<p class="calibre1">eat)</p>
<p class="calibre1">echo "OK, have a hamburger." </p>
<p class="calibre1">;; </p>
<p class="calibre1">sleep)</p>
<p class="calibre1">echo "Good night then." </p>
<p class="calibre1">;; </p>
<p class="calibre1">*)</p>
<p class="calibre1">echo "I'm not sure what you want to do." </p>
<p class="calibre1">echo "I guess I'll see you tomorrow." </p>
<p class="calibre1">;; </p>
<p class="calibre1">esac</p>
<p class="calibre1">→ <b class="calibre3">./script-case</b></p>
<p class="calibre1">What would you like to do (eat, sleep)? <b class="calibre3">sleep</b></p>
<p class="calibre1">Good night then. </p>
<p class="calibre1">The general form is:</p>
<p class="calibre1">case  <i class="calibre4">string</i> in</p>
<p class="calibre1"> <i class="calibre4">expr1</i>)</p>
<p class="calibre1"><b class="calibre3">240  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-255"></a>     <i class="calibre4">body1</i></p>
<p class="calibre1">;; </p>
<p class="calibre1"> <i class="calibre4">expr2</i>)</p>
<p class="calibre1"> <i class="calibre4">body2</i></p>
<p class="calibre1">;; </p>
<p class="calibre1">... </p>
<p class="calibre1"> <i class="calibre4">exprN</i>)</p>
<p class="calibre1"> <i class="calibre4">bodyN</i></p>
<p class="calibre1">;; </p>
<p class="calibre1">*)</p>
<p class="calibre1"> <i class="calibre4">bodyelse</i></p>
<p class="calibre1">;; </p>
<p class="calibre1">esac</p>
<p class="calibre1">where  <i class="calibre4">string</i> is any value, usually a variable value like $myvar, and  <i class="calibre4">expr1</i> through  <i class="calibre4">exprN</i> are patterns (run the command info bash for details), with the final * like a final “else.” Each set of commands must be terminated by ;; (as shown):</p>
<p class="calibre1">→ <b class="calibre3">cat script-case2</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">echo -n "Enter a letter: " </p>
<p class="calibre1">read letter</p>
<p class="calibre1">case $letter in</p>
<p class="calibre1">X)</p>
<p class="calibre1">echo "$letter is an X" </p>
<p class="calibre1">;; </p>
<p class="calibre1">[aeiou])</p>
<p class="calibre1">echo "$letter is a vowel" </p>
<p class="calibre1">;; </p>
<p class="calibre1">[0-9])</p>
<p class="calibre1">echo "$letter is a digit, silly" </p>
<p class="calibre1">;; </p>
<p class="calibre1">*)</p>
<p class="calibre1">echo "The letter '$letter' is not supported" </p>
<p class="calibre1">;; </p>
<p class="calibre1">esac</p>
<p class="calibre1">→ <b class="calibre3">./script-case2</b></p>
<p class="calibre1">Enter a letter: <b class="calibre3">e</b></p>
<p class="calibre1">e is a vowel</p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts  |  241</b></p>
<p class="calibre1"><a id="calibre_link-186"></a><b class="calibre3">Loops</b></p>
<p class="calibre1">The while loop repeats a set of commands as long as a condi‐</p>
<p class="calibre1">tion is true. </p>
<p class="calibre1">while  <i class="calibre4">command</i>         <i class="calibre4">While the exit status of command is 0</i></p>
<p class="calibre1">do</p>
<p class="calibre1"> <i class="calibre4">body</i></p>
<p class="calibre1">done</p>
<p class="calibre1">For example:</p>
<p class="calibre1">→ <b class="calibre3">cat script-while</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">i=0</p>
<p class="calibre1">while [ $i -lt 3 ]</p>
<p class="calibre1">do</p>
<p class="calibre1">echo "$i" </p>
<p class="calibre1">i=èxpr $i + 1`</p>
<p class="calibre1">done</p>
<p class="calibre1">→ <b class="calibre3">./script-while</b></p>
<p class="calibre1">0</p>
<p class="calibre1">1</p>
<p class="calibre1">2</p>
<p class="calibre1">The until loop repeats until a condition becomes true:</p>
<p class="calibre1">until  <i class="calibre4">command</i>    <i class="calibre4">While the exit status of command is nonzero</i> do</p>
<p class="calibre1"> <i class="calibre4">body</i></p>
<p class="calibre1">done</p>
<p class="calibre1">For example:</p>
<p class="calibre1">→ <b class="calibre3">cat script-until</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">i=0</p>
<p class="calibre1">until [ $i -ge 3 ]</p>
<p class="calibre1">do</p>
<p class="calibre1">echo "$i" </p>
<p class="calibre1">i=èxpr $i + 1`</p>
<p class="calibre1">done</p>
<p class="calibre1">→ <b class="calibre3">./script-until</b></p>
<p class="calibre1"><b class="calibre3">242  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-173"></a>0</p>
<p class="calibre1">1</p>
<p class="calibre1">2</p>
<p class="calibre1">Be careful to avoid infinite loops, using while with a condition that always evaluates to 0 (true), or until with a condition that always evaluates to a nonzero value (false):</p>
<p class="calibre1">i=1</p>
<p class="calibre1">while [ $i -lt 10 ]     <i class="calibre4">Variable i never changes. Infinite! </i></p>
<p class="calibre1">do</p>
<p class="calibre1">echo "forever" </p>
<p class="calibre1">done</p>
<p class="calibre1">Another type of loop, the for loop, iterates over values from a list:</p>
<p class="calibre1">for  <i class="calibre4">variable</i> in  <i class="calibre4">list</i></p>
<p class="calibre1">do</p>
<p class="calibre1"> <i class="calibre4">body</i></p>
<p class="calibre1">done</p>
<p class="calibre1">For example:</p>
<p class="calibre1">→ <b class="calibre3">cat script-for</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">for name in Tom Jane Harry</p>
<p class="calibre1">do</p>
<p class="calibre1">echo "$name is my friend" </p>
<p class="calibre1">done</p>
<p class="calibre1">→ <b class="calibre3">./script-for</b></p>
<p class="calibre1">Tom is my friend</p>
<p class="calibre1">Jane is my friend</p>
<p class="calibre1">Harry is my friend</p>
<p class="calibre1">The for loop is particularly handy for processing lists of files; for example, filenames with a certain extension in the current directory:</p>
<p class="calibre1">→ <b class="calibre3">cat script-for2</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">for file in *.docx</p>
<p class="calibre1">do</p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts  |  243</b></p>
<p class="calibre1"><a id="calibre_link-143"></a>  echo "$file is a stinky Microsoft Word file" </p>
<p class="calibre1">done</p>
<p class="calibre1">→ <b class="calibre3">./script-for2</b></p>
<p class="calibre1">letter.docx is a stinky Microsoft Word file</p>
<p class="calibre1">You can also use the seq command (see <a href="#calibre_link-83">seq on page 202) to</a></p>
<p class="calibre1">produce a list of consecutive integers, and then loop over those numbers:</p>
<p class="calibre1">→ <b class="calibre3">cat script-seq</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">for i in $(seq 1 20)    <i class="calibre4">Generates the numbers 1 2 3 4 ... 20</i></p>
<p class="calibre1">do</p>
<p class="calibre1">echo "iteration $i" </p>
<p class="calibre1">done</p>
<p class="calibre1">→ <b class="calibre3">./script-seq</b></p>
<p class="calibre1">iteration 1</p>
<p class="calibre1">iteration 2</p>
<p class="calibre1">iteration 3</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">iteration 20</p>
<p class="calibre1"><b class="calibre3">Command-Line Arguments</b></p>
<p class="calibre1">Shell scripts can accept command-line arguments and options</p>
<p class="calibre1">just like other Linux commands. (In fact, some common Linux</p>
<p class="calibre1">commands  <i class="calibre4">are</i> scripts.) Within your shell script, you can refer to these arguments as $1, $2, $3, and so on:</p>
<p class="calibre1">→ <b class="calibre3">cat script-args</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">echo "My name is $1 and I come from $2" </p>
<p class="calibre1">→ <b class="calibre3">./script-args Johnson Wisconsin</b></p>
<p class="calibre1">My name is Johnson and I come from Wisconsin</p>
<p class="calibre1">→ <b class="calibre3">./script-args Bob</b></p>
<p class="calibre1">My name is Bob and I come from</p>
<p class="calibre1">Your script can test the number of arguments it received with $#:</p>
<p class="calibre1"><b class="calibre3">244  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-160"></a>→ <b class="calibre3">cat script-args2</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">if [ $# -lt 2 ]</p>
<p class="calibre1">then</p>
<p class="calibre1">echo "$0 error: you must supply two arguments" </p>
<p class="calibre1">else</p>
<p class="calibre1">echo "My name is $1 and I come from $2" </p>
<p class="calibre1">fi</p>
<p class="calibre1">The special value $0 contains the name of the script, and is handy for usage and error messages:</p>
<p class="calibre1">→ <b class="calibre3">./script-args2 Barbara</b></p>
<p class="calibre1">./script-args2 error: you must supply two arguments</p>
<p class="calibre1">To iterate over all command-line arguments, use a for loop</p>
<p class="calibre1">with the special variable $@, which holds all arguments:</p>
<p class="calibre1">→ <b class="calibre3">cat script-args3</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">for arg in $@</p>
<p class="calibre1">do</p>
<p class="calibre1">echo "I found the argument $arg" </p>
<p class="calibre1">done</p>
<p class="calibre1">→ <b class="calibre3">./script-args3 One Two Three</b></p>
<p class="calibre1">I found the argument One</p>
<p class="calibre1">I found the argument Two</p>
<p class="calibre1">I found the argument Three</p>
<p class="calibre1"><b class="calibre3">Exiting with a Return Code</b></p>
<p class="calibre1">The exit command terminates your script and passes a given</p>
<p class="calibre1">return code to the shell. By tradition, scripts should return 0</p>
<p class="calibre1">for success and 1 (or other nonzero value) on failure. If your script doesn’t call exit, the return code is automatically 0:</p>
<p class="calibre1">→ <b class="calibre3">cat script-exit</b></p>
<p class="calibre1">#!/bin/bash</p>
<p class="calibre1">if [ $# -lt 2 ]</p>
<p class="calibre1">then</p>
<p class="calibre1">echo "$0 error: you must supply two arguments" </p>
<p class="calibre1">exit 1</p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts  |  245</b></p>
<p class="calibre1"><a id="calibre_link-157"></a>else</p>
<p class="calibre1">echo "My name is $1 and I come from $2" </p>
<p class="calibre1">fi</p>
<p class="calibre1">exit 0</p>
<p class="calibre1">→ <b class="calibre3">./script-exit Bob</b></p>
<p class="calibre1">./script-exit error: you must supply two arguments</p>
<p class="calibre1">→ <b class="calibre3">echo $? </b></p>
<p class="calibre1">1</p>
<p class="calibre1"><b class="calibre3">Piping to bash</b></p>
<p class="calibre1">Bash is not just a shell; it’s also a command, bash, that reads from standard input. This means you can construct commands</p>
<p class="calibre1">as strings and send them to bash for execution:</p>
<p class="calibre1">→ <b class="calibre3">echo wc -l myfile</b></p>
<p class="calibre1">wc -l myfile</p>
<p class="calibre1">→ <b class="calibre3">echo wc -l myfile | bash</b></p>
<p class="calibre1">18 myfile</p>
<p class="calibre1"><b class="calibre3">Bash Warning</b></p>
<p class="calibre1">Piping commands into bash is powerful but can also be dangerous. First make sure you know  <i class="calibre4">exactly</i> which commands will be executed. You don’t want to pipe an unexpected rm command to bash and delete a valuable file (or 1,000 valuable files). </p>
<p class="calibre1">If someone asks you to retrieve a web page (say, with the curl command) and pipe it blindly into bash, don’t do it! Instead, capture the web page as a file (with curl or wget), examine it closely, and make an informed decision whether to execute it with bash. </p>
<p class="calibre1">This technique is incredibly useful. Suppose you want to download the files  <i class="calibre4">photo1.jpg</i>,  <i class="calibre4">photo2.jpg</i>, through  <i class="calibre4">photo100.jpg</i> from a website. Instead of typing 100 wget commands by hand, construct the commands with a loop, using seq to construct the list of integers from 1 to 100:</p>
<p class="calibre1"><b class="calibre3">246  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-256"></a>→ <b class="calibre3">for i in `seq 1 100`</b></p>
<p class="calibre1"><b class="calibre3">do</b></p>
<p class="calibre1"><b class="calibre3">echo wget http://example.com/photo$i.jpg</b></p>
<p class="calibre1"><b class="calibre3">done</b></p>
<p class="calibre1">wget http://example.com/photo1.jpg</p>
<p class="calibre1">wget http://example.com/photo2.jpg</p>
<p class="calibre1"> <i class="calibre4">... </i></p>
<p class="calibre1">wget http://example.com/photo100.jpg</p>
<p class="calibre1">Yes, you’ve constructed the text of 100 commands. Now pipe</p>
<p class="calibre1">the output to bash, which will run all 100 commands as if you’d typed them by hand:</p>
<p class="calibre1">→ <b class="calibre3">for i in `seq 1 100`</b></p>
<p class="calibre1"><b class="calibre3">do</b></p>
<p class="calibre1"><b class="calibre3">echo wget http://example.com/photo$i.jpg</b></p>
<p class="calibre1"><b class="calibre3">done | bash</b></p>
<p class="calibre1">Here’s a more complex but practical application. Suppose you have a set of files you want to rename. Put the old names into a file  <i class="calibre4">oldnames</i>, and the new names into a file  <i class="calibre4">newnames</i>:</p>
<p class="calibre1">→ <b class="calibre3">cat oldnames</b></p>
<p class="calibre1">oldname1</p>
<p class="calibre1">oldname2</p>
<p class="calibre1">oldname3</p>
<p class="calibre1">→ <b class="calibre3">cat newnames</b></p>
<p class="calibre1">newname1</p>
<p class="calibre1">newname2</p>
<p class="calibre1">newname3</p>
<p class="calibre1">Now use the commands paste and sed <a href="#calibre_link-13">(“File Text Manipula‐</a></p>
<p class="calibre1"><a href="#calibre_link-13">tion” on page 92) to place the old and new names side by side</a></p>
<p class="calibre1">and prepend the word “mv” to each line, and the output is a</p>
<p class="calibre1">sequence of “mv” commands:</p>
<p class="calibre1">→ <b class="calibre3">cat oldnames | paste -d' ' oldnames newnames \</b></p>
<p class="calibre1"><b class="calibre3">| sed 's/^/mv /' </b></p>
<p class="calibre1">mv oldfile1 newfile1</p>
<p class="calibre1">mv oldfile2 newfile2</p>
<p class="calibre1">mv oldfile3 newfile3</p>
<p class="calibre1">Finally, pipe the output to bash, and the renaming takes place! </p>
<p class="calibre1"><b class="calibre3">Programming with Shell Scripts  |  247</b></p>
<p class="calibre1"><a id="calibre_link-43"></a>→ <b class="calibre3">cat oldnames | paste -d' ' oldnames newnames \</b></p>
<p class="calibre1"><b class="calibre3">| sed 's/^/mv /' \</b></p>
<p class="calibre1"><b class="calibre3">| bash</b></p>
<p class="calibre1"><b class="calibre3">Beyond Shell Scripting</b></p>
<p class="calibre1">Shell scripts are fine for many purposes, but Linux comes with much more powerful scripting languages, as well as compiled</p>
<p class="calibre1">programming languages. Here are a few:</p>
<p class="calibre1">Language Program</p>
<p class="calibre1">To get started... </p>
<p class="calibre1">C, C++</p>
<p class="calibre1">gcc, g++ man gcc</p>
<p class="calibre1"><a href="https://gcc.gnu.org/"> <i class="calibre4">https://gcc.gnu.org/</i></a></p>
<p class="calibre1">.NET</p>
<p class="calibre1">mono</p>
<p class="calibre1">man mono</p>
<p class="calibre1"><a href="http://www.mono-project.com/"> <i class="calibre4">http://www.mono-project.com/</i></a></p>
<p class="calibre1">Java</p>
<p class="calibre1">javac</p>
<p class="calibre1"><a href="http://java.com/"> <i class="calibre4">http://java.com/</i> </a></p>
<p class="calibre1">Perl</p>
<p class="calibre1">perl</p>
<p class="calibre1">man perl</p>
<p class="calibre1"><a href="http://www.perl.com/"> <i class="calibre4">http://www.perl.com/</i></a></p>
<p class="calibre1">PHP</p>
<p class="calibre1">php</p>
<p class="calibre1">man php</p>
<p class="calibre1"><a href="http://php.net/"> <i class="calibre4">http://php.net/</i></a></p>
<p class="calibre1">Python</p>
<p class="calibre1">python</p>
<p class="calibre1">man python</p>
<p class="calibre1"><a href="https://www.python.org/"> <i class="calibre4">https://www.python.org/</i></a></p>
<p class="calibre1">Ruby</p>
<p class="calibre1">ruby</p>
<p class="calibre1"><a href="http://www.ruby-lang.org/"> <i class="calibre4">http://www.ruby-lang.org/</i></a> </p>
<p class="calibre1"><b class="calibre3">Final Words</b></p>
<p class="calibre1">Although we’ve covered many commands and capabilities of</p>
<p class="calibre1">Linux, we’ve just scratched the surface. Most distributions</p>
<p class="calibre1">come with  <i class="calibre4">thousands</i> of other programs. We encourage you to continue reading, exploring, and learning the capabilities of your Linux systems. Good luck! </p>
<p class="calibre1"><b class="calibre3">248  |  Linux Pocket Guide</b></p>
<p class="calibre1"><a id="calibre_link-230"></a><b class="calibre3">Acknowledgments</b></p>
<p class="calibre1">I am very grateful to the many readers who purchased the first two editions of this book, making the third edition possible. </p>
<p class="calibre1">My heartfelt thanks also go to my editor, Nan Barber, the</p>
<p class="calibre1">O’Reilly production staff, the technical review team (Justin Karimi, Bill Ricker, Dan Ritter), Jay Moran at Cimpress, and as always, my beautiful family, Lisa and Sophia. </p>
<p class="calibre1"><b class="calibre3">Final Words  |  249</b></p>
<p class="calibre1"><a id="calibre_link-257"></a>
<a id="calibre_link-44"></a><b class="calibre3">Index</b></p>
<p class="calibre1"><b class="calibre3">Symbols</b></p>
<p class="calibre1">line continuation, <a href="#calibre_link-2">10</a>, <a href="#calibre_link-57">234</a></p>
<p class="calibre1">! (shell command histor<a href="#calibre_link-84">y), 38</a></p>
<p class="calibre1">^C keystroke (killing programs), </p>
<p class="calibre1">$(), <a href="#calibre_link-49">36</a></p>
<p class="calibre1"><a href="#calibre_link-85">45</a></p>
<p class="calibre1">&amp; (ampersand), running back‐</p>
<p class="calibre1">^Z keystroke (suspending jobs), </p>
<p class="calibre1">ground jobs, <a href="#calibre_link-86">41</a></p>
<p class="calibre1"><a href="#calibre_link-86">41</a></p>
<p class="calibre1">&amp;&amp; (two ampersands), logical</p>
<p class="calibre1">| (pipe opera<a href="#calibre_link-87">tor), 34</a></p>
<p class="calibre1">and, stopping execution of</p>
<p class="calibre1">|| (two pipes), logical or, stopping</p>
<p class="calibre1"><a href="#calibre_link-88">combined commands, 35</a></p>
<p class="calibre1">execution of combined com‐</p>
<p class="calibre1">- (dash), standard input/output, <a href="#calibre_link-89">9</a></p>
<p class="calibre1">mands, <a href="#calibre_link-49">36</a></p>
<p class="calibre1">-- (two dashes), end of options, <a href="#calibre_link-89">9</a></p>
<p class="calibre1">~ (tilde), denoting home directo‐</p>
<p class="calibre1">--help option, <a href="#calibre_link-90">12</a></p>
<p class="calibre1">ries, <a href="#calibre_link-91">20</a></p>
<p class="calibre1">. (period)</p>
<p class="calibre1">current director<a href="#calibre_link-92">y, 18</a></p>
<p class="calibre1"><b class="calibre3">A</b></p>
<p class="calibre1">dot files, <a href="#calibre_link-61">29</a></p>
<p class="calibre1">abiword command, <a href="#calibre_link-66">64</a></p>
<p class="calibre1"><a href="#calibre_link-57">shell script execution, 234</a></p>
<p class="calibre1">absolute pa<a href="#calibre_link-92">th, 18</a></p>
<p class="calibre1">.. (two periods), parent directory, </p>
<p class="calibre1">absolute path of current directory, </p>
<p class="calibre1"><a href="#calibre_link-92">18</a></p>
<p class="calibre1">printing, <a href="#calibre_link-93">53</a></p>
<p class="calibre1"><a href="#calibre_link-43">.NET, 248</a></p>
<p class="calibre1"><a href="#calibre_link-16">acroread command, 120</a></p>
<p class="calibre1">/ (slash), root directory, <a href="#calibre_link-5">17</a></p>
<p class="calibre1">administra<a href="#calibre_link-94">tor, 5</a></p>
<p class="calibre1">; (semicolon), combine com‐</p>
<p class="calibre1"><a href="#calibre_link-59">alias command, 33</a></p>
<p class="calibre1"><a href="#calibre_link-88">mands using, 35</a></p>
<p class="calibre1">alphabetical order, sorting text in, </p>
<p class="calibre1">&lt; (input redirection), <a href="#calibre_link-59">33</a></p>
<p class="calibre1"><a href="#calibre_link-95">102</a></p>
<p class="calibre1">&lt;() (process substitution), <a href="#calibre_link-87">34</a></p>
<p class="calibre1">alpine mail program, <a href="#calibre_link-96">186</a></p>
<p class="calibre1">&gt; (output redirection), <a href="#calibre_link-87">34</a></p>
<p class="calibre1">ampersand (&amp;), running back‐</p>
<p class="calibre1">[ (left square bracket), alias for</p>
<p class="calibre1"><a href="#calibre_link-86">ground jobs, 41</a></p>
<p class="calibre1"><a href="#calibre_link-97">test command, 237</a></p>
<p class="calibre1">a<a href="#calibre_link-98">pt-cache command, 229</a></p>
<p class="calibre1">\ (backward slash)</p>
<p class="calibre1">a<a href="#calibre_link-98">pt-file command, 229</a></p>
<p class="calibre1">esca<a href="#calibre_link-99">ping special characters, 37</a></p>
<p class="calibre1"><b class="calibre3">251</b></p>
<p class="calibre1"><a id="calibre_link-258"></a>apt-get command, <a href="#calibre_link-100">224</a>, <a href="#calibre_link-98">229</a></p>
<p class="calibre1">braces</p>
<p class="calibre1">aptitude command, <a href="#calibre_link-100">224</a>, <a href="#calibre_link-101">230</a></p>
<p class="calibre1">expansion on command line, </p>
<p class="calibre1">argumen<a href="#calibre_link-102">ts for commands, 3</a></p>
<p class="calibre1"><a href="#calibre_link-50">30</a></p>
<p class="calibre1"><a href="#calibre_link-103">aspell command, 127</a></p>
<p class="calibre1"><a href="#calibre_link-104">grep regular expressions, 95</a></p>
<p class="calibre1">at command, <a href="#calibre_link-105">150</a></p>
<p class="calibre1">shell variables, <a href="#calibre_link-106">235</a></p>
<p class="calibre1">a<a href="#calibre_link-76">tq command, 151</a></p>
<p class="calibre1">browsing the W<a href="#calibre_link-33">eb, 188</a></p>
<p class="calibre1">a<a href="#calibre_link-76">trm command, 151</a></p>
<p class="calibre1"><a href="#calibre_link-107">bunzip2 command, 111</a></p>
<p class="calibre1">attributes of files, <a href="#calibre_link-108">80</a></p>
<p class="calibre1">burning CDs and DVDs, <a href="#calibre_link-109">137</a></p>
<p class="calibre1"><a href="#calibre_link-108">changing, 80</a></p>
<p class="calibre1">bzcat command, <a href="#calibre_link-110">112</a></p>
<p class="calibre1"><a href="#calibre_link-12">viewing, 81</a></p>
<p class="calibre1"><a href="#calibre_link-107">bzip2 command, 111</a></p>
<p class="calibre1">audio, <a href="#calibre_link-40">218</a></p>
<p class="calibre1">software installation and, <a href="#calibre_link-100">224</a></p>
<p class="calibre1">compressing, <a href="#calibre_link-111">219</a></p>
<p class="calibre1">tar &ndash;j command and, <a href="#calibre_link-112">110</a></p>
<p class="calibre1">con<a href="#calibre_link-113">verting, 222</a></p>
<p class="calibre1">pla<a href="#calibre_link-41">ying, 223</a></p>
<p class="calibre1"><b class="calibre3">C</b></p>
<p class="calibre1"><a href="#calibre_link-40">ripping, 218</a></p>
<p class="calibre1">C and C++ languages, <a href="#calibre_link-43">248</a></p>
<p class="calibre1">tags, creating, <a href="#calibre_link-114">220</a>, <a href="#calibre_link-115">221</a></p>
<p class="calibre1"><a href="#calibre_link-38">cal command, 211</a></p>
<p class="calibre1">tags, viewing, <a href="#calibre_link-111">219, </a><a href="#calibre_link-114">220</a></p>
<p class="calibre1">calcula<a href="#calibre_link-37">tor programs, 206</a></p>
<p class="calibre1">a<a href="#calibre_link-116">wk command, 107</a></p>
<p class="calibre1">calendar prin<a href="#calibre_link-38">ting, 211</a></p>
<p class="calibre1"><a href="#calibre_link-117">vs. tr command, 101</a></p>
<p class="calibre1"><a href="#calibre_link-118">carriage returns, 96</a></p>
<p class="calibre1">case statement, <a href="#calibre_link-119">240</a></p>
<p class="calibre1"><b class="calibre3">B</b></p>
<p class="calibre1">cat command, <a href="#calibre_link-120">2</a>, <a href="#calibre_link-121">56</a>, <a href="#calibre_link-95">102</a></p>
<p class="calibre1">background jobs, running, <a href="#calibre_link-122">40</a></p>
<p class="calibre1">revealing end-of-line charac‐</p>
<p class="calibre1">backing up Lin<a href="#calibre_link-20">ux files, 134</a></p>
<p class="calibre1">ters, <a href="#calibre_link-118">96</a></p>
<p class="calibre1"><a href="#calibre_link-49">backquotes on command line, 36, </a></p>
<p class="calibre1"><a href="#calibre_link-123">tee command and, 106</a></p>
<p class="calibre1"><a href="#calibre_link-124">144</a></p>
<p class="calibre1">CD (compact discs)</p>
<p class="calibre1">vs. xargs, <a href="#calibre_link-125">88</a></p>
<p class="calibre1"><a href="#calibre_link-109">burning, 137</a></p>
<p class="calibre1">backward slash (\)</p>
<p class="calibre1">ripping a<a href="#calibre_link-40">udio, 218</a></p>
<p class="calibre1">esca<a href="#calibre_link-99">ping special characters, 37</a></p>
<p class="calibre1"><a href="#calibre_link-5">cd command, 17, </a><a href="#calibre_link-92">18, </a><a href="#calibre_link-93">53</a></p>
<p class="calibre1">line continua<a href="#calibre_link-2">tion, 10, </a><a href="#calibre_link-57">234</a></p>
<p class="calibre1">home directories, locating, <a href="#calibre_link-91">20</a></p>
<p class="calibre1">basename command, <a href="#calibre_link-93">53</a></p>
<p class="calibre1">cdparanoia command, <a href="#calibre_link-40">218</a></p>
<p class="calibre1">bash (Bourne-Again Shell), <a href="#calibre_link-54">14</a>, <a href="#calibre_link-55">27</a></p>
<p class="calibre1">cgi-bin director<a href="#calibre_link-126">y, 22</a></p>
<p class="calibre1"><a href="#calibre_link-99">command-line editing, 37</a></p>
<p class="calibre1">cha<a href="#calibre_link-108">ttr command, 80</a></p>
<p class="calibre1">prin<a href="#calibre_link-127">tf command, 200</a></p>
<p class="calibre1">checksums, com<a href="#calibre_link-16">paring, 120</a></p>
<p class="calibre1">programming with shell</p>
<p class="calibre1">chfn command, <a href="#calibre_link-128">164</a></p>
<p class="calibre1">scripts, <a href="#calibre_link-42">232</a></p>
<p class="calibre1"><a href="#calibre_link-129">with useradd, 162</a></p>
<p class="calibre1"><a href="#calibre_link-68">type command, 82, </a><a href="#calibre_link-130">91</a></p>
<p class="calibre1">chgrp command, <a href="#calibre_link-6">26</a>, <a href="#calibre_link-131">75</a>, <a href="#calibre_link-78">168</a></p>
<p class="calibre1"><a href="#calibre_link-80">bc command, 208</a></p>
<p class="calibre1">chmod command, <a href="#calibre_link-6">26</a>, <a href="#calibre_link-132">76</a></p>
<p class="calibre1">bg command, <a href="#calibre_link-133">42</a></p>
<p class="calibre1"><a href="#calibre_link-6">chown command, 26, </a><a href="#calibre_link-134">74</a></p>
<p class="calibre1"><a href="#calibre_link-122">jobs command and, 40</a></p>
<p class="calibre1"><a href="#calibre_link-56">chsh command, 165</a></p>
<p class="calibre1">bin director<a href="#calibre_link-51">y, 21</a></p>
<p class="calibre1">cksum command, <a href="#calibre_link-15">114, </a><a href="#calibre_link-16">120</a></p>
<p class="calibre1">Booleans in shell scripts, <a href="#calibre_link-135">207</a>, <a href="#calibre_link-106">235</a></p>
<p class="calibre1">clear command, <a href="#calibre_link-136">203</a></p>
<p class="calibre1">/boot director<a href="#calibre_link-52">y, 24</a></p>
<p class="calibre1">clearing the screen, <a href="#calibre_link-136">203</a></p>
<p class="calibre1">B<a href="#calibre_link-55">ourne-Again Shell (see bash), 27</a></p>
<p class="calibre1"><a href="#calibre_link-36">clipboard, 204</a></p>
<p class="calibre1"><b class="calibre3">252  |  Index</b></p>
<p class="calibre1"><a id="calibre_link-259"></a>clock programs, <a href="#calibre_link-38">211</a></p>
<p class="calibre1">dates, displaying/setting, <a href="#calibre_link-38">211, </a><a href="#calibre_link-137">214</a></p>
<p class="calibre1">cm<a href="#calibre_link-15">p command, 114</a>, <a href="#calibre_link-138">117</a></p>
<p class="calibre1"><a href="#calibre_link-139">dc command, 210</a></p>
<p class="calibre1">columns of text, extracting from</p>
<p class="calibre1">dd command, <a href="#calibre_link-140">136</a></p>
<p class="calibre1"><a href="#calibre_link-141">files, 97</a></p>
<p class="calibre1"><a href="#calibre_link-100">deb file, 224</a></p>
<p class="calibre1">combining commands, <a href="#calibre_link-88">35</a></p>
<p class="calibre1">Debian packages, <a href="#calibre_link-100">224</a>, <a href="#calibre_link-101">230</a></p>
<p class="calibre1"><a href="#calibre_link-15">comm command, 114</a>, <a href="#calibre_link-138">117</a></p>
<p class="calibre1">default editor, setting, <a href="#calibre_link-66">64</a></p>
<p class="calibre1">command prompt, <a href="#calibre_link-94">5</a></p>
<p class="calibre1">/dev director<a href="#calibre_link-126">y, 22</a></p>
<p class="calibre1">command-line arguments in shell</p>
<p class="calibre1">df command, <a href="#calibre_link-142">130</a></p>
<p class="calibre1"><a href="#calibre_link-143">scripts, 244</a></p>
<p class="calibre1">diff command, <a href="#calibre_link-15">114, 114</a></p>
<p class="calibre1">command-line editing with bash, </p>
<p class="calibre1"><a href="#calibre_link-15">diff3 command, 114, </a><a href="#calibre_link-144">116</a></p>
<p class="calibre1"><a href="#calibre_link-99">37</a></p>
<p class="calibre1"><a href="#calibre_link-145">dig command, 176</a></p>
<p class="calibre1">commands, <a href="#calibre_link-102">3</a></p>
<p class="calibre1">directories, Linux, <a href="#calibre_link-5">17</a></p>
<p class="calibre1"><a href="#calibre_link-88">combining, 35</a></p>
<p class="calibre1">changing, using cd command, </p>
<p class="calibre1">examples to tr<a href="#calibre_link-146">y, 6</a></p>
<p class="calibre1"><a href="#calibre_link-93">53</a></p>
<p class="calibre1"><a href="#calibre_link-85">killing, 45, </a><a href="#calibre_link-124">144</a></p>
<p class="calibre1">crea<a href="#calibre_link-147">ting, 54</a></p>
<p class="calibre1"><a href="#calibre_link-84">previous, 38</a></p>
<p class="calibre1">deleting empty directories, <a href="#calibre_link-9">55</a></p>
<p class="calibre1">comparing files, <a href="#calibre_link-15">114</a></p>
<p class="calibre1">home directories, <a href="#calibre_link-48">19</a></p>
<p class="calibre1">completing filenames with Tab</p>
<p class="calibre1">operating system directories, </p>
<p class="calibre1"><a href="#calibre_link-60">key, 39</a></p>
<p class="calibre1"><a href="#calibre_link-52">24</a></p>
<p class="calibre1">compress command, <a href="#calibre_link-110">112</a></p>
<p class="calibre1">printing absolute pa<a href="#calibre_link-93">th of, 53</a></p>
<p class="calibre1"><a href="#calibre_link-112">tar &ndash;Z command and, 110</a></p>
<p class="calibre1"><a href="#calibre_link-91">system directories, 20</a></p>
<p class="calibre1">compressing/uncompressing files, </p>
<p class="calibre1">dirname command, <a href="#calibre_link-147">54</a></p>
<p class="calibre1"><a href="#calibre_link-148">109</a></p>
<p class="calibre1"><a href="#calibre_link-149">disk usage command (du), 72</a></p>
<p class="calibre1"><a href="#calibre_link-150">conditionals in shell scripts, 238</a></p>
<p class="calibre1"><a href="#calibre_link-19">disks and filesystems, 128</a></p>
<p class="calibre1"><a href="#calibre_link-42">configure script, 232</a></p>
<p class="calibre1">display command, <a href="#calibre_link-39">215</a></p>
<p class="calibre1"><a href="#calibre_link-58">configuring the shell, 46</a></p>
<p class="calibre1">DISPLAY environment variable, </p>
<p class="calibre1">connecting to networks, <a href="#calibre_link-31">179</a></p>
<p class="calibre1"><a href="#calibre_link-151">31</a></p>
<p class="calibre1">controlling processes, <a href="#calibre_link-124">144</a></p>
<p class="calibre1"><a href="#calibre_link-102">distro, 3</a></p>
<p class="calibre1">con<a href="#calibre_link-152">vert command, 216</a></p>
<p class="calibre1">identif<a href="#calibre_link-100">ying, 224</a></p>
<p class="calibre1">cp command, <a href="#calibre_link-153">49</a></p>
<p class="calibre1"><a href="#calibre_link-100">dnf command, 224, </a><a href="#calibre_link-154">225</a></p>
<p class="calibre1">cpio command, <a href="#calibre_link-20">134</a></p>
<p class="calibre1">doc directory, <a href="#calibre_link-51">21</a></p>
<p class="calibre1"><a href="#calibre_link-155">cron process, 152</a></p>
<p class="calibre1">domain name ser<a href="#calibre_link-30">vice (DNS), 174</a></p>
<p class="calibre1">cron<a href="#calibre_link-155">tab command, 152</a></p>
<p class="calibre1"><a href="#calibre_link-29">domainname command, 170</a></p>
<p class="calibre1">CUPS prin<a href="#calibre_link-17">ting system, 124</a></p>
<p class="calibre1"><a href="#calibre_link-61">dot files, 29</a></p>
<p class="calibre1"><a href="#calibre_link-156">curl command, 191</a></p>
<p class="calibre1">downloading examples (see</p>
<p class="calibre1">piping into bash, <a href="#calibre_link-157">246</a></p>
<p class="calibre1">examples, running)</p>
<p class="calibre1">curly-brace expressions (see</p>
<p class="calibre1">downloading files, <a href="#calibre_link-156">191</a></p>
<p class="calibre1">braces)</p>
<p class="calibre1"><a href="#calibre_link-100">dpkg command, 224</a>, <a href="#calibre_link-98">229</a>, <a href="#calibre_link-101">230</a></p>
<p class="calibre1"><a href="#calibre_link-141">cut command, 97</a></p>
<p class="calibre1">du command, <a href="#calibre_link-149">72</a></p>
<p class="calibre1">dump command, <a href="#calibre_link-20">134</a></p>
<p class="calibre1"><b class="calibre3">D</b></p>
<p class="calibre1">chattr command and, <a href="#calibre_link-108">80</a></p>
<p class="calibre1">da<a href="#calibre_link-158">te command, 212</a></p>
<p class="calibre1">watch command and, <a href="#calibre_link-159">149</a></p>
<p class="calibre1"><b class="calibre3">Index  |  253</b></p>
<p class="calibre1"><a id="calibre_link-260"></a><b class="calibre3">E</b></p>
<p class="calibre1">etc director<a href="#calibre_link-51">y, 21</a></p>
<p class="calibre1">echo command, <a href="#calibre_link-2">10</a>, <a href="#calibre_link-35">198</a></p>
<p class="calibre1">evince command, <a href="#calibre_link-16">120</a></p>
<p class="calibre1">script output<a href="#calibre_link-106">, 235</a></p>
<p class="calibre1">exam<a href="#calibre_link-3">ples, running, 11</a></p>
<p class="calibre1"><a href="#calibre_link-116">ed line editor, 107</a></p>
<p class="calibre1">Excel documents, <a href="#calibre_link-66">64</a></p>
<p class="calibre1"><a href="#calibre_link-144">diff &ndash;e command, 116</a></p>
<p class="calibre1">exclamation point (!) for shell his‐</p>
<p class="calibre1">EDITOR environment variable, </p>
<p class="calibre1">tory, <a href="#calibre_link-84">38</a></p>
<p class="calibre1"><a href="#calibre_link-64">57</a></p>
<p class="calibre1">exit command, <a href="#calibre_link-24">154</a></p>
<p class="calibre1">setting defa<a href="#calibre_link-66">ult editor, 64</a></p>
<p class="calibre1">exiting with return codes, <a href="#calibre_link-160">245</a></p>
<p class="calibre1">egrep command, <a href="#calibre_link-70">94</a></p>
<p class="calibre1">terminating shells, <a href="#calibre_link-58">46</a></p>
<p class="calibre1">eject command<a href="#calibre_link-161">, 133</a></p>
<p class="calibre1">exit status of Linux commands, </p>
<p class="calibre1">elinks command<a href="#calibre_link-162">, 190</a></p>
<p class="calibre1"><a href="#calibre_link-163">236</a></p>
<p class="calibre1">else statement, <a href="#calibre_link-150">238</a></p>
<p class="calibre1"><a href="#calibre_link-117">expand command, 101</a></p>
<p class="calibre1">emacs text editor, <a href="#calibre_link-99">37</a></p>
<p class="calibre1"><a href="#calibre_link-151">export command, 31</a></p>
<p class="calibre1">bash command-line editing, </p>
<p class="calibre1"><a href="#calibre_link-37">expr command, 206</a></p>
<p class="calibre1"><a href="#calibre_link-99">37</a></p>
<p class="calibre1"><a href="#calibre_link-73">ext3 filesystems, 129</a></p>
<p class="calibre1">crea<a href="#calibre_link-10">ting/editing files, 63</a></p>
<p class="calibre1">chattr/lsa<a href="#calibre_link-108">ttr commands, 80</a></p>
<p class="calibre1">lynx &ndash;emacskeys command, </p>
<p class="calibre1"><a href="#calibre_link-162">190</a></p>
<p class="calibre1"><b class="calibre3">F</b></p>
<p class="calibre1">email, <a href="#calibre_link-32">184</a></p>
<p class="calibre1"><a href="#calibre_link-73">fdisk command, 129</a></p>
<p class="calibre1">director<a href="#calibre_link-126">y, 22, </a><a href="#calibre_link-151">31</a></p>
<p class="calibre1"><a href="#calibre_link-33">fetchmail command, 188</a></p>
<p class="calibre1">file forma<a href="#calibre_link-33">t, 188</a></p>
<p class="calibre1"><a href="#calibre_link-133">fg command, 42</a></p>
<p class="calibre1"><a href="#calibre_link-164">log file, 187</a></p>
<p class="calibre1">jobs command and, <a href="#calibre_link-122">40</a></p>
<p class="calibre1"><a href="#calibre_link-96">pipelines, 186</a></p>
<p class="calibre1">file command, <a href="#calibre_link-165">73</a></p>
<p class="calibre1">queue, <a href="#calibre_link-164">187</a></p>
<p class="calibre1">filename com<a href="#calibre_link-60">pletion, 39</a></p>
<p class="calibre1">readers, <a href="#calibre_link-32">184</a></p>
<p class="calibre1">files</p>
<p class="calibre1">reading over SSH connection, </p>
<p class="calibre1">attributes of, <a href="#calibre_link-11">69</a></p>
<p class="calibre1"><a href="#calibre_link-32">184</a></p>
<p class="calibre1"><a href="#calibre_link-153">copying with cp, 49</a></p>
<p class="calibre1"><a href="#calibre_link-96">scripting, 186</a></p>
<p class="calibre1">copying with dd, <a href="#calibre_link-140">136</a></p>
<p class="calibre1">environment variables, <a href="#calibre_link-151">31</a></p>
<p class="calibre1">counting words, <a href="#calibre_link-166">71</a></p>
<p class="calibre1">DISPLAY, <a href="#calibre_link-151">31</a></p>
<p class="calibre1">crea<a href="#calibre_link-10">ting, 63, </a><a href="#calibre_link-134">74</a></p>
<p class="calibre1"><a href="#calibre_link-64">EDITOR, 57, </a><a href="#calibre_link-66">64</a></p>
<p class="calibre1"><a href="#calibre_link-167">deleting with rm, 50</a></p>
<p class="calibre1"><a href="#calibre_link-91">HOME, 20</a><a href="#calibre_link-151">, 31</a></p>
<p class="calibre1">disk space of, <a href="#calibre_link-149">72</a></p>
<p class="calibre1">LOGN<a href="#calibre_link-151">AME, 31</a></p>
<p class="calibre1"><a href="#calibre_link-10">editing, 63</a></p>
<p class="calibre1"><a href="#calibre_link-151">MAIL, 31</a></p>
<p class="calibre1">group ownership, <a href="#calibre_link-131">75</a></p>
<p class="calibre1"><a href="#calibre_link-151">OLDPWD, 31</a></p>
<p class="calibre1"><a href="#calibre_link-167">linking with ln, 50</a></p>
<p class="calibre1">PATH, <a href="#calibre_link-151">31</a></p>
<p class="calibre1">listing with ls, <a href="#calibre_link-7">47</a></p>
<p class="calibre1">prin<a href="#calibre_link-26">ting, 161</a></p>
<p class="calibre1">locating, <a href="#calibre_link-68">82</a></p>
<p class="calibre1"><a href="#calibre_link-151">PWD, 31</a></p>
<p class="calibre1"><a href="#calibre_link-153">moving, 49</a></p>
<p class="calibre1"><a href="#calibre_link-151">SHELL, 31</a></p>
<p class="calibre1">named beginning with a dash, </p>
<p class="calibre1"><a href="#calibre_link-151">TERM, 31</a></p>
<p class="calibre1"><a href="#calibre_link-89">9</a></p>
<p class="calibre1">USER, <a href="#calibre_link-151">31</a></p>
<p class="calibre1"><a href="#calibre_link-62">ownership, 25, </a><a href="#calibre_link-168">48, </a><a href="#calibre_link-134">74, </a><a href="#calibre_link-131">75</a></p>
<p class="calibre1">VISU<a href="#calibre_link-64">AL, 57, </a><a href="#calibre_link-66">64</a></p>
<p class="calibre1">permissions, <a href="#calibre_link-62">25</a>, <a href="#calibre_link-168">48</a>, <a href="#calibre_link-132">76</a></p>
<p class="calibre1">escaping special characters, <a href="#calibre_link-99">37</a></p>
<p class="calibre1">renaming with m<a href="#calibre_link-153">v, 49</a></p>
<p class="calibre1"><b class="calibre3">254  |  Index</b></p>
<p class="calibre1"><a id="calibre_link-261"></a>timestam<a href="#calibre_link-165">ps, 73</a></p>
<p class="calibre1"><a href="#calibre_link-109">growisofs command, 137</a></p>
<p class="calibre1">transferring between</p>
<p class="calibre1"><a href="#calibre_link-107">gunzip command, 111</a></p>
<p class="calibre1"><a href="#calibre_link-169">machines, 180</a>, <a href="#calibre_link-170">182</a></p>
<p class="calibre1">g<a href="#calibre_link-16">v command, 120</a></p>
<p class="calibre1"><a href="#calibre_link-9">viewing, 55</a></p>
<p class="calibre1"><a href="#calibre_link-107">gzip command, 111</a></p>
<p class="calibre1"><a href="#calibre_link-5">filesystem, 17, </a><a href="#calibre_link-73">129</a></p>
<p class="calibre1">software installation and, <a href="#calibre_link-100">224</a></p>
<p class="calibre1">find command, <a href="#calibre_link-68">82</a></p>
<p class="calibre1">tar &ndash;z command and, <a href="#calibre_link-112">110</a></p>
<p class="calibre1"><a href="#calibre_link-171">with xargs, 87</a></p>
<p class="calibre1">finger command, <a href="#calibre_link-172">159, </a><a href="#calibre_link-128">164</a></p>
<p class="calibre1"><b class="calibre3">H</b></p>
<p class="calibre1">flock command, <a href="#calibre_link-23">148</a></p>
<p class="calibre1">hard drive cloning, <a href="#calibre_link-140">136</a></p>
<p class="calibre1">fonts directory, <a href="#calibre_link-126">22</a></p>
<p class="calibre1">hard links, <a href="#calibre_link-63">51</a></p>
<p class="calibre1"><a href="#calibre_link-173">for loops, 243</a></p>
<p class="calibre1">hardware pla<a href="#calibre_link-79">tform, 171</a></p>
<p class="calibre1">command-line arguments</p>
<p class="calibre1"><a href="#calibre_link-174">head command, 59</a></p>
<p class="calibre1"><a href="#calibre_link-160">and, 245</a></p>
<p class="calibre1">help and tutorials, <a href="#calibre_link-3">11</a></p>
<p class="calibre1">foreground jobs, <a href="#calibre_link-133">42</a></p>
<p class="calibre1"><a href="#calibre_link-89">--help option, 9</a></p>
<p class="calibre1">forma<a href="#calibre_link-73">tting disks, 129</a>, <a href="#calibre_link-73">129</a></p>
<p class="calibre1">histor<a href="#calibre_link-84">y command, 38</a></p>
<p class="calibre1"><a href="#calibre_link-22">free command, 143</a></p>
<p class="calibre1">home directories, <a href="#calibre_link-48">19</a></p>
<p class="calibre1"><a href="#calibre_link-74">fsck command, 132</a></p>
<p class="calibre1">HOME environment variable, <a href="#calibre_link-91">20</a>, </p>
<p class="calibre1">sh<a href="#calibre_link-175">utdown command and, 155</a></p>
<p class="calibre1"><a href="#calibre_link-151">31</a></p>
<p class="calibre1">ftp (File Transfer Protocol) pro‐</p>
<p class="calibre1">host command, <a href="#calibre_link-30">174</a></p>
<p class="calibre1">gram, <a href="#calibre_link-170">182</a></p>
<p class="calibre1">host information</p>
<p class="calibre1"><a href="#calibre_link-29">local, 170</a></p>
<p class="calibre1"><b class="calibre3">G</b></p>
<p class="calibre1">remote, <a href="#calibre_link-30">174</a></p>
<p class="calibre1">g++ command, <a href="#calibre_link-43">248</a></p>
<p class="calibre1"><a href="#calibre_link-79">hostname command, 171</a></p>
<p class="calibre1">gcc command, <a href="#calibre_link-43">248</a></p>
<p class="calibre1">html directory, <a href="#calibre_link-126">22</a></p>
<p class="calibre1">GNOME graphical environment, </p>
<p class="calibre1"><a href="#calibre_link-54">14</a></p>
<p class="calibre1"><b class="calibre3">I</b></p>
<p class="calibre1"><a href="#calibre_link-46">running shells within, 15</a></p>
<p class="calibre1"><a href="#calibre_link-176">ICMP packets, 177</a></p>
<p class="calibre1">GNU emacs (see emacs text edi‐</p>
<p class="calibre1">id command, <a href="#calibre_link-177">157</a></p>
<p class="calibre1">tor)</p>
<p class="calibre1">ID3 tags, <a href="#calibre_link-111">219, </a><a href="#calibre_link-114">220</a></p>
<p class="calibre1">gn<a href="#calibre_link-66">umeric, 64</a></p>
<p class="calibre1">id3info command, <a href="#calibre_link-111">219</a></p>
<p class="calibre1">gparted command, <a href="#calibre_link-73">129</a></p>
<p class="calibre1">id3tag command, <a href="#calibre_link-114">220</a></p>
<p class="calibre1">gra<a href="#calibre_link-54">phical desktop, 14</a></p>
<p class="calibre1">if statemen<a href="#calibre_link-150">t, 238</a></p>
<p class="calibre1">graphics, <a href="#calibre_link-39">215</a></p>
<p class="calibre1">ifconfig command, <a href="#calibre_link-178">173</a></p>
<p class="calibre1">grep command, <a href="#calibre_link-13">92</a></p>
<p class="calibre1">iftop command, <a href="#calibre_link-179">142</a></p>
<p class="calibre1"><a href="#calibre_link-70">egrep command and, 94</a></p>
<p class="calibre1">ImageMagick, <a href="#calibre_link-39">215</a></p>
<p class="calibre1"><a href="#calibre_link-180">ps command and, 140</a></p>
<p class="calibre1">images, <a href="#calibre_link-39">215</a></p>
<p class="calibre1">groups, <a href="#calibre_link-28">167</a></p>
<p class="calibre1">include directory, <a href="#calibre_link-51">21</a></p>
<p class="calibre1">adding with groupadd, <a href="#calibre_link-78">168</a></p>
<p class="calibre1">index of file locations, crea<a href="#calibre_link-69">ting, 89</a></p>
<p class="calibre1"><a href="#calibre_link-181">changing with groupmod, 169</a></p>
<p class="calibre1"><a href="#calibre_link-90">info command, 12</a></p>
<p class="calibre1">deleting with groupdel, <a href="#calibre_link-181">169</a></p>
<p class="calibre1">init.d directory, <a href="#calibre_link-51">21</a></p>
<p class="calibre1"><a href="#calibre_link-131">ownership of files, 75</a></p>
<p class="calibre1">input, reading from a shell script, </p>
<p class="calibre1"><a href="#calibre_link-78">groups command, 168</a></p>
<p class="calibre1"><a href="#calibre_link-106">235</a></p>
<p class="calibre1"><a href="#calibre_link-177">id &ndash;Gn command and, 157</a></p>
<p class="calibre1"><b class="calibre3">Index  |  255</b></p>
<p class="calibre1"><a id="calibre_link-262"></a>input/output redirection, <a href="#calibre_link-59">33</a></p>
<p class="calibre1">linebreaks</p>
<p class="calibre1">installing software, <a href="#calibre_link-41">223</a></p>
<p class="calibre1"><a href="#calibre_link-118">grep, 96</a></p>
<p class="calibre1">instan<a href="#calibre_link-34">t messaging, 193</a></p>
<p class="calibre1"><a href="#calibre_link-57">in shell scripts, 234</a></p>
<p class="calibre1">Internet domains, looking up reg‐</p>
<p class="calibre1">Windows and Mac OS X, <a href="#calibre_link-118">96</a></p>
<p class="calibre1">istration of, <a href="#calibre_link-145">176</a></p>
<p class="calibre1"><a href="#calibre_link-167">links, 50</a></p>
<p class="calibre1">Internet Relay Cha<a href="#calibre_link-182">t, 197</a></p>
<p class="calibre1"><a href="#calibre_link-63">hard vs. symbolic, 51</a></p>
<p class="calibre1">iotop command, <a href="#calibre_link-179">142</a></p>
<p class="calibre1"><a href="#calibre_link-162">links command, 190</a></p>
<p class="calibre1">ip command, <a href="#calibre_link-183">172</a></p>
<p class="calibre1">Linux, componen<a href="#calibre_link-4">ts of, 13</a></p>
<p class="calibre1">IRC, <a href="#calibre_link-182">197</a></p>
<p class="calibre1">linuxpocketguide directory (see</p>
<p class="calibre1">irssi command, <a href="#calibre_link-182">197</a></p>
<p class="calibre1">examples, running)</p>
<p class="calibre1"><a href="#calibre_link-109">ISO files, 137</a></p>
<p class="calibre1">ln command, <a href="#calibre_link-167">50</a></p>
<p class="calibre1">load average, <a href="#calibre_link-180">140</a></p>
<p class="calibre1"><b class="calibre3">J</b></p>
<p class="calibre1">locate command, <a href="#calibre_link-69">89</a></p>
<p class="calibre1">J<a href="#calibre_link-184">abber, 195</a>, <a href="#calibre_link-185">196</a></p>
<p class="calibre1">locating files, <a href="#calibre_link-69">89</a></p>
<p class="calibre1">Java language, <a href="#calibre_link-43">248</a></p>
<p class="calibre1">lock director<a href="#calibre_link-126">y, 22</a></p>
<p class="calibre1">ja<a href="#calibre_link-43">vac command, 248</a></p>
<p class="calibre1">log directory, <a href="#calibre_link-126">22</a></p>
<p class="calibre1">job control in Linux shells, <a href="#calibre_link-122">40</a></p>
<p class="calibre1">logging into remote machines, </p>
<p class="calibre1">jobs command, <a href="#calibre_link-122">40</a></p>
<p class="calibre1"><a href="#calibre_link-31">179</a></p>
<p class="calibre1">jobs, scheduling, <a href="#calibre_link-105">150</a><a href="#calibre_link-155">, 152</a></p>
<p class="calibre1"><a href="#calibre_link-25">logname command, 156</a></p>
<p class="calibre1">whoami and, <a href="#calibre_link-177">157</a></p>
<p class="calibre1"><b class="calibre3">K</b></p>
<p class="calibre1">LOGNAME environment vari‐</p>
<p class="calibre1"><a href="#calibre_link-151">able, 31, </a><a href="#calibre_link-25">156</a></p>
<p class="calibre1"><a href="#calibre_link-21">k3b command, 138</a></p>
<p class="calibre1">logout command, <a href="#calibre_link-24">154</a></p>
<p class="calibre1">kaffeine video player, <a href="#calibre_link-41">223</a></p>
<p class="calibre1"><a href="#calibre_link-2">long command lines, 10, </a><a href="#calibre_link-57">234</a></p>
<p class="calibre1">KDE graphical environmen<a href="#calibre_link-54">t, 14</a></p>
<p class="calibre1"><a href="#calibre_link-18">look command, 126</a></p>
<p class="calibre1"><a href="#calibre_link-46">running shells within, 15</a></p>
<p class="calibre1">loops in shell scripts, <a href="#calibre_link-186">242</a></p>
<p class="calibre1">kernel, <a href="#calibre_link-4">13</a></p>
<p class="calibre1">/lost+found director<a href="#calibre_link-52">y, 24</a></p>
<p class="calibre1">name, <a href="#calibre_link-29">170</a></p>
<p class="calibre1"><a href="#calibre_link-187">lpq command, 125</a></p>
<p class="calibre1"><a href="#calibre_link-29">version, 170, </a><a href="#calibre_link-79">171</a></p>
<p class="calibre1">lpr command, <a href="#calibre_link-17">124</a></p>
<p class="calibre1"><a href="#calibre_link-85">kill command, 45, </a><a href="#calibre_link-124">144</a></p>
<p class="calibre1">lprm command, <a href="#calibre_link-18">126</a></p>
<p class="calibre1">killall command, <a href="#calibre_link-124">144</a></p>
<p class="calibre1">LPRng printing system, <a href="#calibre_link-17">124</a></p>
<p class="calibre1">konsole command, <a href="#calibre_link-46">15</a></p>
<p class="calibre1"><a href="#calibre_link-45">ls command, 8</a>, <a href="#calibre_link-7">47</a></p>
<p class="calibre1">displaying file attributes, <a href="#calibre_link-11">69</a></p>
<p class="calibre1"><b class="calibre3">L</b></p>
<p class="calibre1">file protections and, <a href="#calibre_link-6">26</a></p>
<p class="calibre1"><a href="#calibre_link-111">lame command, 219</a></p>
<p class="calibre1">lsa<a href="#calibre_link-12">ttr command, 81</a></p>
<p class="calibre1">last command, <a href="#calibre_link-188">160</a></p>
<p class="calibre1">lynx web browser, <a href="#calibre_link-189">189</a></p>
<p class="calibre1"><a href="#calibre_link-120">less command, 2, </a><a href="#calibre_link-64">57</a></p>
<p class="calibre1">ca<a href="#calibre_link-121">t command and, 56</a></p>
<p class="calibre1"><b class="calibre3">M</b></p>
<p class="calibre1">lib directory, <a href="#calibre_link-51">21</a></p>
<p class="calibre1">m4 macro-processing language, </p>
<p class="calibre1"><a href="#calibre_link-66">LibreOffice, 64</a></p>
<p class="calibre1"><a href="#calibre_link-116">107</a></p>
<p class="calibre1">line continua<a href="#calibre_link-2">tion character, 10, </a></p>
<p class="calibre1">mail (see email)</p>
<p class="calibre1"><a href="#calibre_link-57">234</a></p>
<p class="calibre1"><a href="#calibre_link-96">mail command, 186</a></p>
<p class="calibre1">line numbering, <a href="#calibre_link-121">56</a>, <a href="#calibre_link-190">58</a></p>
<p class="calibre1">mail directory, <a href="#calibre_link-126">22</a>, <a href="#calibre_link-151">31</a></p>
<p class="calibre1"><b class="calibre3">256  |  Index</b></p>
<p class="calibre1"><a id="calibre_link-263"></a>MAIL environment variable, <a href="#calibre_link-151">31</a></p>
<p class="calibre1">network interface, displaying</p>
<p class="calibre1">mailq command, <a href="#calibre_link-164">187</a></p>
<p class="calibre1">informa<a href="#calibre_link-183">tion about, 172</a>, <a href="#calibre_link-178">173</a></p>
<p class="calibre1"><a href="#calibre_link-42">make command, 232</a></p>
<p class="calibre1">nice command, <a href="#calibre_link-75">146</a></p>
<p class="calibre1">man command, <a href="#calibre_link-90">12</a>, <a href="#calibre_link-51">21</a></p>
<p class="calibre1">nl command, <a href="#calibre_link-190">58</a></p>
<p class="calibre1">man director<a href="#calibre_link-51">y, 21</a></p>
<p class="calibre1">cat command and, <a href="#calibre_link-121">56</a></p>
<p class="calibre1">masks and protection modes, <a href="#calibre_link-191">79</a></p>
<p class="calibre1">nslookup command, <a href="#calibre_link-145">176</a></p>
<p class="calibre1">math commands, <a href="#calibre_link-37">206</a></p>
<p class="calibre1">n<a href="#calibre_link-73">tfs filesystems, 129</a></p>
<p class="calibre1">md5sum command, <a href="#calibre_link-15">114</a><a href="#calibre_link-192">, 118, </a><a href="#calibre_link-16">120</a></p>
<p class="calibre1">n<a href="#calibre_link-39">tp daemon, 215</a></p>
<p class="calibre1">/media director<a href="#calibre_link-126">y, 22</a></p>
<p class="calibre1">ntpda<a href="#calibre_link-137">te command, 214</a></p>
<p class="calibre1">memory usage, displaying, <a href="#calibre_link-22">143</a></p>
<p class="calibre1"><a href="#calibre_link-77">mesg command, 158</a>, <a href="#calibre_link-193">194</a></p>
<p class="calibre1"><b class="calibre3">O</b></p>
<p class="calibre1">metaflac command, <a href="#calibre_link-115">221</a></p>
<p class="calibre1"><a href="#calibre_link-120">od command, 2</a>, <a href="#calibre_link-194">62</a>, <a href="#calibre_link-95">102</a></p>
<p class="calibre1">Microsoft Excel documen<a href="#calibre_link-66">ts, 64</a></p>
<p class="calibre1">ogginfo command, <a href="#calibre_link-114">220</a></p>
<p class="calibre1">Microsoft Word documents, <a href="#calibre_link-66">64</a></p>
<p class="calibre1"><a href="#calibre_link-16">okular command, 120</a></p>
<p class="calibre1"><a href="#calibre_link-40">MIDI, 218</a></p>
<p class="calibre1">OLDPWD environment variable, </p>
<p class="calibre1">MIME</p>
<p class="calibre1"><a href="#calibre_link-151">31</a></p>
<p class="calibre1">attachmen<a href="#calibre_link-195">ts, 113</a></p>
<p class="calibre1">operating system directories, <a href="#calibre_link-52">24</a></p>
<p class="calibre1">types, identifying, <a href="#calibre_link-165">73</a></p>
<p class="calibre1">opera<a href="#calibre_link-79">ting system name, 171</a></p>
<p class="calibre1">mkdir command, <a href="#calibre_link-147">54</a></p>
<p class="calibre1">options for commands, <a href="#calibre_link-102">3</a></p>
<p class="calibre1">mkfs command, <a href="#calibre_link-73">129</a></p>
<p class="calibre1"><a href="#calibre_link-106">output in shell scripts, 235</a></p>
<p class="calibre1">mkisofs command, <a href="#calibre_link-21">138</a></p>
<p class="calibre1"><a href="#calibre_link-62">ownership of files, 25, </a><a href="#calibre_link-168">48</a></p>
<p class="calibre1">mloca<a href="#calibre_link-69">te command, 89</a></p>
<p class="calibre1">/mnt director<a href="#calibre_link-126">y, 22</a></p>
<p class="calibre1">mogrify command, <a href="#calibre_link-196">217</a></p>
<p class="calibre1"><b class="calibre3">P</b></p>
<p class="calibre1">mono command, <a href="#calibre_link-43">248</a></p>
<p class="calibre1"><a href="#calibre_link-41">package managers, 223</a></p>
<p class="calibre1">mon<a href="#calibre_link-196">tage command, 217</a></p>
<p class="calibre1">PackageKit, <a href="#calibre_link-197">226</a></p>
<p class="calibre1">mount command, <a href="#calibre_link-142">130</a></p>
<p class="calibre1"><a href="#calibre_link-73">parted command, 129</a></p>
<p class="calibre1">MP3 files</p>
<p class="calibre1"><a href="#calibre_link-19">partitioning disks, 128</a>, <a href="#calibre_link-73">129</a></p>
<p class="calibre1">create from WA<a href="#calibre_link-111">V, 219</a></p>
<p class="calibre1">passwd command, <a href="#calibre_link-128">164</a></p>
<p class="calibre1"><a href="#calibre_link-111">ID3 tags, 219</a>, <a href="#calibre_link-114">220</a></p>
<p class="calibre1">paste command, <a href="#calibre_link-198">99</a></p>
<p class="calibre1">mpla<a href="#calibre_link-41">yer command, 223</a></p>
<p class="calibre1">patch command, context diff, <a href="#calibre_link-144">116</a></p>
<p class="calibre1">music (see audio)</p>
<p class="calibre1">PATH environment variable, <a href="#calibre_link-151">31</a></p>
<p class="calibre1">m<a href="#calibre_link-153">v command, 49</a></p>
<p class="calibre1">path, search, <a href="#calibre_link-199">32</a></p>
<p class="calibre1"><a href="#calibre_link-16">PDF files, 120</a></p>
<p class="calibre1">displaying, <a href="#calibre_link-16">120</a></p>
<p class="calibre1"><b class="calibre3">N</b></p>
<p class="calibre1">manipula<a href="#calibre_link-200">ting, 123</a></p>
<p class="calibre1">nameserver (see domain name</p>
<p class="calibre1">PostScript con<a href="#calibre_link-17">version, 124</a></p>
<p class="calibre1">service)</p>
<p class="calibre1"><a href="#calibre_link-72">splitting, 122</a></p>
<p class="calibre1">nc command, <a href="#calibre_link-170">182</a></p>
<p class="calibre1"><a href="#calibre_link-71">text extraction, 121</a>, <a href="#calibre_link-71">121</a></p>
<p class="calibre1"><a href="#calibre_link-43">.NET, 248</a></p>
<p class="calibre1">pdf2ps command, <a href="#calibre_link-16">120, </a><a href="#calibre_link-17">124</a></p>
<p class="calibre1">netca<a href="#calibre_link-170">t command, 182</a></p>
<p class="calibre1">pdfsepara<a href="#calibre_link-16">te command, 120, </a><a href="#calibre_link-72">122</a></p>
<p class="calibre1">network connections, establish‐</p>
<p class="calibre1">pdftk command, <a href="#calibre_link-16">120</a><a href="#calibre_link-200">, 123</a></p>
<p class="calibre1"><a href="#calibre_link-31">ing, 179</a></p>
<p class="calibre1">pdftotext command, <a href="#calibre_link-16">120</a>, <a href="#calibre_link-71">121</a></p>
<p class="calibre1"><b class="calibre3">Index  |  257</b></p>
<p class="calibre1"><a id="calibre_link-264"></a>Perl language, <a href="#calibre_link-43">248</a></p>
<p class="calibre1"><b class="calibre3">R</b></p>
<p class="calibre1">permissions, file, <a href="#calibre_link-62">25</a>, <a href="#calibre_link-168">48</a>, <a href="#calibre_link-132">76</a></p>
<p class="calibre1">rc.d directory, <a href="#calibre_link-51">21</a></p>
<p class="calibre1"><a href="#calibre_link-39">photos, 215</a></p>
<p class="calibre1">rcsdiff command, <a href="#calibre_link-201">115</a></p>
<p class="calibre1">PHP language, <a href="#calibre_link-43">248</a></p>
<p class="calibre1"><a href="#calibre_link-106">read command, 235</a></p>
<p class="calibre1">pidgin, <a href="#calibre_link-34">193</a></p>
<p class="calibre1">readlink command, <a href="#calibre_link-8">52</a></p>
<p class="calibre1">pidof command, <a href="#calibre_link-124">144</a></p>
<p class="calibre1">redirecting in<a href="#calibre_link-59">put/output, 33</a></p>
<p class="calibre1">ping command, <a href="#calibre_link-176">177</a></p>
<p class="calibre1">regular expressions</p>
<p class="calibre1">pipe (|) opera<a href="#calibre_link-87">tor, 34</a></p>
<p class="calibre1">awk command, <a href="#calibre_link-116">107</a></p>
<p class="calibre1">postfix mail server, <a href="#calibre_link-33">188</a></p>
<p class="calibre1">egrep command, <a href="#calibre_link-70">94</a></p>
<p class="calibre1">P<a href="#calibre_link-16">ostScript files, 120</a></p>
<p class="calibre1">find &ndash;regex command, <a href="#calibre_link-202">83</a></p>
<p class="calibre1">PDF con<a href="#calibre_link-17">version, 124</a></p>
<p class="calibre1">grep command, <a href="#calibre_link-13">92</a>, <a href="#calibre_link-70">94</a></p>
<p class="calibre1"><a href="#calibre_link-71">text extraction, 121</a></p>
<p class="calibre1"><a href="#calibre_link-64">less command, 57</a></p>
<p class="calibre1">printen<a href="#calibre_link-26">v command, 161</a></p>
<p class="calibre1">line numbering, <a href="#calibre_link-174">59</a></p>
<p class="calibre1">a<a href="#calibre_link-76">t command and, 151</a></p>
<p class="calibre1">locate &ndash;r command, <a href="#calibre_link-203">90</a></p>
<p class="calibre1">printf command, <a href="#calibre_link-127">200</a></p>
<p class="calibre1">relative pa<a href="#calibre_link-92">th, 18</a></p>
<p class="calibre1"><a href="#calibre_link-106">script output, 235</a></p>
<p class="calibre1">remote machines</p>
<p class="calibre1">-printf option (find command), </p>
<p class="calibre1"><a href="#calibre_link-169">file transfers, 180</a>, <a href="#calibre_link-204">181</a></p>
<p class="calibre1"><a href="#calibre_link-205">85</a></p>
<p class="calibre1">hostname lookup, <a href="#calibre_link-30">174</a></p>
<p class="calibre1">printing, <a href="#calibre_link-17">124</a></p>
<p class="calibre1"><a href="#calibre_link-31">logging in with ssh, 179</a></p>
<p class="calibre1">/proc director<a href="#calibre_link-126">y, 22, </a><a href="#calibre_link-52">24</a></p>
<p class="calibre1">sending ICMP packets to, <a href="#calibre_link-176">177</a></p>
<p class="calibre1">process substitution, <a href="#calibre_link-87">34</a></p>
<p class="calibre1">traceroute command, <a href="#calibre_link-176">177</a></p>
<p class="calibre1">processes, <a href="#calibre_link-124">144</a></p>
<p class="calibre1"><a href="#calibre_link-206">renice command, 147</a></p>
<p class="calibre1">con<a href="#calibre_link-124">trolling, 144</a></p>
<p class="calibre1">reset command, <a href="#calibre_link-85">45</a></p>
<p class="calibre1">shell jobs vs., <a href="#calibre_link-207">139</a></p>
<p class="calibre1">reset-lpg command, <a href="#calibre_link-3">11</a></p>
<p class="calibre1"><a href="#calibre_link-207">viewing, 139</a></p>
<p class="calibre1"><a href="#calibre_link-20">restore command, 134</a></p>
<p class="calibre1"><a href="#calibre_link-79">processor type, 171</a></p>
<p class="calibre1">resuming jobs with fg command, </p>
<p class="calibre1"><a href="#calibre_link-33">procmail command, 188</a></p>
<p class="calibre1"><a href="#calibre_link-133">42</a></p>
<p class="calibre1">profanity command, <a href="#calibre_link-34">193</a>, <a href="#calibre_link-185">196</a></p>
<p class="calibre1">return codes of Linux commands, </p>
<p class="calibre1">prompt, <a href="#calibre_link-94">5</a></p>
<p class="calibre1"><a href="#calibre_link-163">236</a>, <a href="#calibre_link-160">245</a></p>
<p class="calibre1">ps command, <a href="#calibre_link-207">139</a>, <a href="#calibre_link-124">144</a></p>
<p class="calibre1">ripping CD tracks, <a href="#calibre_link-40">218</a></p>
<p class="calibre1">ps2ascii command, <a href="#calibre_link-16">120</a>, <a href="#calibre_link-71">121</a></p>
<p class="calibre1"><a href="#calibre_link-167">rm command, 50</a></p>
<p class="calibre1">ps2pdf command, <a href="#calibre_link-16">120</a>, <a href="#calibre_link-17">124</a></p>
<p class="calibre1"><a href="#calibre_link-9">rmdir command, 55</a></p>
<p class="calibre1">public_html director<a href="#calibre_link-126">y, 22</a></p>
<p class="calibre1">root directory (/), <a href="#calibre_link-5">17</a></p>
<p class="calibre1"><a href="#calibre_link-5">pwd command, 17, </a><a href="#calibre_link-93">53</a></p>
<p class="calibre1">/root home directory for super‐</p>
<p class="calibre1">PWD environmen<a href="#calibre_link-151">t variable, 31</a></p>
<p class="calibre1">user, <a href="#calibre_link-48">19</a></p>
<p class="calibre1"><a href="#calibre_link-43">Python language, 248</a></p>
<p class="calibre1">root user, <a href="#calibre_link-94">5</a>, <a href="#calibre_link-47">16</a>, <a href="#calibre_link-27">166</a></p>
<p class="calibre1">rpm command, <a href="#calibre_link-100">224, </a><a href="#calibre_link-208">228</a></p>
<p class="calibre1"><b class="calibre3">Q</b></p>
<p class="calibre1">RPM Package M<a href="#calibre_link-100">anager files, 224</a>, </p>
<p class="calibre1">quoting</p>
<p class="calibre1"><a href="#calibre_link-154">225</a>, <a href="#calibre_link-197">226</a>, <a href="#calibre_link-208">228</a></p>
<p class="calibre1">in shell scripts, <a href="#calibre_link-57">234</a></p>
<p class="calibre1">rsna<a href="#calibre_link-209">pshot command, 135</a></p>
<p class="calibre1">on command line, <a href="#calibre_link-49">36</a></p>
<p class="calibre1">rsync command, <a href="#calibre_link-209">135</a></p>
<p class="calibre1">Ruby language, <a href="#calibre_link-43">248</a></p>
<p class="calibre1">run directory, <a href="#calibre_link-126">22</a></p>
<p class="calibre1"><b class="calibre3">258  |  Index</b></p>
<p class="calibre1"><a id="calibre_link-265"></a><b class="calibre3">S</b></p>
<p class="calibre1">running, <a href="#calibre_link-46">15</a></p>
<p class="calibre1">sbin directory, <a href="#calibre_link-51">21</a></p>
<p class="calibre1"><a href="#calibre_link-86">suspending, 41</a></p>
<p class="calibre1"><a href="#calibre_link-105">scheduling jobs, 150</a>, <a href="#calibre_link-155">152</a></p>
<p class="calibre1">termina<a href="#calibre_link-58">ting, 46</a></p>
<p class="calibre1">scp command, <a href="#calibre_link-169">180</a></p>
<p class="calibre1"><a href="#calibre_link-210">vs. programs, 28</a></p>
<p class="calibre1">screen command, <a href="#calibre_link-211">43</a></p>
<p class="calibre1">shutdown command, <a href="#calibre_link-24">154</a></p>
<p class="calibre1"><a href="#calibre_link-15">sdiff command, 114, </a><a href="#calibre_link-144">116</a></p>
<p class="calibre1">slash (/)</p>
<p class="calibre1">search pa<a href="#calibre_link-199">th, 32</a></p>
<p class="calibre1">directory separa<a href="#calibre_link-92">tor, 18</a></p>
<p class="calibre1"><a href="#calibre_link-169">secure copy (scp) command, 180</a></p>
<p class="calibre1">root directory, <a href="#calibre_link-5">17</a></p>
<p class="calibre1">secure shell (ssh) program, <a href="#calibre_link-31">179</a></p>
<p class="calibre1">sleep command, <a href="#calibre_link-159">149</a></p>
<p class="calibre1"><a href="#calibre_link-116">sed command, 107</a></p>
<p class="calibre1">sloca<a href="#calibre_link-69">te command, 89</a></p>
<p class="calibre1"><a href="#calibre_link-117">vs. tr command, 101</a></p>
<p class="calibre1">soft links, <a href="#calibre_link-167">50</a></p>
<p class="calibre1">selection (clipboard), <a href="#calibre_link-36">204</a></p>
<p class="calibre1">software installa<a href="#calibre_link-41">tion, 223</a></p>
<p class="calibre1">semicolon (;), combine com‐</p>
<p class="calibre1">sort command, <a href="#calibre_link-95">102</a></p>
<p class="calibre1"><a href="#calibre_link-88">mands using, 35</a></p>
<p class="calibre1">sound (see audio)</p>
<p class="calibre1">sendmail mail ser<a href="#calibre_link-33">ver, 188</a></p>
<p class="calibre1"><a href="#calibre_link-57">source command, 234</a></p>
<p class="calibre1">sendxm<a href="#calibre_link-34">pp command, 193, </a><a href="#calibre_link-184">195</a></p>
<p class="calibre1"><a href="#calibre_link-113">sox command, 222</a></p>
<p class="calibre1">seq command, <a href="#calibre_link-83">202</a></p>
<p class="calibre1">spaces, converting to tabs, <a href="#calibre_link-117">101</a></p>
<p class="calibre1">for loops, <a href="#calibre_link-143">244</a></p>
<p class="calibre1">spamassassin, <a href="#calibre_link-33">188</a></p>
<p class="calibre1">setting the date and time, <a href="#calibre_link-137">214</a></p>
<p class="calibre1">special characters, esca<a href="#calibre_link-99">ping, 37</a></p>
<p class="calibre1">by timeser<a href="#calibre_link-137">ver, 214</a></p>
<p class="calibre1">spell command, <a href="#calibre_link-103">127</a></p>
<p class="calibre1"><a href="#calibre_link-73">sfdisk command, 129</a></p>
<p class="calibre1">spelling checkers, <a href="#calibre_link-18">126</a></p>
<p class="calibre1"><a href="#calibre_link-204">sftp command, 181</a></p>
<p class="calibre1">spool director<a href="#calibre_link-126">y, 22</a></p>
<p class="calibre1">share director<a href="#calibre_link-51">y, 21</a></p>
<p class="calibre1">src director<a href="#calibre_link-51">y, 21</a></p>
<p class="calibre1">shasum command, <a href="#calibre_link-212">119</a></p>
<p class="calibre1"><a href="#calibre_link-31">ssh (secure shell) program, 179</a></p>
<p class="calibre1">SHELL environment variable, <a href="#calibre_link-151">31</a></p>
<p class="calibre1">instan<a href="#calibre_link-185">t messaging, 196</a></p>
<p class="calibre1">shell prompt, <a href="#calibre_link-102">3</a>, <a href="#calibre_link-94">5</a></p>
<p class="calibre1">rsync, <a href="#calibre_link-209">135</a></p>
<p class="calibre1">shell scripts, <a href="#calibre_link-42">232</a></p>
<p class="calibre1">standard output, printing mes‐</p>
<p class="calibre1">command-line arguments in, </p>
<p class="calibre1">sages on, <a href="#calibre_link-35">198</a></p>
<p class="calibre1"><a href="#calibre_link-143">244</a></p>
<p class="calibre1">stat command, <a href="#calibre_link-11">69</a></p>
<p class="calibre1">conditionals in, <a href="#calibre_link-150">238</a></p>
<p class="calibre1">subdirectories, Linux, <a href="#calibre_link-5">17</a></p>
<p class="calibre1">creating, <a href="#calibre_link-82">233</a></p>
<p class="calibre1"><a href="#calibre_link-94">sudo command, 5</a></p>
<p class="calibre1"><a href="#calibre_link-160">exiting with return codes, 245</a></p>
<p class="calibre1">becoming superuser, <a href="#calibre_link-27">166</a></p>
<p class="calibre1"><a href="#calibre_link-186">loops in, 242</a></p>
<p class="calibre1">software installation and, <a href="#calibre_link-100">224</a></p>
<p class="calibre1"><a href="#calibre_link-42">programming with, 232</a></p>
<p class="calibre1"><a href="#calibre_link-177">whoami command and, 157</a></p>
<p class="calibre1"><a href="#calibre_link-82">running, 233</a></p>
<p class="calibre1">sum command, <a href="#calibre_link-15">114, </a><a href="#calibre_link-16">120</a></p>
<p class="calibre1"><a href="#calibre_link-46">shell windows, opening, 15</a></p>
<p class="calibre1">superusers, <a href="#calibre_link-94">5</a>, <a href="#calibre_link-47">16</a></p>
<p class="calibre1">shells, <a href="#calibre_link-54">14</a>, <a href="#calibre_link-55">27</a></p>
<p class="calibre1"><a href="#calibre_link-27">becoming, 166</a></p>
<p class="calibre1">(see also bash)</p>
<p class="calibre1"><a href="#calibre_link-86">suspend command, 41</a></p>
<p class="calibre1">changing login shell program, </p>
<p class="calibre1"><a href="#calibre_link-167">symbolic links, 50</a></p>
<p class="calibre1"><a href="#calibre_link-56">165</a></p>
<p class="calibre1"><a href="#calibre_link-8">target file of, 52</a></p>
<p class="calibre1">history-rela<a href="#calibre_link-84">ted commands, 38</a></p>
<p class="calibre1">sync command, <a href="#calibre_link-108">80</a></p>
<p class="calibre1">job control, <a href="#calibre_link-122">40</a></p>
<p class="calibre1">system directories, <a href="#calibre_link-91">20</a></p>
<p class="calibre1">multiple a<a href="#calibre_link-211">t once, 43</a></p>
<p class="calibre1">system load, <a href="#calibre_link-180">140</a></p>
<p class="calibre1"><b class="calibre3">Index  |  259</b></p>
<p class="calibre1"><a id="calibre_link-266"></a>systemctl command, <a href="#calibre_link-175">155</a></p>
<p class="calibre1">types of files, reporting, <a href="#calibre_link-165">73</a></p>
<p class="calibre1">systemd, <a href="#calibre_link-175">155</a></p>
<p class="calibre1"><b class="calibre3">U</b></p>
<p class="calibre1"><b class="calibre3">T</b></p>
<p class="calibre1">umask command, <a href="#calibre_link-213">78</a></p>
<p class="calibre1">Tab key, completing filenames</p>
<p class="calibre1">umount command, <a href="#calibre_link-74">132</a></p>
<p class="calibre1"><a href="#calibre_link-60">with, 39</a></p>
<p class="calibre1"><a href="#calibre_link-52">uname command, 24, </a><a href="#calibre_link-29">170</a></p>
<p class="calibre1">tabs, converting to spaces, <a href="#calibre_link-117">101</a></p>
<p class="calibre1">uncom<a href="#calibre_link-110">press command, 112</a></p>
<p class="calibre1"><a href="#calibre_link-214">tail command, 60</a></p>
<p class="calibre1"><a href="#calibre_link-117">unexpand command, 101</a></p>
<p class="calibre1">tar command, <a href="#calibre_link-148">109</a></p>
<p class="calibre1"><a href="#calibre_link-215">uniq command, 104</a></p>
<p class="calibre1">software installation and, <a href="#calibre_link-100">224</a></p>
<p class="calibre1">until loops, <a href="#calibre_link-186">242</a></p>
<p class="calibre1">tar files, <a href="#calibre_link-100">224</a>, <a href="#calibre_link-81">231</a></p>
<p class="calibre1">infinite, <a href="#calibre_link-173">243</a></p>
<p class="calibre1"><a href="#calibre_link-110">bzipped, 112</a></p>
<p class="calibre1"><a href="#calibre_link-195">unzip command, 113</a></p>
<p class="calibre1">compressed, <a href="#calibre_link-195">113</a></p>
<p class="calibre1">upda<a href="#calibre_link-69">tedb command, 89</a></p>
<p class="calibre1">gzipped, <a href="#calibre_link-107">111</a></p>
<p class="calibre1"><a href="#calibre_link-52">uptime command, 24, </a><a href="#calibre_link-180">140</a></p>
<p class="calibre1"><a href="#calibre_link-123">tee command, 106</a></p>
<p class="calibre1">USER environment variable, <a href="#calibre_link-151">31</a></p>
<p class="calibre1">telnet vs. netcat, <a href="#calibre_link-216">183</a></p>
<p class="calibre1"><a href="#calibre_link-129">useradd command, 162</a></p>
<p class="calibre1">TERM environmen<a href="#calibre_link-151">t variable, 31</a></p>
<p class="calibre1">userdel command, <a href="#calibre_link-217">163</a></p>
<p class="calibre1">Terminal program, <a href="#calibre_link-46">15</a></p>
<p class="calibre1">usermod command, <a href="#calibre_link-217">163</a></p>
<p class="calibre1">termina<a href="#calibre_link-58">ting shells, 46</a></p>
<p class="calibre1">users, <a href="#calibre_link-26">161</a></p>
<p class="calibre1"><a href="#calibre_link-97">test command, 237</a></p>
<p class="calibre1">creating new accounts, <a href="#calibre_link-129">162</a></p>
<p class="calibre1">text manipulation commands, <a href="#calibre_link-13">92</a></p>
<p class="calibre1">deleting existing users, <a href="#calibre_link-217">163</a></p>
<p class="calibre1">tilde (~), denoting home directo‐</p>
<p class="calibre1">finger command and, <a href="#calibre_link-172">159</a></p>
<p class="calibre1">ries, <a href="#calibre_link-91">20</a></p>
<p class="calibre1"><a href="#calibre_link-77">listing logged-in users, 158</a></p>
<p class="calibre1">time, displa<a href="#calibre_link-38">ying/setting, 211</a></p>
<p class="calibre1">modifying accounts, <a href="#calibre_link-217">163</a></p>
<p class="calibre1"><a href="#calibre_link-218">timeout command, 145</a></p>
<p class="calibre1"><a href="#calibre_link-128">password changes, 164</a></p>
<p class="calibre1">timestamps, <a href="#calibre_link-165">73</a></p>
<p class="calibre1">printen<a href="#calibre_link-26">v command and, 161</a></p>
<p class="calibre1">tmp directory, <a href="#calibre_link-126">22</a></p>
<p class="calibre1">prin<a href="#calibre_link-25">ting login names, 156</a></p>
<p class="calibre1">tmux command, <a href="#calibre_link-211">43</a></p>
<p class="calibre1">prin<a href="#calibre_link-177">ting user IDs, 157</a></p>
<p class="calibre1"><a href="#calibre_link-219">top command, 141</a></p>
<p class="calibre1">superusers and, <a href="#calibre_link-47">16</a></p>
<p class="calibre1">touch command, <a href="#calibre_link-165">73</a></p>
<p class="calibre1">updating information, <a href="#calibre_link-128">164</a></p>
<p class="calibre1">creating em<a href="#calibre_link-66">pty files, 64</a></p>
<p class="calibre1">users command, <a href="#calibre_link-172">159</a></p>
<p class="calibre1"><a href="#calibre_link-220">tr command, 100</a></p>
<p class="calibre1">/usr/share/doc directory, <a href="#calibre_link-90">12</a></p>
<p class="calibre1"><a href="#calibre_link-176">traceroute command, 177</a></p>
<p class="calibre1"><a href="#calibre_link-46">uxterm command, 15</a></p>
<p class="calibre1">translating characters, using tr</p>
<p class="calibre1">command, <a href="#calibre_link-220">100</a></p>
<p class="calibre1"><b class="calibre3">V</b></p>
<p class="calibre1"><a href="#calibre_link-193">tty command, 194</a></p>
<p class="calibre1">/var director<a href="#calibre_link-126">y, 22</a></p>
<p class="calibre1">tutorials, <a href="#calibre_link-221">66</a></p>
<p class="calibre1">variables, <a href="#calibre_link-50">30</a></p>
<p class="calibre1"><a href="#calibre_link-221">emacs, 66</a></p>
<p class="calibre1">defining, <a href="#calibre_link-50">30</a></p>
<p class="calibre1">Lin<a href="#calibre_link-3">ux help, 11</a></p>
<p class="calibre1"><a href="#calibre_link-57">in shell scripts, 234</a></p>
<p class="calibre1">mutt mailer, <a href="#calibre_link-96">186</a></p>
<p class="calibre1">vi (see vim text editor)</p>
<p class="calibre1"><a href="#calibre_link-221">vim editor, 66</a></p>
<p class="calibre1">video</p>
<p class="calibre1">type command, <a href="#calibre_link-68">82</a>, <a href="#calibre_link-130">91</a></p>
<p class="calibre1">playback, <a href="#calibre_link-41">223</a></p>
<p class="calibre1">loca<a href="#calibre_link-130">ting files, 91</a></p>
<p class="calibre1"><b class="calibre3">260  |  Index</b></p>
<p class="calibre1"><a id="calibre_link-267"></a>viewing</p>
<p class="calibre1">who command, <a href="#calibre_link-77">158</a></p>
<p class="calibre1"><a href="#calibre_link-9">files, 55</a></p>
<p class="calibre1"><a href="#calibre_link-123">tee command and, 106</a></p>
<p class="calibre1"><a href="#calibre_link-21">processes, 138</a></p>
<p class="calibre1"><a href="#calibre_link-177">whoami command, 157</a></p>
<p class="calibre1"><a href="#calibre_link-10">vim text editor, 63, </a><a href="#calibre_link-221">66</a></p>
<p class="calibre1"><a href="#calibre_link-145">whois command, 176</a></p>
<p class="calibre1">bash command-line editing, </p>
<p class="calibre1">wildcard characters and the shell, </p>
<p class="calibre1"><a href="#calibre_link-99">37</a></p>
<p class="calibre1"><a href="#calibre_link-210">28</a></p>
<p class="calibre1">less command, <a href="#calibre_link-64">57</a></p>
<p class="calibre1">(see also regular expressions)</p>
<p class="calibre1"><a href="#calibre_link-162">lynx &ndash;vikeys command, 190</a></p>
<p class="calibre1"><a href="#calibre_link-46">windows (shell), opening, 15</a></p>
<p class="calibre1">sed and, <a href="#calibre_link-116">107</a></p>
<p class="calibre1">Word documents, <a href="#calibre_link-66">64</a></p>
<p class="calibre1">VISUAL environment variable, <a href="#calibre_link-64">57</a></p>
<p class="calibre1">write command, <a href="#calibre_link-34">193</a></p>
<p class="calibre1">setting defa<a href="#calibre_link-66">ult editor, 64</a></p>
<p class="calibre1">www directory, <a href="#calibre_link-126">22</a></p>
<p class="calibre1">vlc video pla<a href="#calibre_link-41">yer, 223</a></p>
<p class="calibre1"><b class="calibre3">X</b></p>
<p class="calibre1"><b class="calibre3">W</b></p>
<p class="calibre1">X11 directory, <a href="#calibre_link-126">22</a></p>
<p class="calibre1"><a href="#calibre_link-219">w command, 141</a></p>
<p class="calibre1"><a href="#calibre_link-222">xargs command, 86</a></p>
<p class="calibre1"><a href="#calibre_link-162">w3m command, 190</a></p>
<p class="calibre1">null-separa<a href="#calibre_link-205">ted lines, 85</a></p>
<p class="calibre1">wall command, <a href="#calibre_link-34">193</a></p>
<p class="calibre1"><a href="#calibre_link-125">vs. backquotes, 88</a></p>
<p class="calibre1">watch command, <a href="#calibre_link-159">149</a></p>
<p class="calibre1"><a href="#calibre_link-171">with find command, 87</a></p>
<p class="calibre1">wc command, <a href="#calibre_link-102">3</a>, <a href="#calibre_link-166">71</a></p>
<p class="calibre1"><a href="#calibre_link-36">xclip command, 204, </a><a href="#calibre_link-223">205</a></p>
<p class="calibre1"><a href="#calibre_link-33">web browsing, 188</a></p>
<p class="calibre1">xine video player, <a href="#calibre_link-41">223</a></p>
<p class="calibre1">automa<a href="#calibre_link-156">tion, 191</a></p>
<p class="calibre1"><a href="#calibre_link-184">XMPP, 195, </a><a href="#calibre_link-185">196</a></p>
<p class="calibre1">retrieving pages via command</p>
<p class="calibre1">xpdf command, <a href="#calibre_link-16">120</a></p>
<p class="calibre1"><a href="#calibre_link-156">line, 191</a></p>
<p class="calibre1"><a href="#calibre_link-223">xsel command, 205</a></p>
<p class="calibre1"><a href="#calibre_link-189">text-based, 189</a></p>
<p class="calibre1">xterm command, <a href="#calibre_link-46">15</a></p>
<p class="calibre1">wget command, <a href="#calibre_link-3">11</a>, <a href="#calibre_link-162">190</a>, <a href="#calibre_link-157">246</a></p>
<p class="calibre1"><a href="#calibre_link-68">whereis command, 82, </a><a href="#calibre_link-130">91</a></p>
<p class="calibre1"><b class="calibre3">Y</b></p>
<p class="calibre1">which command, <a href="#calibre_link-203">90</a></p>
<p class="calibre1">yes command, <a href="#calibre_link-224">201</a></p>
<p class="calibre1"><a href="#calibre_link-186">while loops, 242</a></p>
<p class="calibre1">yum command, <a href="#calibre_link-100">224, </a><a href="#calibre_link-197">226</a></p>
<p class="calibre1">infinite, <a href="#calibre_link-173">243</a></p>
<p class="calibre1"><a href="#calibre_link-57">whitespace, 234</a></p>
<p class="calibre1"><a href="#calibre_link-118">linebreaks, 96</a></p>
<p class="calibre1"><b class="calibre3">Z</b></p>
<p class="calibre1">programming with shell</p>
<p class="calibre1">zcat command, <a href="#calibre_link-107">111</a>, <a href="#calibre_link-110">112</a></p>
<p class="calibre1">scripts, <a href="#calibre_link-57">234</a></p>
<p class="calibre1"><a href="#calibre_link-195">zip command, 113</a></p>
<p class="calibre1"><a href="#calibre_link-49">quoting on command line, 36</a></p>
<p class="calibre1"><b class="calibre3">Index  |  261</b></p>
<p class="calibre1"><a id="calibre_link-268"></a><b class="calibre3">About the Author</b></p>
<p class="calibre1"><b class="calibre3">Daniel J. Barrett</b> has been immersed in Internet technology since 1985. Currently a director of technology at an ecommerce company, Dan has also been a heavy metal singer, software</p>
<p class="calibre1">engineer, system administrator, university lecturer, web</p>
<p class="calibre1">designer, and humorist. He is the author of O’Reilly’s  <i class="calibre4">Linux</i> <i class="calibre4">Pocket Guide</i>, and he is the coauthor of  <i class="calibre4">Linux Security Cook-book</i>, and  <i class="calibre4">SSH, The Secure Shell: The Definitive Guide</i>. </p>
<p class="calibre1"><a name="outline"></a></p><h1 class="calibre6">Document Outline</h1>
<ul class="calibre7">
<li class="calibre8"><a href="#calibre_link-225">Cover</a></li>
<li class="calibre8"><a href="#calibre_link-226">Copyright</a></li>
<li class="calibre8"><a href="#calibre_link-227">Table of Contents</a></li>
<li class="calibre8"><a href="#calibre_link-1">Chapter 1. Linux Pocket Guide</a>
<ul class="calibre9">
<li class="calibre8"><a href="#calibre_link-1">What’s in This Book? </a>
<ul class="calibre10">
<li class="calibre8"><a href="#calibre_link-120">What’s New in the Third Edition? </a></li>
<li class="calibre8"><a href="#calibre_link-120">What’s Linux? </a></li>
<li class="calibre8"><a href="#calibre_link-102">What’s a Distro? </a></li>
<li class="calibre8"><a href="#calibre_link-102">What’s a Command? </a></li>
<li class="calibre8"><a href="#calibre_link-228">Reading This Book</a></li>
</ul>
</li>
<li class="calibre8"><a href="#calibre_link-2">Practicing with This Book</a></li>
<li class="calibre8"><a href="#calibre_link-3">Getting Help</a></li>
<li class="calibre8"><a href="#calibre_link-4">Linux: A First View</a>
<ul class="calibre10">
<li class="calibre8"><a href="#calibre_link-54">Running a Shell</a></li>
<li class="calibre8"><a href="#calibre_link-46">Input and Output</a></li>
<li class="calibre8"><a href="#calibre_link-47">Users and Superusers</a></li>
</ul>
</li>
<li class="calibre8"><a href="#calibre_link-5">The Filesystem</a>
<ul class="calibre10">
<li class="calibre8"><a href="#calibre_link-48">Home Directories</a></li>
<li class="calibre8"><a href="#calibre_link-91">System Directories</a></li>
<li class="calibre8"><a href="#calibre_link-52">Operating System Directories</a></li>
<li class="calibre8"><a href="#calibre_link-62">File Protections</a></li>
</ul>
</li>
<li class="calibre8"><a href="#calibre_link-6">Shell Features</a>
<ul class="calibre10">
<li class="calibre8"><a href="#calibre_link-210">The Shell Versus Programs</a></li>
<li class="calibre8"><a href="#calibre_link-210">Selected Features of the bash Shell</a></li>
<li class="calibre8"><a href="#calibre_link-60">Shell Job Control</a></li>
<li class="calibre8"><a href="#calibre_link-211">Running Multiple Shells at Once</a></li>
<li class="calibre8"><a href="#calibre_link-229">Killing a Command in Progress</a></li>
<li class="calibre8"><a href="#calibre_link-58">Terminating a Shell</a></li>
<li class="calibre8"><a href="#calibre_link-58">Tailoring Shell Behavior</a></li>
</ul>
</li>
<li class="calibre8"><a href="#calibre_link-7">Basic File Operations</a></li>
<li class="calibre8"><a href="#calibre_link-8">Directory Operations</a></li>
<li class="calibre8"><a href="#calibre_link-9">File Viewing</a></li>
<li class="calibre8"><a href="#calibre_link-10">File Creation and Editing</a>
<ul class="calibre10">
<li class="calibre8"><a href="#calibre_link-66">Creating a File Quickly</a></li>
<li class="calibre8"><a href="#calibre_link-66">Your Default Editor</a></li>
</ul>
</li>
<li class="calibre8"><a href="#calibre_link-11">File Properties</a></li>
<li class="calibre8"><a href="#calibre_link-12">File Location</a></li>
<li class="calibre8"><a href="#calibre_link-13">File Text Manipulation</a></li>
<li class="calibre8"><a href="#calibre_link-14">File Compression and Packaging</a></li>
<li class="calibre8"><a href="#calibre_link-15">File Comparison</a></li>
<li class="calibre8"><a href="#calibre_link-16">PDF and PostScript File Handling</a></li>
<li class="calibre8"><a href="#calibre_link-17">Printing</a></li>
<li class="calibre8"><a href="#calibre_link-18">Spellchecking</a></li>
<li class="calibre8"><a href="#calibre_link-19">Disks and Filesystems</a></li>
<li class="calibre8"><a href="#calibre_link-20">Backups and Remote Storage</a></li>
<li class="calibre8"><a href="#calibre_link-21">Viewing Processes</a></li>
<li class="calibre8"><a href="#calibre_link-22">Controlling Processes</a></li>
<li class="calibre8"><a href="#calibre_link-23">Scheduling Jobs</a></li>
<li class="calibre8"><a href="#calibre_link-24">Logins, Logouts, and Shutdowns</a></li>
<li class="calibre8"><a href="#calibre_link-25">Users and Their Environment</a></li>
<li class="calibre8"><a href="#calibre_link-26">User Account Management</a></li>
<li class="calibre8"><a href="#calibre_link-27">Becoming the Superuser</a></li>
<li class="calibre8"><a href="#calibre_link-28">Group Management</a></li>
<li class="calibre8"><a href="#calibre_link-29">Host Information</a></li>
<li class="calibre8"><a href="#calibre_link-30">Host Location</a></li>
<li class="calibre8"><a href="#calibre_link-31">Network Connections</a></li>
<li class="calibre8"><a href="#calibre_link-32">Email</a></li>
<li class="calibre8"><a href="#calibre_link-33">Web Browsing</a></li>
<li class="calibre8"><a href="#calibre_link-34">Instant Messaging</a></li>
<li class="calibre8"><a href="#calibre_link-35">Screen Output</a></li>
<li class="calibre8"><a href="#calibre_link-36">Copy and Paste</a></li>
<li class="calibre8"><a href="#calibre_link-37">Math and Calculations</a></li>
<li class="calibre8"><a href="#calibre_link-38">Dates and Times</a></li>
<li class="calibre8"><a href="#calibre_link-39">Graphics</a></li>
<li class="calibre8"><a href="#calibre_link-40">Audio and Video</a></li>
<li class="calibre8"><a href="#calibre_link-41">Installing Software</a></li>
<li class="calibre8"><a href="#calibre_link-42">Programming with Shell Scripts</a>
<ul class="calibre10">
<li class="calibre8"><a href="#calibre_link-82">Creating and Running Shell Scripts</a></li>
<li class="calibre8"><a href="#calibre_link-57">Whitespace and Linebreaks</a></li>
<li class="calibre8"><a href="#calibre_link-57">Variables</a></li>
<li class="calibre8"><a href="#calibre_link-106">Input and Output</a></li>
<li class="calibre8"><a href="#calibre_link-106">Booleans and Return Codes</a></li>
<li class="calibre8"><a href="#calibre_link-150">Conditionals</a></li>
<li class="calibre8"><a href="#calibre_link-186">Loops</a></li>
<li class="calibre8"><a href="#calibre_link-143">Command-Line Arguments</a></li>
<li class="calibre8"><a href="#calibre_link-160">Exiting with a Return Code</a></li>
<li class="calibre8"><a href="#calibre_link-157">Piping to bash</a></li>
<li class="calibre8"><a href="#calibre_link-43">Beyond Shell Scripting</a></li>
</ul>
</li>
<li class="calibre8"><a href="#calibre_link-43">Final Words</a>
<ul class="calibre10">
<li class="calibre8"><a href="#calibre_link-230">Acknowledgments</a></li>
</ul>
</li>
</ul>
</li>
<li class="calibre8"><a href="#calibre_link-44">Index</a></li>
</ul><p class="calibre1"></p>


</i></div>

</body></html>
